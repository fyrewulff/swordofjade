<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Dictionary of Plotscripting Commands</title>
<style type="text/css">

					body,p,h1,h2,h3,h4,h5,h6 {
						color: white;
						background-color: black;
					}
					body {
						padding: 0 6px 0 6px;
					}

					h2 {
						font-style: italic;
					}

					.section h3 {
						color: #f06060;
						font-size: 130%;
						/* Make the "Back to top link" fit snuggly below */
						margin-bottom: 6px;
					}
					.subsection h3 {
						color: #e05050;
					}

					h4 {
						color: yellow;
					}

					.command {
						margin-top: 17px;
						margin-bottom: 17px;
						line-height: 18px;
						/* equivalent to tt */
						font-family: 'Lucida Console',monospace;
						font-size: 0.75em;
					}
					/* Reduce gaps between (each) command name(s) and definition */
					.command h4 {
						margin-bottom: 0px;
						margin-top: 0px;
					}
					.command p {
						margin-top: 3px;
					}
					.notetext {
						font-style: italic;
						font-size: 11px;
						/* Shrink gap 'Alias' and canon */
						margin-bottom: -5px;
					}

					pre {
						background-color:#B0B8B8;
						color:#000000;
						border-width:3px;
						border-style:ridge;
						padding:7px;
						padding-left:20px;
						margin:3px;
						white-space: pre-wrap;
						/*font-family:fixedsys,monospace;*/
						font-size: 12px;
					}

					a {
						color:#00ff00;
					}
					a:active {
						color: #d0d000;
					}
					a:visited {
						color: #44ff88;
					}

					a.undef {
						font-weight:bold;
						color:red;
					}

					a.ref:after {
						/*content: " ?";*/
					}

					.param {
						font-weight: bold;
						color: yellow;
					}

					.code {
						font-style: italic;
						color: greenyellow;
					}

					.seealso {
						margin-top: 10px;
					}

					.seealso ul {
						display: inline;
						margin:0;
						padding:0;
					}
					.seealso li {
						display: inline;
					}

					.section {
					}
					.subsection {
					}

					/* Used both for "Back to top" and parent section links */
					.backlink {
						color: #f09090;
						font-size: 90%;
					}

					/* Used by note, warn, and danger */
					div.notice {
					  border:thin black solid;
					  padding:5px;
					  padding-left:42px;
					  margin:3px;
					  min-height: 32px;
					}

					div.note {
						background-color: #033;
					}

					div.warn {
						background-color: #220;
					}

					div.danger {
						background-color: #422;
					}

					.icon {
						position: absolute;
						left: 24px;
					}

					.sectionlist ul {
						margin:0;
						/* Hide bullets for sectionlinks at top */
						list-style-type: none;
					}
					.sectionlist li {
						/* This is needed to hide bullets for old IE versions*/
						list-style-type: none;
					}


					button {
						/* Remove/override text styles */
						font-family: inherit;
						font-size: 90%;
						line-height: 1.15;
						/* Remove the margin in Firefox and Safari */
						margin: 0;
						padding: 2px 10px;
						/* Remove the bezelling */
						border: 0;
						border-radius: 5px;
						background-color: #004c00;
						color: #ddd;  /* inherit; */
					}
					button:hover {
						background: #006609;
					}
					button:focus {
						outline: 1px solid #019b01;
						outline-offset: -2px;
					}

					/* Used for toggling command links in section headers, which are inside
					   an .content-shown element inside a .select-content-shown/hidden element */
					.select-content-shown .content-hidden {
						display: none;
					}
					.select-content-hidden .content-shown {
						display: none;
					}



				</style>
<script>
function toggleContent(target) {
	//var target = event.target || event.srcElement;
	var x = target.parentNode;
	if (x.className === "select-content-hidden") {
		x.className = "select-content-shown";
	} else {
		x.className = "select-content-hidden";
	}
}
				</script>
</head>
<body>
<h1>Plotscripting Dictionary</h1>
<h2>For OHRRPGCE version hróðvitnir</h2>
					(Generated on 2021-09-09)
				<p>This is the documentation for all <a href="https://rpg.hamsterrepublic.com/ohrrpgce/Plotscripting">plotscripting</a> commands.
				In addition to reading this document, we also recommend you check out the
				<a href="https://rpg.hamsterrepublic.com/ohrrpgce/Plotscripting_Tutorial">Plotscripting Tutorial</a>
				and the <a href="https://rpg.hamsterrepublic.com/ohrrpgce/Plotscripting">Plotscripting</a>
				article on the wiki.</p>
<p>
				If you're reading this on the <a href="https://rpg.hamsterrepublic.com/ohrrpgce/">OHRRPGCE website</a>
				then make sure you're looking at the page for the latest stable release
				(<a href="http://hamsterrepublic.com/ohrrpgce/docs/plotdictionary.html">here</a>)
				or latest nightly version
				(<a href="http://hamsterrepublic.com/ohrrpgce/nightly/docs/plotdictionary.html">here</a>).
				This documentation is also included as an HTML file with downloads of the engine.
				</p>
<hr>
<a name="Categories"></a><h2>Commands by Category</h2>
<p><div class="sectionlist">
		<li>
<a href="#Declarations">Declarations</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Math,%20Comparison,%20and%20Logic%20Operators">Math, Comparison, and Logic Operators</a><br>
		<ul>
		<li>
<a href="#Working%20with%20Variables">Working with Variables</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Flow%20Control">Flow Control</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Wait%20Commands">Wait Commands</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Working%20with%20Tags">Working with Tags</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Suspend%20and%20Resume">Suspend and Resume</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Moving%20Heroes">Moving Heroes</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Doors">Doors</a><br>
		<ul></ul>
</li>
		<li>
<a href="#NPCs">NPCs</a><br>
		<ul>
		<li>
<a href="#Moving%20and%20Positioning%20NPCs">Moving and Positioning NPCs</a><br>
		<ul></ul>
</li>
		<li>
<a href="#NPC%20Instance%20Data">NPC Instance Data</a><br>
		<ul></ul>
</li>
		<li>
<a href="#NPC%20Definitions">NPC Definitions</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#The%20Camera">The Camera</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Text%20Boxes">Text Boxes</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Triggering%20Stuff">Triggering Stuff</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Basic%20Display%20Commands">Basic Display Commands</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Opening%20Built-in%20Menus">Opening Built-in Menus</a><br>
		<ul></ul>
</li>
		<li>
<a href="#The%20Party">The Party</a><br>
		<ul>
		<li>
<a href="#Inspecting%20the%20Party">Inspecting the Party</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Changing%20the%20Party">Changing the Party</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Money">Money</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Items">Items</a><br>
		<ul>
		<li>
<a href="#Inventory">Inventory</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Equipment">Equipment</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Effects">Effects</a><br>
		<ul>
		<li>
<a href="#Music">Music</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Master%20Palette%20and%20Screen%20Fades">Master Palette and Screen Fades</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Sound%20Effects">Sound Effects</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#User%20Interface%20Colors%20and%20Box%20Styles">User Interface Colors and Box Styles</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Hero%20Data">Hero Data</a><br>
		<ul>
		<li>
<a href="#Hero%20Graphics">Hero Graphics</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Hero%20Hand%20Position">Hero Hand Position</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Hero%20Stats">Hero Stats</a><br>
		<ul>
		<li>
<a href="#Experience%20and%20Levels">Experience and Levels</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Hero's%20Spells">Hero's Spells</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Out-of-battle%20Attacks">Out-of-battle Attacks</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Enemy%20and%20Formation%20Functions">Enemy and Formation Functions</a><br>
		<ul>
		<li>
<a href="#Formations">Formations</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Getting%20Player%20Input">Getting Player Input</a><br>
		<ul>
		<li>
<a href="#Keyboard%20Input">Keyboard Input</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Joystick/Gamepad%20Input">Joystick/Gamepad Input</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Mouse%20Input">Mouse Input</a><br>
		<ul>
		<li>
<a href="#Helpful%20Related%20Commands">Helpful Related Commands</a><br>
		<ul></ul>
</li>
</ul>
</li>
</ul>
</li>
		<li>
<a href="#String%20Functions">String Functions</a><br>
		<ul>
		<li>
<a href="#Basic%20String%20Commands">Basic String Commands</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Get/Set%20Names%20of%20Things">Get/Set Names of Things</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Showing%20Plotstrings">Showing Plotstrings</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Obsolete%20Commands">Obsolete Commands</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Menu%20Functions">Menu Functions</a><br>
		<ul>
		<li>
<a href="#Menu%20Items">Menu Items</a><br>
		<ul>
		<li>
<a href="#Menu%20Item%20Data">Menu Item Data</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Menu%20Data">Menu Data</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Slices">Slices</a><br>
		<ul>
		<li>
<a href="#Getting%20Slices">Getting Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Slice%20Sizing">Slice Sizing</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Positioning%20Slices">Positioning Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Visibility%20and%20Clipping">Visibility and Clipping</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Slice%20Blending">Slice Blending</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Alignment%20and%20Anchor%20Points">Alignment and Anchor Points</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Padding">Padding</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Moving%20Slices">Moving Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Moving%20Around%20the%20Slice%20Tree">Moving Around the Slice Tree</a><br>
		<ul>
		<li>
<a href="#Type-specific%20Iteration%20Commands">Type-specific Iteration Commands</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Reordering%20Slices">Reordering Slices</a><br>
		<ul>
		<li>
<a href="#Sorting%20Slices">Sorting Slices</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Slice%20Types">Slice Types</a><br>
		<ul>
		<li>
<a href="#Checking%20Slice%20Type">Checking Slice Type</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Container%20Slices">Container Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Sprite%20Slices">Sprite Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Rect%20Slices">Rect Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Line%20Slices">Line Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Ellipse%20Slices">Ellipse Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Text%20Slices">Text Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Grid%20Slices">Grid Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Select%20Slices">Select Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Scroll%20Slices">Scroll Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Panel%20Slices">Panel Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Map%20Layer%20Slices">Map Layer Slices</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Slice%20Collision%20Testing">Slice Collision Testing</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Time%20Functions">Time Functions</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Tweaking%20Maps">Tweaking Maps</a><br>
		<ul>
		<li>
<a href="#Tilemap,%20Wallmap%20and%20Foemap">Tilemap, Wallmap and Foemap</a><br>
		<ul>
		<li>
<a href="#Tile%20Animations">Tile Animations</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Wall%20Checking">Wall Checking</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Zonemaps">Zonemaps</a><br>
		<ul></ul>
</li>
		<li>
<a href="#General%20Map%20Settings">General Map Settings</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Map%20State">Map State</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Timers">Timers</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Script%20Triggers">Script Triggers</a><br>
		<ul></ul>
</li>
		<li>
<a href="#General%20Game%20Settings">General Game Settings</a><br>
		<ul>
		<li>
<a href="#Battle%20System%20Settings">Battle System Settings</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Caps">Caps</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Saved%20Games">Saved Games</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Advanced%20Functions">Advanced Functions</a><br>
		<ul>
		<li>
<a href="#Debugging">Debugging</a><br>
		<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Platform%20Specific">Platform Specific</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Types%20and%20Handles">Types and Handles</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Predefined%20Constants">Predefined Constants</a><br>
		<ul></ul>
</li>
</div></p>
<hr>
<h2>Alphabetical Index</h2>
<p>
		<a href="#about-__appendstring__">$id+"some text"</a><br>
		<a href="#about-__setstring__">$id="some text"</a><br>
		<a href="#about-abs">abs (number)</a><br>
		<a href="#about-add">number + number</a><br>
		<a href="#about-addenemytoformation">add enemy to formation (formation, enemy id, x, y, slot)</a><br>
		<a href="#about-addhero">add hero (who)</a><br>
		<a href="#about-addmenuitem">add menu item(menu handle)</a><br>
		<a href="#about-advancetextbox">advance text box</a><br>
		<a href="#about-allocatetimers">allocate timers (number)</a><br>
		<a href="#about-allowminimap">allow minimap (setting)</a><br>
		<a href="#about-allowsaveanywhere">allow save anywhere (setting)</a><br>
		<a href="#about-alternpc">alter NPC (who, NPCstat, value, pool)</a><br>
		<a href="#about-and">value,and,value</a><br>
		<a href="#about-animationstarttile">animation start tile (tile number, layer)</a><br>
		<a href="#about-anykey">any key</a><br>
		<a href="#about-appendascii">append ascii (ID, char)</a><br>
		<a href="#about-appendnumber">append number (ID, number, min length, pad with zeros)</a><br>
		<a href="#about-asciifromstring">ascii from string (ID, position)</a><br>
		<a href="#about-assert">assert (expression)</a><br>
		<a href="#about-autonumber">autonumber</a><br>
		<a href="#about-autosave">autosave</a><br>
		<a href="#about-autovirtualgamepad">auto virtual gamepad</a><br>
		<a href="#about-basestat">base stat</a><br>
		<a href="#about-begin">begin,other commands,end</a><br>
		<a href="#about-blendableslicehandle">Blendable slice handles</a><br>
		<a href="#about-booleanconstants">Boolean Constants</a><br>
		<a href="#about-bottommenu">bottom menu</a><br>
		<a href="#about-boxadvanceissuspended">box advance is suspended</a><br>
		<a href="#about-break">break</a><br>
		<a href="#about-breakpoint">breakpoint</a><br>
		<a href="#about-bringmenuforward">bring menu forward(menu handle)</a><br>
		<a href="#about-camerafollowshero">camera follows hero (who)</a><br>
		<a href="#about-camerafollowsnpc">camera follows NPC (who)</a><br>
		<a href="#about-camerafollowsslice">camera follows slice (slice)</a><br>
		<a href="#about-camerapixelx">camera pixel X</a><br>
		<a href="#about-camerapixely">camera pixel Y</a><br>
		<a href="#about-canceldissolve">cancel dissolve (handle)</a><br>
		<a href="#about-cancelherowalk">cancel hero walk (who)</a><br>
		<a href="#about-cancelkey">cancel key</a><br>
		<a href="#about-cancelmapnamedisplay">cancel map name display</a><br>
		<a href="#about-cancelnpcwalk">cancel NPC walk (who)</a><br>
		<a href="#about-canceloverridetickmilliseconds">cancel override tick milliseconds (ms)</a><br>
		<a href="#about-canlearnspell">can learn spell (hero, attack)</a><br>
		<a href="#about-case">case(value)</a><br>
		<a href="#about-caterpillarissuspended">caterpillar is suspended</a><br>
		<a href="#about-centerslice">center slice (handle)</a><br>
		<a href="#about-centerstringat">center string at (ID, x, y)</a><br>
		<a href="#about-changenpcid">change NPC ID (reference, new ID, pool)</a><br>
		<a href="#about-changetileset">change tileset (tileset, layer)</a><br>
		<a href="#about-checkequipment">check equipment (hero, slot)</a><br>
		<a href="#about-checkgameexists">check game exists (file string id)</a><br>
		<a href="#about-checkherowall">check hero wall (who,direction)</a><br>
		<a href="#about-checknpcwall">check NPC wall (who, direction)</a><br>
		<a href="#about-checkonetime">check onetime (onetime)</a><br>
		<a href="#about-checkparentage">check parentage (handle, ancestor handle)</a><br>
		<a href="#about-checktag">check tag (tag)</a><br>
		<a href="#about-checkwallcollisionxy">check wall collision x (x, y, width, height, relative x, relative y, friction%)</a><br>
		<a href="#about-childcount">child count (handle)</a><br>
		<a href="#about-clampslice">clamp slice (slice, within slice)</a><br>
		<a href="#about-clearstring">clear string(ID)</a><br>
		<a href="#about-cloneslice">clone slice (handle, recurse)</a><br>
		<a href="#about-clonesprite">clone sprite (handle)</a><br>
		<a href="#about-closemenu">close menu(menu handle, run close script)</a><br>
		<a href="#about-colorblue">color:blue</a><br>
		<a href="#about-colorcode">Color codes</a><br>
		<a href="#about-colorconstants">Color Constants</a><br>
		<a href="#about-colorgreen">color:green</a><br>
		<a href="#about-colorred">color:red</a><br>
		<a href="#about-concatenatestrings">concatenate strings (dest, source)</a><br>
		<a href="#about-continue">continue</a><br>
		<a href="#about-controlcodes">Control Codes</a><br>
		<a href="#about-copystring">copy string (dest, source)</a><br>
		<a href="#about-createcontainer">create container (width, height)</a><br>
		<a href="#about-createellipse">create ellipse (width, height, border color, fill color)</a><br>
		<a href="#about-createglobalnpc">create global NPC (ID, X, Y, direction)</a><br>
		<a href="#about-creategrid">create grid (width, height, rows, columns)</a><br>
		<a href="#about-createline">create line (width, height, color)</a><br>
		<a href="#about-createmenu">create menu</a><br>
		<a href="#about-createnpc">create NPC (ID, X, Y, direction, pool)</a><br>
		<a href="#about-createpanel">create panel (width, height)</a><br>
		<a href="#about-createrect">create rect (width, height, style)</a><br>
		<a href="#about-createscroll">create scroll (width, height)</a><br>
		<a href="#about-createselect">create select (width, height)</a><br>
		<a href="#about-loadsprite">create sprite</a><br>
		<a href="#about-createtext">create text</a><br>
		<a href="#about-crop">crop</a><br>
		<a href="#about-currentdisplaytile">current display tile (tile number, layer)</a><br>
		<a href="#about-currentmap">current map</a><br>
		<a href="#about-currentsong">current song</a><br>
		<a href="#about-currentstat">current stat</a><br>
		<a href="#about-currenttextbox">current text box</a><br>
		<a href="#about-currentvehicleid">current vehicle id</a><br>
		<a href="#about-currentvehiclenpc">current vehicle npc</a><br>
		<a href="#about-daysofplay">days of play</a><br>
		<a href="#about-debugmenu">debug menu</a><br>
		<a href="#about-decrement">decrement (variable,amount)</a><br>
		<a href="#about-defaulttile">default tile</a><br>
		<a href="#about-defineconstant">define constant (number,name)</a><br>
		<a href="#about-deletechar">delete char (ID, position)</a><br>
		<a href="#about-deleteenemyfromformation">delete enemy from formation (formation, slot)</a><br>
		<a href="#about-deletehero">delete hero (who)</a><br>
		<a href="#about-deleteherobyslot">delete hero by slot (slot)</a><br>
		<a href="#about-deleteitem">delete item (item, number)</a><br>
		<a href="#about-deletemapstate">delete map state (whichdata)</a><br>
		<a href="#about-deletemenuitem">delete menu item(menu item handle)</a><br>
		<a href="#about-destroynpc">delete NPC (reference)</a><br>
		<a href="#about-deletesave">delete save (slot)</a><br>
		<a href="#about-destroynpc">destroy NPC (reference)</a><br>
		<a href="#about-directionconstants">Direction Constants</a><br>
		<a href="#about-dismountvehicle">dismount vehicle</a><br>
		<a href="#about-dissolvesprite">dissolve sprite (handle, dissolve type, total ticks, start tick, backwards, automatic)</a><br>
		<a href="#about-divide">number / number</a><br>
		<a href="#about-do">do</a><br>
		<a href="#about-dooratspot">door at spot (x, y)</a><br>
		<a href="#about-doorexists">door exists (number, map)</a><br>
		<a href="#about-doorsaresuspended">doors are suspended</a><br>
		<a href="#about-down">down</a><br>
		<a href="#about-downkey">down key</a><br>
		<a href="#about-drawnpcsaboveheroes">draw NPCs above heroes (setting)</a><br>
		<a href="#about-dumpslicetree">dump slice tree (slice)</a><br>
		<a href="#about-east">east</a><br>
		<a href="#about-eastwall">east wall</a><br>
		<a href="#about-if">else</a><br>
		<a href="#about-elseif">... else if(condition) then(commands) ...</a><br>
		<a href="#about-enableinputtext">enable input text (enable)</a><br>
		<a href="#about-end">end</a><br>
		<a href="#about-enemyelementalresistasint">enemy elemental resist as int (enemy, element)</a><br>
		<a href="#about-equal">number == number</a><br>
		<a href="#about-equipmenu">equip menu (who, allow switching)</a><br>
		<a href="#about-equipwhere">equip where (hero, item)</a><br>
		<a href="#about-exitreturning">exit returning(value)</a><br>
		<a href="#about-exitscript">exit script</a><br>
		<a href="#about-expandstring">expand string(ID, saveslot)</a><br>
		<a href="#about-expandstringsinslices">expand strings in slices(handle, saveslot)</a><br>
		<a href="#about-experiencetolevel">experience to level (level, hero slot)</a><br>
		<a href="#about-experiencetonextlevel">experience to next level (who)</a><br>
		<a href="#about-exponent">number ^ power</a><br>
		<a href="#about-exportglobals">export globals (slot, first, last)</a><br>
		<a href="#about-extendedscancodesenabled">extended scancodes enabled</a><br>
		<a href="#about-extractcolor">extract color (color, component)</a><br>
		<a href="#about-fadescreenin">fade screen in</a><br>
		<a href="#about-fadescreenout">fade screen out (red, green, blue)</a><br>
		<a href="#about-false">false</a><br>
		<a href="#about-fightformation">fight formation (number)</a><br>
		<a href="#about-fillparent">fill parent (handle, true_or_false)</a><br>
		<a href="#about-findcollidingslice">find colliding slice (parent, slice, number, check descendants, visible only)</a><br>
		<a href="#about-findcolor">find color (r, g, b, searchstart)</a><br>
		<a href="#about-findenemyinformation">find enemy in formation (formation, enemy id, copy number)</a><br>
		<a href="#about-findhero">find hero (who)</a><br>
		<a href="#about-findmenuid">find menu ID(menu ID)</a><br>
		<a href="#about-findmenuitemcaption">find menu item caption(menu handle, string ID, search after handle, visible only)</a><br>
		<a href="#about-firstchild">first child (handle)</a><br>
		<a href="#about-firstchildoftype">first child of type(handle, type)</a><br>
		<a href="#about-firstcontainerchild">first container child (handle)</a><br>
		<a href="#about-firstellipsechild">first ellipse child (handle)</a><br>
		<a href="#about-firstgridchild">first grid child (handle)</a><br>
		<a href="#about-firstlinechild">first line child (handle)</a><br>
		<a href="#about-firstmenuitem">first menu item(menu handle)</a><br>
		<a href="#about-firstpanelchild">first panel child (handle)</a><br>
		<a href="#about-firstrectchild">first rect child (handle)</a><br>
		<a href="#about-firstscrollchild">first scroll child (handle)</a><br>
		<a href="#about-firstselectchild">first select child (handle)</a><br>
		<a href="#about-firstspritechild">first sprite child (handle)</a><br>
		<a href="#about-firsttextchild">first text child (handle)</a><br>
		<a href="#about-fleekey">flee key</a><br>
		<a href="#about-focuscamera">focus camera (x,y,speed)</a><br>
		<a href="#about-for">for(counter,start,finish,step) do(commands)</a><br>
		<a href="#about-forceequip">force equip (hero, slot, item)</a><br>
		<a href="#about-forcemountvehicle">force mount vehicle (npc)</a><br>
		<a href="#about-forgetspell">forget spell (hero, attack)</a><br>
		<a href="#about-formationprobability">formation probability (formation set, formation)</a><br>
		<a href="#about-formationsetfrequency">formation set frequency (formation set)</a><br>
		<a href="#about-formationslotenemy">formation slot enemy (formation, slot)</a><br>
		<a href="#about-formationslotx">formation slot x (formation, slot)</a><br>
		<a href="#about-formationsloty">formation slot y (formation, slot)</a><br>
		<a href="#about-freeslice">free slice (handle)</a><br>
		<a href="#about-freeslicechildren">free slice children (handle)</a><br>
		<a href="#about-freesprite">free sprite (handle)</a><br>
		<a href="#about-gainherostat">gain hero stat (who, stat, amount, reset to max)</a><br>
		<a href="#about-gameover">game over</a><br>
		<a href="#about-getactivebattlepauseonallmenus">get active battle pause on all menus</a><br>
		<a href="#about-getambientmusic">get ambient music</a><br>
		<a href="#about-getattackcaption">get attack caption (ID, attack)</a><br>
		<a href="#about-readattackname">get attack name</a><br>
		<a href="#about-getbattlecountdown">get battle countdown</a><br>
		<a href="#about-getblendingenabled">get blending enabled (handle)</a><br>
		<a href="#about-getblendmode">get blend mode (handle)</a><br>
		<a href="#about-getbottompadding">get bottom padding (handle)</a><br>
		<a href="#about-getboxstyleborder">get box style border (box style)</a><br>
		<a href="#about-getboxstylecolor">get box style color (box style)</a><br>
		<a href="#about-getboxstyleedgecolor">get box style edge color (box style)</a><br>
		<a href="#about-getcallingscriptid">get calling script id (depth)</a><br>
		<a href="#about-getchildautosort">get child autosort (handle)</a><br>
		<a href="#about-getcolor">get color (index)</a><br>
		<a href="#about-getcount">get count</a><br>
		<a href="#about-getdamagecap">get damage cap</a><br>
		<a href="#about-getdeathscript">get death script</a><br>
		<a href="#about-getdefaultherohandx">get default hero hand x (who, frame)</a><br>
		<a href="#about-getdefaultherohandy">get default hero hand y (who, frame)</a><br>
		<a href="#about-getdefaultweapon">get default weapon (hero)</a><br>
		<a href="#about-getdoordestinationid">get door destination id (number, map)</a><br>
		<a href="#about-getdoordestinationmap">get door destination map (number, map)</a><br>
		<a href="#about-getdoorx">get door x (number, map)</a><br>
		<a href="#about-getdoory">get door y (number, map)</a><br>
		<a href="#about-geteachstepscript">get each step script</a><br>
		<a href="#about-getellipsebordercol">get ellipse border col (handle)</a><br>
		<a href="#about-getellipsefillcol">get ellipse fill col (handle)</a><br>
		<a href="#about-getenemyappearance">get enemy appearance (enemyid, appearance)</a><br>
		<a href="#about-getenemyname">get enemy name (enemyid, stringid)</a><br>
		<a href="#about-getenemystat">get enemy stat(enemy, stat)</a><br>
		<a href="#about-getfootoffset">get foot offset</a><br>
		<a href="#about-getformationbackground">get formation background (formation)</a><br>
		<a href="#about-getformationsong">get formation song (formation)</a><br>
		<a href="#about-getglobalsoundvolume">get global sound volume</a><br>
		<a href="#about-getgridcolumns">get grid columns (handle)</a><br>
		<a href="#about-getgridrows">get grid rows (handle)</a><br>
		<a href="#about-getherohandx">get hero hand x (who, frame)</a><br>
		<a href="#about-getherohandy">get hero hand y (who, frame)</a><br>
		<a href="#about-getherolevel">get hero level (who)</a><br>
		<a href="#about-getheroname">get hero name (ID, hero)</a><br>
		<a href="#about-getheropalette">get hero palette (who, type)</a><br>
		<a href="#about-getheropicture">get hero picture (who, type)</a><br>
		<a href="#about-getheroslice">get hero slice (rank)</a><br>
		<a href="#about-getheroslicebyslot">get hero slice by slot (slot)</a><br>
		<a href="#about-getherospeed">get hero speed (who)</a><br>
		<a href="#about-getherosprite">get hero sprite (rank)</a><br>
		<a href="#about-getherospritebyslot">get hero sprite by slot (slot)</a><br>
		<a href="#about-getherostat">get hero stat (who, stat, type)</a><br>
		<a href="#about-getherostatcap">get hero stat cap (stat)</a><br>
		<a href="#about-gethorizalign">get horiz align (handle)</a><br>
		<a href="#about-gethorizanchor">get horiz anchor (handle)</a><br>
		<a href="#about-getinputtext">get input text (string id)</a><br>
		<a href="#about-getinsteadofbattlescript">get instead of battle script</a><br>
		<a href="#about-getinventorysize">get inventory size</a><br>
		<a href="#about-getitem">get item (item, number)</a><br>
		<a href="#about-getitemdescription">get item description (ID, item)</a><br>
		<a href="#about-getitemmaximumstacksize">get item maximum stack size (item)</a><br>
		<a href="#about-getitemname">get item name (ID, item)</a><br>
		<a href="#about-getleftpadding">get left padding (handle)</a><br>
		<a href="#about-getlevelcap">get level cap</a><br>
		<a href="#about-getlevelmp">get level MP (who, mp level slot, type)</a><br>
		<a href="#about-getlinecolor">get line color (handle)</a><br>
		<a href="#about-getloadscript">get load script</a><br>
		<a href="#about-getmapedgemode">get map edge mode</a><br>
		<a href="#about-getmapname">get map name (ID, map)</a><br>
		<a href="#about-getmaptileset">get map tileset</a><br>
		<a href="#about-getmenuanchorx">get menu anchor x(menu handle)</a><br>
		<a href="#about-getmenuanchory">get menu anchor y(menu handle)</a><br>
		<a href="#about-getmenubit">get menu bit(menu handle, bit)</a><br>
		<a href="#about-getmenuborder">get menu border(menu handle)</a><br>
		<a href="#about-getmenuboxstyle">get menu boxstyle(menu handle)</a><br>
		<a href="#about-getmenucancelbuttonmenu">get menu cancel button menu(menu handle)</a><br>
		<a href="#about-getmenudisabledtextcolor">get menu disabled textcolor(menu handle)</a><br>
		<a href="#about-getmenuid">get menu ID(menu handle)</a><br>
		<a href="#about-getmenuitembit">get menu item bit(menu item handle, bit)</a><br>
		<a href="#about-getmenuitemcaption">get menu item caption(menu item handle, string ID)</a><br>
		<a href="#about-getmenuitemcolor">get menu item color(menu item handle)</a><br>
		<a href="#about-getmenuitemdisabledcolor">get menu item disabled color(menu item handle)</a><br>
		<a href="#about-getmenuitemextra">get menu item extra(menu item handle, extra)</a><br>
		<a href="#about-getmenuitemsettag">get menu item settag(menu item handle)</a><br>
		<a href="#about-getmenuitemspacing">get menu item spacing(menu handle)</a><br>
		<a href="#about-getmenuitemsubtype">get menu item subtype(menu item handle)</a><br>
		<a href="#about-getmenuitemtag">get menu item tag(menu item handle, whichtag)</a><br>
		<a href="#about-getmenuitemtogtag">get menu item togtag(menu item handle)</a><br>
		<a href="#about-getmenuitemtype">get menu item type(menu item handle)</a><br>
		<a href="#about-getmenumaxchars">get menu max chars(menu handle)</a><br>
		<a href="#about-getmenumaxrows">get menu max rows(menu handle)</a><br>
		<a href="#about-getmenuminchars">get menu min chars(menu handle)</a><br>
		<a href="#about-getmenuoffsetx">get menu offset x(menu handle)</a><br>
		<a href="#about-getmenuoffsety">get menu offset y(menu handle)</a><br>
		<a href="#about-getmenuonclosescript">get menu on close script(menu handle)</a><br>
		<a href="#about-getmenutextalign">get menu text align(menu handle)</a><br>
		<a href="#about-getmenutextcolor">get menu textcolor(menu handle)</a><br>
		<a href="#about-getmoney">get money (amount)</a><br>
		<a href="#about-getmusicvolume">get music volume</a><br>
		<a href="#about-getnpcid">get NPC ID (reference)</a><br>
		<a href="#about-getnpcignoreswalls">get NPC ignores walls (who)</a><br>
		<a href="#about-getnpcmoves">get NPC moves (who)</a><br>
		<a href="#about-getnpcobstructs">get NPC obstructs (who)</a><br>
		<a href="#about-getnpcpool">get NPC pool (reference)</a><br>
		<a href="#about-getnpcslice">get npc slice (npc)</a><br>
		<a href="#about-getnpcspeed">get NPC speed (who)</a><br>
		<a href="#about-getnpcsprite">get npc sprite (npc)</a><br>
		<a href="#about-getnpcusable">get NPC usable (who)</a><br>
		<a href="#about-getonkeypressscript">get on keypress script</a><br>
		<a href="#about-getopacity">get opacity (handle)</a><br>
		<a href="#about-getoutline">get outline(handle)</a><br>
		<a href="#about-getpanelisvertical">get panel is vertical (handle)</a><br>
		<a href="#about-getpanelpadding">get panel padding (handle)</a><br>
		<a href="#about-getpanelpercentasint">get panel percent as int (handle)</a><br>
		<a href="#about-getpanelpixels">get panel pixels (handle)</a><br>
		<a href="#about-getpanelprimaryindex">get panel primary index (handle)</a><br>
		<a href="#about-getrectbgcol">get rect bgcol (handle)</a><br>
		<a href="#about-getrectborder">get rect border (handle)</a><br>
		<a href="#about-getrectfgcol">get rect fgcol (handle)</a><br>
		<a href="#about-getrectfuzziness">get rect fuzziness (handle)</a><br>
		<a href="#about-getrectopacity">get rect opacity (handle)</a><br>
		<a href="#about-getrectrawborder">get rect raw border (handle)</a><br>
		<a href="#about-getrectstyle">get rect style (handle)</a><br>
		<a href="#about-getrecttrans">get rect trans (handle)</a><br>
		<a href="#about-getrightpadding">get right padding (handle)</a><br>
		<a href="#about-getscancodename">get scancode name(string id, scancode, long name)</a><br>
		<a href="#about-getscreenheight">get screen height</a><br>
		<a href="#about-getscreenwidth">get screen width</a><br>
		<a href="#about-getscriptname">get script name (string id, script id)</a><br>
		<a href="#about-getscrollbarstyle">get scroll bar style (handle)</a><br>
		<a href="#about-getscrollcheckdepth">get scroll check depth (handle)</a><br>
		<a href="#about-getselectedchild">get selected child (handle)</a><br>
		<a href="#about-getselectsliceindex">get select slice index (handle)</a><br>
		<a href="#about-getsliceclipping">get slice clipping (handle)</a><br>
		<a href="#about-getsliceextra">get slice extra (handle, extra)</a><br>
		<a href="#about-getslicelookup">get slice lookup (handle)</a><br>
		<a href="#about-getslicelookupname">get slice lookup name (string id, code, use default name)</a><br>
		<a href="#about-getslicetext">get slice text(string id, slice handle)</a><br>
		<a href="#about-getslicevelocityx">get slice velocity x (handle)</a><br>
		<a href="#about-getslicevelocityy">get slice velocity y (handle)</a><br>
		<a href="#about-getslicevisible">get slice visible (handle)</a><br>
		<a href="#about-getsongname">get song name (ID, song)</a><br>
		<a href="#about-getsortorder">get sort order (handle)</a><br>
		<a href="#about-getspritedefaultpal">get sprite default pal (handle)</a><br>
		<a href="#about-getspriteframe">get sprite frame (handle)</a><br>
		<a href="#about-getspritepalette">get sprite palette (handle)</a><br>
		<a href="#about-getspritesetnumber">get sprite set number (handle)</a><br>
		<a href="#about-getspritetrans">get sprite trans (handle)</a><br>
		<a href="#about-getspritetype">get sprite type (handle)</a><br>
		<a href="#about-gettextbg">get text bg(handle)</a><br>
		<a href="#about-gettextcolor">get text color(handle)</a><br>
		<a href="#about-gettileanimationoffset">get tile animation offset (animation pattern, layer)</a><br>
		<a href="#about-gettoppadding">get top padding (handle)</a><br>
		<a href="#about-getuicolor">get ui color (color, autotoggle)</a><br>
		<a href="#about-getvertalign">get vert align (handle)</a><br>
		<a href="#about-getvertanchor">get vert anchor (handle)</a><br>
		<a href="#about-getvictorymusic">get victory music</a><br>
		<a href="#about-getwrap">get wrap(handle)</a><br>
		<a href="#about-getzoneextra">get zone extra (zone id, extra num)</a><br>
		<a href="#about-getzonename">get zone name (string id, zone id)</a><br>
		<a href="#about-giveexperience">give experience (hero, amount)</a><br>
		<a href="#about-globalnpcreference">global NPC</a><br>
		<a href="#about-globalnpcreference">global NPC reference (ID, copy, allow disabled?)</a><br>
		<a href="#about-globalstostring">globals to string(ID, starting global, length)</a><br>
		<a href="#about-globalvariable">global variable (id,name)</a><br>
		<a href="#about-gracefullydismountvehicle">gracefully dismount vehicle</a><br>
		<a href="#about-greaterthan">number &gt; number</a><br>
		<a href="#about-greaterthanorequalto">number &gt;= number</a><br>
		<a href="#about-greyscalepalette">greyscale palette (first, last)</a><br>
		<a href="#about-gridisshown">grid is shown (handle)</a><br>
		<a href="#about-harmtile">harm tile</a><br>
		<a href="#about-herobaseelementalresistasint">hero base elemental resist as int (who, element)</a><br>
		<a href="#about-herobyrank">hero by rank (where)</a><br>
		<a href="#about-herobyslot">hero by slot (where)</a><br>
		<a href="#about-herochasesnpc">hero chases npc (who, npc, stop when reached, stuck ticks)</a><br>
		<a href="#about-herodirection">hero direction (who)</a><br>
		<a href="#about-heroframe">hero frame (who)</a><br>
		<a href="#about-heroischasing">hero is chasing (who)</a><br>
		<a href="#about-heroiswalking">hero is walking (who)</a><br>
		<a href="#about-herolevelled">hero levelled (who)</a><br>
		<a href="#about-heropixelx">hero pixel X (who)</a><br>
		<a href="#about-heropixely">hero pixel Y (who)</a><br>
		<a href="#about-heroportrait">hero portrait</a><br>
		<a href="#about-herorankfromslice">hero rank from slice (handle)</a><br>
		<a href="#about-heroslotfromslice">hero slot from slice (handle)</a><br>
		<a href="#about-herototalelementalresistasint">hero total elemental resist as int (who, element)</a><br>
		<a href="#about-herowallsaresuspended">hero walls are suspended</a><br>
		<a href="#about-herox">hero X (who)</a><br>
		<a href="#about-heroy">hero Y (who)</a><br>
		<a href="#about-heroz">hero Z (who)</a><br>
		<a href="#about-hidemousecursor">hide mouse cursor</a><br>
		<a href="#about-hidestring">hide string (ID)</a><br>
		<a href="#about-hidevirtualgamepad">hide virtual gamepad</a><br>
		<a href="#about-horizflipsprite">horiz flip sprite (handle, flip)</a><br>
		<a href="#about-hoursofplay">hours of play</a><br>
		<a href="#about-if">if(condition) then(commands) else(commands)</a><br>
		<a href="#about-importglobals">import globals (slot, first, last)</a><br>
		<a href="#about-include">include, filename</a><br>
		<a href="#about-increment">increment (variable,amount)</a><br>
		<a href="#about-initmouse">init mouse</a><br>
		<a href="#about-inputstring">input string (ID, maxlength, use current, center, position x, position y)</a><br>
		<a href="#about-inputstringwithmousekeyboard">input string with mouse keyboard (ID, maxlength)</a><br>
		<a href="#about-inputstringwithvirtualkeyboard">input string with virtual keyboard (ID, maxlength, onlyplayer)</a><br>
		<a href="#about-insidebattle">inside battle</a><br>
		<a href="#about-inventory">inventory (item)</a><br>
		<a href="#about-isfillingparent">is filling parent (handle)</a><br>
		<a href="#about-itemcountinslot">item count in slot (slot)</a><br>
		<a href="#about-iteminslot">item in slot (slot)</a><br>
		<a href="#about-itemsmenu">items menu</a><br>
		<a href="#about-joystickaxis">joystick axis (axis, multiplier, player)</a><br>
		<a href="#about-joystickbutton">joystick button (button, player)</a><br>
		<a href="#about-controlcodes">Key Constants</a><br>
		<a href="#about-keyispressed">key is pressed (scancode, player)</a><br>
		<a href="#about-keypress">keypress (scancode, player)</a><br>
		<a href="#about-keyval">keyval (scancode, player)</a><br>
		<a href="#about-knowsspell">knows spell (hero, attack)</a><br>
		<a href="#about-lastascii">last ascii</a><br>
		<a href="#about-lastchild">last child (handle)</a><br>
		<a href="#about-lastformation">last formation</a><br>
		<a href="#about-lastlayerid">last layer id</a><br>
		<a href="#about-lastmenuitem">last menu item(menu handle, visible only)</a><br>
		<a href="#about-lastsaveslot">last save slot</a><br>
		<a href="#about-layeridunderwalkabouts">layer id under walkabouts</a><br>
		<a href="#about-layertileset">layer tileset (layer)</a><br>
		<a href="#about-leader">leader</a><br>
		<a href="#about-left">left</a><br>
		<a href="#about-leftbutton">left button</a><br>
		<a href="#about-leftkey">left key</a><br>
		<a href="#about-lessthan">number &lt; number</a><br>
		<a href="#about-lessthanorequalto">number &lt;= number</a><br>
		<a href="#about-loadattacksprite">load attack sprite (num, palette)</a><br>
		<a href="#about-loadbackdropsprite">load backdrop sprite (num)</a><br>
		<a href="#about-loadbordersprite">load border sprite (num, palette)</a><br>
		<a href="#about-loadfromslot">load from slot (slot, args...)</a><br>
		<a href="#about-loadherosprite">load hero sprite (num, palette)</a><br>
		<a href="#about-loadlargeenemysprite">load large enemy sprite (num, palette)</a><br>
		<a href="#about-loadmapstate">load map state (whichdata, customid)</a><br>
		<a href="#about-loadmediumenemysprite">load medium enemy sprite (num, palette)</a><br>
		<a href="#about-loadmenu">load menu (reallyload, show new game)</a><br>
		<a href="#about-loadpalette">load palette (palette number)</a><br>
		<a href="#about-loadportraitsprite">load portrait sprite (num, palette)</a><br>
		<a href="#about-loadslicecollection">load slice collection (id)</a><br>
		<a href="#about-loadsmallenemysprite">load small enemy sprite (num, palette)</a><br>
		<a href="#about-loadsprite">load sprite (sprite type, num, palette)</a><br>
		<a href="#about-loadtileset">load tileset (tileset, layer)</a><br>
		<a href="#about-loadwalkaboutsprite">load walkabout sprite (num, palette)</a><br>
		<a href="#about-loadweaponsprite">load weapon sprite (num, palette)</a><br>
		<a href="#about-lockhero">lock hero (who)</a><br>
		<a href="#about-logicaland">value &amp;&amp; value</a><br>
		<a href="#about-logicalor">value || value</a><br>
		<a href="#about-logicalxor">value ^^ value</a><br>
		<a href="#about-lookupcode">Slice lookup codes</a><br>
		<a href="#about-lookupslice">lookup slice (lookup code, start slice)</a><br>
		<a href="#about-losemoney">lose money (amount)</a><br>
		<a href="#about-mainmenu">main menu</a><br>
		<a href="#about-mapcure">map cure (attack, target, attacker)</a><br>
		<a href="#about-mapheight">map height (map)</a><br>
		<a href="#about-mapmusicissuspended">map music is suspended</a><br>
		<a href="#about-mapwidth">map width (map)</a><br>
		<a href="#about-maximumstat">maximum stat</a><br>
		<a href="#about-maxmapid">max map id</a><br>
		<a href="#about-me">me</a><br>
		<a href="#about-menuhandle">Menu handles</a><br>
		<a href="#about-menuisopen">menu is open(menu handle)</a><br>
		<a href="#about-menuitematpixel">menu item at pixel(x, y)</a><br>
		<a href="#about-menuitembyslot">menu item by slot(menu handle, slot, visible only)</a><br>
		<a href="#about-menuitembytrueslot">menu item by true slot(menu handle, slot)</a><br>
		<a href="#about-menuitemcount">menu item count(menu handle)</a><br>
		<a href="#about-menuitemdisabled">menu item disabled(menu item handle)</a><br>
		<a href="#about-menuitemhandle">Menu item handles</a><br>
		<a href="#about-menuitemselectable">menu item selectable(menu item handle)</a><br>
		<a href="#about-menuitemslot">menu item slot(menu item handle)</a><br>
		<a href="#about-menuitemtrueslot">menu item true slot(menu item handle)</a><br>
		<a href="#about-menuitemvisible">menu item visible(menu item handle)</a><br>
		<a href="#about-menukey">menu key</a><br>
		<a href="#about-microseconds">microseconds</a><br>
		<a href="#about-middlebutton">middle button</a><br>
		<a href="#about-milliseconds">milliseconds</a><br>
		<a href="#about-minutesofplay">minutes of play</a><br>
		<a href="#about-modulus">number,mod,number</a><br>
		<a href="#about-mousebutton">mouse button (which)</a><br>
		<a href="#about-mouseclick">mouse click (which)</a><br>
		<a href="#about-mouseconstants">Mouse Constants</a><br>
		<a href="#about-mousepixelx">mouse pixel X</a><br>
		<a href="#about-mousepixely">mouse pixel Y</a><br>
		<a href="#about-mouseregion">mouse region (x min, x max, y min, y max)</a><br>
		<a href="#about-mouserelease">mouse release (which)</a><br>
		<a href="#about-movesliceabove">move slice above (handle, above what handle)</a><br>
		<a href="#about-moveslicebelow">move slice below (handle, below what handle)</a><br>
		<a href="#about-movesliceby">move slice by (handle, relative x, relative y, ticks)</a><br>
		<a href="#about-movesliceto">move slice to (handle, x, y, ticks)</a><br>
		<a href="#about-moveslicewithwallchecking">move slice with wallchecking (sl, relative x, relative y, friction%)</a><br>
		<a href="#about-multdiv">multdiv (a, b, c)</a><br>
		<a href="#about-multiply">number * number</a><br>
		<a href="#about-newkeypress">new keypress (scancode, player)</a><br>
		<a href="#about-nextcontainersibling">next container sibling (handle)</a><br>
		<a href="#about-nextellipsesibling">next ellipse sibling (handle)</a><br>
		<a href="#about-nextgridsibling">next grid sibling (handle)</a><br>
		<a href="#about-nextlinesibling">next line sibling (handle)</a><br>
		<a href="#about-nextmenu">next menu(menu handle)</a><br>
		<a href="#about-nextmenuitem">next menu item(menu item handle, visible only)</a><br>
		<a href="#about-nextnpcreference">next NPC reference (npcref)</a><br>
		<a href="#about-nextpanelsibling">next panel sibling (handle)</a><br>
		<a href="#about-nextrectsibling">next rect sibling (handle)</a><br>
		<a href="#about-nextscrollsibling">next scroll sibling (handle)</a><br>
		<a href="#about-nextselectsibling">next select sibling (handle)</a><br>
		<a href="#about-nextsibling">next sibling (handle)</a><br>
		<a href="#about-nextsiblingoftype">next sibling of type (handle, type)</a><br>
		<a href="#about-nextspritesibling">next sprite sibling (handle)</a><br>
		<a href="#about-nexttextsibling">next text sibling (handle)</a><br>
		<a href="#about-none">none</a><br>
		<a href="#about-north">north</a><br>
		<a href="#about-northwall">north wall</a><br>
		<a href="#about-not">not (value)</a><br>
		<a href="#about-notequal">number &lt;&gt; number</a><br>
		<a href="#about-npcatpixel">NPC at pixel (x, y, number)</a><br>
		<a href="#about-npcatspot">NPC at spot (x, y, number)</a><br>
		<a href="#about-npcchasesnpc">NPC chases NPC (who, other who, stop when reached, stuck ticks)</a><br>
		<a href="#about-npccopycount">NPC copy count (ID, pool)</a><br>
		<a href="#about-npccopynumber">NPC copy number (reference)</a><br>
		<a href="#about-npcdirection">NPC direction (who)</a><br>
		<a href="#about-npcextra">NPC extra (who, which)</a><br>
		<a href="#about-npcframe">NPC frame (who)</a><br>
		<a href="#about-npcid">NPC IDs</a><br>
		<a href="#about-npcischasing">NPC is chasing (who)</a><br>
		<a href="#about-npcisdisabled">NPC is disabled (reference)</a><br>
		<a href="#about-npciswalking">NPC is walking (who)</a><br>
		<a href="#about-npcpixelx">NPC pixel X (who)</a><br>
		<a href="#about-npcpixely">NPC pixel Y (who)</a><br>
		<a href="#about-npcpool">NPC pool numbers</a><br>
		<a href="#about-npcref">NPC references</a><br>
		<a href="#about-npcreference">NPC reference (ID, copy, allow disabled?, pool)</a><br>
		<a href="#about-npcreferencefromslice">npc reference from slice (handle)</a><br>
		<a href="#about-npcsaresuspended">npcs are suspended</a><br>
		<a href="#about-npcwallsaresuspended">npc walls are suspended</a><br>
		<a href="#about-npcx">NPC X (who)</a><br>
		<a href="#about-npcy">NPC Y (who)</a><br>
		<a href="#about-npcz">NPC Z (who)</a><br>
		<a href="#about-numberfromstring">number from string (ID, default)</a><br>
		<a href="#about-numericconstants">Numeric Constants</a><br>
		<a href="#about-obstructionissuspended">obstruction is suspended</a><br>
		<a href="#about-off">off</a><br>
		<a href="#about-on">on</a><br>
		<a href="#about-openmenu">open menu (ID, allow duplicate)</a><br>
		<a href="#about-or">value,or,value</a><br>
		<a href="#about-ordermenu">order menu</a><br>
		<a href="#about-outsidebattle">outside battle</a><br>
		<a href="#about-outsidebattlecure">outside battle cure (attack minus 1, target, attacker)</a><br>
		<a href="#about-overheadtile">overhead tile</a><br>
		<a href="#about-overlayissuspended">overlay is suspended</a><br>
		<a href="#about-overridetickmilliseconds">override tick milliseconds (ms)</a><br>
		<a href="#about-pancamera">pan camera (direction,distance,pixelstep)</a><br>
		<a href="#about-parentmenu">parent menu(menu item handle)</a><br>
		<a href="#about-parentslice">parent slice (handle)</a><br>
		<a href="#about-party">party</a><br>
		<a href="#about-partymoney">party money</a><br>
		<a href="#about-pathfindheroto">pathfind hero to (who, x, y, stuck ticks)</a><br>
		<a href="#about-pathfindnpcto">pathfind NPC to (who, x, y, stuck ticks)</a><br>
		<a href="#about-pausesound">pause sound (num)</a><br>
		<a href="#about-paymoney">pay money (amount)</a><br>
		<a href="#about-pickhero">pick hero (message, skip if alone)</a><br>
		<a href="#about-pixelfocuscamera">pixel focus camera (x,y,speed)</a><br>
		<a href="#about-putsprite">place sprite</a><br>
		<a href="#about-playerissuspended">player is suspended</a><br>
		<a href="#about-playernumber">Player number</a><br>
		<a href="#about-playsong">play song (song)</a><br>
		<a href="#about-playsound">play sound (num, loop, preempt)</a><br>
		<a href="#about-plotscript">plotscript, name, argumentnames (statements)</a><br>
		<a href="#about-positionstring">positionstring (ID, x, y)</a><br>
		<a href="#about-previousmenu">previous menu(menu handle)</a><br>
		<a href="#about-previousmenuitem">previous menu item(menu item handle, visible only)</a><br>
		<a href="#about-previoussibling">previous sibling (handle)</a><br>
		<a href="#about-putcamera">put camera (x,y)</a><br>
		<a href="#about-puthero">put hero (who, x, y)</a><br>
		<a href="#about-putmouse">put mouse (X, Y)</a><br>
		<a href="#about-putnpc">put NPC (who,x,y)</a><br>
		<a href="#about-putslice">put slice (handle, X, Y)</a><br>
		<a href="#about-putslicescreen">put slice screen (handle, x, y)</a><br>
		<a href="#about-putsprite">put sprite (handle, x, y)</a><br>
		<a href="#about-random">random (lownumber, highnumber)</a><br>
		<a href="#about-randomenemiesaresuspended">random enemies are suspended</a><br>
		<a href="#about-randomformation">random formation (formation set)</a><br>
		<a href="#about-rankincaterpillar">rank in caterpillar (who)</a><br>
		<a href="#about-readattackname">read attack name (ID, attack)</a><br>
		<a href="#about-readcolor">read color (index, element)</a><br>
		<a href="#about-readenemydata">read enemy data (enemyid, data)</a><br>
		<a href="#about-readfoemap">read foemap (x, y)</a><br>
		<a href="#about-readglobal">read global (id)</a><br>
		<a href="#about-readmapblock">read map block (x, y, layer)</a><br>
		<a href="#about-readnpc">read NPC (who, NPCstat, pool)</a><br>
		<a href="#about-readpassblock">read pass block (x, y)</a><br>
		<a href="#about-readpreferencebit">read preference bit (bitnum)</a><br>
		<a href="#about-readspell">read spell (hero, list, slot)</a><br>
		<a href="#about-readtimer">read timer (id)</a><br>
		<a href="#about-readwallbit">read wall bit (x, y, bit)</a><br>
		<a href="#about-readzone">read zone (zone id, x, y)</a><br>
		<a href="#about-realignslice">realign slice (handle, horiz align, vert align, horiz anchor, vert anchor)</a><br>
		<a href="#about-renamehero">rename hero (who)</a><br>
		<a href="#about-renameherobyslot">rename hero by slot (who)</a><br>
		<a href="#about-reparenttohero">reparent to hero (handle, hero)</a><br>
		<a href="#about-reparenttonpc">reparent to npc (handle, npc)</a><br>
		<a href="#about-replaceattacksprite">replace attack sprite (handle, num, palette)</a><br>
		<a href="#about-replacebackdropsprite">replace backdrop sprite (handle, num)</a><br>
		<a href="#about-replacebordersprite">replace border sprite (handle, num, palette)</a><br>
		<a href="#about-replacechar">replace char (ID, position, char)</a><br>
		<a href="#about-replaceherosprite">replace hero sprite (handle, num, palette)</a><br>
		<a href="#about-replacelargeenemysprite">replace large enemy sprite (handle, num, palette)</a><br>
		<a href="#about-replacemediumenemysprite">replace medium enemy sprite (handle, num, palette)</a><br>
		<a href="#about-replaceportraitsprite">replace portrait sprite (handle, num, palette)</a><br>
		<a href="#about-replacesmallenemysprite">replace small enemy sprite (handle, num, palette)</a><br>
		<a href="#about-replacesprite">replace sprite (slice, sprite type, num, palette)</a><br>
		<a href="#about-replacesubstring">replace substring (in string, replace what, with what, max replacements, case insensitive)</a><br>
		<a href="#about-replacewalkaboutsprite">replace walkabout sprite (handle, num, palette)</a><br>
		<a href="#about-replaceweaponsprite">replace weapon sprite (handle, num, palette)</a><br>
		<a href="#about-resetformation">reset formation (formation)</a><br>
		<a href="#about-resetformationslot">reset formation slot (formation, slot)</a><br>
		<a href="#about-resetgame">reset game(args...)</a><br>
		<a href="#about-resetheropalette">reset hero palette (who, type)</a><br>
		<a href="#about-resetheropicture">reset hero picture (who, type)</a><br>
		<a href="#about-resetmapstate">reset map state (whichdata)</a><br>
		<a href="#about-resetpalette">reset palette</a><br>
		<a href="#about-resumeboxadvance">resume box advance</a><br>
		<a href="#about-resumecaterpillar">resume catapillar</a><br>
		<a href="#about-resumecaterpillar">resume caterpillar</a><br>
		<a href="#about-resumedoors">resume doors</a><br>
		<a href="#about-resumeherowalls">resume hero walls</a><br>
		<a href="#about-resumemapmusic">resume map music</a><br>
		<a href="#about-resumenpcs">resume NPCs</a><br>
		<a href="#about-resumenpcwalls">resume NPC walls</a><br>
		<a href="#about-resumeobstruction">resume obstruction</a><br>
		<a href="#about-resumeoverlay">resume overlay</a><br>
		<a href="#about-resumeplayer">resume player</a><br>
		<a href="#about-resumerandomenemies">resume random enemies</a><br>
		<a href="#about-resumerandomenemies">resume random enemys</a><br>
		<a href="#about-resumetextboxcontrols">resume text box controls</a><br>
		<a href="#about-resumetimers">resume timers</a><br>
		<a href="#about-return">return(value)</a><br>
		<a href="#about-rgb">RGB (red, green, blue)</a><br>
		<a href="#about-right">right</a><br>
		<a href="#about-rightbutton">right button</a><br>
		<a href="#about-rightkey">right key</a><br>
		<a href="#about-roominactiveparty">room in active party</a><br>
		<a href="#about-rungame">run game(file string id)</a><br>
		<a href="#about-runkey">run key</a><br>
		<a href="#about-runningonconsole">running on console</a><br>
		<a href="#about-runningondesktop">running on desktop</a><br>
		<a href="#about-runningonlinux">running on Linux</a><br>
		<a href="#about-runningonmac">running on Mac</a><br>
		<a href="#about-runningonmobile">running on mobile</a><br>
		<a href="#about-runningonouya">running on ouya</a><br>
		<a href="#about-runningonwindows">running on Windows</a><br>
		<a href="#about-runscriptbyid">run script by ID (id, argument1, argument2, argument3...)</a><br>
		<a href="#about-saveinslot">save in slot (slot)</a><br>
		<a href="#about-savemapstate">save map state (whichdata, customid)</a><br>
		<a href="#about-savemenu">save menu (reallysave)</a><br>
		<a href="#about-savescreenshot">save screenshot</a><br>
		<a href="#about-saveslotused">save slot used (slot)</a><br>
		<a href="#about-scancode">Scancodes</a><br>
		<a href="#about-script">script, name, argumentnames (statements)</a><br>
		<a href="#about-scripterror">script error (string id)</a><br>
		<a href="#about-scriptid">Script IDs</a><br>
		<a href="#about-scrolltoslice">scroll to child</a><br>
		<a href="#about-scrolltoslice">scroll to slice (parent, sl, apply padding)</a><br>
		<a href="#about-searchstring">search string (ID1, ID2, start)</a><br>
		<a href="#about-secondsofplay">seconds of play</a><br>
		<a href="#about-seedrandom">seed random (seed)</a><br>
		<a href="#about-selectedmenuitem">selected menu item(menu handle)</a><br>
		<a href="#about-selectmenuitem">select menu item(menu item handle)</a><br>
		<a href="#about-sendemail">send email (save slot, subject string id, message string id)</a><br>
		<a href="#about-setactivebattlepauseonallmenus">set active battle pause on all menus (value)</a><br>
		<a href="#about-setambientmusic">set ambient music (song)</a><br>
		<a href="#about-setbattlecountdown">set battle countdown (value)</a><br>
		<a href="#about-setbattlewaitmode">set battle wait mode (state)</a><br>
		<a href="#about-setblendingenabled">set blending enabled (handle, state)</a><br>
		<a href="#about-setblendmode">set blend mode (handle, blend mode)</a><br>
		<a href="#about-setbottompadding">set bottom padding (handle, pixels)</a><br>
		<a href="#about-setcappedherostat">set capped hero stat (who, stat, value, type)</a><br>
		<a href="#about-setcaterpillarmode">set caterpillar mode (state)</a><br>
		<a href="#about-setchildautosort">set child autosort (handle, setting)</a><br>
		<a href="#about-setcolor">set color (index, value)</a><br>
		<a href="#about-setdamagecap">set damage cap (cap)</a><br>
		<a href="#about-setdaysofplay">set days of play (days)</a><br>
		<a href="#about-setdeadheroesgainexperience">set dead heroes gain experience (state)</a><br>
		<a href="#about-setdeathscript">set death script (id)</a><br>
		<a href="#about-setdebugkeysdisable">set debug keys disable (state)</a><br>
		<a href="#about-setdefaultweapon">set default weapon (hero, item)</a><br>
		<a href="#about-seteachstepscript">set each step script (id)</a><br>
		<a href="#about-setellipsebordercol">set ellipse border col (handle, color)</a><br>
		<a href="#about-setellipsefillcol">set ellipse fill col (handle, color)</a><br>
		<a href="#about-setenemyappearance">set enemy appearance (enemyid, appearance, value)</a><br>
		<a href="#about-setenemyname">set enemy name (enemyid, stringid)</a><br>
		<a href="#about-setenemystat">set enemy stat(enemy, stat, value)</a><br>
		<a href="#about-setexperience">set experience (who, experience, allowforget)</a><br>
		<a href="#about-setfootoffset">set foot offset (offset)</a><br>
		<a href="#about-setformationbackground">set formation background (formation, background, animation frames, animation ticks)</a><br>
		<a href="#about-setformationsong">set formation song (formation, song)</a><br>
		<a href="#about-setfullheroswapmode">set full hero swap mode (state)</a><br>
		<a href="#about-setglobalsoundvolume">set global sound volume (volume)</a><br>
		<a href="#about-setgridcolumns">set grid columns (handle, columns)</a><br>
		<a href="#about-setgridrows">set grid rows (handle, rows)</a><br>
		<a href="#about-setharmtiledamage">set harm tile damage (amount)</a><br>
		<a href="#about-setharmtileflash">set harm tile flash (color)</a><br>
		<a href="#about-setherobaseelementalresist">set hero base elemental resist (who, element, percent)</a><br>
		<a href="#about-setherodirection">set hero direction (who, direction)</a><br>
		<a href="#about-setheroframe">set hero frame (who, frame)</a><br>
		<a href="#about-setherohandx">set hero hand x (who, frame, new x)</a><br>
		<a href="#about-setherohandy">set hero hand y (who, frame, new y)</a><br>
		<a href="#about-setherolevel">set hero level (who, level, forgetspells)</a><br>
		<a href="#about-setheroname">set hero name (ID, hero)</a><br>
		<a href="#about-setheropalette">set hero palette (who, palette, type)</a><br>
		<a href="#about-setheropicture">set hero picture (who, picture, type)</a><br>
		<a href="#about-setheroposition">set hero position (who, x, y)</a><br>
		<a href="#about-setherospeed">set hero speed (who, speed)</a><br>
		<a href="#about-setherostat">set hero stat (who, stat, value, type)</a><br>
		<a href="#about-setherostatcap">set hero stat cap (stat, value)</a><br>
		<a href="#about-setheroz">set hero z (who, z)</a><br>
		<a href="#about-sethorizalign">set horiz align (handle, edge)</a><br>
		<a href="#about-sethorizanchor">set horiz anchor (handle, edge)</a><br>
		<a href="#about-sethoursofplay">set hours of play (hours)</a><br>
		<a href="#about-sethpleveluprestore">set HP level up restore (state)</a><br>
		<a href="#about-setinnnorevivemode">set inn revive mode (state)</a><br>
		<a href="#about-setinsteadofbattlescript">set instead of battle script (id)</a><br>
		<a href="#about-setinventorysize">set inventory size (new size)</a><br>
		<a href="#about-setitemcountinslot">set item count in slot (slot, count)</a><br>
		<a href="#about-setiteminslot">set item in slot (slot, item)</a><br>
		<a href="#about-setlastsaveslot">set last save slot (slot)</a><br>
		<a href="#about-setleftpadding">set left padding (handle, pixels)</a><br>
		<a href="#about-setlevelcap">set level cap (cap)</a><br>
		<a href="#about-setlevelmp">set level MP (who, mp level slot, new value)</a><br>
		<a href="#about-setlinecolor">set line color (handle, color)</a><br>
		<a href="#about-setloadscript">set load script (id)</a><br>
		<a href="#about-setmapedgemode">set map edge mode (mode, default tile)</a><br>
		<a href="#about-setmenuanchorx">set menu anchor x(menu handle, new anchor)</a><br>
		<a href="#about-setmenuanchory">set menu anchor y(menu handle, new anchor)</a><br>
		<a href="#about-setmenubit">set menu bit(menu handle, bit, value)</a><br>
		<a href="#about-setmenuborder">set menu border(menu handle, new border)</a><br>
		<a href="#about-setmenuboxstyle">set menu boxstyle(menu handle, new box style)</a><br>
		<a href="#about-setmenucancelbuttonmenu">set menu cancel button menu(menu handle, menu)</a><br>
		<a href="#about-setmenudisabledtextcolor">set menu disabled textcolor(menu handle, new textcolor)</a><br>
		<a href="#about-setmenuitembit">set menu item bit(menu item handle, bit, value)</a><br>
		<a href="#about-setmenuitemcaption">set menu item caption(menu item handle, string ID)</a><br>
		<a href="#about-setmenuitemcolor">set menu item color(menu item handle, colorcode)</a><br>
		<a href="#about-setmenuitemdisabledcolor">set menu item disabled color(menu item handle, colorcode)</a><br>
		<a href="#about-setmenuitemextra">set menu item extra(menu item handle, extra, num)</a><br>
		<a href="#about-setmenuitemsettag">set menu item settag(menu item handle, new settag)</a><br>
		<a href="#about-setmenuitemspacing">set menu item spacing(menu handle, spacing)</a><br>
		<a href="#about-setmenuitemsubtype">set menu item subtype(menu item handle, new subtype)</a><br>
		<a href="#about-setmenuitemtag">set menu item tag(menu item handle, new tag, whichtag)</a><br>
		<a href="#about-setmenuitemtogtag">set menu item togtag(menu item handle, new settag)</a><br>
		<a href="#about-setmenuitemtype">set menu item type(menu item handle, new type)</a><br>
		<a href="#about-setmenumaxchars">set menu max chars(menu handle, new max)</a><br>
		<a href="#about-setmenumaxrows">set menu max rows(menu handle, new max rows)</a><br>
		<a href="#about-setmenuminchars">set menu min chars(menu handle, new min)</a><br>
		<a href="#about-setmenuoffsetx">set menu offset x(menu handle, new x)</a><br>
		<a href="#about-setmenuoffsety">set menu offset y(menu handle, new y)</a><br>
		<a href="#about-setmenuonclosescript">set menu on close script(menu handle, script id)</a><br>
		<a href="#about-setmenutextalign">set menu text align(menu handle, new align)</a><br>
		<a href="#about-setmenutextcolor">set menu textcolor(menu handle, new textcolor)</a><br>
		<a href="#about-setminutesofplay">set minutes of play (min)</a><br>
		<a href="#about-setmoney">set money (amount)</a><br>
		<a href="#about-setmusicvolume">set music volume (volume)</a><br>
		<a href="#about-setnompleveluprestore">set MP level up restore (state)</a><br>
		<a href="#about-setnpcdirection">set NPC direction (who, direction)</a><br>
		<a href="#about-setnpcextra">set NPC extra (who, which, value)</a><br>
		<a href="#about-setnpcframe">set NPC frame (who, frame)</a><br>
		<a href="#about-setnpcignoreswalls">set NPC ignores walls (who, value)</a><br>
		<a href="#about-setnpcmoves">set NPC moves (who, value)</a><br>
		<a href="#about-setnpcobstructs">set NPC obstructs (who, value)</a><br>
		<a href="#about-setnpcposition">set NPC position (who, X, Y)</a><br>
		<a href="#about-setnpcspeed">set NPC speed (who, speed)</a><br>
		<a href="#about-setnpcusable">set NPC usable (who, value)</a><br>
		<a href="#about-setnpcz">set NPC z (npc, z)</a><br>
		<a href="#about-setonetime">set onetime (onetime,value)</a><br>
		<a href="#about-setonkeypressscript">set on keypress script (id)</a><br>
		<a href="#about-setopacity">set opacity (handle, percent)</a><br>
		<a href="#about-setoutline">set outline(handle, outline)</a><br>
		<a href="#about-setpadding">set padding (handle, pixels)</a><br>
		<a href="#about-setpanelisvertical">set panel is vertical (handle, value)</a><br>
		<a href="#about-setpanelpadding">set panel padding (handle, padding)</a><br>
		<a href="#about-setpanelpercent">set panel percent (handle, percent)</a><br>
		<a href="#about-setpanelpixels">set panel pixels (handle, pixels)</a><br>
		<a href="#about-setpanelprimaryindex">set panel primary index (handle, zero or one)</a><br>
		<a href="#about-setparent">set parent (handle, parent handle)</a><br>
		<a href="#about-setrectbgcol">set rect bgcol (handle, color)</a><br>
		<a href="#about-setrectborder">set rect border (handle, border)</a><br>
		<a href="#about-setrectfgcol">set rect fgcol (handle, color)</a><br>
		<a href="#about-setrectfuzziness">set rect fuzziness (handle, percent)</a><br>
		<a href="#about-setrectopacity">set rect opacity (handle, percent)</a><br>
		<a href="#about-setrectrawborder">set rect raw border (handle, border)</a><br>
		<a href="#about-setrectstyle">set rect style (handle, style)</a><br>
		<a href="#about-setrecttrans">set rect trans (handle, transparency setting)</a><br>
		<a href="#about-setrightpadding">set right padding (handle, pixels)</a><br>
		<a href="#about-setscrollbarstyle">set scroll bar style (handle, style)</a><br>
		<a href="#about-setscrollcheckdepth">set scroll check depth (handle, depth)</a><br>
		<a href="#about-setsecondssofplay">set seconds of play (sec)</a><br>
		<a href="#about-setselectedchild">set selected child (select, child)</a><br>
		<a href="#about-setselectsliceindex">set select slice index (handle, index)</a><br>
		<a href="#about-setsliceclipping">set slice clipping (handle, clip)</a><br>
		<a href="#about-setsliceedgex">set slice edge x (handle, edge, value)</a><br>
		<a href="#about-setsliceedgey">set slice edge y (handle, edge, value)</a><br>
		<a href="#about-setsliceextra">set slice extra (handle, extra, value)</a><br>
		<a href="#about-setsliceheight">set slice height (handle, height)</a><br>
		<a href="#about-setslicelookup">set slice lookup (handle, code)</a><br>
		<a href="#about-setslicescreenx">set slice screen x (handle, x)</a><br>
		<a href="#about-setslicescreeny">set slice screen y (handle, y)</a><br>
		<a href="#about-setslicesize">set slice size (handle, width, height)</a><br>
		<a href="#about-setslicetext">set slice text(handle, string id)</a><br>
		<a href="#about-setslicevelocity">set slice velocity (handle, horiz pixels per tick, vert pixels per tick, ticks)</a><br>
		<a href="#about-setslicevelocityx">set slice velocity x (handle, pixels per tick, ticks)</a><br>
		<a href="#about-setslicevelocityy">set slice velocity y (handle, pixels per tick, ticks)</a><br>
		<a href="#about-setslicevisible">set slice visible (handle, vis)</a><br>
		<a href="#about-setslicewidth">set slice width (handle, width)</a><br>
		<a href="#about-setslicex">set slice x (handle, X)</a><br>
		<a href="#about-setslicey">set slice y (handle, Y)</a><br>
		<a href="#about-setsortorder">set sort order (handle, order)</a><br>
		<a href="#about-setspriteframe">set sprite frame (handle, num)</a><br>
		<a href="#about-setspritepalette">set sprite palette (handle, num)</a><br>
		<a href="#about-setspritesetnumber">set sprite set number (handle, record)</a><br>
		<a href="#about-setspritetrans">set sprite trans (handle, drawtransparent)</a><br>
		<a href="#about-setslicevisible">set sprite visible</a><br>
		<a href="#about-settag">set tag (tag,value)</a><br>
		<a href="#about-settextbg">set text bg(handle, color)</a><br>
		<a href="#about-settextcolor">set text color(handle, color)</a><br>
		<a href="#about-settileanimationoffset">set tile animation offset (animation pattern, offset, layer)</a><br>
		<a href="#about-settimer">set timer (id, count, speed, trigger, string, flags)</a><br>
		<a href="#about-settimerargs">set timer args (id, args...)</a><br>
		<a href="#about-settoppadding">set top padding (handle, pixels)</a><br>
		<a href="#about-setuicolor">set ui color (color, palette index)</a><br>
		<a href="#about-setvariable">variable := value</a><br>
		<a href="#about-setvertalign">set vert align (handle, edge)</a><br>
		<a href="#about-setvertanchor">set vert anchor (handle, edge)</a><br>
		<a href="#about-setvictorymusic">set victory music (song)</a><br>
		<a href="#about-setwrap">set wrap(handle, wrap)</a><br>
		<a href="#about-setzoneextra">set zone extra (zone id, extra num, value)</a><br>
		<a href="#about-showbackdrop">show backdrop (number)</a><br>
		<a href="#about-showbattlehealthmeter">show battle health meter (state)</a><br>
		<a href="#about-showbattlereadymeter">show battle ready meter (state)</a><br>
		<a href="#about-showgrid">show grid (handle, shown)</a><br>
		<a href="#about-showmap">show map</a><br>
		<a href="#about-showminimap">show mini map</a><br>
		<a href="#about-showmousecursor">show mouse cursor</a><br>
		<a href="#about-shownovalue">show no value</a><br>
		<a href="#about-showstring">show string (ID)</a><br>
		<a href="#about-showstringat">show string at (ID, x, y)</a><br>
		<a href="#about-showtextbox">show text box (number)</a><br>
		<a href="#about-showvalue">show value (number)</a><br>
		<a href="#about-showvirtualgamepad">show virtual gamepad</a><br>
		<a href="#about-sign">sign (number)</a><br>
		<a href="#about-sliceatpixel">slice at pixel (parent, x, y, number, check descendants, visible only)</a><br>
		<a href="#about-slicechild">slice child (handle, number)</a><br>
		<a href="#about-slicechildindex">slice child index (handle)</a><br>
		<a href="#about-slicecollide">slice collide (handle1, handle2)</a><br>
		<a href="#about-slicecollidepoint">slice collide point (handle, x, y)</a><br>
		<a href="#about-slicecontains">slice contains (handle1, handle2)</a><br>
		<a href="#about-sliceedgex">slice edge x (handle, edge)</a><br>
		<a href="#about-sliceedgey">slice edge y (handle, edge)</a><br>
		<a href="#about-slicehandle">Slice handles</a><br>
		<a href="#about-sliceheight">slice height (handle)</a><br>
		<a href="#about-sliceiscontainer">slice is container (handle)</a><br>
		<a href="#about-sliceisellipse">slice is ellipse (handle)</a><br>
		<a href="#about-sliceisgrid">slice is grid (handle)</a><br>
		<a href="#about-sliceisline">slice is line (handle)</a><br>
		<a href="#about-sliceismaplayer">slice is map layer (handle)</a><br>
		<a href="#about-sliceismoving">slice is moving (handle)</a><br>
		<a href="#about-sliceispanel">slice is panel (handle)</a><br>
		<a href="#about-sliceisrect">slice is rect (handle)</a><br>
		<a href="#about-sliceisscroll">slice is scroll (handle)</a><br>
		<a href="#about-sliceisselect">slice is select (handle)</a><br>
		<a href="#about-sliceissprite">slice is sprite (handle)</a><br>
		<a href="#about-sliceistext">slice is text (handle)</a><br>
		<a href="#about-sliceisvalid">slice is valid (id)</a><br>
		<a href="#about-sliceparent">slice parent (handle)</a><br>
		<a href="#about-slicescreenx">slice screen x (handle)</a><br>
		<a href="#about-slicescreeny">slice screen y (handle)</a><br>
		<a href="#about-slicetoback">slice to back (handle)</a><br>
		<a href="#about-slicetofront">slice to front (handle)</a><br>
		<a href="#about-slicetype">slice type (handle)</a><br>
		<a href="#about-slicewidth">slice width (handle)</a><br>
		<a href="#about-slicex">slice x (handle)</a><br>
		<a href="#about-slicey">slice y (handle)</a><br>
		<a href="#about-song:sameaslastmap">song: same as last map</a><br>
		<a href="#about-song:sameasmap">song: same as map</a><br>
		<a href="#about-song:silence">song: silence</a><br>
		<a href="#about-sortchildren">sort children (handle, wipe)</a><br>
		<a href="#about-soundisplaying">sound is playing (num)</a><br>
		<a href="#about-south">south</a><br>
		<a href="#about-southwall">south wall</a><br>
		<a href="#about-speakingnpc">speaking NPC</a><br>
		<a href="#about-spellslearned">spells learned (hero, number)</a><br>
		<a href="#about-spellslearnt">spells learnt (hero, number)</a><br>
		<a href="#about-spellsmenu">spells menu (who)</a><br>
		<a href="#about-spriteframecount">sprite frame count (handle)</a><br>
		<a href="#about-spriteisdissolving">sprite is dissolving (handle)</a><br>
		<a href="#about-spriteishorizflipped">sprite is horiz flipped (handle)</a><br>
		<a href="#about-spriteisvertflipped">sprite is vert flipped (handle)</a><br>
		<a href="#about-spritelayer">sprite layer</a><br>
		<a href="#about-sqrt">sqrt (number)</a><br>
		<a href="#about-statusscreen">status screen (who)</a><br>
		<a href="#about-stopslice">stop slice (handle)</a><br>
		<a href="#about-stopsong">stop song</a><br>
		<a href="#about-stopsound">stop sound (num)</a><br>
		<a href="#about-stoptimer">stop timer (id)</a><br>
		<a href="#about-stringcolor">string color (ID, foreground color, background color)</a><br>
		<a href="#about-stringcompare">string compare (ID1, ID2)</a><br>
		<a href="#about-stringequal">string equal (ID1, ID2)</a><br>
		<a href="#about-stringfromtextbox">string from textbox (ID, textbox, line, ignored)</a><br>
		<a href="#about-stringisvisible">string is visible (ID)</a><br>
		<a href="#about-stringlength">string length (ID)</a><br>
		<a href="#about-stringsprintf">string sprintf (dest string ID, format string ID, arguments...)</a><br>
		<a href="#about-stringstyle">string style (ID, style)</a><br>
		<a href="#about-stringtoglobals">string to globals (ID, starting global, length)</a><br>
		<a href="#about-stringx">string X (ID)</a><br>
		<a href="#about-stringy">string Y (ID)</a><br>
		<a href="#about-subscript">subscript, name, argumentnames (statements)</a><br>
		<a href="#about-subtract">number -- number</a><br>
		<a href="#about-suspendboxadvance">suspend box advance</a><br>
		<a href="#about-suspendcaterpillar">suspend catapillar</a><br>
		<a href="#about-suspendcaterpillar">suspend caterpillar</a><br>
		<a href="#about-suspenddoors">suspend doors</a><br>
		<a href="#about-suspendherowalls">suspend hero walls</a><br>
		<a href="#about-suspendmapmusic">suspend map music</a><br>
		<a href="#about-suspendnpcs">suspend NPCs</a><br>
		<a href="#about-suspendnpcwalls">suspend NPC walls</a><br>
		<a href="#about-suspendobstruction">suspend obstruction</a><br>
		<a href="#about-suspendoverlay">suspend overlay</a><br>
		<a href="#about-suspendplayer">suspend player</a><br>
		<a href="#about-suspendrandomenemies">suspend random enemies</a><br>
		<a href="#about-suspendrandomenemies">suspend random enemys</a><br>
		<a href="#about-suspendtextboxcontrols">suspend text box controls</a><br>
		<a href="#about-suspendtimers">suspend timers</a><br>
		<a href="#about-swapbyname">swap by name (name,name)</a><br>
		<a href="#about-swapbyposition">swap by position (slot1, slot2)</a><br>
		<a href="#about-swapinhero">swap in hero (who)</a><br>
		<a href="#about-swapmenuitems">swap menu items(handle1, handle2)</a><br>
		<a href="#about-swapouthero">swap out hero (who)</a><br>
		<a href="#about-switch">switch(expression)</a><br>
		<a href="#about-systemday">system day</a><br>
		<a href="#about-systemhour">system hour</a><br>
		<a href="#about-systemminute">system minute</a><br>
		<a href="#about-systemmonth">system month</a><br>
		<a href="#about-systemsecond">system second</a><br>
		<a href="#about-systemyear">system year</a><br>
		<a href="#about-teachspell">teach spell (hero, attack)</a><br>
		<a href="#about-teammenu">team menu</a><br>
		<a href="#about-teleporttomap">teleport to map (map, x, y)</a><br>
		<a href="#about-textboxcontrolsaresuspended">textbox controls are suspended</a><br>
		<a href="#about-textboxline">textbox line (string ID, textbox, line, expand, strip)</a><br>
		<a href="#about-textboxtext">textbox text (string ID, textbox, expand, strip)</a><br>
		<a href="#about-if">then</a><br>
		<a href="#about-timer:default">timer: default</a><br>
		<a href="#about-timer:gameover">timer: game over</a><br>
		<a href="#about-timerflag:battle">timer flag: battle</a><br>
		<a href="#about-timerflag:critical">timer flag: critical</a><br>
		<a href="#about-timerflag:menu">timer flag: menu</a><br>
		<a href="#about-timersaresuspended">timers are suspended</a><br>
		<a href="#about-topmenu">top menu</a><br>
		<a href="#about-totalexperience">total experience (who)</a><br>
		<a href="#about-trace">trace (string)</a><br>
		<a href="#about-tracevalue">trace value (expression, ...)</a><br>
		<a href="#about-trimstring">trim string (ID, start, length)</a><br>
		<a href="#about-true">true</a><br>
		<a href="#about-tweakpalette">tweak palette (red, green, blue, first, last)</a><br>
		<a href="#about-unequip">unequip (hero, slot)</a><br>
		<a href="#about-unhidemousecursor">unhide mouse cursor</a><br>
		<a href="#about-unlockhero">unlock hero (who)</a><br>
		<a href="#about-up">up</a><br>
		<a href="#about-updateleveluplearning">update level up learning(who, allowforget)</a><br>
		<a href="#about-updatepalette">update palette</a><br>
		<a href="#about-upkey">up key</a><br>
		<a href="#about-usedoor">use door (number, fade screen)</a><br>
		<a href="#about-useitem">use item (item)</a><br>
		<a href="#about-useiteminslot">use item in slot (slot)</a><br>
		<a href="#about-usekey">use key</a><br>
		<a href="#about-usemenuitem">use menu item(menu item handle)</a><br>
		<a href="#about-usenpc">use NPC (who)</a><br>
		<a href="#about-useshop">use shop (shop)</a><br>
		<a href="#about-variable">variable (name)</a><br>
		<a href="#about-vehiclea">vehicle A</a><br>
		<a href="#about-vehicleb">vehicle B</a><br>
		<a href="#about-vertflipsprite">vert flip sprite (handle, flip)</a><br>
		<a href="#about-visiblemenuitemcount">visible menu item count(menu handle)</a><br>
		<a href="#about-wait">wait (ticks)</a><br>
		<a href="#about-waitforall">wait for all</a><br>
		<a href="#about-waitforcamera">wait for camera</a><br>
		<a href="#about-waitfordissolve">wait for dissolve (handle)</a><br>
		<a href="#about-waitforhero">wait for hero (who)</a><br>
		<a href="#about-waitforkey">wait for key (key)</a><br>
		<a href="#about-waitformenu">wait for menu (menu handle)</a><br>
		<a href="#about-waitfornpc">wait for NPC (who)</a><br>
		<a href="#about-waitforscancode">wait for scancode (key)</a><br>
		<a href="#about-waitforslice">wait for slice (handle)</a><br>
		<a href="#about-waitforsound">wait for sound (num)</a><br>
		<a href="#about-waitfortextbox">wait for text box</a><br>
		<a href="#about-walkhero">walk hero (who, direction, distance)</a><br>
		<a href="#about-walkherotox">walk hero to x (who,x)</a><br>
		<a href="#about-walkherotoy">walk hero to y (who,x)</a><br>
		<a href="#about-walknpc">walk NPC (who, direction, distance)</a><br>
		<a href="#about-walknpctox">walk NPC to X (who, X)</a><br>
		<a href="#about-walknpctoy">walk NPC to Y (who, Y)</a><br>
		<a href="#about-wallconstants">Wall Bit Constants</a><br>
		<a href="#about-west">west</a><br>
		<a href="#about-westwall">west wall</a><br>
		<a href="#about-while">while(condition) do(commands)</a><br>
		<a href="#about-wrap">wrap</a><br>
		<a href="#about-writecolor">write color (index, element, value)</a><br>
		<a href="#about-writeenemydata">write enemy data (enemyid, data, value)</a><br>
		<a href="#about-writeglobal">write global (id,value)</a><br>
		<a href="#about-writemapblock">write map block (x, y, value, layer)</a><br>
		<a href="#about-writepassblock">write pass block (x,y,value)</a><br>
		<a href="#about-writepreferencebit">write preference bit (bitnum, value)</a><br>
		<a href="#about-writespell">write spell (hero, list, slot, attack)</a><br>
		<a href="#about-writewallbit">write wall bit (x, y, bit, value)</a><br>
		<a href="#about-writezone">write zone (zone id, x, y, value)</a><br>
		<a href="#about-xor">value,xor,value</a><br>
		<a href="#about-ysortchildren">Y sort children (handle)</a><br>
		<a href="#about-zoneatspot">zone at spot (x, y, count)</a><br>
		<a href="#about-zonenumberoftiles">zone number of tiles (zone id)</a><br></p>
<hr>
		<div class="section">
<a name="Declarations"></a>
		<h3>
<span class="backlink"></span>Declarations</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Declarations-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-plotscript">plotscript, name, argumentnames (statements)</a><br>
		<a href="#about-script">script, name, argumentnames (statements)</a><br>
		<a href="#about-subscript">subscript, name, argumentnames (statements)</a><br>
		<a href="#about-globalvariable">global variable (id,name)</a><br>
		<a href="#about-variable">variable (name)</a><br>
		<a href="#about-defineconstant">define constant (number,name)</a><br>
		<a href="#about-include">include, filename</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-plotscript"></a>
				<h4>plotscript, name, argumentnames (statements)</h4>
<p>
			
				The plotscript command contains a list of commands that can be triggered directly by an event in your game.
				<br>
				Plotscript starts with the keyword plotscript, a comma, and then the name of the plotscript.
				If there are any arguments to the script, you list their names separated by commas after the name of
				the script, optionally with default values declared like <span class="code">arg = defaultvalue</span>.
				<br>
				Then comes the text of the script.
				It is enclosed in <a href="#about-begin" class="ref">begin</a> and <a href="#about-end" class="ref">end</a> statements.
				Scripts that are defined as plotscripts can be called directly from "trigger" events in your game,
				or by name within other scripts.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					What's the difference between <span class="param">plotscript</span> and <a href="#about-script" class="ref">script</a>?
					<br>
					The only difference is that plotscripts are listed in the game editor,
					allowing them to be attached to triggers
					(such as the new-game script),
					while plain <span class="code">script</span>s are hidden and can't be selected.
					(Technically you can use a <span class="code">script</span> as a trigger,
					but only by using a command like <a href="#about-setdeathscript" class="ref">set death script</a>.)
				</div>
			
			
			<pre># example of a simple script
plotscript,my first script,begin
	# commands go here
end</pre><pre># example of a script with arguments
# (It can called with between 1 and 3 arguments.)
plotscript,my fancy script,fe,fi=0,fo=0,begin
	# commands go here,
	# and they can use the aruments fe, fi, and fo
	# that where passed to the script
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-script"></a>
				<h4>script, name, argumentnames (statements)</h4>
<p>
			The script command contains a list of commands. Script starts with the keyword script, a comma, and then the name of the script. If there are any arguments to the script, you list their names separated by commas after the name of the script with optional default values. Then comes the text of the script. It is enclosed in <a href="#about-begin" class="ref">begin</a> and <a href="#about-end" class="ref">end</a> statements. Scripts that are defined as script cannot be called directly from events in your game. They can only be called by name within other scripts. To make a script that can be run directly from your game, use <a href="#about-plotscript" class="ref">plotscript</a>.
			
			<pre># example of a simple script
script,my first script,begin
	# commands go here
end</pre><pre># Example of a script with arguments
# (It can called with between 1 and 3 arguments.)
script,my fancy script,fe,fi=0,fo=0,begin
	# Commands go here,
	# and they can use the aruments fe, fi, and fo
	# that where passed to the script.
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-subscript"></a>
				<h4>subscript, name, argumentnames (statements)</h4>
<p>
			<span class="param">subscript</span> is just like <a href="#about-script" class="ref">script</a> except that it must placed inside another script (or even inside another subscript). See <a href="#about-script" class="ref">script</a> for details of syntax of arguments. The difference from a regular script is that a subscript can only be called from its parent script (or some other subscript), and it can directly access its parent script's variables in addition to its own arguments and variables. Subscripts can be useful when you have some piece of repeated code that you want to "de-duplicate" by moving into another script which you can call repeatedly, but without having to turn local variables into global variables.
			
			<pre># Some nearby NPCs move into a line to the north of the hero
plotscript, line up soldiers, begin
	show textbox(32)  # "Yes sir!"
	wait for textbox
	suspend player
	set hero direction(me, up)
	variable (x, y)
	# The position of the start of the line
	x := hero X(me) -- 2
	y := hero Y(me) -- 4
	subscript, line up NPC, npc, begin
		# Increment X to get next position in the line
		x += 1
		walk NPC to X(npc, x)
		wait for NPC(npc)
		walk NPC to Y(npc, y)
		wait for NPC(npc)
		set NPC direction(npc, down)
	end
	# NPCs move one at a time
	line up NPC(1)
	line up NPC(3)
	line up NPC(11)
	line up NPC(10)
	line up NPC(5)
	resume player
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-globalvariable"></a>
				<h4>global variable (id,name)</h4>
<p>
			Creates a global variable that can be used in any script. The first argument to the global variable declaration is a unique ID number. The second argument is the name of the variable. The ID number for a global variable is a number from 0 to 16383. Each global variable must have a unique number, but this number will not conflict with the ID numbers you use for scripts. It is all right to have a script and a global variable with the same ID number. See also <a href="#about-variable" class="ref">variable</a>
			
			<pre># any script can read and set the value of a global
global variable(1,mini game score)</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-variable"></a>
				<h4>variable (name)</h4>
<p>
			Creates a local variable that can only be used inside the script where it was created. The value of this variable is lost when the script ends. If you need a variable who's value persists between calls to a script, or that is automatically saved when the player saves their game, you will need to use a <a href="#about-globalvariable" class="ref">global variable</a> instead.
			
			<pre>variable(points) # make a new variable
variable+=1 # add one to it</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-defineconstant"></a>
				<h4>define constant (number,name)</h4>
<p>
			
				Creates a global constant.
				The first argument is the number that the constant will represent, and the second argument is the name of the constant.
				Use constants to replace commonly used numbers with friendly names.
				The following are some general purpose constants have been defined for you
				(there are hundreds more intended for specific commands):
				<br>
				<span class="code">zero</span> <span class="code">one</span> <span class="code">two</span> <span class="code">three</span> <span class="code">four</span> <span class="code">five</span> <span class="code">six</span> <span class="code">seven</span> <span class="code">eight</span> <span class="code">nine</span> <span class="code">ten</span>
				<a href="#about-false" class="ref">false</a> <a href="#about-true" class="ref">true</a> <a href="#about-off" class="ref">off</a> <a href="#about-on" class="ref">on</a>
				<a href="#about-north" class="ref">north</a> <a href="#about-east" class="ref">east</a> <a href="#about-south" class="ref">south</a> <a href="#about-west" class="ref">west</a>
				<a href="#about-up" class="ref">up</a> <a href="#about-down" class="ref">down</a> <a href="#about-left" class="ref">left</a> <a href="#about-right" class="ref">right</a>
				<a href="#about-me" class="ref">me</a>
				<a href="#about-none" class="ref">none</a>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-include"></a>
				<h4>include, filename</h4>
<p>
			The include command effectively inserts another text file into your script. It is followed by a single filename that tells what file will be included. This can be used to organise your scripts and other definitions like <a href="#about-defineconstant" class="ref">define constant</a> into multiple files. The filename can include a path, for example <span class="param">include, ..\utility scripts\math.hss</span>. You can optionally include quote marks around the filename, e.g. <span class="param">include, "misc.hss"</span>, which causes normal string parsing (for example, allowing a # character in a filename). <br>Previously every plotscript file had to start with <span class="param">include, plotscr.hsd</span> but this is now optional. <span class="param">plotscr.hsd</span>, <span class="param">scancode.hsi</span>, and the exported <span class="param">your game name.hsi</span> file are all automatically included.
			
			<pre>include, cutscenes.hss  # All scripts for cutscenes
include, ..\utility scripts\math.hss  # A few useful scripts shared between multiple games</pre>
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Math,%20Comparison,%20and%20Logic%20Operators"></a>
		<h3>
<span class="backlink"></span>Math, Comparison, and Logic Operators</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Math, Comparison, and Logic Operators-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-add">number + number</a><br>
		<a href="#about-subtract">number -- number</a><br>
		<a href="#about-multiply">number * number</a><br>
		<a href="#about-divide">number / number</a><br>
		<a href="#about-modulus">number,mod,number</a><br>
		<a href="#about-exponent">number ^ power</a><br>
		<a href="#about-abs">abs (number)</a><br>
		<a href="#about-sign">sign (number)</a><br>
		<a href="#about-sqrt">sqrt (number)</a><br>
		<a href="#about-equal">number == number</a><br>
		<a href="#about-notequal">number &lt;&gt; number</a><br>
		<a href="#about-lessthan">number &lt; number</a><br>
		<a href="#about-greaterthan">number &gt; number</a><br>
		<a href="#about-lessthanorequalto">number &lt;= number</a><br>
		<a href="#about-greaterthanorequalto">number &gt;= number</a><br>
		<a href="#about-and">value,and,value</a><br>
		<a href="#about-or">value,or,value</a><br>
		<a href="#about-xor">value,xor,value</a><br>
		<a href="#about-logicaland">value &amp;&amp; value</a><br>
		<a href="#about-logicalor">value || value</a><br>
		<a href="#about-logicalxor">value ^^ value</a><br>
		<a href="#about-not">not (value)</a><br>
		<a href="#about-random">random (lownumber, highnumber)</a><br>
		<a href="#about-seedrandom">seed random (seed)</a><br>
		<a href="#about-multdiv">multdiv (a, b, c)</a><br>
</div>
		<li>
<a href="#Working%20with%20Variables">Working with Variables</a><br>
		<ul class="content-shown">
		<a href="#about-setvariable">variable := value</a><br>
		<a href="#about-increment">increment (variable,amount)</a><br>
		<a href="#about-decrement">decrement (variable,amount)</a><br>
		<a href="#about-readglobal">read global (id)</a><br>
		<a href="#about-writeglobal">write global (id,value)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-add"></a>
				<h4>number + number</h4>
<p>
			Adds two values together and returns the result. This can also be written as <span class="param">add(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-subtract"></a>
				<h4>number -- number</h4>
<p>
			Subtracts the second number from the first number and returns the result. It is necessary to use the double minus so that HSPEAK.EXE can tell the difference between subtraction, and a minus sign that indicates a negative number. You can also write <span class="param">subtract(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-multiply"></a>
				<h4>number * number</h4>
<p>
			Multiplies two values together and returns the result. This can also be written as <span class="param">multiply(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-divide"></a>
				<h4>number / number</h4>
<p>
			Divides the second number into the first number and returns the result. The result is rounded down to an integer. This can also be written as <span class="param">divide(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-modulus"></a>
				<h4>number,mod,number</h4>
<p>
			Divides the second number into the first number and returns the remainder. This can also be written as <span class="param">modulus(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-exponent"></a>
				<h4>number ^ power</h4>
<p>
			Raises a number to a power and returns the result. (If the result is too large and overflows no error occurs: the value is simply wrapped around a 32 bit signed integer.) This can also be written as <span class="param">exponent(number,power)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-abs"></a>
				<h4>abs (number)</h4>
<p>
			Returns the absolute value of a value. That is, negative values are made positive and others are unchanged: abs(-14) is 14, and abs(14) is 14.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sign"></a>
				<h4>sign (number)</h4>
<p>
			Returns -1 if <span class="param">number</span> is negative, 0 if it is 0, and 1 if <span class="param">number</span> is positive.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sqrt"></a>
				<h4>sqrt (number)</h4>
<p>
			Returns the squareroot of a number, rounded to the nearest integer.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-equal"></a>
				<h4>number == number</h4>
<p>
			Checks to see if the two numbers are equal. If they are equal it returns true, otherwise it returns false. This can also be written as <span class="param">equal(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-notequal"></a>
				<h4>number &lt;&gt; number</h4>
<p>
			Checks to see if the two numbers are not equal. If they are not equal it returns true. If they are equal it returns false. This can also be written as <span class="param">not equal(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-lessthan"></a>
				<h4>number &lt; number</h4>
<p>
			Checks to see if the first number is less than the second number. If it is, it returns true, otherwise it returns false. This can also be written as <span class="param">less than(number,number)</span> and as <span class="param">number &lt;&lt; number</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-greaterthan"></a>
				<h4>number &gt; number</h4>
<p>
			Checks to see if the first number is greater than the second number. If it is, it returns true, otherwise it returns false. This can also be written as <span class="param">greater than(number,number)</span> and as <span class="param">number &gt;&gt; number</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-lessthanorequalto"></a>
				<h4>number &lt;= number</h4>
<p>
			Checks to see if the first number is less than or equal to the second number. If it is, it returns true, otherwise it returns false. This can also be written as <span class="param">less than or equal to(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-greaterthanorequalto"></a>
				<h4>number &gt;= number</h4>
<p>
			Checks to see if the first number is greater than or equal to the second number. If it is, it returns true, otherwise it returns false. This can also be written as <span class="param">greater than or equal to(number,number)</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-and"></a>
				<h4>value,and,value</h4>
<p>
			Returns the bitwise AND of both values. In other words, for each bit in each value, they are compared to see if they are both "1". If they are, the result bit is set to 1. Otherwise, it's set to 0.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-logicaland" class="ref">&amp;&amp;</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-or"></a>
				<h4>value,or,value</h4>
<p>
			Returns the bitwise OR of both values. In other words, for each bit in each value, they are compared to see if either bit is "1". If one is, the result bit is set to 1. Otherwise, it's set to 0.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-logicalor" class="ref">||</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-xor"></a>
				<h4>value,xor,value</h4>
<p>
			Returns the bitwise AND of both values. In other words, for each bit in each value, they are compared to see if either (but not both!) bit is "1". If ONE is, the result bit is set to 1. Otherwise, it's set to 0.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-logicalxor" class="ref">^^</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-logicaland"></a>
				<h4>value &amp;&amp; value</h4>
<p>
			Returns true if both of the values are true (non-zero). If either of them is false, and returns false. This command uses shortcut evaluation: if the first argument is false, the second argument is never evaluated.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-logicalor"></a>
				<h4>value || value</h4>
<p>
			Returns true if at least one of the values are true (non-zero). Only if both of them are false does or return false. This command uses shortcut evaluation: if the first argument is true, the second argument is never evaluated.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-logicalxor"></a>
				<h4>value ^^ value</h4>
<p>
			Returns true if one, but not both of the values are true (non-zero). If both of them are true, or both of them are false, ^^ returns false.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-not"></a>
				<h4>not (value)</h4>
<p>
			Returns the logical complement/negation of a value. That is, it returns true (1) if the value is false (0), or false (0) if the value is true (non-zero).
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-random"></a>
				<h4>random (lownumber, highnumber)</h4>
<p>
			Returns a random integer in the range of the two numbers. The returned value will be greater than or equal to the first number, and less than or equal to the second number
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-seedrandom"></a>
				<h4>seed random (seed)</h4>
<p>
			
				Reseeds the random number generator.
				If you pass in a <span class="param">seed</span> (number) other than 0, the random number generator will be seeded with that number,
				allowing for repeatable random sequences - <a href="#about-random" class="ref">random</a> will always return the same sequence
				of random numbers afterwards. Each seed causes a completely different sequence.
				<br>
				If called with no argument (or <span class="param">seed</span> = 0), this will reseed the random number generator to a new random sequence
				(which is useful only if you've previously called <span class="code">seed random(...)</span> to put it into
				a predictable sequence.)
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You don't need to call this command before using <a href="#about-random" class="ref">random</a>.
					In fact, this command is useful only if you <b>don't</b> want completely random numbers.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-random" class="ref">random</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-multdiv"></a>
				<h4>multdiv (a, b, c)</h4>
<p>
			
				Computes <span class="code">(a * b) / c</span> with rounding, and without overflowing.
				The intermediate result is performed in floating point so that it won't overflow,
				and the final result is clamped to the range of a 32-bit integer.
				<br>
				This is equivalent to <span class="code">min(2^31 - 1, max(-2^31, round(1.0 * a * b / c)))</span> in other languages.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Working%20with%20Variables"></a>
		<h3>
<span class="backlink"><a href="#Math,%20Comparison,%20and%20Logic%20Operators">Math, Comparison, and Logic Operators</a> →
			</span>Working with Variables</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-setvariable"></a>
				<h4>variable := value</h4>
<p>
			
				This command assigns a new value to a variable.
				If you do not specify the new value, the variable will be reset to zero.
				This command works exactly the same for global and local variables.
				<br>
				The <span class="code">:=</span> operation actually returns <span class="param">value</span>, so you can use it
				as an expression, for example in <span class="code">temp1 := (temp2 := 1)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-increment"></a>
				<h4>increment (variable,amount)</h4>
<p>
			
				or<br><span class="param">variable += amount</span>
				<br>
				This command adds an amount to the current value of a variable.
				If you do not specify the amount, then the variable will be incremented by one.
				This command works exactly the same for global and local variables.
				<br>
				The <span class="code">+=</span> operation actually returns the new value of <span class="param">variable</span>,
				so you can use it as an expression, for example in <span class="code">while ((index += 1) &lt; 10)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-decrement"></a>
				<h4>decrement (variable,amount)</h4>
<p>
			
				or<br><span class="param">variable -= amount</span>
				<br>
				This command subtracts an amount from the current value of a variable.
				If you do not specify the amount, then the variable will be decremented by one.
				This command works exactly the same for global and local variables.
				<br>
				The <span class="code">-=</span> operation actually returns the new value of <span class="param">variable</span>,
				so you can use it as an expression, for example in <span class="code">while (index -= 1)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-readglobal"></a>
				<h4>read global (id)</h4>
<p>
			A function that returns the value of a global variable using its ID number instead of its name. Why would you want to do a silly thing like that? Because it allows you to simulate simple fake arrays, in the old C-pointer style.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-writeglobal" class="ref">write global</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-writeglobal"></a>
				<h4>write global (id,value)</h4>
<p>
			A function that writes a value into a global variable using its ID number instead of its name. Why would you want to do a silly thing like that? Because it allows you to simulate simple fake arrays, in the old C-pointer style
			
			
			<div class="seealso">See also: <ul><li><a href="#about-readglobal" class="ref">read global</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Flow%20Control"></a>
		<h3>
<span class="backlink"></span>Flow Control</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Flow Control-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-begin">begin,other commands,end</a><br>
		<a href="#about-end">end</a><br>
		<a href="#about-if">if(condition) then(commands) else(commands)</a><br>
		<a href="#about-elseif">... else if(condition) then(commands) ...</a><br>
		<a href="#about-if">then</a><br>
		<a href="#about-if">else</a><br>
		<a href="#about-while">while(condition) do(commands)</a><br>
		<a href="#about-do">do</a><br>
		<a href="#about-for">for(counter,start,finish,step) do(commands)</a><br>
		<a href="#about-return">return(value)</a><br>
		<a href="#about-exitreturning">exit returning(value)</a><br>
		<a href="#about-exitscript">exit script</a><br>
		<a href="#about-break">break</a><br>
		<a href="#about-continue">continue</a><br>
		<a href="#about-switch">switch(expression)</a><br>
		<a href="#about-case">case(value)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-begin"></a>
				<h4>begin,other commands,end</h4>
<p>
			
				<span class="code">begin</span> is a synonym for <span class="code">(</span> and <span class="code">end</span> is a synonym for <span class="code">)</span>.
				Parentheses are normally used for bracketing things that all fit on the same line,
				and begin/end statements are often used to enclose very long things such as whole
				scripts or long flow control blocks that take up several lines.
				For example, the following:
				<pre>if (check tag(tag:have rusty sword)) then (show text box (5), wait for text box)</pre>
				is equivalent to:
				<pre>if (check tag(tag:have rusty sword)) then, begin
	show text box (5)
	wait for text box
end</pre>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-end"></a>
				<h4>end</h4>
<p>
			See <a href="#about-begin" class="ref">begin</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-if"></a>
				<h4>if(condition) then(commands) else(commands)</h4>
<p>
			The <span class="param">if</span> statement checks the value of its condition, and if the value is <a href="#about-true" class="ref">true</a> (actually, any value other than <a href="#about-false" class="ref">false</a> (which is zero) counts as true), it runs the commands in the <span class="param">then</span> block. If the value is <a href="#about-false" class="ref">false</a>, it runs the commands in its <span class="param">else</span> block. The conditional is usually a comparison operator such as <a href="#about-equal" class="ref">==</a> or <a href="#about-notequal" class="ref">&lt;&gt;</a>, or a command which returns either true or false, such as <a href="#about-checktag" class="ref">check tag</a>. The <span class="param">else</span> is optional as long as you have a <span class="param">then</span>, and the <span class="param">then</span> is optional as long as you have an <span class="param">else</span>. You can also place one or more <a href="#about-elseif" class="ref">else if</a>s after the <span class="param">then</span> (or immediately after the <span class="param">if</span> if you skip the <span class="param">then</span>) instead of nesting multiple <span class="param">if</span> statements.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-elseif" class="ref">else if</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-elseif"></a>
				<h4>... else if(condition) then(commands) ...</h4>
<p>
			This can appear after an <a href="#about-if" class="ref">if</a> or <a href="#about-if" class="ref">then</a> block. It is a shortcut for <a href="#about-if" class="ref">else</a> followed by <a href="#about-if" class="ref">if</a> which lets you omit a pairs of brackets/<a href="#about-begin" class="ref">begin</a> and <a href="#about-end" class="ref">end</a>, as this example shows:
			<pre>if (inventory (item:apple)) then (
  show text box (10)  # "Apples! My favourite!"
) else if (inventory (item:orange)) then (
  show text box (11)  # "My, what a tasty looking orange..."
) else if (inventory (item:pear)) then (
  show text box (12)  # "Perhaps if you gave me that pear..."
) else (
  show text box (13)  # "Come back when you have something tasty for me!"
)</pre>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-then"></a>
				<h4>then</h4>
				An alias for <a href="#about-if">if</a>.
			</div>
		<div class="command">
			<a name="about-else"></a>
				<h4>else</h4>
				An alias for <a href="#about-if">if</a>.
			</div>
		<div class="command">
			<a name="about-while"></a>
				<h4>while(condition) do(commands)</h4>
<p>
			The while command checks the value of its condition, and if the value is <a href="#about-true" class="ref">true</a> it runs the commands in the do block. It keeps checking the conditional and runs the do block over and over again until the conditional returns <a href="#about-false" class="ref">false</a>. The conditional is usually an equality operator such as <a href="#about-equal" class="ref">==</a> or <a href="#about-notequal" class="ref">&lt;&gt;</a>, or it is a check tag command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-do"></a>
				<h4>do</h4>
<p>
			Used to group several statements together. Normally appears after a <a href="#about-while" class="ref">while</a>, <a href="#about-for" class="ref">for</a> or <a href="#about-switch" class="ref">switch</a>. However, <span class="param">do</span> blocks can actually appear by themselves. This is useful if you want to <a href="#about-break" class="ref">break</a> out of them to skip to the end. (<a href="#about-continue" class="ref">continue</a> inside an orphan <span class="param">do</span> block acts just like <span class="param">break</span>.)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-while" class="ref">while</a>, </li>
<li>
<a href="#about-for" class="ref">for</a>, </li>
<li><a href="#about-switch" class="ref">switch</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-for"></a>
				<h4>for(counter,start,finish,step) do(commands)</h4>
<p>
			The for command runs the commands in the do block a specified number of times. The first argument to for is the counter. It must be a variable. The next two arguments are the starting value and the finishing value. For example, if you use a start value of 1 and a finish value of 10 then the do block will run 10 times. The first time the do block runs, the counter will be 1, then it will be 2, then 3 and so on until it reaches 10, the finish value. The fourth argument of for is optional. It is the step by which the counter will change each loop. If you use a step of 2 then the counter will count 1,3,5,7,9. If you switch the start and finish values and use a step of -1 then the counter will go backwards. If you use 0 as the step, the counter will never change, so the do block will repeat forever. See <a href="#about-return" class="ref">return</a> and <a href="#about-puthero" class="ref">put hero</a> for examples.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-return"></a>
				<h4>return(value)</h4>
<p>
			
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					<span class="param">return</span> in HamsterSpeak is very different from <span class="param">return</span> in nearly all other programming languages!
				</div>
				Sets the value to be returned by the script.
				This is only useful when the script has been called as a function from another script.
				It is irrelevant to scripts called directly from your RPG,
				for example, text box scripts or menu scripts.
				This command only matters when you are calling one script from another script.
				This command does NOT cause the script to terminate, it just sets the return value.
				If you never use the <span class="param">return</span> command, the script will return zero.
				If return is used more than once in the same script, only the last one executed matters.
<pre>
script, key wait, ticks, begin
  # Returns true if a key was pressed during the wait,
  # or false (0) if the wait finished uninterrupted.
  # The wait duration is always the same. (Compare with the example for "exit returning".)
  variable(i)
  for(i, 1, ticks) do, begin
    wait(1)
    if(key is pressed(use key)) then(return(true))
    if(key is pressed(menu key)) then(return(true))
  end
end

plotscript, usage example, begin
  show text box(5) # let all volunteers take one step forward!
  if(key wait(40)) then(
    walk hero(me, north, 1)
    wait for hero(me)
    show text box(6) # You there! I saw you move! You volunteer!
  )else(
    show text box(7) # a bunch of lily livered cowards, eh?
  )
end
</pre>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-exitreturning" class="ref">exit returning</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-exitreturning"></a>
				<h4>exit returning(value)</h4>
<p>
			Sets the value to be returned by the script, and exits the script. This is only useful when the script has been called as a function from another script.
<pre>
script, key wait, ticks, begin
  # Returns true if the wait was cancelled by a keypress.
  variable(i)
  for(i, 1, ticks) do, begin
    wait(1)
    if(key is pressed(use key)) then(exit returning(true))
    if(key is pressed(menu key)) then(exit returning(true))
  end
end

plotscript, usage example, begin
  show text box(5) # let all volunteers take one step forward!
  if(key wait(40)) then(
    walk hero(me, north, 1)
    wait for hero(me)
    show text box(6) # You there! I saw you move! You volunteer!
  )else(
    show text box(7) # a bunch of lily livered cowards, eh?
   )
end
</pre>
The <span class="param">exit returning</span> command works exactly the same as the <a href="#about-return" class="ref">return</a> command followed immediately by <a href="#about-exitscript" class="ref">exit script</a>. Whether you decide to use <a href="#about-return" class="ref">return</a> or <span class="param">exit returning</span> to set your script's return value is often just a matter of style and taste.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-return" class="ref">return</a>, </li>
<li><a href="#about-exitscript" class="ref">exit script</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-exitscript"></a>
				<h4>exit script</h4>
<p>
			
				Causes the script to end immediately, and return the value set by the most recent <a href="#about-return" class="ref">return</a> statement.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-exitreturning" class="ref">exit returning</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-break"></a>
				<h4>break</h4>
<p>
			Breaks out of a <a href="#about-for" class="ref">for</a> or <a href="#about-while" class="ref">while</a> loop or <a href="#about-switch" class="ref">switch</a> and continues the script after the end of the <a href="#about-do" class="ref">do</a> block.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-continue"></a>
				<h4>continue</h4>
<p>
			When used inside the <a href="#about-do" class="ref">do</a> block of a <a href="#about-for" class="ref">for</a> or <a href="#about-while" class="ref">while</a> command, <span class="param">continue</span> skips the rest of the do block and continues on to the next loop. When used inside a <a href="#about-switch" class="ref">switch</a> statement, continue causes a jump to after the next <a href="#about-case" class="ref">case</a> block.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-switch"></a>
				<h4>switch(expression)</h4>
<p>
			Select between a number of <a href="#about-case" class="ref">case</a> blocks to execute based on the value of an expression. The switch command is an alternative to a big block of nested <a href="#about-if" class="ref">if</a>/then/else commands that all check the same value. Switch can be easier to read than a lot of if's. Consider the follow script snippet:
<pre>if (v == 0) then (
  something
) else if (v == 1 || v == 2) then (
  something else
) else if (v == 3 || v == 4) then (
  yet another thing
) else if (v == 10) then (
  #nothing happens here
) else (
  something to do if none of the other ifs are true
)</pre>
This is a good candidate for using switch. The example below shows how this can be done:
<pre>switch(v) do(
  case(0) do(
    something
  )
  case(1, 2) do(  # A case can contain multiple values...
    something else
  )
  case(3)
  case(4) do(  # ...or you can use multiple cases after another
    yet another thing
  )
  case(10) do()  #nothing happens here
  else(
    something to do if none of the cases happen
  )
)</pre>
The <span class="param">else</span> section is optional.
There are two different styles (syntaxes) in which switch can be written. The second style looks like this (completely equivalent to the above example):
<pre>switch(v) do(
  case(0)    something
  case(1, 2) something else
  case(3)    
  case(4)    yet another thing
  case(10)   do() #nothing happens here
  case(else) something to do if none of the cases happen
)</pre>
Besides readability, there is one other important difference between using switch and using a sequence of if's. The switch command only checks the value of the expression (v) once. The if/then/else method checks v repeatedly, so it could be slower, and could be susceptible to errors if you accidentally change the value of v somewhere in the middle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-case"></a>
				<h4>case(value)</h4>
<p>
			The case command is used to enclose a block of commands for one possible result of a <a href="#about-switch" class="ref">switch</a> command. See <a href="#about-switch" class="ref">switch</a> for more details.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Wait%20Commands"></a>
		<h3>
<span class="backlink"></span>Wait Commands</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>
			Note that all of the wait commands wait for at least one tick,
			even if the thing they are waiting for is false
			(unless you call a command with invalid arguments, causing a script error instead).
			For example, "wait for textbox" waits for one tick even if there is no textbox.
			<br>
			<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
				If a battle occurs, a menu is entered (unless it 'Allows Scripts') or
				another script is triggered, your script will be paused until the other
				thing finishes.
				While paused, any wait commands don't continue checking.
				For example, <a href="#about-wait" class="ref">wait</a> stops counting down, and
				<a href="#about-waitfornpc" class="ref">wait for NPC</a> doesn't end if the NPC it's waiting for
				stops moving while a script is paused but then starts again
				before it the script resumes.
			</div>
		</p>
<div class="select-content-shown" id="Wait Commands-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-wait">wait (ticks)</a><br>
		<a href="#about-waitfortextbox">wait for text box</a><br>
		<a href="#about-waitformenu">wait for menu (menu handle)</a><br>
		<a href="#about-waitforhero">wait for hero (who)</a><br>
		<a href="#about-waitforkey">wait for key (key)</a><br>
		<a href="#about-waitforscancode">wait for scancode (key)</a><br>
		<a href="#about-waitfornpc">wait for NPC (who)</a><br>
		<a href="#about-waitforcamera">wait for camera</a><br>
		<a href="#about-waitforall">wait for all</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-wait"></a>
				<h4>wait (ticks)</h4>
<p>
			
				Makes the script wait for the specified number of ticks.
				There are roughly 18 ticks to a second, but this can vary under some conditions.
				If you leave out the argument, it will wait for one tick.
			
			
			<pre>show text box(2) # Show a text box
wait(50) # Wait about 3 seconds
advance text box # "hit spacebar"</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-waitfortextbox"></a>
				<h4>wait for text box</h4>
<p>
			
				Makes the script wait until there is no text box displaying on the screen.
				Useful to know when to move on after using a <a href="#about-showtextbox" class="ref">show text box</a> command.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					<span class="code">wait for text box</span> doesn't wait if <a href="#about-suspendboxadvance" class="ref">suspend box advance</a> has been used, because it's impossible for the player to advance the textbox!
				</div>
			
			
			<pre>show text box(2) # Show a text box
wait for text box # wait until the player continues</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-waitformenu"></a>
				<h4>wait for menu (menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, causes the script to wait until that menu has been closed.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-waitforhero"></a>
				<h4>wait for hero (who)</h4>
<p>
			Waits for the specified hero stop walking. Use the constant <a href="#about-me" class="ref">me</a> to refer to the leader, or use numbers 0,1,2,3 to refer to a specific hero. If you leave out the argument, the first hero will be assumed.
			
			<pre>move hero to y (me, 10) # move hero to (x, 10)
wait for hero (me) # wait until he stops</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-walkhero" class="ref">walk hero</a>, </li>
<li><a href="#about-pathfindheroto" class="ref">pathfind hero to</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-waitforkey"></a>
				<h4>wait for key (key)</h4>
<p>
			
				Waits for the player to press a key.
				(Specially, (possibly repeated) keypresses or mouse button release.)
				<span class="param">key</span> is an optional <a href="#about-scancode" class="ref">scancode</a> such as a keyboard key (e.g. <span class="code">key:ctrl</span>)
				a joystick button (e.g. <span class="code">joy:left</span>), or a virtual scancode such as
				<a href="#about-usekey" class="ref">use key</a>.
				If you do not specify <span class="param">key</span>, then <a href="#about-anykey" class="ref">any key</a> will be used.
				<br>
				<a href="#about-anykey" class="ref">any key</a> waits for any keyboard or joystick button,
				and also waits for a mouse click if "'any key', etc, include mouse clicks" is
				turned on in the Mouse Controls menu.
				<span class="param">usekey</span> will wait for Space, Ctrl or Enter, joystick use key, and optionally left click;
				and <span class="param">cancelkey</span> and <span class="param">menukey</span> both wait for Alt or Esc,
				joystick cancel, and optionally right click.
				<br>
				If and only if <span class="code">anykey</span> is used, then <span class="param">waitforkey(anykey)</span> will return the scancode of the keyboard or joystick key that was pressed,
				but won't ever be a constant like <span class="code">usekey</span>.
				It returns a value &gt;= 180 if a mouse button was released (see scancode.hsi).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Previously you couldn't use scancodes like <span class="code">key:x</span>,
					and there was a separate <a href="#about-waitforscancode" class="ref">wait for scancode</a> command for those,
					but now you can use any scancode with <span class="code">wait for key</span>, and use any
					of the codes like <span class="code">use key</span> with other key commands like <a href="#about-keyispressed" class="ref">key is pressed</a>.
				</div>
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					While <span class="code">wait for key</span> waits, on-keypress scripts will not be triggered.
				</div>
			
			
			<pre>show text box(623) # "press cancel!"
wait for key(cancel key)</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-waitforscancode"></a>
				<h4>wait for scancode (key)</h4>
<p>
			Identical to <a href="#about-waitforkey" class="ref">wait for key</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-waitfornpc"></a>
				<h4>wait for NPC (who)</h4>
<p>
			Waits for the specified NPC to stop walking. The argument is either an NPC reference, or an NPC ID (if more than one copy of that NPC exists on the map, it only waits for the first one). Be aware that this command has the potention to wait forever, if the NPC will continue moving forever.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
				If the NPC ceases to exist, or if you move to a different map, then <span class="param">wait for npc</span> stops waiting (continues).
			</div>
			
			
			<pre>walk NPC (2,up,3) # make NPC 2 go up three spaces
wait for NPC (2) # wait until the NPC'S done</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-walknpc" class="ref">walk NPC</a>, </li>
<li><a href="#about-pathfindnpcto" class="ref">pathfind NPC to</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-waitforcamera"></a>
				<h4>wait for camera</h4>
<p>
			Wait for the camera to stop panning after a <a href="#about-pancamera" class="ref">pan camera</a>, <a href="#about-focuscamera" class="ref">focus camera</a> or <a href="#about-pixelfocuscamera" class="ref">pixel focus camera</a> command.
			
			<pre>pan camera (left,10) # show the villain 10 tiles off screen
wait for camera # wait until he's on screen</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-waitforall"></a>
				<h4>wait for all</h4>
<p>
			
				Waits for any camera motion due to <a href="#about-pancamera" class="ref">pan camera</a>, <a href="#about-focuscamera" class="ref">focus camera</a>, etc. to stop,
				waits for all heroes to stop walking and pathfinding, and waits for NPCs to stop <b>scripted</b> pathfinding
				(e.g. <a href="#about-pathfindnpcto" class="ref">pathfind NPC to</a>).
				If <a href="#about-suspendnpcs" class="ref">suspend NPCs</a> has been used then <a href="#about-waitforall" class="ref">wait for all</a> also waits for all NPCs to come to a halt.
				Beware that without <a href="#about-suspendnpcs" class="ref">suspend NPCs</a>, automatic NPC walking such as wandering, pacing, avoiding, or pathfinding,
				as well as movement due to <a href="#about-walknpc" class="ref">walk NPC</a>/<a href="#about-walknpctox" class="ref">walk NPC to X</a>/<a href="#about-walknpctoy" class="ref">walk NPC to Y</a> are ignored!
				That means that NPCs might still be partway between tiles.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					<span class="param">wait for all</span> does NOT wait for text boxes.
				</div>
			
			
			<pre># do a bunch of things all at once
suspend NPCs
walk hero(me, south, 3)
pathfind NPC to(4, 30, 35, 10)
NPC chases NPC(5, 4, false, 10)
pan camera(north, 20, 1)

# wait until everything is done
wait for all 

camera follows hero(me)
resume NPCs</pre>
			
		</p>
</div>
		<div class="command">
		<h4>wait for slice (handle)</h4>
		<p><a href="#about-waitforslice">Documented in the Moving Slices section.</a></p>
		</div>
		<div class="command">
		<h4>wait for dissolve (handle)</h4>
		<p><a href="#about-waitfordissolve">Documented in the Sprite Slices section.</a></p>
		</div>
		<div class="command">
		<h4>wait for sound (num)</h4>
		<p><a href="#about-waitforsound">Documented in the Sound Effects section.</a></p>
		</div>
		<hr>
		</div>
		<div class="section">
<a name="Working%20with%20Tags"></a>
		<h3>
<span class="backlink"></span>Working with Tags</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Working with Tags-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-settag">set tag (tag,value)</a><br>
		<a href="#about-checktag">check tag (tag)</a><br>
		<a href="#about-setonetime">set onetime (onetime,value)</a><br>
		<a href="#about-checkonetime">check onetime (onetime)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-settag"></a>
				<h4>set tag (tag,value)</h4>
<p>
			Sets the value of a tag. The available constants are: <a href="#about-off" class="ref">off</a>, <a href="#about-on" class="ref">on</a>, <a href="#about-true" class="ref">true</a>, or <a href="#about-false" class="ref">false</a>. You can specify the number of the tag, or you can use the constants in your HSI file. These constants are in the form of tag:name.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-checktag"></a>
				<h4>check tag (tag)</h4>
<p>
			A function that checks the value of a tag, and returns <a href="#about-true" class="ref">true</a> if the tag is turned on, and <a href="#about-false" class="ref">false</a> if the tag is turned off. It can be used in <a href="#about-if" class="ref">if</a> and <a href="#about-while" class="ref">while</a> statements. You can specify the number of the tag, or you can use the constants in your HSI file. These constants are in the form of tag:name.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setonetime"></a>
				<h4>set onetime (onetime,value)</h4>
<p>
			
				Sets the value of an NPC onetime use flag.
				NPC onetime use flags behave like tags but are stored separately.
				<span class="param">value</span> is the new setting; for clarity you can use the constants
				<a href="#about-off" class="ref">off</a>, <a href="#about-on" class="ref">on</a>, <a href="#about-true" class="ref">true</a>, or <a href="#about-false" class="ref">false</a>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-checkonetime"></a>
				<h4>check onetime (onetime)</h4>
<p>
			
				A function that checks the value of an NPC onetime flag,
				and returns <a href="#about-true" class="ref">true</a> if the one-time NPC has already been used,
				and <a href="#about-false" class="ref">false</a> if the onetime NPC has not yet been used.
				It can be used in <a href="#about-if" class="ref">if</a> and <a href="#about-while" class="ref">while</a> statements.
				NPC onetime flags are similar to tags, but stored separately.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Suspend%20and%20Resume"></a>
		<h3>
<span class="backlink"></span>Suspend and Resume</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Suspend and Resume-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-suspendplayer">suspend player</a><br>
		<a href="#about-resumeplayer">resume player</a><br>
		<a href="#about-playerissuspended">player is suspended</a><br>
		<a href="#about-suspendnpcs">suspend NPCs</a><br>
		<a href="#about-resumenpcs">resume NPCs</a><br>
		<a href="#about-npcsaresuspended">npcs are suspended</a><br>
		<a href="#about-suspendobstruction">suspend obstruction</a><br>
		<a href="#about-resumeobstruction">resume obstruction</a><br>
		<a href="#about-obstructionissuspended">obstruction is suspended</a><br>
		<a href="#about-suspendherowalls">suspend hero walls</a><br>
		<a href="#about-resumeherowalls">resume hero walls</a><br>
		<a href="#about-herowallsaresuspended">hero walls are suspended</a><br>
		<a href="#about-suspendnpcwalls">suspend NPC walls</a><br>
		<a href="#about-resumenpcwalls">resume NPC walls</a><br>
		<a href="#about-npcwallsaresuspended">npc walls are suspended</a><br>
		<a href="#about-suspendcaterpillar">suspend caterpillar</a><br>
		<a href="#about-resumecaterpillar">resume caterpillar</a><br>
		<a href="#about-caterpillarissuspended">caterpillar is suspended</a><br>
		<a href="#about-suspendcaterpillar">suspend catapillar</a><br>
		<a href="#about-resumecaterpillar">resume catapillar</a><br>
		<a href="#about-suspenddoors">suspend doors</a><br>
		<a href="#about-resumedoors">resume doors</a><br>
		<a href="#about-doorsaresuspended">doors are suspended</a><br>
		<a href="#about-suspendrandomenemies">suspend random enemies</a><br>
		<a href="#about-resumerandomenemies">resume random enemies</a><br>
		<a href="#about-randomenemiesaresuspended">random enemies are suspended</a><br>
		<a href="#about-suspendrandomenemies">suspend random enemys</a><br>
		<a href="#about-resumerandomenemies">resume random enemys</a><br>
		<a href="#about-suspendboxadvance">suspend box advance</a><br>
		<a href="#about-resumeboxadvance">resume box advance</a><br>
		<a href="#about-boxadvanceissuspended">box advance is suspended</a><br>
		<a href="#about-suspendtextboxcontrols">suspend text box controls</a><br>
		<a href="#about-resumetextboxcontrols">resume text box controls</a><br>
		<a href="#about-textboxcontrolsaresuspended">textbox controls are suspended</a><br>
		<a href="#about-suspendoverlay">suspend overlay</a><br>
		<a href="#about-resumeoverlay">resume overlay</a><br>
		<a href="#about-overlayissuspended">overlay is suspended</a><br>
		<a href="#about-suspendmapmusic">suspend map music</a><br>
		<a href="#about-resumemapmusic">resume map music</a><br>
		<a href="#about-mapmusicissuspended">map music is suspended</a><br>
		<a href="#about-suspendtimers">suspend timers</a><br>
		<a href="#about-resumetimers">resume timers</a><br>
		<a href="#about-timersaresuspended">timers are suspended</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-suspendplayer"></a>
				<h4>suspend player</h4>
<p>
			
				Blocks the player from controlling the game, so the plotscript can have exclusive control.
				The exceptions to this are text boxes and menus.
				<br>
				The player can advance text boxes no matter what, unless you use <a href="#about-suspendboxadvance" class="ref">suspend box advance</a>.
				<br>
				<span class="code">suspend player</span> prevents the player from opening the main menu using the menu key (ESC/etc),
				but it doesn't suspend controls on any menu or the player's ability to close menus with
				the menu key.
				(You can change that with <a href="#about-setmenubit" class="ref">set menu bit</a><span class="code">(menu handle, menubit:no controls, true)</span>
				where <span class="code">menu handle</span> might for example be <a href="#about-topmenu" class="ref">top menu</a>.)
			
			
			<pre>suspend player
# do stuff
resume player</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-resumeplayer"></a>
				<h4>resume player</h4>
<p>
			Restores normal control after a <a href="#about-suspendplayer" class="ref">suspend player</a> command. This is very important. If you use <a href="#about-suspendplayer" class="ref">suspend player</a>, but forget resume player, the game will be stuck after the script ends.
			
			<pre>suspend player
# do stuff
resume player</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-playerissuspended"></a>
				<h4>player is suspended</h4>
<p>
			Returns true if <a href="#about-suspendplayer" class="ref">suspend player</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendnpcs"></a>
				<h4>suspend NPCs</h4>
<p>
			
				Stops NPCs from walking around automatically (ie, suspends NPC AI).
				When <span class="code">suspend NPCs</span> is run, all NPCs stop in their tracks once they've
				finished their current step to the next tile, ready for you to control them
				with commands like <a href="#about-walknpc" class="ref">walk NPC</a> and <a href="#about-pathfindnpcto" class="ref">pathfind NPC to</a>.
				You should use a wait command like <a href="#about-waitfornpc" class="ref">wait for NPC</a> to ensure an NPC has
				finished its current movement before getting it to start a new one (which could
				cause tile misalignment).
				<br>
				Use <a href="#about-setnpcmoves" class="ref">set NPC moves</a>(who, false) instead to prevent a single NPC from moving.
			
			
			<pre>suspend NPCs
# do stuff
resume NPCs</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-waitfornpc" class="ref">wait for NPC</a>, </li>
<li>
<a href="#about-waitforall" class="ref">wait for all</a>, </li>
<li><a href="#about-setnpcmoves" class="ref">set NPC moves</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-resumenpcs"></a>
				<h4>resume NPCs</h4>
<p>
			Restores automatic NPC movement after a <a href="#about-suspendnpcs" class="ref">suspend NPCs</a> command. This does not resume NPCs suspended with <a href="#about-setnpcmoves" class="ref">set NPC moves</a>.
			
			<pre>suspend NPCs
# do stuff
resume NPCs</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-npcsaresuspended"></a>
				<h4>npcs are suspended</h4>
<p>
			Returns true if <a href="#about-suspendnpcs" class="ref">suspend NPCs</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendobstruction"></a>
				<h4>suspend obstruction</h4>
<p>
			Allows heroes to walk through NPCs, allows NPCs to walk through heroes, and allows NPCs to walk through each other. Also, when obstruction is suspended, step-on activated NPCs won't be activated, and of course NPCs can't be pushed. Use <a href="#about-resumeobstruction" class="ref">resume obstruction</a> to restore normal obstruction behavior. Use <a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a>(who, false) instead to allow a single NPC to move through heroes and NPCs, and vice-versa.
			
			<pre>suspend obstruction
# walk through things
resume obstruction</pre>
			<div class="seealso">See also: <ul><li><a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-resumeobstruction"></a>
				<h4>resume obstruction</h4>
<p>
			Restores normal obstruction after a <a href="#about-suspendobstruction" class="ref">suspend obstruction</a> command. This doesn't undo the effect of <a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a>.
			
			<pre>suspend obstruction
# walk through things
resume obstruction</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-obstructionissuspended"></a>
				<h4>obstruction is suspended</h4>
<p>
			Returns true if <a href="#about-suspendobstruction" class="ref">suspend obstruction</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendherowalls"></a>
				<h4>suspend hero walls</h4>
<p>
			Allows heroes to walk through walls, and to walk off the edge of the map. Use <a href="#about-resumeherowalls" class="ref">resume hero walls</a> to restore normal wall behavior.
			
			<pre>suspend hero walls # hero is now a ghost
# walk through things
resume hero walls # back to mortality...</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-resumeherowalls"></a>
				<h4>resume hero walls</h4>
<p>
			Restores normal wall behavior after a <a href="#about-suspendherowalls" class="ref">suspend hero walls</a> command
			
			<pre>suspend hero walls # hero is now a ghost
# walk through things
resume hero walls # back to mortality...</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-herowallsaresuspended"></a>
				<h4>hero walls are suspended</h4>
<p>
			Returns true if <a href="#about-suspendherowalls" class="ref">suspend hero walls</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendnpcwalls"></a>
				<h4>suspend NPC walls</h4>
<p>
			
				Allows NPCs to walk through walls, including to leave the zone they are restricted to,
				and to walk off the edge of the map.
				Use <a href="#about-resumenpcwalls" class="ref">resume NPC walls</a> to restore normal wall behavior.
				Use <a href="#about-setnpcignoreswalls" class="ref">set NPC ignores walls</a>(who, true) instead to allow a single NPC to walk through walls.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you use this command on a map with NPCs walking about normally
					you should use <a href="#about-suspendnpcs" class="ref">suspend NPCs</a> first, otherwise NPCs will
					start walking into walls and get stuck there when you call
					<a href="#about-resumenpcwalls" class="ref">resume NPC walls</a>!
					<br>
					Usually it is better to use <a href="#about-setnpcignoreswalls" class="ref">set NPC ignores walls</a>
					to allow just a specific NPC to walk through walls.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					NPCs will still be unable to walk through each other, or to walk through
					the hero.
					Use <a href="#about-suspendobstruction" class="ref">suspend obstruction</a> to allow that.
				</div>
			
			
			<pre>suspend NPC walls # npc is now a ghost
# walk through things
resume NPC walls # back to mortality...</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-resumenpcwalls"></a>
				<h4>resume NPC walls</h4>
<p>
			Restores normal wall behavior after a <a href="#about-suspendnpcwalls" class="ref">suspend NPC walls</a> command. This doesn't undo the effect of <a href="#about-setnpcignoreswalls" class="ref">set NPC ignores walls</a>.
			
			<pre>suspend NPC walls # npc is now a ghost
# walk through things
resume NPC walls # back to mortality...</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-npcwallsaresuspended"></a>
				<h4>npc walls are suspended</h4>
<p>
			Returns true if <a href="#about-suspendnpcwalls" class="ref">suspend NPC walls</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendcaterpillar"></a>
				<h4>suspend caterpillar</h4>
<p>
			Stops your other heroes from following the leader. This is useful when you want to control them individually with <a href="#about-walkhero" class="ref">walk hero</a> commands. In earlier versions this was misspelled as suspend catapillar. The old spelling still works for backwards compatibility. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If you want to set whether the other heroes in the party are visible, use <a href="#about-setcaterpillarmode" class="ref">set caterpillar mode</a>.</div>
			
			<pre>suspend caterpillar # cutscene
# move heroes, probably fight a battle or two...
resume caterpillar # normal game again.</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-resumecaterpillar"></a>
				<h4>resume caterpillar</h4>
<p>
			Reverses the <a href="#about-suspendcaterpillar" class="ref">suspend caterpillar</a> command, and makes your other heroes follow the leader as normal. In earlier versions this was misspelled as resume catapillar. The old spelling still works for backwards compatibility.
			
			<pre>suspend caterpillar # cutscene
# move heroes, probably fight a battle or two...
resume caterpillar # normal game again.</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-caterpillarissuspended"></a>
				<h4>caterpillar is suspended</h4>
<p>
			Returns true if <a href="#about-suspendcaterpillar" class="ref">suspend caterpillar</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendcatapillar"></a>
				<h4>suspend catapillar</h4>
				An alias for <a href="#about-suspendcaterpillar">suspend caterpillar</a>.
			</div>
		<div class="command">
			<a name="about-resumecatapillar"></a>
				<h4>resume catapillar</h4>
				An alias for <a href="#about-resumecaterpillar">resume caterpillar</a>.
			</div>
		<div class="command">
			<a name="about-suspenddoors"></a>
				<h4>suspend doors</h4>
<p>
			Stops doors from triggering when stepped on by the lead hero. One use is to allow you to script your own transitions between maps, using <a href="#about-dooratspot" class="ref">door at spot</a>, etc. While doors are suspended <a href="#about-usedoor" class="ref">use door</a> still works.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resumedoors"></a>
				<h4>resume doors</h4>
<p>
			Restores normal door triggering after a <a href="#about-suspenddoors" class="ref">suspend doors</a> command. If the lead hero is already standing on a door, it will not be triggered.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-doorsaresuspended"></a>
				<h4>doors are suspended</h4>
<p>
			Returns true if <a href="#about-suspenddoors" class="ref">suspend doors</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendrandomenemies"></a>
				<h4>suspend random enemies</h4>
<p>
			Prevents enemies from attacking your party while walking over tiles that can normally spawn random battles. This is useful to prevent battles from interrupting a plotscript. In earlier versions, this was misspelled as suspend random enemys. The old spelling still works for backwards compatibility.
			
			<pre>suspend random enemies # no battles for now
walk hero (me, up, 10) # cross pit of evil monsters of doom
resume random enemies # back to normal</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-resumerandomenemies"></a>
				<h4>resume random enemies</h4>
<p>
			Undoes the <a href="#about-suspendrandomenemies" class="ref">suspend random enemies</a> command and allows random battles to occur as normal. In earlier versions, this was misspelled as resume random enemys. The old spelling still works for backwards compatibility.
			
			<pre>suspend random enemies # no battles for now
walk hero (me, up, 10) # cross pit of evil monsters of doom
resume random enemies # back to normal</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-randomenemiesaresuspended"></a>
				<h4>random enemies are suspended</h4>
<p>
			Returns true if <a href="#about-suspendrandomenemies" class="ref">suspend random enemies</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendrandomenemys"></a>
				<h4>suspend random enemys</h4>
				An alias for <a href="#about-suspendrandomenemies">suspend random enemies</a>.
			</div>
		<div class="command">
			<a name="about-resumerandomenemys"></a>
				<h4>resume random enemys</h4>
				An alias for <a href="#about-resumerandomenemies">resume random enemies</a>.
			</div>
		<div class="command">
			<a name="about-suspendboxadvance"></a>
				<h4>suspend box advance</h4>
<p>
			
				Prevents the player from advancing text boxes by pressing the 'use' key.
				While this is active, the only way to make a text box advance is with the
				<a href="#about-advancetextbox" class="ref">advance text box</a> command (or <a href="#about-showtextbox" class="ref">show text box</a>)
				or using the "Advance text box when menu closes" menu bit.
				Useful for cut-scenes that play out like a movie,
				where the player just watches the dialogue unfold.
				Be very careful with this command,
				since you do not want to leave the player stuck on a text box forever.
				Undo with <a href="#about-resumeboxadvance" class="ref">resume box advance</a>.
				<br>
				Note that the player can still move the cursor in choiceboxes while this
				is active, use <a href="#about-suspendtextboxcontrols" class="ref">suspend text box controls</a> to disable that.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					<a href="#about-waitfortextbox" class="ref">wait for text box</a> does't wait while <span class="code">suspend box advance</span> is active!
				</div>
			
			
			<pre>suspend box advance # stop players from mucking things up
show text box(2)   # Show a text box
wait(45)           # Wait about 3 seconds
advance text box   # Next text box. Maybe it ends with "Press USE key to continue"
resume box advance # go back to normal</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-resumeboxadvance"></a>
				<h4>resume box advance</h4>
<p>
			Undoes the <a href="#about-suspendboxadvance" class="ref">suspend box advance</a> command, allowing the player to advance text boxes by pressing the use key, as normal.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-boxadvanceissuspended"></a>
				<h4>box advance is suspended</h4>
<p>
			Returns true if <a href="#about-suspendboxadvance" class="ref">suspend box advance</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendtextboxcontrols"></a>
				<h4>suspend text box controls</h4>
<p>
			
				Prevents the player from moving the cursor in choice boxes.
				In future this will also prevent the player from skipping pauses
				and fade-in animations for text boxes, once they are implemented.
				This does not prevent the player from advancing the text box,
				use <a href="#about-suspendboxadvance" class="ref">suspend box advance</a> for that.
				Undo with <a href="#about-resumetextboxcontrols" class="ref">resume text box controls</a>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resumetextboxcontrols"></a>
				<h4>resume text box controls</h4>
<p>
			
				Undoes the <a href="#about-suspendtextboxcontrols" class="ref">suspend text box controls</a> command, allowing the player to control choice boxes, as normal.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-textboxcontrolsaresuspended"></a>
				<h4>textbox controls are suspended</h4>
<p>
			Returns true if <a href="#about-suspendtextboxcontrols" class="ref">suspend text box controls</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendoverlay"></a>
				<h4>suspend overlay</h4>
<p>
			Draws old-style overhead tiles under heroes and NPCs instead of over them. This does not affect the drawing of normal layers. You might still find this useful for creating bridges or catwalks that can be walked on or passed under. Undo with <a href="#about-resumeoverlay" class="ref">resume overlay</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resumeoverlay"></a>
				<h4>resume overlay</h4>
<p>
			Undoes the <a href="#about-suspendoverlay" class="ref">suspend overlay</a> command, causing overhead tiles to be drawn over heroes and NPCs as normal.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-overlayissuspended"></a>
				<h4>overlay is suspended</h4>
<p>
			Returns true if <a href="#about-suspendoverlay" class="ref">suspend overlay</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendmapmusic"></a>
				<h4>suspend map music</h4>
<p>
			Causes ambient music not to automatically play when you enter a map. Does not affect the currently playing music, or the map's ambient music. Use when playing thematic music during a scene that involves changing maps.
			
			<pre># begin scene
play song(song:Happy Times)
show textbox (117)
wait for textbox
# goto another map without triggering music
fade screen out
wait
suspend map music
use door(3)
fade screen in
# continue scene
show textbox (118)
wait for textbox
# return to normal music behaviour and play the ambient music
resume map music
play song (get ambient music)</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setambientmusic" class="ref">set ambient music</a>, </li>
<li><a href="#about-getambientmusic" class="ref">get ambient music</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-resumemapmusic"></a>
				<h4>resume map music</h4>
<p>
			Causes ambient music to automatically start playing when you enter a map again after a <a href="#about-suspendmapmusic" class="ref">suspend map music</a> command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mapmusicissuspended"></a>
				<h4>map music is suspended</h4>
<p>
			Returns true if <a href="#about-suspendmapmusic" class="ref">suspend map music</a> is active.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-suspendtimers"></a>
				<h4>suspend timers</h4>
<p>
			Causes all plot timers started with <a href="#about-settimer" class="ref">set timer</a> to be paused. It does not cancel them. Undo with <a href="#about-resumetimers" class="ref">resume timers</a>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resumetimers"></a>
				<h4>resume timers</h4>
<p>
			Undoes <a href="#about-suspendtimers" class="ref">suspend timers</a>. All previously paused plot timers will become active again.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-timersaresuspended"></a>
				<h4>timers are suspended</h4>
<p>
			Returns true if <a href="#about-suspendtimers" class="ref">suspend timers</a> is active.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Moving%20Heroes"></a>
		<h3>
<span class="backlink"></span>Moving Heroes</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Moving Heroes-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-walkhero">walk hero (who, direction, distance)</a><br>
		<a href="#about-pathfindheroto">pathfind hero to (who, x, y, stuck ticks)</a><br>
		<a href="#about-herochasesnpc">hero chases npc (who, npc, stop when reached, stuck ticks)</a><br>
		<a href="#about-cancelherowalk">cancel hero walk (who)</a><br>
		<a href="#about-heroischasing">hero is chasing (who)</a><br>
		<a href="#about-setherodirection">set hero direction (who, direction)</a><br>
		<a href="#about-herodirection">hero direction (who)</a><br>
		<a href="#about-setheroframe">set hero frame (who, frame)</a><br>
		<a href="#about-heroframe">hero frame (who)</a><br>
		<a href="#about-setheroposition">set hero position (who, x, y)</a><br>
		<a href="#about-puthero">put hero (who, x, y)</a><br>
		<a href="#about-herox">hero X (who)</a><br>
		<a href="#about-heroy">hero Y (who)</a><br>
		<a href="#about-heropixelx">hero pixel X (who)</a><br>
		<a href="#about-heropixely">hero pixel Y (who)</a><br>
		<a href="#about-heroz">hero Z (who)</a><br>
		<a href="#about-setheroz">set hero z (who, z)</a><br>
		<a href="#about-walkherotox">walk hero to x (who,x)</a><br>
		<a href="#about-walkherotoy">walk hero to y (who,x)</a><br>
		<a href="#about-checkherowall">check hero wall (who,direction)</a><br>
		<a href="#about-getherospeed">get hero speed (who)</a><br>
		<a href="#about-setherospeed">set hero speed (who, speed)</a><br>
		<a href="#about-teleporttomap">teleport to map (map, x, y)</a><br>
		<a href="#about-heroiswalking">hero is walking (who)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-walkhero"></a>
				<h4>walk hero (who, direction, distance)</h4>
<p>
			Makes the specified hero move in the specified direction for the specified number of tiles. The first argument tells who to move. Use <a href="#about-me" class="ref">me</a> or numbers 0-3. The second argument is the direction. Use the constants: <a href="#about-north" class="ref">north</a>, <a href="#about-south" class="ref">south</a>, <a href="#about-east" class="ref">east</a>, <a href="#about-west" class="ref">west</a>, <a href="#about-up" class="ref">up</a>, <a href="#about-down" class="ref">down</a>, <a href="#about-left" class="ref">left</a>, or <a href="#about-right" class="ref">right</a>. The third argument is the number of tiles to move. If you leave out the third argument, the hero will move one tile. If you use a negative number for walk distance, the hero will walk backwards. Walk hero is usually used with the <a href="#about-waitforhero" class="ref">wait for hero</a> command. You should normally use the <a href="#about-suspendplayer" class="ref">suspend player</a> command before moving heroes, and if you want to move heroes other than the leader, you should use the <a href="#about-suspendcaterpillar" class="ref">suspend caterpillar</a> command.
			
			<pre>suspend player # stop player
walk hero(me,up,3) # move him up 3 tiles
resume player # OK, done</pre>
			
		</p>
</div>
		<div class="command">
		<h4>wait for hero (who)</h4>
		<p><a href="#about-waitforhero">Documented in the Wait Commands section.</a></p>
		</div>
		<div class="command">
			<a name="about-pathfindheroto"></a>
				<h4>pathfind hero to (who, x, y, stuck ticks)</h4>
<p>
			Makes the specified hero walk along the shortest path to the destination position. They will go around obstacles. If the destination cannot be reached at all, they will go to the closest reachable tile. The first argument <span class="param">who</span> is the hero's rank in the caterpillar party, or <a href="#about-me" class="ref">me</a> for the leader. When the caterpillar party is enabled, this command only works on the leader, and will do nothing for other heroes. Use <a href="#about-suspendcaterpillar" class="ref">suspend caterpillar</a> if you want to make the other heroes pathfind. Non-leader heroes do not treat NPCs as obstacles when they pathfind. The second argument is the destination <span class="param">x</span> tile coordinate. The third argument is the destination <span class="param">y</span> tile coordinate. The fourth argument <span class="param">stuck ticks</span> is optional. If it is included, a hero who gets stuck along the way for more than the specified number of ticks will give up and stop pathfinding to the target. If <span class="param">stop ticks</span> is omitted or zero, the hero will keep pathfinding even if it gets stuck, and will not stop until it reaches the destination, or is stopped with the <a href="#about-cancelherowalk" class="ref">cancel hero walk</a> command. Be careful if you are using <a href="#about-waitforhero" class="ref">wait for hero</a> to wait for <a href="#about-pathfindheroto" class="ref">pathfind hero to</a> when no <span class="param">stuck ticks</span> timeout is used, since <a href="#about-waitforhero" class="ref">wait for hero</a> might wait forever if the hero has no way to get to its destination.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-herochasesnpc" class="ref">hero chases NPC</a>, </li>
<li>
<a href="#about-cancelherowalk" class="ref">cancel hero walk</a>, </li>
<li><a href="#about-waitforhero" class="ref">wait for hero</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-herochasesnpc"></a>
				<h4>hero chases npc (who, npc, stop when reached, stuck ticks)</h4>
<p>
			Makes the specified hero walk along the shortest path to the destination NPC, even if the destination NPC is moving. The chasing hero will go around obstacles. If the destination NPC cannot be reached at all, the chasing hero will go to the closest reachable tile. The first argument <span class="param">who</span> is the caterpillar rank of the hero who will be chasing, or <a href="#about-me" class="ref">me</a> for the leader. When the caterpillar party is enabled, this command only works on the leader, and will do nothing for other heroes. Use <a href="#about-suspendcaterpillar" class="ref">suspend caterpillar</a> if you want to make the other heroes pathfind. Non-leader heroes do not treat NPCs as obstacles when they pathfind. The second argument <span class="param">npc</span> is the NPC to chase. You can use an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a>. The third argument <span class="param">stop when reached</span> can be true if you want the chasing hero to stop after the first time it reaches the destination NPC. If ommitted or false, the hero will keep chasing even after it reaches a moving destination NPC. The fourth argument <span class="param">stuck ticks</span> is optional. If it is included, a hero who gets stuck along the way for more than the specified number of ticks will give up and stop pathfinding to the target. If <span class="param">stop ticks</span> is omitted or zero, the hero will keep pathfinding even if it gets stuck, and will not stop until it reaches the destination, or is stopped with the <a href="#about-cancelherowalk" class="ref">cancel hero walk</a> command. Be careful if you are using <a href="#about-waitforhero" class="ref">wait for hero</a> to wait for <a href="#about-herochasesnpc" class="ref">hero chases NPC</a> when no <span class="param">stuck ticks</span> timeout is used, since <a href="#about-waitforhero" class="ref">wait for hero</a> might wait forever if the hero has no way to get to its destination.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-pathfindheroto" class="ref">pathfind hero to</a>, </li>
<li>
<a href="#about-cancelherowalk" class="ref">cancel hero walk</a>, </li>
<li><a href="#about-waitforhero" class="ref">wait for hero</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-cancelherowalk"></a>
				<h4>cancel hero walk (who)</h4>
<p>
			
				If the specified hero is walking with a command like <a href="#about-walkhero" class="ref">walk hero</a>
				or pathfinding (due to a command like <a href="#about-pathfindheroto" class="ref">pathfind hero to</a>
				or because the player clicked somewhere), they will stop.
				They are allowed to finish their current step to the next tile,
				so they will not end up misaligned with the tile grid.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you want to stop a hero immediately without letting them finish their
					step, use <a href="#about-walkhero" class="ref">walk hero</a> with a distance of zero tiles, like:
					<pre>cancel hero walk(who) # Cancel any pathfinding
walk hero(who, hero direction(hero), 0)</pre>
					This will misalign the hero with the tile grid, breaking movement and
					wall and collision checking! You are responsible for realigning the hero
					afterwards somehow.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-pathfindheroto" class="ref">pathfind hero to</a>, </li>
<li>
<a href="#about-herochasesnpc" class="ref">hero chases NPC</a>, </li>
<li>
<a href="#about-walkhero" class="ref">walk hero</a>, </li>
<li><a href="#about-cancelnpcwalk" class="ref">cancel NPC walk</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-heroischasing"></a>
				<h4>hero is chasing (who)</h4>
<p>
			If the specified hero is currently chasing an NPC, such as by clicking on the hero with mouse/touch controls, or a previous <a href="#about-herochasesnpc" class="ref">hero chases NPC</a> command then return an <a href="#about-npcref" class="ref">NPC reference</a>. If the hero is not currently chasing an NPC, returns false.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-herochasesnpc" class="ref">hero chases NPC</a>, </li>
<li><a href="#about-npcischasing" class="ref">NPC is chasing</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherodirection"></a>
				<h4>set hero direction (who, direction)</h4>
<p>
			Makes the specified hero face in the specified direction. The hero is specified by their rank in the walkabout caterpillar, 0-3. The following constants are available for direction: <a href="#about-north" class="ref">north</a>, <a href="#about-south" class="ref">south</a>, <a href="#about-east" class="ref">east</a>, <a href="#about-west" class="ref">west</a>, <a href="#about-up" class="ref">up</a>, <a href="#about-down" class="ref">down</a>, <a href="#about-left" class="ref">left</a>, or <a href="#about-right" class="ref">right</a>.
			
			<pre>set hero direction (me,right) # face right</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-herodirection"></a>
				<h4>hero direction (who)</h4>
<p>
			Returns the specified hero's direction. The hero is specified by their rank in the walkabout caterpillar, 0-3
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setheroframe"></a>
				<h4>set hero frame (who, frame)</h4>
<p>
			Sets the walking frame of the specified hero to 0 or 1. The hero is specified by their rank in the walkabout party, 0-3
			
			
			<div class="seealso">See also: <ul><li><a href="#about-heroframe" class="ref">hero frame</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-heroframe"></a>
				<h4>hero frame (who)</h4>
<p>
			Returns the walking frame (0 or 1) of the specified hero. The hero is specified by their rank in the walkabout party, 0-3
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setheroposition"></a>
				<h4>set hero position (who, x, y)</h4>
<p>
			Instantly moves the specified hero to an X,Y position on the map. The coordinates are in units of tiles. For pixel-positioning use the <a href="#about-puthero" class="ref">put hero</a> command.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-herox" class="ref">hero X</a>, </li>
<li>
<a href="#about-heroy" class="ref">hero Y</a>, </li>
<li>
<a href="#about-heropixelx" class="ref">hero pixel X</a>, </li>
<li><a href="#about-heropixely" class="ref">hero pixel Y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-puthero"></a>
				<h4>put hero (who, x, y)</h4>
<p>
			Moves a hero to a precise location on the map. The first argument is the hero's position in the walkabout party. The second and third arguments are the X,Y pixel position of the top left corner of the hero walkabout sprite, relative to the top left corner of the map. Be aware that using this command can misalign your hero with the tile-grid, preventing it from walking normally. To position the hero by tile, use the <a href="#about-setheroposition" class="ref">set hero position</a> command. Normally you will use this command to escape the tile-based movement system.
			
			<pre># This script will make the hero jump in an arch 15 pixels high 2 tiles to the right,
# but it won't animate it. You can use setheroframe or setheropicture to do that.
variable (i, jump)
suspend player
set hero direction (me, right)
jump := -5
for (i, 0, 10) do (
  put hero (me, hero pixel X (me) + 4, hero pixel Y (me) + jump)
  jump += 1
  wait
)
resume player</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-herox"></a>
				<h4>hero X (who)</h4>
<p>
			Returns the specified hero's X position in tiles. Note that a hero's tile is the tile its top left corner is on.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-heroy"></a>
				<h4>hero Y (who)</h4>
<p>
			Returns the specified hero's Y position in tiles. Note that a hero's tile is the tile its top left corner is on.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-heropixelx"></a>
				<h4>hero pixel X (who)</h4>
<p>
			Returns the hero's X position on the map in pixels. To find the hero's position in tiles, use the <a href="#about-herox" class="ref">hero X</a> function instead.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-heropixely"></a>
				<h4>hero pixel Y (who)</h4>
<p>
			Returns the hero's Y position on the map in pixels. To find the hero's position in tiles, use the <a href="#about-heroy" class="ref">hero Y</a> function instead.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-heroz"></a>
				<h4>hero Z (who)</h4>
<p>
			Returns the specified hero's Z position in pixels. The Z value is the number of pixels they are above the tile that they are 'standing' on, not including the map's foot offset. All heroes normally have a Z value of 0 (even on maps with a foot offset) unless they are riding a vehicle which rises.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setheroz" class="ref">set hero z</a>, </li>
<li><a href="#about-npcz" class="ref">NPC Z</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setheroz"></a>
				<h4>set hero z (who, z)</h4>
<p>
			
				Sets the Z location of the specified hero.
				The Z value is the number of pixels they are above the tile that they are 'standing' on.
				Useful for scripts where you want a hero to jump or levitate.
				All heroes normally have a Z value of 0 (even on maps with a foot offset:
				the foot offset is added to the Z value) unless they are riding a vehicle which rises.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Hero Z values are reset to 0 when you change map or dismount a vehicle, and aren't saved in saved games.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-heroz" class="ref">hero Z</a>, </li>
<li><a href="#about-setnpcz" class="ref">set NPC z</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-walkherotox"></a>
				<h4>walk hero to x (who,x)</h4>
<p>
			Makes the specified hero walk to a given X coordinate on the map
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-walkherotoy"></a>
				<h4>walk hero to y (who,x)</h4>
<p>
			Makes the specified hero walk to a given Y coordinate on the map
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-checkherowall"></a>
				<h4>check hero wall (who,direction)</h4>
<p>
			
				Returns true if there is a wall blocking the hero from moving in the specified direction.
				No actual movement takes place.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command should only be used when the hero is standing still and aligned with the tile grid.
					You can use the <a href="#about-checkwallcollisionxy" class="ref">check wall collision x/y</a> commands for much
					more flexible wall-checking, which works from any starting position on the map.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-checknpcwall" class="ref">check NPC wall</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getherospeed"></a>
				<h4>get hero speed (who)</h4>
<p>
			Returns the walking speed of the specified hero, in pixels per tick.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setherospeed" class="ref">set hero speed</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherospeed"></a>
				<h4>set hero speed (who, speed)</h4>
<p>
			
				Changes the walking speed (pixels per tick) of the specified hero, from 0 to 20.
				<span class="param">who</span> is a caterpillar slot; use <a href="#about-me" class="ref">me</a> to refer to the leader.
				Normally only the speed of the leader matters,
				unless you use <a href="#about-suspendcaterpillar" class="ref">suspend caterpillar</a>,
				because the whole party moves at the leader's speed.
				<span class="param">speed</span> defaults to 4.
				Tiles are 20 pixels in size, and speeds that do not divide evenly or nearly
				evenly into 20 will result in jerky movement.
				So only use speeds 0, 1, 2, 3, 4, 5, 7, 10, or 20.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Changes to hero speed aren't saved in saved games!
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Hero speed is weird.
					It isn't actually a property of the hero, but of the caterpillar slot.
					So if you change the leader's speed and then a different hero is swapped
					into the leader position, the leader (and party) speed doesn't change.
					That's usually a good thing!
				</div>
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					Don't set speed to zero while a hero is moving,
					it will cause the hero to stop mid-step and become misaligned with the grid
					and stuck.
					Wait for the hero to stop first or check with <a href="#about-heroiswalking" class="ref">hero is walking</a>.
					(You probably shouldn't use speed 0 at all.)
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getherospeed" class="ref">get hero speed</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-teleporttomap"></a>
				<h4>teleport to map (map, x, y)</h4>
<p>
			An alternative to <a href="#about-usedoor" class="ref">use door</a>, teleport to map moves you to a given x,y position on the specified map without the need to create a door-link on the map. Teleport to map does not fade to black. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">An automatic <a href="#about-wait" class="ref">wait</a>(1) occurs immediately after this command.</div>
			
			
			
		</p>
</div>
		<div class="command">
		<h4>gracefully dismount vehicle</h4>
		<p><a href="#about-gracefullydismountvehicle">Documented in the Triggering Stuff section.</a></p>
		</div>
		<div class="command">
			<a name="about-heroiswalking"></a>
				<h4>hero is walking (who)</h4>
<p>
			Returns <a href="#about-true" class="ref">true</a> if the specified hero (by position in the caterpillar) is currently walking. Returns <a href="#about-false" class="ref">false</a> if the hero is standing still.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Doors"></a>
		<h3>
<span class="backlink"></span>Doors</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Doors-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-usedoor">use door (number, fade screen)</a><br>
		<a href="#about-doorexists">door exists (number, map)</a><br>
		<a href="#about-getdoorx">get door x (number, map)</a><br>
		<a href="#about-getdoory">get door y (number, map)</a><br>
		<a href="#about-getdoordestinationid">get door destination id (number, map)</a><br>
		<a href="#about-getdoordestinationmap">get door destination map (number, map)</a><br>
		<a href="#about-dooratspot">door at spot (x, y)</a><br>
</div></ul>
</div>
		<div class="command">
		<h4>teleport to map (map, x, y)</h4>
		<p><a href="#about-teleporttomap">Documented in the Moving Heroes section.</a></p>
		</div>
		<div class="command">
			<a name="about-usedoor"></a>
				<h4>use door (number, fade screen)</h4>
<p>
			
				Instantly uses door <span class="param">number</span>, just as if you had stepped into it.
				<span class="param">fade screen</span> is an optional argument, defaulting to <span class="code">true</span>.
				If true, the screen will fade out before using the door (even if it leads
				to the same map), and fade back in one tick later.
				Otherwise, there are no automatic screen fades.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					An automatic <a href="#about-wait" class="ref">wait</a>(1) occurs immediately after this command.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you call <a href="#about-fadescreenout" class="ref">fade screen out</a> immediately after <span class="code">use door</span>,
					then the screen won't automatically fade back in afterwards.
					That's intentional, so that you can cancel the fade.
					(But you might have to do this in the map autorun script, if there is one,
					since it will suspend the script that called <span class="code">use door</span>!)
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-doorexists"></a>
				<h4>door exists (number, map)</h4>
<p>
			Returns <a href="#about-true" class="ref">true</a> if there is a door with ID <span class="param">number</span> on the specified <span class="param">map</span>. If you leave out the map number, the current map will be assumed. This command is useful for avoiding script errors due to invalid door IDs.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getdoorx"></a>
				<h4>get door x (number, map)</h4>
<p>
			Returns the x coordinate (in tiles) of the door with ID <span class="param">number</span> on the specified <span class="param">map</span>. If you leave out the map number, the current map will be assumed.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-dooratspot" class="ref">door at spot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getdoory"></a>
				<h4>get door y (number, map)</h4>
<p>
			Returns the y coordinate (in tiles) of the door with ID <span class="param">number</span> on the specified <span class="param">map</span>. If you leave out the map number, the current map will be assumed.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-dooratspot" class="ref">door at spot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getdoordestinationid"></a>
				<h4>get door destination id (number, map)</h4>
<p>
			Returns the door ID of the door currently linked to by the door with ID <span class="param">number</span> on the specified <span class="param">map</span>. If you leave out the map number, the current map will be assumed. To get the door's location, use <a href="#about-getdoorx" class="ref">get door x</a> and <a href="#about-getdoory" class="ref">get door y</a>. If door <span class="param">number</span> does not exist, or is not currently linked to any other door, then -1 is returned. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">A door's destination can vary depending on tags. Check your doorlinks if you get unexpected results! There's no script command to get information about doorlinks currently inactive due to tags.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getdoorx" class="ref">get door x</a>, </li>
<li>
<a href="#about-getdoory" class="ref">get door y</a>, </li>
<li><a href="#about-getdoordestinationmap" class="ref">get door destination map</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getdoordestinationmap"></a>
				<h4>get door destination map (number, map)</h4>
<p>
			Returns the map ID of the destination door currently linked to by the door with ID <span class="param">number</span> on the specified <span class="param">map</span>. If you leave out the map number, the current map will be assumed. If door <span class="param">number</span> does not exist, or is not currently linked to any other door, then -1 is returned. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">A door's destination can vary depending on tags. Check your doorlinks if you get unexpected results! There's no script command to get information about doorlinks currently inactive due to tags.</div>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-dooratspot"></a>
				<h4>door at spot (x, y)</h4>
<p>
			Checks whether there is a door on the position given by <span class="param">x</span>, <span class="param">y</span> in tiles and if so returns its ID; otherwise returns -1. Note that the door might not have any active doorlink, or no door links at all. You can use <a href="#about-getdoordestinationid" class="ref">get door destination id</a> to check if a door is active. If you want to script your own map transitions, you will find <a href="#about-suspenddoors" class="ref">suspend doors</a> helpful.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getdoorx" class="ref">get door x</a>, </li>
<li><a href="#about-getdoory" class="ref">get door y</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="NPCs"></a>
		<h3>
<span class="backlink"></span>NPCs</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="NPCs-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-npcreference">NPC reference (ID, copy, allow disabled?, pool)</a><br>
		<a href="#about-globalnpcreference">global NPC</a><br>
		<a href="#about-globalnpcreference">global NPC reference (ID, copy, allow disabled?)</a><br>
		<a href="#about-nextnpcreference">next NPC reference (npcref)</a><br>
		<a href="#about-npcatspot">NPC at spot (x, y, number)</a><br>
		<a href="#about-npcatpixel">NPC at pixel (x, y, number)</a><br>
		<a href="#about-getnpcid">get NPC ID (reference)</a><br>
		<a href="#about-getnpcpool">get NPC pool (reference)</a><br>
		<a href="#about-npccopynumber">NPC copy number (reference)</a><br>
		<a href="#about-npccopycount">NPC copy count (ID, pool)</a><br>
		<a href="#about-changenpcid">change NPC ID (reference, new ID, pool)</a><br>
		<a href="#about-createnpc">create NPC (ID, X, Y, direction, pool)</a><br>
		<a href="#about-createglobalnpc">create global NPC (ID, X, Y, direction)</a><br>
		<a href="#about-destroynpc">destroy NPC (reference)</a><br>
		<a href="#about-destroynpc">delete NPC (reference)</a><br>
		<a href="#about-npcisdisabled">NPC is disabled (reference)</a><br>
</div>
		<li>
<a href="#Moving%20and%20Positioning%20NPCs">Moving and Positioning NPCs</a><br>
		<ul class="content-shown">
		<a href="#about-walknpc">walk NPC (who, direction, distance)</a><br>
		<a href="#about-walknpctox">walk NPC to X (who, X)</a><br>
		<a href="#about-walknpctoy">walk NPC to Y (who, Y)</a><br>
		<a href="#about-setnpcdirection">set NPC direction (who, direction)</a><br>
		<a href="#about-npcdirection">NPC direction (who)</a><br>
		<a href="#about-pathfindnpcto">pathfind NPC to (who, x, y, stuck ticks)</a><br>
		<a href="#about-npcchasesnpc">NPC chases NPC (who, other who, stop when reached, stuck ticks)</a><br>
		<a href="#about-npcischasing">NPC is chasing (who)</a><br>
		<a href="#about-npciswalking">NPC is walking (who)</a><br>
		<a href="#about-cancelnpcwalk">cancel NPC walk (who)</a><br>
		<a href="#about-setnpcframe">set NPC frame (who, frame)</a><br>
		<a href="#about-npcframe">NPC frame (who)</a><br>
		<a href="#about-setnpcposition">set NPC position (who, X, Y)</a><br>
		<a href="#about-putnpc">put NPC (who,x,y)</a><br>
		<a href="#about-npcx">NPC X (who)</a><br>
		<a href="#about-npcy">NPC Y (who)</a><br>
		<a href="#about-npcpixelx">NPC pixel X (who)</a><br>
		<a href="#about-npcpixely">NPC pixel Y (who)</a><br>
		<a href="#about-npcz">NPC Z (who)</a><br>
		<a href="#about-setnpcz">set NPC z (npc, z)</a><br>
		<a href="#about-checknpcwall">check NPC wall (who, direction)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#NPC%20Instance%20Data">NPC Instance Data</a><br>
		<ul class="content-shown">
		<a href="#about-setnpcignoreswalls">set NPC ignores walls (who, value)</a><br>
		<a href="#about-getnpcignoreswalls">get NPC ignores walls (who)</a><br>
		<a href="#about-setnpcmoves">set NPC moves (who, value)</a><br>
		<a href="#about-getnpcmoves">get NPC moves (who)</a><br>
		<a href="#about-setnpcobstructs">set NPC obstructs (who, value)</a><br>
		<a href="#about-getnpcobstructs">get NPC obstructs (who)</a><br>
		<a href="#about-setnpcusable">set NPC usable (who, value)</a><br>
		<a href="#about-getnpcusable">get NPC usable (who)</a><br>
		<a href="#about-npcextra">NPC extra (who, which)</a><br>
		<a href="#about-setnpcextra">set NPC extra (who, which, value)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#NPC%20Definitions">NPC Definitions</a><br>
		<ul class="content-shown">
		<a href="#about-alternpc">alter NPC (who, NPCstat, value, pool)</a><br>
		<a href="#about-readnpc">read NPC (who, NPCstat, pool)</a><br>
		<a href="#about-getnpcspeed">get NPC speed (who)</a><br>
		<a href="#about-setnpcspeed">set NPC speed (who, speed)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-npcreference"></a>
				<h4>NPC reference (ID, copy, allow disabled?, pool)</h4>
<p>
			
				(See <a href="#about-npcref" class="ref">NPC reference</a> for an explanation of NPC references.)
				<br>
				Returns a reference to one of the NPCs on the map, or <span class="code">false</span>/<span class="code">0</span>
				if the NPC you asked for is not found on the map.
				<br>
				<span class="param">ID</span> is the <a href="#about-npcid" class="ref">NPC ID</a> of the NPC to look up.
				The ID is the same number that appears in CUSTOM when you are editing NPCs or placing NPCs on the map.
				(Unlike other NPC commands, this one does not accept an NPC reference in place of the NPC ID.)
				<br>
				<span class="param">copy</span> is optional.
				It specifies which copy (instance) of the NPC you want, in case there are more than one on the map.
				If you don't specify it, you will just get a reference to the first copy.
				Copies are counted starting from zero.
				You can see the copy number of NPCs in the Map Editor, at the bottom of the NPC,
				and using the F6 NPC debugger, by hoving the mouse over an NPC.
				<br>
				<span class="param">allow disabled?</span> is optional, and defaults to <span class="code">false</span>.
				If <span class="code">true</span>, when used on a copy of an NPC hidden due to tag conditions,
				<span class="code">NPC reference</span> will return a reference instead of returning <span class="code">false</span>.
				<br>
				<span class="param">pool</span> is an optional <a href="#about-npcpool" class="ref">NPC pool</a>.
				If you don't specify which pool, then the ID is assumed to refer to the local pool for the current map.
				See also the <a href="#about-globalnpcreference" class="ref">global NPC reference</a> command.
				<br>
				If you plan on using the same NPC reference many times in a script you can store it in a <a href="#about-variable" class="ref">variable</a>.
			
			
			<pre>#---NPC reference example---

plotscript, ref example, begin

  variable(Fred)

  # find the first copy of NPC 10,
  # and store the reference in a variable
  Fred := NPC reference(10,0)

  # now we can manipulate that NPC with the variable
  walk NPC     (Fred,south,3)
  wait for NPC (Fred)

  # make the NPC spin!
  set NPC direction (Fred,east)
  wait(2)
  set NPC direction (Fred,north)
  wait(2)
  set NPC direction (Fred,west)
  wait(2)
  set NPC direction (Fred,south)
  wait(2)

end</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-npcatspot" class="ref">NPC at spot</a>, </li>
<li>
<a href="#about-npcatpixel" class="ref">NPC at pixel</a>, </li>
<li>
<a href="#about-createnpc" class="ref">create NPC</a>, </li>
<li>
<a href="#about-getnpcid" class="ref">get NPC ID</a>, </li>
<li>
<a href="#about-npccopynumber" class="ref">NPC copy number</a>, </li>
<li>
<a href="#about-npccopycount" class="ref">NPC copy count</a>, </li>
<li>
<a href="#about-nextnpcreference" class="ref">next NPC reference</a>, </li>
<li><a href="#about-globalnpcreference" class="ref">global NPC reference</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-globalnpc"></a>
				<h4>global NPC</h4>
				An alias for <a href="#about-globalnpcreference">global NPC reference</a>.
			</div>
		<div class="command">
			<a name="about-globalnpcreference"></a>
				<h4>global NPC reference (ID, copy, allow disabled?)</h4>
<p>
			
				This command is the same as <a href="#about-npcreference" class="ref">NPC reference</a> except that it will always assume that you are using a global NPC ID number instead of a local NPC ID number. If there is no copy of the global NPC ID on the current map, it will return false. This command cannot get references to NPCs located on different maps, and the NPC reference it returns is only valid on the current map.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-npcreference" class="ref">NPC reference</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-nextnpcreference"></a>
				<h4>next NPC reference (npcref)</h4>
<p>
			This command is for looping over all the npcs on the map, in the same way that <a href="#about-firstchild" class="ref">first child</a> and <a href="#about-nextsibling" class="ref">next sibling</a> can be used to iterate over all the children of a slice. When called with no argument or <span class="code">0</span>, it returns an <a href="#about-npcref" class="ref">NPC reference</a> to the first NPC on the map. When <span class="param">npcref</span> is an NPC reference it returns a reference to the next NPC. It returns 0 when there are no more NPCs, and skips over NPCs that are disabled by a tag condition (including used one-time-use NPCs). It's safe to delete NPCs while you're iterating over them (unlike <a href="#about-nextsibling" class="ref">next sibling</a>!), but creating NPCs at the same time might result in them getting skipped.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Tag-disabled NPCs are skipped.
				</div>
			
			
			<pre># Iterate over all NPCs... and delete them all!
variable(npcref)
npcref := next NPC reference()  # The first NPC
while (npcref) do (
    delete NPC(npcref)
    npcref := next NPC reference(npcref)
)</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-npcreference" class="ref">NPC reference</a>, </li>
<li>
<a href="#about-npcatspot" class="ref">NPC at spot</a>, </li>
<li><a href="#about-npcatpixel" class="ref">NPC at pixel</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcatspot"></a>
				<h4>NPC at spot (x, y, number)</h4>
<p>
			This command returns a reference to the NPC at the given X and Y coordinate, in tiles, on the map. The optional third argument lets you choose which NPC to reference in case there is more than one NPC standing on that same spot (starting from the bottom-most NPC, which is number 0). <a href="#about-false" class="ref">false</a> is returned if there is no NPC there, or <span class="param">number</span> is too large (greater than or equal to the number of NPCs). You can also pass the constant <a href="#about-getcount" class="ref">get count</a> for the third argument to return the total number of NPCs on that tile. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">An NPC's tile is the tile its top left corner is on.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-npcreference" class="ref">NPC reference</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcatpixel"></a>
				<h4>NPC at pixel (x, y, number)</h4>
<p>
			This command returns a reference to the NPC at the given X and Y coordinate in pixels. That is, any npc whose 20x20 sprite (including transparent sections) is over that pixel. The optional third argument lets you choose which NPC to reference in case there is more than one NPC standing on that same spot (starting from the bottom-most NPC, which is number 0). <a href="#about-false" class="ref">false</a> is returned if there is no NPC there, or <span class="param">number</span> is too large (greater than or equal to the number of NPCs). You can also pass the constant <a href="#about-getcount" class="ref">get count</a> for the third argument to return the total number of NPCs on that tile.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-npcreference" class="ref">NPC reference</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcid"></a>
				<h4>get NPC ID (reference)</h4>
<p>
			
				This command (along with <a href="#about-npccopynumber" class="ref">NPC copy number</a> and <a href="#about-getnpcpool" class="ref">get NPC pool</a>)
				is the inverse of <a href="#about-npcreference" class="ref">NPC reference</a>.
				Returns an NPC's ID. <span class="param">reference</span>If you give <span class="param">get NPC ID</span> an <a href="#about-npcref" class="ref">NPC reference</a> it will return the NPC's ID.
				If the reference is not valid then <span class="param">get NPC ID</span> will return -1.
				This command can be used on tag-disabled NPCs too, returning their ID number.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Some cheeky users use this command to check whether any instances of a local NPC ID exists,
					since like nearly all commands you can give it an NPC ID instead of a reference.
					E.g. <span class="code">get NPC ID(4) == 4</span> is true only if there's at least one copy of NPC 4.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getnpcpool" class="ref">get NPC pool</a>, </li>
<li><a href="#about-changenpcid" class="ref">change NPC ID</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcpool"></a>
				<h4>get NPC pool (reference)</h4>
<p>
			
				This command (along with <a href="#about-getnpcid" class="ref">get NPC ID</a> and <a href="#about-npccopynumber" class="ref">NPC copy number</a>)
				is the inverse of <a href="#about-npcreference" class="ref">NPC reference</a>.
				This command takes an <a href="#about-npcref" class="ref">NPC reference</a> and returns the ID of the <a href="#about-npcpool" class="ref">NPC pool</a> that
				this NPC belongs to: either <span class="param">pool:local</span> or <span class="param">pool:global</span>.
				<span class="param">reference</span> can't be an NPC ID.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getnpcid" class="ref">get NPC ID</a>, </li>
<li><a href="#about-changenpcid" class="ref">change NPC ID</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npccopynumber"></a>
				<h4>NPC copy number (reference)</h4>
<p>
			
				This command is the inverse of <a href="#about-npcreference" class="ref">NPC reference</a> (along with <a href="#about-getnpcid" class="ref">get NPC ID</a>).
				That is, it returns the copy number that you need to pass to <a href="#about-npcreference" class="ref">NPC reference</a>
				to get this NPC.
				If you give <span class="param">NPC copy number</span> a reference to an NPC it will return which copy
				of that NPC definition it is - 0 if it's the first NPC, 1 is the second, etc.
				This number is also shown in the map editor at the bottom of an NPC,
				and in the F6 NPC debug mode when you mouse-over an NPC.
				<br>
				If the reference is not valid then <span class="param">NPC copy number</span> will return -1.
				This command also works on references to tag-disabled NPCs.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-npccopycount"></a>
				<h4>NPC copy count (ID, pool)</h4>
<p>
			
				This command tells you how many copies of a particular NPC ID exist on the map.
				This can be very useful if you want apply the same action to each copy of an NPC
				on the map by looping over them.
				Generally this is used together with the <a href="#about-npcreference" class="ref">NPC reference</a> command.
				<br>
				The <span class="param">pool</span> argument is optional (defaulting to <span class="code">pool:local</span>),
				and tells which NPC pool <span class="param">ID</span> refers to.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command does not count tag-disabled NPCs.
					So if there are four copies of NPC 2 on a map, but they only appear
					when tag 5 is on, then <span class="code">npc copy count(2)</span> returns
					4 when tag 5 is on and 0 when it isn't.
				</div>
			
			
			<pre>#---NPC copy count example---

plotscript, every NPC example, begin

  variable(copy number, guard count, current guard)

  # The guard is NPC 10, and there are many copies of him on the map
  guard count := NPC copy count(10)

  # This loop repeats once for each copy of NPC 10
  for (copy number, 0, guard count -- 1) do, begin
    current guard := NPC reference(10, copy number)
    walk NPC(current guard, south, 4)

    # if we added a "wait for NPC(current guard)" right here
    # then the guards would walk one at time
  end

end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-changenpcid"></a>
				<h4>change NPC ID (reference, new ID, pool)</h4>
<p>
			
				This command takes an <a href="#about-npcref" class="ref">NPC reference</a> and lets you change the ID number
				of the NPC it points to, and change between local and global NPC pools.
				This means that the NPC will now use a different picture, palette,
				walking speed, text box, everything.
				This change is not permanent. It only lasts until the next time a map gets loaded.
				The <span class="param">pool</span> argument is an optional <a href="#about-npcpool" class="ref">NPC pool</a>.
				If you don't specify a pool, then the NPC ID will be assumed to be the same pool that the NPC was previously part of.
				<br>
				If <span class="param">reference</span> is an NPC ID then this command acts on the first NPC instance
				of that ID/pool, and the pool is not changed.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getnpcid" class="ref">get NPC ID</a>, </li>
<li><a href="#about-getnpcpool" class="ref">get NPC pool</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-createnpc"></a>
				<h4>create NPC (ID, X, Y, direction, pool)</h4>
<p>
			
				This command will magically create a new copy of an NPC with the given <span class="param">ID</span> number.
				You can specify an <span class="param">X</span> and <span class="param">Y</span> position where it will be created, and optionally a <span class="param">direction</span> too
				(if you leave out the direction, the new NPC will be facing south).
				The <span class="param">pool</span> argument is an optional <a href="#about-npcpool" class="ref">NPC pool</a> defaulting to <span class="code">pool:local</span>
				(NPC definitions local to the current map).
				<br>
				<span class="code">create NPC</span> returns an <a href="#about-npcref" class="ref">NPC reference</a> that you can use to refer to the new NPC in other
				commands like <a href="#about-walknpc" class="ref">walk NPC</a>. If the new NPC cannot be created
				(there is a maximum of 300 total NPC copies in memory at a time) then create NPC will return false (zero).
				The new NPC is not permanent. It only lasts until a new map is loaded.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-createglobalnpc" class="ref">create global NPC</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-createglobalnpc"></a>
				<h4>create global NPC (ID, X, Y, direction)</h4>
<p>
			
				This command works the same as the <a href="#about-createnpc" class="ref">create NPC</a> command, except that the ID number always refers to the global pool of NPCs, instead of the local pool. The instance of this global NPC will be created on the current map, and only lasts until you leave the map. It is not global in the sense of moving from map to map.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-createnpc" class="ref">create NPC</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-destroynpc"></a>
				<h4>destroy NPC (reference)</h4>
<p>
			This command will erase the specified NPC. You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or the NPC's ID number. The deletion is not permanent. Unless this is an NPC that you created with <a href="#about-createnpc" class="ref">create NPC</a>, the NPC will be back again next time the map gets loaded. If you need to permanently remove an NPC, use tags. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">This only deletes the one NPC you specify. If you use an NPC ID number as the argument, only the first copy of the NPC on the map will be deleted.</div><div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">This command can be also be written as <span class="param">delete NPC</span>.</div>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-deletenpc"></a>
				<h4>delete NPC (reference)</h4>
				An alias for <a href="#about-destroynpc">destroy NPC</a>.
			</div>
		<div class="command">
			<a name="about-npcisdisabled"></a>
				<h4>NPC is disabled (reference)</h4>
<p>
			This command returns true if the <a href="#about-npcref" class="ref">NPC reference</a> <span class="param">reference</span> points to an NPC who does not exist, or has been disabled because of tags or one-time-use.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Moving%20and%20Positioning%20NPCs"></a>
		<h3>
<span class="backlink"><a href="#NPCs">NPCs</a> →
			</span>Moving and Positioning NPCs</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-walknpc"></a>
				<h4>walk NPC (who, direction, distance)</h4>
<p>
			Makes the specified NPC move in the specified direction for the specified number of tiles. The first argument tells who to move. You can use an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a>. The second argument is the direction. Use the constants: <a href="#about-north" class="ref">north</a>, <a href="#about-south" class="ref">south</a>, <a href="#about-east" class="ref">east</a>, <a href="#about-west" class="ref">west</a>, <a href="#about-up" class="ref">up</a>, <a href="#about-down" class="ref">down</a>, <a href="#about-left" class="ref">left</a>, or <a href="#about-right" class="ref">right</a>. The third argument is the number of tiles to move. If you leave out the third argument, the NPC will move one tile. If you use a negative number for walk distance, the npc will walk backwards. walk NPC is usually used with the <a href="#about-waitfornpc" class="ref">wait for NPC</a> command. You should normally use the <a href="#about-suspendnpcs" class="ref">suspend NPCs</a> command before moving NPCs to prevent their automatic movements from interfering with your scripted movements.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-walknpctox"></a>
				<h4>walk NPC to X (who, X)</h4>
<p>
			Makes the specified NPC walk to a given X coordinate on the map. You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> to specify which NPC will move.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-walknpctoy"></a>
				<h4>walk NPC to Y (who, Y)</h4>
<p>
			Makes the specified NPC walk to a given Y coordinate on the map. You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> to specify which NPC will move.
			
			
			
		</p>
</div>
		<div class="command">
		<h4>wait for NPC (who)</h4>
		<p><a href="#about-waitfornpc">Documented in the Wait Commands section.</a></p>
		</div>
		<div class="command">
			<a name="about-setnpcdirection"></a>
				<h4>set NPC direction (who, direction)</h4>
<p>
			Makes the specified NPC face in the specified direction. The following constants are available for direction: <a href="#about-north" class="ref">north</a>, <a href="#about-south" class="ref">south</a>, <a href="#about-east" class="ref">east</a>, <a href="#about-west" class="ref">west</a>, <a href="#about-up" class="ref">up</a>, <a href="#about-down" class="ref">down</a>, <a href="#about-left" class="ref">left</a>, or <a href="#about-right" class="ref">right</a>. You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> to specify which NPC will turn.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-npcdirection"></a>
				<h4>NPC direction (who)</h4>
<p>
			Returns the specified NPC's direction.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-pathfindnpcto"></a>
				<h4>pathfind NPC to (who, x, y, stuck ticks)</h4>
<p>
			Makes the specified NPC walk along the shortest path to the destination position. They will go around obstacles. If the destination cannot be reached at all, they will go to the closest reachable tile. The first argument <span class="param">who</span> is the NPC. You can use an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a>. The second argument is the destination <span class="param">x</span> tile coordinate. The third argument is the destination <span class="param">y</span> tile coordinate. The fourth argument <span class="param">stuck ticks</span> is optional. If it is included, an NPC who gets stuck along the way for more than the specified number of ticks will give up and stop pathfinding to the target. If <span class="param">stop ticks</span> is omitted or zero, the npc will keep pathfinding even if it gets stuck, and will not stop until it reaches the destination, or is stopped with the <a href="#about-cancelnpcwalk" class="ref">cancel NPC walk</a> command. Be careful if you are using <a href="#about-waitfornpc" class="ref">wait for NPC</a> to wait for <a href="#about-pathfindnpcto" class="ref">pathfind NPC to</a> when no <span class="param">stuck ticks</span> timeout is used, since <a href="#about-waitfornpc" class="ref">wait for NPC</a> might wait forever if the NPC has no way to get to its destination.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-npcchasesnpc" class="ref">NPC chases NPC</a>, </li>
<li>
<a href="#about-cancelnpcwalk" class="ref">cancel NPC walk</a>, </li>
<li><a href="#about-waitfornpc" class="ref">wait for NPC</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcchasesnpc"></a>
				<h4>NPC chases NPC (who, other who, stop when reached, stuck ticks)</h4>
<p>
			Makes the specified NPC walk along the shortest path to the destination NPC, even if the destination NPC is moving. The chasing NPC will go around obstacles. If the destination NPC cannot be reached at all, the chasing NPC will go to the closest reachable tile. The first argument <span class="param">who</span> is the NPC who will be chasing. The second argument <span class="param">other who</span> is the NPC to chase. You can use an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a>. The third argument <span class="param">stop when reached</span> can be true if you want the chasing NPC to stop after the first time it reaches the destination NPC. If omitted or false, the NPC will keep chasing even after it reaches a moving destination NPC. The fourth argument <span class="param">stuck ticks</span> is optional. If it is included, an NPC who gets stuck along the way for more than the specified number of ticks will give up and stop pathfinding to the target. If <span class="param">stop ticks</span> is omitted or zero, the npc will keep pathfinding even if it gets stuck, and will not stop until it reaches the destination, or is stopped with the <a href="#about-cancelnpcwalk" class="ref">cancel NPC walk</a> command. Be careful if you are using <a href="#about-waitfornpc" class="ref">wait for NPC</a> to wait for <a href="#about-npcchasesnpc" class="ref">NPC chases NPC</a> when no <span class="param">stuck ticks</span> timeout is used, since <a href="#about-waitfornpc" class="ref">wait for NPC</a> might wait forever if the NPC has no way to get to its destination.
			<br>
			If the destination NPC is deleted or disappears due to a tag condition, the chasing NPC stops.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-pathfindnpcto" class="ref">pathfind NPC to</a>, </li>
<li>
<a href="#about-cancelnpcwalk" class="ref">cancel NPC walk</a>, </li>
<li><a href="#about-waitfornpc" class="ref">wait for NPC</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcischasing"></a>
				<h4>NPC is chasing (who)</h4>
<p>
			If the specified NPC is currently chasing another NPC from a previous call to <a href="#about-npcchasesnpc" class="ref">NPC chases NPC</a> then return an <a href="#about-npcref" class="ref">NPC reference</a> to the target NPC. If the NPC is not currently chasing another NPC, returns false.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-npcchasesnpc" class="ref">NPC chases NPC</a>, </li>
<li><a href="#about-heroischasing" class="ref">hero is chasing</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npciswalking"></a>
				<h4>NPC is walking (who)</h4>
<p>
			Returns <a href="#about-true" class="ref">true</a> if the specified NPC is currently walking, or <a href="#about-false" class="ref">false</a> if standing still. You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> to specify which NPC will be checked.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-cancelnpcwalk"></a>
				<h4>cancel NPC walk (who)</h4>
<p>
			If the specified NPC is walking with a command like <a href="#about-walknpc" class="ref">walk NPC</a> or pathfinding with a command like <a href="#about-pathfindnpcto" class="ref">pathfind NPC to</a>, they will stop. They are allowed to finish their current step, so they will not end up misaligned with the tiles. This command has no effect on automatic NPC movement patterns, it only stops scripted movement.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you want to stop an NPC immediately without letting them finish their
					step, use <a href="#about-walknpc" class="ref">walk NPC</a> with a distance of zero tiles, like:
					<pre>cancel NPC walk(npc)  # Cancel any pathfinding
walk NPC(npc, NPC direction(npc), 0)</pre>
					This will misalign the NPC with the tile grid, breaking movement and
					wall and collision checking! You are responsible for realigning the NPC
					afterwards somehow.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-pathfindnpcto" class="ref">pathfind NPC to</a>, </li>
<li>
<a href="#about-npcchasesnpc" class="ref">NPC chases NPC</a>, </li>
<li>
<a href="#about-walknpc" class="ref">walk NPC</a>, </li>
<li><a href="#about-cancelherowalk" class="ref">cancel hero walk</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setnpcframe"></a>
				<h4>set NPC frame (who, frame)</h4>
<p>
			Sets the walking frame of the specified NPC to 0 or 1. You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> to specify which NPC will change.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-npcframe" class="ref">NPC frame</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcframe"></a>
				<h4>NPC frame (who)</h4>
<p>
			Returns the walking frame (0 or 1) of the specified NPC.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setnpcposition"></a>
				<h4>set NPC position (who, X, Y)</h4>
<p>
			Instantly moves the specified NPC to an X,Y position on the map. The coordinates are in units of tiles. You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> to specify which NPC will be moved.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-putnpc"></a>
				<h4>put NPC (who,x,y)</h4>
<p>
			Moves an NPC to a location on the map in pixels. The first argument is and <a href="#about-npcreference" class="ref">NPC reference</a> or an NPC ID number. The second and third arguments are the X,Y pixel position relative to the top left corner of the map. Be aware that using this command can mis-align your NPC with the tile-grid, preventing it from walking normally. To position the NPC by tile, use the <a href="#about-setnpcposition" class="ref">set NPC position</a> command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-npcx"></a>
				<h4>NPC X (who)</h4>
<p>
			Returns the specified NPC's X position in tiles. Note that an NPC's tile is the tile its top left corner is on.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-npcatspot" class="ref">NPC at spot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcy"></a>
				<h4>NPC Y (who)</h4>
<p>
			Returns the specified NPC's Y position in tiles. Note that an NPC's tile is the tile its top left corner is on.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-npcatspot" class="ref">NPC at spot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcpixelx"></a>
				<h4>NPC pixel X (who)</h4>
<p>
			Returns the NPC's X position on the map in pixels. The argument is an <a href="#about-npcreference" class="ref">NPC reference</a> or an NPC ID number. To find the NPC's position in tiles, use the <a href="#about-npcx" class="ref">NPC X</a> function instead.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-npcpixely"></a>
				<h4>NPC pixel Y (who)</h4>
<p>
			Returns the NPC's Y position on the map in pixels. The argument is an <a href="#about-npcreference" class="ref">NPC reference</a> or an NPC ID number. To find the NPC's position in tiles, use the <a href="#about-npcy" class="ref">NPC Y</a> function instead.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-npcz"></a>
				<h4>NPC Z (who)</h4>
<p>
			Returns the specified NPC's Z position in pixels. The Z value is the number of pixels they are above the tile that they are 'standing' on, not including the map's foot offset. All NPCs normally have a Z value of 0 (even on maps with a foot offset) unless they are used as a vehicle which rises.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setnpcz" class="ref">set NPC z</a>, </li>
<li><a href="#about-heroz" class="ref">hero Z</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setnpcz"></a>
				<h4>set NPC z (npc, z)</h4>
<p>
			Sets the Z location of the specified NPC. The Z value is the number of pixels they are above the tile that they are 'standing' on. Useful for scripts where you want a NPC to jump or levitate. All NPCs normally have a Z value of 0 (even on maps with a foot offset) unless they are a vehicle which rises.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-npcz" class="ref">NPC Z</a>, </li>
<li><a href="#about-setheroz" class="ref">set hero z</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-checknpcwall"></a>
				<h4>check NPC wall (who, direction)</h4>
<p>
			
				Returns true if there is a wall blocking the NPC from moving in the specified direction.
				No actual movement takes place.
				It does not matter whether the NPC is set to ignore walls or ignore the passmap.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command should only be used when the NPC is standing still and aligned with the tile grid.
					You can use the <a href="#about-checkwallcollisionxy" class="ref">check wall collision x/y</a> commands for much
					more flexible wall-checking, which works from any starting position on the map.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-checkherowall" class="ref">check hero wall</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="NPC%20Instance%20Data"></a>
		<h3>
<span class="backlink"><a href="#NPCs">NPCs</a> →
			</span>NPC Instance Data</h3>
		<p>
			This section contains commands for getting and setting properties of individual NPC instances.
			See <a href="#NPC%20Definitions" class="ref">NPC Definitions</a> for inspecting or modifying NPC definitions/types.
		</p>
<ul></ul>
		<div class="command">
			<a name="about-setnpcignoreswalls"></a>
				<h4>set NPC ignores walls (who, value)</h4>
<p>
			
				Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used),
				set whether that NPC can walk through walls, including off the edge of a map,
				and violating its zone restrictions.
				<span class="param">value</span> should be true or false.
				<br>
				Turning this on doesn't let the NPC walk through the lead hero and other NPCs;
				you need <a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a> for that.
				<br>
				This command is just like <a href="#about-suspendnpcwalls" class="ref">suspend NPC walls</a>/<a href="#about-resumenpcwalls" class="ref">resume NPC walls</a>,
				but only affects a single npc.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Don't confuse this with <a href="#about-alternpc" class="ref">alter NPC</a><span class="code">(who, NPCstat:ignore passmap, value)</span>,
					which sets whether an NPC ID can pass through walls on the wallmap,
					but doesn't allow it to ignore zones or walk off the map.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getnpcignoreswalls" class="ref">get NPC ignores walls</a>, </li>
<li>
<a href="#about-suspendnpcwalls" class="ref">suspend NPC walls</a>, </li>
<li>
<a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a>, </li>
<li><a href="#about-alternpc" class="ref">alter NPC</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcignoreswalls"></a>
				<h4>get NPC ignores walls (who)</h4>
<p>
			
				Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used),
				returns whether that NPC can walk through walls.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Don't confuse this with <a href="#about-readnpc" class="ref">read NPC</a><span class="code">(who, NPCstat:ignore passmap)</span>,
					which tells whether an NPC ID can pass through walls on the wallmap,
					but doesn't allow it to ignore zones or walk off the map.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setnpcignoreswalls" class="ref">set NPC ignores walls</a>, </li>
<li><a href="#about-readnpc" class="ref">read NPC</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setnpcmoves"></a>
				<h4>set NPC moves (who, value)</h4>
<p>
			
				Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used),
				set whether that NPC moves according to its move-type, or whether it stands still
				and waits for you to control it with <a href="#about-walknpc" class="ref">walk NPC</a>.
				<br>
				<span class="param">value</span> should be true or false.
				<br>
				This command is just like <a href="#about-suspendnpcs" class="ref">suspend NPCs</a>/<a href="#about-resumenpcs" class="ref">resume NPCs</a>,
				but only affects a single npc.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you set an NPC to not move by itself, it will still complete
					its current step, moving the rest of the way to the next tile.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getnpcmoves" class="ref">get NPC moves</a>, </li>
<li>
<a href="#about-suspendnpcs" class="ref">suspend NPCs</a>, </li>
<li><a href="#about-alternpc" class="ref">alter NPC</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcmoves"></a>
				<h4>get NPC moves (who)</h4>
<p>
			Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used), returns <a href="#about-true" class="ref">true</a> or <a href="#about-false" class="ref">false</a> indicating whether that NPC moves according to its move-type, or whether it is suspended. This is always true, even for "Stand Still" NPCs unless <a href="#about-setnpcmoves" class="ref">set NPC moves</a> has been used.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setnpcmoves" class="ref">set NPC moves</a>, </li>
<li><a href="#about-readnpc" class="ref">read NPC</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setnpcobstructs"></a>
				<h4>set NPC obstructs (who, value)</h4>
<p>
			
				Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used),
				set whether the NPC should be an obstruction to heroes and other NPCs.
				If set to false, the NPC can move through heroes and other NPCs and vice-versa.
				Heroes can always pass through Step-on NPCs.
				<span class="param">value</span> should be true or false.
				<br>
				This command is almost like <a href="#about-suspendobstruction" class="ref">suspend obstruction</a>/<a href="#about-resumeobstruction" class="ref">resume obstruction</a>,
				but it only affects a single npc and it doesn't stop activation of step-on NPCs.

				<br>
				If you want to allow an NPC to walk through all obstacles, you also need
				to use the <a href="#about-setnpcignoreswalls" class="ref">set NPC ignores walls</a> command.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getnpcobstructs" class="ref">get NPC obstructs</a>, </li>
<li><a href="#about-suspendobstruction" class="ref">suspend obstruction</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcobstructs"></a>
				<h4>get NPC obstructs (who)</h4>
<p>
			Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used), returns false if that NPC's obstruction has been suspended with <a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a> (and is always true otherwise).
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setnpcusable"></a>
				<h4>set NPC usable (who, value)</h4>
<p>
			Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used), set whether the NPC can be activated by the player as normal (as defined in the NPC ID data). <a href="#about-usenpc" class="ref">use NPC</a> will still work on the NPC. <span class="param">value</span> should be true or false.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getnpcusable" class="ref">get NPC usable</a>, </li>
<li><a href="#about-alternpc" class="ref">alter NPC</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcusable"></a>
				<h4>get NPC usable (who)</h4>
<p>
			Given an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a> (in which case the first NPC with that ID is used), returns false if normal activation of that NPC has been suspended with <a href="#about-setnpcusable" class="ref">set NPC usable</a>. This is always true otherwise, even for NPC types which are not activatable.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setnpcusable" class="ref">set NPC usable</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcextra"></a>
				<h4>NPC extra (who, which)</h4>
<p>
			Returns the npc instance-specific extra data field requested in <span class="param">which</span>, a number from 0 to 2. You may use the constants <span class="param">extra 0</span>, <span class="param">extra 1</span> and <span class="param">extra 2</span> to refer to them. If you use an NPC ID for <span class="param">who</span>, the first instance's data will be used.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setnpcextra" class="ref">set NPC extra</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setnpcextra"></a>
				<h4>set NPC extra (who, which, value)</h4>
<p>
			Sets the npc instance-specific extra data field requested in <span class="param">which</span>, a number from 0 to 2. You may use the constants <span class="param">extra 0</span>, <span class="param">extra 1</span> and <span class="param">extra 2</span> to refer to them.  If you use an NPC ID for <span class="param">who</span>, the first instance's data will be used.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Like other NPC instance data, the extra data for NPCs on the current map is not saved in save games!
					However, it is saved in mapstate NPC saves (see <a href="#about-savemapstate" class="ref">save map state</a>).
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-npcextra" class="ref">NPC extra</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="NPC%20Definitions"></a>
		<h3>
<span class="backlink"><a href="#NPCs">NPCs</a> →
			</span>NPC Definitions</h3>
		<p>
			These are the only commands for inspecting or modifying NPC definitions/types.
			All other commands act on single NPC instances (see <a href="#NPC%20Instance%20Data" class="ref">NPC Instance Data</a>).
		</p>
<ul></ul>
		<div class="command">
			<a name="about-alternpc"></a>
				<h4>alter NPC (who, NPCstat, value, pool)</h4>
<p>
			
				Changes the stats of an NPC type.
				<span class="code">alter NPC</span> can be used for many purposes.
				The following constants for this command are available:
				<br>
				<ul>
					<li>alter NPC (who,NPCstat:picture,picture number)</li>
					<li>
						alter NPC (who,NPCstat:palette,palette number)
						<br>
						Set the palette number to -1 to use the default palette.
					</li>
					<li>
						alter NPC (who,NPCstat:move type,move type code)
						<br>
						Available move types:
						<ul>
							<li>NPCmovetype:standstill</li>
							<li>NPCmovetype:wander</li>
							<li>NPCmovetype:pace</li>
							<li>NPCmovetype:rightturns</li>
							<li>NPCmovetype:leftturns</li>
							<li>NPCmovetype:randomturns</li>
							<li>NPCmovetype:chaseyou (aka NPCmovetype:chaseyoumeandering)</li>
							<li>NPCmovetype:chaseyoudirect</li>
							<li>NPCmovetype:avoidyou (aka NPCmovetype:avoidyoumeandering)</li>
							<li>NPCmovetype:avoidyoudirect</li>
							<li>NPCmovetype:walkinplace</li>
							<li>NPCmovetype:followwallsright</li>
							<li>NPCmovetype:followwallsleft</li>
							<li>NPCmovetype:followwallsrightstopsforothers</li>
							<li>NPCmovetype:followwallsleftstopsforothers</li>
							<li>NPCmovetype:chaseyoupathfinding</li>
						</ul>
					</li>
					<li>alter NPC (who,NPCstat:move speed,speed)</li>
					<li>alter NPC (who,NPCstat:display text,text box number)</li>
					<li>
						alter NPC (who,NPCstat:when activated,when activated code)
						<br>
						Available whenactivated codes:
						<ul>
							<li>NPCwhenactivated:changedirection</li>
							<li>NPCwhenactivated:faceplayer</li>
							<li>NPCwhenactivated:donotfaceplayer</li>
						</ul>
					</li>
					<li>
						alter NPC (who,NPCstat:give item,item number + 1)
						... Note that the item number is offset + 1. A zero means no item.
					</li>
					<li>
						alter NPC (who,NPCstat:pushability,pushability code)
						<br>
						Available pushability codes:
						<ul>
							<li>NPCpush:off</li>
							<li>NPCpush:full</li>
							<li>NPCpush:horizontal</li>
							<li>NPCpush:vertical</li>
							<li>NPCpush:uponly</li>
							<li>NPCpush:rightonly</li>
							<li>NPCpush:downonly</li>
							<li>NPCpush:leftonly</li>
						</ul>
					</li>
					<li>
						alter NPC (who,NPCstat:activation,activation code)
						<br>
						Available activation codes:
						<ul>
							<li>NPCactivation:use</li>
							<li>NPCactivation:touch</li>
							<li>NPCactivation:stepon</li>
						</ul>
					</li>
					<li>
						alter NPC (who,NPCstat:onetime use flag,onetime flag ID)
						<br>
						The onetime flag (see <a href="#about-checkonetime" class="ref">check onetime</a>) is zero if the
						NPC is usable repeatedly.
					</li>
					<li>
						alter NPC (who,NPCstat:tag1,tag ID)
					</li>
					<li>
						alter NPC (who,NPCstat:tag2,tag ID)
						<br>
						These are two tag conditions which both have to be true for the NPC
						to appear. A tag ID of 0 means no check is done (the condition is true).
						A positive condition means that tag needs to be ON, a negative means
						that tag needs to be OFF.
						For example, tag1 = -4 and tag2 = 0 means the NPC appears only when
						tag 4 is OFF.
					</li>
					<li>alter NPC (who,NPCstat:script,script ID)</li>
					<li>alter NPC (who,NPCstat:script argument,number)</li>
					<li>alter NPC (who,NPCstat:vehicle,vehicle ID+1)</li>
					<li>alter NPC (who,NPCstat:default movement zone,zone ID)</li>
					<li>alter NPC (who,NPCstat:default avoidance zone,zone ID)</li>
					<li>
						alter NPC (who,NPCstat:ignore passmap, true or false)
						<br>
						This is for the NPC editor setting, not the <a href="#about-setnpcignoreswalls" class="ref">set NPC ignores walls</a> command.
					</li>
					<li>
						alter NPC (who,NPCstat:pathfinding rule,rule)
						<br>
						The <span class="code">rule</span> (see the F1 help page for the NPC editor for more info) is one of:
						<ul>
							<li>pathfinding:default</li>
							<li>pathfinding:npcs obstruct</li>
							<li>pathfinding:npcs ignored</li>
						</ul>
					</li>
				</ul>
				Normally you would only give an NPC ID number to alter NPC,
				but if you want to use an <a href="#about-npcref" class="ref">NPC reference</a> it will still work.
				Just remember that alter NPC changes every copy of the NPC on the map,
				not just the specific one you referenced.
				<br>
				The <span class="param">pool</span> argument is an optional <a href="#about-npcpool" class="ref">NPC pool</a>.
				It cannot be used if you are specifying the NPC by reference, since then that NPC reference's
				current npc pool will be used.
				<br>
				Changes to global npcs in <span class="param">pool:global</span> will persist when you move to other maps,
				regardless of whether the map is set to remember NPC data.
				Those changes will be reset if you load a saved game or start a new game.
				<br>
				A good way to make use of <span class="code">alter NPC</span> is to wrap it in your own script. For example:
				<pre># Example alter NPC wrapper for changing NPC appearance
# Palette -1 means the default palette.
plotscript, change NPC, who, picture, palette = -1, begin
  alter NPC(who, NPCstat:picture, picture)
  alter NPC(who, NPCstat:palette, palette)
end</pre>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setnpcusable" class="ref">set NPC usable</a>, </li>
<li>
<a href="#about-setnpcmoves" class="ref">set NPC moves</a>, </li>
<li>
<a href="#about-setnpcignoreswalls" class="ref">set NPC ignores walls</a>, </li>
<li><a href="#about-setnpcobstructs" class="ref">set NPC obstructs</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-readnpc"></a>
				<h4>read NPC (who, NPCstat, pool)</h4>
<p>
			Returns data such as picture, palette, walking speed, text box, etc. for an NPC. Use the same constants as <a href="#about-alternpc" class="ref">alter NPC</a>.
			<br>
			The <span class="param">pool</span> argument is an optional <a href="#about-npcpool" class="ref">NPC pool</a>.
			It is only allowed when you specify the NPC by ID number.
			If you specify the NPC with an <a href="#about-npcref" class="ref">NPC reference</a> then the pool is determined by the reference.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If you use this command to read the give item number, the result is offset + 1. A zero means no item.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-alternpc" class="ref">alter NPC</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcspeed"></a>
				<h4>get NPC speed (who)</h4>
<p>
			
				Returns the walking speed of the specified NPC (either NPC reference or ID number) in pixels per tick.
				<br>
				(This is just an alias for <a href="#about-readnpc" class="ref">read NPC</a><span class="code">(who, NPCstat:movespeed)</span>).
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setnpcspeed"></a>
				<h4>set NPC speed (who, speed)</h4>
<p>
			
				Changes the walking speed of the specified NPC.
				<span class="param">speed</span> defaults to 4.
				Tiles are 20 pixels in size, and speeds that do not divide evenly or nearly
				evenly into 20 will result in jerky movement.
				So only use speeds 0, 1, 2, 3, 4, 5, 7, 10, or 20.
				<br>
				Normally you would only use an NPC ID number for <span class="param">who</span>,
				but if you want to use an <a href="#about-npcreference" class="ref">NPC reference</a> it will still work.
				Just remember that <span class="code">set NPC speed</span> changes every copy of the NPC on the map,
				not just the specific one you referenced.
				<br>
				(This is just an alias for <a href="#about-alternpc" class="ref">alter NPC</a><span class="code">(who, NPCstat:movespeed, speed)</span>).
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					Don't set speed to zero while an NPC is moving,
					it will cause the NPC to stop mid-step and become misaligned with the grid.
					Get all instances of the NPC to stop first and wait for them,
					or check with <a href="#about-npciswalking" class="ref">NPC is walking</a>.
				</div>
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="The%20Camera"></a>
		<h3>
<span class="backlink"></span>The Camera</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="The Camera-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-camerapixelx">camera pixel X</a><br>
		<a href="#about-camerapixely">camera pixel Y</a><br>
		<a href="#about-camerafollowshero">camera follows hero (who)</a><br>
		<a href="#about-camerafollowsnpc">camera follows NPC (who)</a><br>
		<a href="#about-camerafollowsslice">camera follows slice (slice)</a><br>
		<a href="#about-pancamera">pan camera (direction,distance,pixelstep)</a><br>
		<a href="#about-focuscamera">focus camera (x,y,speed)</a><br>
		<a href="#about-pixelfocuscamera">pixel focus camera (x,y,speed)</a><br>
		<a href="#about-putcamera">put camera (x,y)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-camerapixelx"></a>
				<h4>camera pixel X</h4>
<p>
			Returns the X position of the top left corner of the screen in pixels.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-camerapixely"></a>
				<h4>camera pixel Y</h4>
<p>
			Returns the Y position of the top left corner of the screen in pixels.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-camerafollowshero"></a>
				<h4>camera follows hero (who)</h4>
<p>
			Normally, the camera follows your leader. With this command, you can make the camera follow any hero you want. If you leave out the argument, the camera will follow your leader as normal.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-camerafollowsnpc"></a>
				<h4>camera follows NPC (who)</h4>
<p>
			With this command, you can make the camera follow an NPC instead of the hero. If more than one copy of the specified NPC exists, the camera will follow the first one. To revert the camera to normal, use <a href="#about-camerafollowshero" class="ref">camera follows hero</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-camerafollowsslice"></a>
				<h4>camera follows slice (slice)</h4>
<p>
			With this command, you can make the camera follow a slice instead of the hero. The slice will be centered on the screen. To revert the camera to normal, use <a href="#about-camerafollowshero" class="ref">camera follows hero</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-pancamera"></a>
				<h4>pan camera (direction,distance,pixelstep)</h4>
<p>
			This command causes the camera to stop following your leader and pan in the specified direction. For direction, you can use the constants: <a href="#about-north" class="ref">north</a>, <a href="#about-south" class="ref">south</a>, <a href="#about-east" class="ref">east</a>, <a href="#about-west" class="ref">west</a>, <a href="#about-up" class="ref">up</a>, <a href="#about-down" class="ref">down</a>, <a href="#about-left" class="ref">left</a>, or <a href="#about-right" class="ref">right</a>. The distance is the number of tiles you want the camera to move before it stops. You can also specify the number of pixels you want the camera to move for each tick. if you leave the last argument out, the camera will move by 2 pixels per tick. This command is normally used with <a href="#about-waitforcamera" class="ref">wait for camera</a>. To revert the camera to normal, use <a href="#about-camerafollowshero" class="ref">camera follows hero</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-focuscamera"></a>
				<h4>focus camera (x,y,speed)</h4>
<p>
			This command causes the camera to focus itself on the specified X,Y tile coordinates of the map. These coordinates are in units of tiles. The third argument, the speed, tells how fast the camera will pan. If you do not specify a speed, the camera will pan 2 pixels per tick. This command is normally used with <a href="#about-waitforcamera" class="ref">wait for camera</a>. To revert the camera to normal, use <a href="#about-camerafollowshero" class="ref">camera follows hero</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-pixelfocuscamera"></a>
				<h4>pixel focus camera (x,y,speed)</h4>
<p>
			This command causes the camera to focus itself on the specified X,Y pixel coordinates of the map. These coordinates are in units of pixels. The third argument, the speed, tells how fast the camera will pan. If you do not specify a speed, the camera will pan 2 pixels per tick. This command is normally used with <a href="#about-waitforcamera" class="ref">wait for camera</a>. To revert the camera to normal, use <a href="#about-camerafollowshero" class="ref">camera follows hero</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-putcamera"></a>
				<h4>put camera (x,y)</h4>
<p>
			This command causes the top left corner of the camera to instantly jump to the specified X,Y pixel coordinates of the map. These coordinates are in units of pixels, not tiles. To position the camera by tiles, just multiply the tile position by 20. To revert the camera to normal, use <a href="#about-camerafollowshero" class="ref">camera follows hero</a>.
			
			
			
		</p>
</div>
		<div class="command">
		<h4>wait for camera</h4>
		<p><a href="#about-waitforcamera">Documented in the Wait Commands section.</a></p>
		</div>
		<hr>
		</div>
		<div class="section">
<a name="Text%20Boxes"></a>
		<h3>
<span class="backlink"></span>Text Boxes</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Text Boxes-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-showtextbox">show text box (number)</a><br>
		<a href="#about-advancetextbox">advance text box</a><br>
		<a href="#about-currenttextbox">current text box</a><br>
		<a href="#about-speakingnpc">speaking NPC</a><br>
		<a href="#about-stringfromtextbox">string from textbox (ID, textbox, line, ignored)</a><br>
		<a href="#about-textboxline">textbox line (string ID, textbox, line, expand, strip)</a><br>
		<a href="#about-textboxtext">textbox text (string ID, textbox, expand, strip)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-showtextbox"></a>
				<h4>show text box (number)</h4>
<p>
			Displays the numbered text box, just as if you had talked to an NPC. The text box will not actually pop up until the next <a href="#about-wait" class="ref">wait</a> command. This command is most often used with the <a href="#about-waitfortextbox" class="ref">wait for text box</a> command.
			
			<pre>show text box(2) # Show a text box
wait for text box # wait until the player continues</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-advancetextbox"></a>
				<h4>advance text box</h4>
<p>
			Advances a text box just as if the player had pressed a key. For use while <a href="#about-suspendboxadvance" class="ref">suspend box advance</a> is active.
			
			<pre>suspend box advance # stop players from mucking things up
show text box(2)   # Show a text box
wait(45)           # Wait about 3 seconds
advance text box   # Next text box. Maybe it ends with "Press USE key to continue"
resume box advance # go back to normal</pre>
			
		</p>
</div>
		<div class="command">
		<h4>wait for text box</h4>
		<p><a href="#about-waitfortextbox">Documented in the Wait Commands section.</a></p>
		</div>
		<div class="command">
			<a name="about-currenttextbox"></a>
				<h4>current text box</h4>
<p>
			Returns the number of the currently displayed text box, or -1 if there's none.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-speakingnpc" class="ref">speaking NPC</a>, </li>
<li>
<a href="#about-showtextbox" class="ref">show text box</a>, </li>
<li><a href="#about-advancetextbox" class="ref">advance text box</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-speakingnpc"></a>
				<h4>speaking NPC</h4>
<p>
			
				If the player activated an NPC which showed a textbox
				and the hero and NPC are still "speaking" (the textbox chain isn't done),
				returns the <a href="#about-npcref" class="ref">NPC reference</a> for that NPC.
				Otherwise returns <span class="code">false</span>.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					If you try to use this in a script called either AFTER or INSTEAD of
					a textbox, the textbox has closed by the time the script starts,
					so the NPC is no longer speaking and this will return <span class="code">false</span>.
					<br>
					Likewise, if an NPC calls a script directly without showing a textbox
					this will just return <span class="code">false</span>.
					But you don't need <span class="param">speaking NPC</span> for scripts triggered directly from NPCs,
					because the script is given the NPC reference as its second argument (if any).
					(The first argument is customisable in the NPC editor.)
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-currenttextbox" class="ref">current text box</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-stringfromtextbox"></a>
				<h4>string from textbox (ID, textbox, line, ignored)</h4>
<p>
			Loads one of the <span class="param">line</span>s of a <span class="param">textbox</span> into a string <span class="param">ID</span>. Valid numbers for <span class="param">line</span> are 0-7. Trailing and leading whitespace is stripped from the line, and embedded codes like ${H1} in the string are automatically substituted.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">This command is obsolete and exists only for compatibility with old games: It has been replaced with <a href="#about-textboxline" class="ref">textbox line</a>. The fourth argument does nothing.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-expandstring" class="ref">expand string</a>, </li>
<li><a href="#about-textboxline" class="ref">textbox line</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-textboxline"></a>
				<h4>textbox line (string ID, textbox, line, expand, strip)</h4>
<p>
			Loads one of the <span class="param">line</span>s of a <span class="param">textbox</span> into a <span class="param">string ID</span>. Valid numbers for <span class="param">line</span> are 0-7. If <span class="param">expand</span> is true (which is the default) codes such as ${H1} in the string will be substituted automatically. If <span class="param">strip</span> is true (which is NOT the default), white space at the beginning and end of the string are removed.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-expandstring" class="ref">expand string</a>, </li>
<li><a href="#about-textboxtext" class="ref">textbox text</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-textboxtext"></a>
				<h4>textbox text (string ID, textbox, expand, strip)</h4>
<p>
			
				Loads all lines of a <span class="param">textbox</span> into a single <span class="param">string ID</span>.
				If <span class="param">expand</span> is true (which is the default) codes such as ${H1} in the string will be substituted automatically.
				If <span class="param">strip</span> is true (which is NOT the default), white space at the beginning and end of the string are removed.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-textboxline" class="ref">textbox line</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Triggering%20Stuff"></a>
		<h3>
<span class="backlink"></span>Triggering Stuff</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Triggering Stuff-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-fightformation">fight formation (number)</a><br>
		<a href="#about-usenpc">use NPC (who)</a><br>
		<a href="#about-useshop">use shop (shop)</a><br>
		<a href="#about-forcemountvehicle">force mount vehicle (npc)</a><br>
		<a href="#about-currentvehicleid">current vehicle id</a><br>
		<a href="#about-currentvehiclenpc">current vehicle npc</a><br>
		<a href="#about-gracefullydismountvehicle">gracefully dismount vehicle</a><br>
		<a href="#about-dismountvehicle">dismount vehicle</a><br>
		<a href="#about-gameover">game over</a><br>
		<a href="#about-resetgame">reset game(args...)</a><br>
</div></ul>
</div>
		<div class="command">
		<h4>show text box (number)</h4>
		<p><a href="#about-showtextbox">Documented in the Text Boxes section.</a></p>
		</div>
		<div class="command">
			<a name="about-fightformation"></a>
				<h4>fight formation (number)</h4>
<p>
			Starts a battle with the numbered enemy formation. This command returns <a href="#about-true" class="ref">true</a> on victory and <a href="#about-false" class="ref">false</a> if the battle ends for any other reason. However if all heroes die the game will still end as normal unless you set a death script. In that case, <a href="#about-false" class="ref">false</a> is returned after the death script has finished.
				The situations which cause <a href="#about-true" class="ref">true</a> to be returned are:<br>
				<ul>
					<li>Normal victory</li>
					<li>An attack with the "Force battle victory" bit ends the battle</li>
				</ul>
				The situations which cause <a href="#about-false" class="ref">false</a> to be returned are:<br>
				<ul>
					<li>All heroes died</li>
					<li>Player ran from battle</li>
					<li>An attack with the "Force battle loss &amp; heroes run away" bit ends the battle</li>
					<li>An attack with the "Force battle loss &amp; exit" bit ends the battle</li>
					<li>A timer with <a href="#about-timerflag:critical" class="ref">timer flag: critical</a> runs out and ends the battle</li>
					<li>The end-battle-instantly debug key is used</li>
				</ul>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">An automatic <a href="#about-wait" class="ref">wait</a>(1) occurs immediately after this command.</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setdeathscript" class="ref">set death script</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-usenpc"></a>
				<h4>use NPC (who)</h4>
<p>
			
				Remotely trigger an NPC.
				You can use either an <a href="#about-npcref" class="ref">NPC reference</a> or an <a href="#about-npcid" class="ref">NPC ID</a>.
				Whatever actions are associated with triggering that NPC will be taken,
				text box, script, vehicle, item, whatever.
				<br>
				This command works even if the NPC has been made un-usable with <a href="#about-setnpcusable" class="ref">set NPC usable</a>
				and regardless of any "suspend" commands.
				However you can't activate an NPC that's tag-disabled (including one-time-use flags).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					An automatic <a href="#about-wait" class="ref">wait</a><span class="code">(1)</span> occurs immediately after this command.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-gracefullydismountvehicle" class="ref">gracefully dismount vehicle</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>use door (number, fade screen)</h4>
		<p><a href="#about-usedoor">Documented in the Doors section.</a></p>
		</div>
		<div class="command">
			<a name="about-useshop"></a>
				<h4>use shop (shop)</h4>
<p>
			Takes you directly to a shop. You can specify the shop's ID number or its name in the form shop:name
			
			
			
		</p>
</div>
		<div class="command">
		<h4>teleport to map (map, x, y)</h4>
		<p><a href="#about-teleporttomap">Documented in the Moving Heroes section.</a></p>
		</div>
		<div class="command">
			<a name="about-forcemountvehicle"></a>
				<h4>force mount vehicle (npc)</h4>
<p>
			Makes you mount the vehicle specified by NPC ID or NPC reference. Unlike <a href="#about-usenpc" class="ref">use NPC</a>, <span class="param">force mount vehicle</span> does not bother checking the tile you are currently standing on. If the NPC is not a vehicle, nothing will happen.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-currentvehicleid"></a>
				<h4>current vehicle id</h4>
<p>
			Returns the vehicle ID number of the vehicle your hero is currently riding. If you are not riding a vehicle, it will return -1
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-currentvehiclenpc"></a>
				<h4>current vehicle npc</h4>
<p>
			Returns an NPC reference to the vehicle your hero is currently riding. If you are not riding a vehicle, it will return 0 or false
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-gracefullydismountvehicle"></a>
				<h4>gracefully dismount vehicle</h4>
<p>
			Attempts to dismount whatever vehicle you are riding. If you are not riding a vehicle, nothing will happen. If the vehicle is not in a location where you are allowed to dismount, then nothing will happen.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-dismountvehicle" class="ref">dismount vehicle</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-dismountvehicle"></a>
				<h4>dismount vehicle</h4>
<p>
			
				Forces you to instantly dismount whatever vehicle you are riding without advancing the hero or allowing
				an airship to land. This will work even if the vehicle is located in a place where it would not normally allow dismounting. If you are not riding a vehicle, nothing will happen.
				<br>
				If you want normal dismounting behavior, as if the player had pressed the key to dismount a vehicle, use the <a href="#about-gracefullydismountvehicle" class="ref">gracefully dismount vehicle</a> command instead.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-gracefullydismountvehicle" class="ref">gracefully dismount vehicle</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gameover"></a>
				<h4>game over</h4>
<p>
			
				Resets the game and returns you to the title screen.
				This command is most useful for after-you-win-the-game type scripts,
				and for death-scripts that are triggered when you lose in battle.
				(The script calling <span class="code">game over</span> ends immediately.)
				This command is similar to <a href="#about-resetgame" class="ref">reset game</a>,
				the main difference being that if the title screen and load screen have both been disabled
				(the <span class="code">Skip title/load screen</span> preference bitsets),
				<span class="code">game over</span> will completely exit the game (either taking you back to the game select screen,
				or exiting to the operating system),
				while <a href="#about-resetgame" class="ref">reset game</a> starts a new game.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					The game will instantly transition to the title screen (or load menu, if the title is disabled)
					without a screen fade.
					So you probably want to call <a href="#about-fadescreenout" class="ref">fade screen out</a> beforehand.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					By using <a href="#about-resetgame" class="ref">reset game</a> or <a href="#about-loadfromslot" class="ref">load from slot</a> instead,
					you can pass arguments to the newgame and loadgame scripts.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resetgame"></a>
				<h4>reset game(args...)</h4>
<p>
			
				Resets and starts a new game, skipping both title and load game screens.
				It can be necessary to use this instead of <a href="#about-gameover" class="ref">game over</a> so that the
				program will not exit if the title screen and load screen have both been disabled.
				It always resets the game back to the beginning and runs the new-game script.
				(The script calling <span class="code">reset game</span> ends immediately.)
				You can pass any number of optional <span class="param">args</span>, which become the arguments
				to the newgame script.
				For an example, see <a href="#about-loadfromslot" class="ref">load from slot</a>, which passes its arguments
				to the loadgame script in the same way.
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					The default arguments of a newgame script (and all other triggered scripts)
					are currently ignored.
					If you don't pass enough <span class="param">args</span>, then the remaining arguments default to zero.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Unlike <a href="#about-gameover" class="ref">game over</a>, the screen will always automatically
					fade out to black when calling <span class="code">reset game</span>.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-gameover" class="ref">game over</a>, </li>
<li><a href="#about-loadfromslot" class="ref">load from slot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>run game(file string id)</h4>
		<p><a href="#about-rungame">Documented in the Advanced Functions section.</a></p>
		</div>
		<hr>
		</div>
		<div class="section">
<a name="Basic%20Display%20Commands"></a>
		<h3>
<span class="backlink"></span>Basic Display Commands</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Basic Display Commands-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-showvalue">show value (number)</a><br>
		<a href="#about-showstring">show string (ID)</a><br>
		<a href="#about-shownovalue">show no value</a><br>
		<a href="#about-cancelmapnamedisplay">cancel map name display</a><br>
		<a href="#about-showbackdrop">show backdrop (number)</a><br>
		<a href="#about-showmap">show map</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-showvalue"></a>
				<h4>show value (number)</h4>
<p>
			Displays the number in the bottom left corner of the screen. Useful for count-down timers, and for debugging complicated scripts. See <a href="#about-tracevalue" class="ref">trace value</a> for a more powerful debugging tool.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-showstring"></a>
				<h4>show string (ID)</h4>
<p>
			Displays string #ID in the bottom left corner of the screen, as with the <a href="#about-showvalue" class="ref">show value</a> command. Use <a href="#about-shownovalue" class="ref">show no value</a> to remove the string from the screen. Note that this command displays the value of the string at the moment the command was run. Later changes to the value of the string will not appear unless you run show string again. If you need real-time display of changes to a string, use <a href="#about-showstringat" class="ref">show string at</a> or <a href="#about-centerstringat" class="ref">center string at</a> instead.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-showvalue" class="ref">show value</a>, </li>
<li>
<a href="#about-shownovalue" class="ref">show no value</a>, </li>
<li>
<a href="#about-showstringat" class="ref">show string at</a>, </li>
<li><a href="#about-centerstringat" class="ref">center string at</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-shownovalue"></a>
				<h4>show no value</h4>
<p>
			Gets rid of the number in the bottom left corner of the screen after a <a href="#about-showvalue" class="ref">show value</a> or <a href="#about-showstring" class="ref">show string</a> command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-cancelmapnamedisplay"></a>
				<h4>cancel map name display</h4>
<p>
			If the map name is being displayed, this command makes it disappear. For example, this may be useful if you want the map name to appear when you enter a map normally, but not when you jump to the map for a plotscripted cutscene.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-showbackdrop"></a>
				<h4>show backdrop (number)</h4>
<p>
			
				Displays the specified full screen backdrop on the screen.
				This allows you to show full screen pictures without attaching them to text boxes.
				Use <a href="#about-showmap" class="ref">show map</a> or <span class="code">show backdrop(-1)</span> to hide the backdrop and
				show the map again.
				You can also do some simple animation effects by calling show backdrop many times with <a href="#about-wait" class="ref">wait</a> commands in between.
				<br>
				Whether and which backdrop is displaying is saved in save games.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">It's also possible to display backdrops as sprite slices using <a href="#about-loadbackdropsprite" class="ref">load backdrop sprite</a>.</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-showmap" class="ref">show map</a>, </li>
<li><a href="#about-loadbackdropsprite" class="ref">load backdrop sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-showmap"></a>
				<h4>show map</h4>
<p>
			shows the map again after a <a href="#about-showbackdrop" class="ref">show backdrop</a> command. Don't confuse this with <a href="#about-showminimap" class="ref">show mini map</a>
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Opening%20Built-in%20Menus"></a>
		<h3>
<span class="backlink"></span>Opening Built-in Menus</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Opening Built-in Menus-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-mainmenu">main menu</a><br>
		<a href="#about-showminimap">show mini map</a><br>
		<a href="#about-itemsmenu">items menu</a><br>
		<a href="#about-statusscreen">status screen (who)</a><br>
		<a href="#about-spellsmenu">spells menu (who)</a><br>
		<a href="#about-equipmenu">equip menu (who, allow switching)</a><br>
		<a href="#about-savemenu">save menu (reallysave)</a><br>
		<a href="#about-loadmenu">load menu (reallyload, show new game)</a><br>
		<a href="#about-ordermenu">order menu</a><br>
		<a href="#about-teammenu">team menu</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-mainmenu"></a>
				<h4>main menu</h4>
<p>
			
				Opens the main menu; exactly equivalent to <a href="#about-openmenu" class="ref">open menu</a>(0).
				If menu 0 is already open, it is brought to the top.
				Returns the menu handle of the new or existing instance of menu 0.
				<br>
				This isn't affected by anything that prevents the player from opening
				the main menu in the normal ways.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					If menu 0 does NOT have the "Allow gameplay &amp; scripts" bit set,
					then your script will pause as soon as the menu opens, until either
					it's closed or another menu with that bit ON is opened.
					And once the menu has closed the menu handle is invalid!
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-showminimap"></a>
				<h4>show mini map</h4>
<p>
			Displays the mini-map
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-itemsmenu"></a>
				<h4>items menu</h4>
<p>
			Takes you directly to the items menu. Note that if the player uses an item that calls up a text box, the items menu command will behave like a <a href="#about-showtextbox" class="ref">show text box</a> command for that text box.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If the player uses a item which kills all the heroes in the party (outside of battles a hero isn't counted as dead if their maximum HP is zero or negative), a normal game over occurs: the game over script is run if there is one, otherwise the game ends. However the game over won't happen until the next wait command (such as <a href="#about-wait" class="ref">wait</a>).</div>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-statusscreen"></a>
				<h4>status screen (who)</h4>
<p>
			Takes you directly to a hero's status screen. Specify the hero using its position in the party 0-3. Use <a href="#about-findhero" class="ref">find hero</a> if you want to specify the hero by name. The <a href="#about-pickhero" class="ref">pick hero</a> command can also be useful.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-spellsmenu"></a>
				<h4>spells menu (who)</h4>
<p>
			Takes you directly to a hero's spells menu. Specify the hero using its position in the party 0-3. Use <a href="#about-findhero" class="ref">find hero</a> if you want to specify the hero by name. The <a href="#about-pickhero" class="ref">pick hero</a> command can also be useful.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If the player uses a spell which kills all the heroes in the party (outside of battles a hero isn't counted as dead if their maximum HP is zero or negative), a normal game over occurs: the game over script is run if there is one, otherwise the game ends. However the game over won't happen until the next wait command (such as <a href="#about-wait" class="ref">wait</a>).</div>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-equipmenu"></a>
				<h4>equip menu (who, allow switching)</h4>
<p>
			
				Takes you directly to a hero's equip menu.
				Specify the hero using its position in the party 0-3.
				Use <a href="#about-findhero" class="ref">find hero</a> if you want to specify the hero by name.
				The <a href="#about-pickhero" class="ref">pick hero</a> command can also be useful.
				If you do not specify any hero, the first hero in the party will be used.
				The optional second argument <span class="param">allow switching</span> says whether
				to allow the player to switch to a different hero by pressing
				Left and Right keys.
				It defaults to <span class="code">true</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-savemenu"></a>
				<h4>save menu (reallysave)</h4>
<p>
			Takes you directly to the save menu. Will return the number from 1 to 1000 of the slot the player saved in, or <a href="#about-false" class="ref">false</a> if the player did not save. You can optionally pass an argument of <a href="#about-false" class="ref">false</a> to make the menu display without actually saving.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-autosave" class="ref">autosave</a>, </li>
<li><a href="#about-saveinslot" class="ref">save in slot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadmenu"></a>
				<h4>load menu (reallyload, show new game)</h4>
<p>
			
				Displays the load game menu (unless there are no saved games, in which case it's skipped).
				The player can pick a saved game to load or Exit/Cancel or New Game.
				New Game only appears if <span class="param">show new game</span> is <span class="code">true</span>, which is the default,
				together with the Exit button.
				(If <span class="param">show new game</span> is <span class="code">false</span> the button is labelled Cancel instead of Exit.)
				If there are no saved games, it's equivalent to selecting
				New Game, even if <span class="param">show new game</span> is false.
				<br>
				The <span class="param">reallyload</span> argument is optional, and defaults to <span class="code">true</span>.
				When true,
				if the player picks a save it's loaded,
				if they pick New Game (or there are no saves) then the calling script continues,
				and if they select Exit/Cancel
				the game quits to the titlescreen if there is one or completely if not.
				<br>
				If you pass <span class="code">false</span> as <span class="param">reallyload</span> argument
				the menu only displays (or is skipped) without actually loading or quiting.
				You'll need to interpret the return value to find out which option the player selected:
				positive values (1 to 1000) are save slot numbers, 0 means New Game/menu skipped and -1 is Quit or cancelled (pressed ESC).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
				If you want the New Game option to actually reset the game,
				call <a href="#about-resetgame" class="ref">reset game</a> afterwards:
<pre>load menu
reset game</pre>

				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you don't want the player to be able to quit the game, only load a game or continue, then
					write:
					<pre>variable (slot)
slot := load menu (false)
if (slot &gt; 0) then (load from slot (slot))</pre>
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-loadfromslot" class="ref">load from slot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-ordermenu"></a>
				<h4>order menu</h4>
<p>
			Takes you directly to the order menu, where you can change the order of the heroes in your active party.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-teammenu"></a>
				<h4>team menu</h4>
<p>
			Takes you directly to the team menu, where you can change the order of the heroes in your active party, and swap heroes in and out of your reserve.
			
			
			
		</p>
</div>
		<div class="command">
		<h4>debug menu</h4>
		<p><a href="#about-debugmenu">Documented in the Debugging section.</a></p>
		</div>
		<hr>
		</div>
		<div class="section">
<a name="The%20Party"></a>
		<h3>
<span class="backlink"></span>The Party</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>
			See also the <a href="#Hero%20Data" class="ref">Hero Data</a> section for inspecting or modifying individual heroes.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
			You should definitely read <a href="http://rpg.hamsterrepublic.com/ohrrpgce/Ways_to_refer_to_a_hero_in_a_script">
			Ways to refer to a hero in a script</a> to understand the differences between hero ID numbers
			(including <span class="code">hero:name</span> constants), hero party slots, and walkabout rank!
			</div>
		</p>
<div class="select-content-shown" id="The Party-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown"></div>
		<li>
<a href="#Inspecting%20the%20Party">Inspecting the Party</a><br>
		<ul class="content-shown">
		<a href="#about-leader">leader</a><br>
		<a href="#about-findhero">find hero (who)</a><br>
		<a href="#about-herobyslot">hero by slot (where)</a><br>
		<a href="#about-rankincaterpillar">rank in caterpillar (who)</a><br>
		<a href="#about-herobyrank">hero by rank (where)</a><br>
		<a href="#about-roominactiveparty">room in active party</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Changing%20the%20Party">Changing the Party</a><br>
		<ul class="content-shown">
		<a href="#about-addhero">add hero (who)</a><br>
		<a href="#about-deletehero">delete hero (who)</a><br>
		<a href="#about-deleteherobyslot">delete hero by slot (slot)</a><br>
		<a href="#about-swapinhero">swap in hero (who)</a><br>
		<a href="#about-swapouthero">swap out hero (who)</a><br>
		<a href="#about-lockhero">lock hero (who)</a><br>
		<a href="#about-unlockhero">unlock hero (who)</a><br>
		<a href="#about-swapbyname">swap by name (name,name)</a><br>
		<a href="#about-swapbyposition">swap by position (slot1, slot2)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Inspecting%20the%20Party"></a>
		<h3>
<span class="backlink"><a href="#The%20Party">The Party</a> →
			</span>Inspecting the Party</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-leader"></a>
				<h4>leader</h4>
<p>
			Returns the hero ID number (as given in the Edit Heroes menu) of the current caterpillar party leader.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-findhero"></a>
				<h4>find hero (who)</h4>
<p>
			Searches through your (battle) party to see if the specified hero is there, and returns the position where the hero was found, or -1 if the hero was not found. The position in the party is needed by most commands operating on heroes. You can use the names (constants) defined in your HSI file in the format <span class="code">hero:name</span> for the ID number of the hero (as it has in the Edit Heroes menu). Not only does this tell you if a hero is in your party, but you can also use it to tell whether or not the hero is in your active party. find hero will return 0, 1, 2 or 3 if the hero is in the active party, and 4 or higher if the hero is in the reserve. Note that position in the battle party is not the same as position in the caterpillar: the leader is not necessarily hero 0. The opposite to find hero is <a href="#about-herobyslot" class="ref">hero by slot</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-rankincaterpillar" class="ref">rank in caterpillar</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-herobyslot"></a>
				<h4>hero by slot (where)</h4>
<p>
			This command is the reverse of <a href="#about-findhero" class="ref">find hero</a>. Given a position in your party, it will tell you which hero is in that slot, or -1 if no hero is in that slot. The number returned can be compared with the names (constants) defined in your HSI file in the format <span class="code">hero:name</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-rankincaterpillar"></a>
				<h4>rank in caterpillar (who)</h4>
<p>
			Searches through your active party to see if the specified hero is there, and returns the position in the walkabout caterpillar where the hero was found, or -1 if the hero was not found. Use the names (constants) defined in your HSI file in the format <span class="code">hero:name</span>. This is particularly useful if you need to use a command like <a href="#about-walkhero" class="ref">walk hero</a> but you are not sure which position the hero is in.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-findhero" class="ref">find hero</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-herobyrank"></a>
				<h4>hero by rank (where)</h4>
<p>
			This command is the reverse of <a href="#about-rankincaterpillar" class="ref">rank in caterpillar</a>. Given a position in your walkabout party, it will tell you which hero is in that position, or -1 if no hero is in that position. The number returned can be compared with the names (constants) defined in your HSI file in the format <span class="code">hero:name</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-roominactiveparty"></a>
				<h4>room in active party</h4>
<p>
			A function that returns the number of available spaces in your active party. It will return zero or <a href="#about-false" class="ref">false</a> if there is no room.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Changing%20the%20Party"></a>
		<h3>
<span class="backlink"><a href="#The%20Party">The Party</a> →
			</span>Changing the Party</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-addhero"></a>
				<h4>add hero (who)</h4>
<p>
			Puts the named hero in your party. If there is no room, the hero will be added to your reserve. Use the constants defined in your HSI file. They are in the form of hero:name. This command returns the party slot that the hero was added to, or -1 if both the active and reserve parties are completely full.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-deletehero"></a>
				<h4>delete hero (who)</h4>
<p>
			
				Removes the named hero from your party. If you have more
				than one copy of the hero in your party, only the first
				one will be deleted. Use the constants defined in your
				HSI file. They are in the form of hero:name
				
			
			
			<div class="seealso">See also: <ul><li><a href="#about-deleteherobyslot" class="ref">delete hero by slot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-deleteherobyslot"></a>
				<h4>delete hero by slot (slot)</h4>
<p>
			
				Removes a hero from the given slot in your party.
				Returns -1 if no hero was removed because the slot was
				already empty.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-deletehero" class="ref">delete hero</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-swapinhero"></a>
				<h4>swap in hero (who)</h4>
<p>
			Moves the named hero in your from your reserves to your active party. If there is no room in your active party, the hero will not be moved. Use the constants defined in your HSI file. They are in the form of hero:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-swapouthero"></a>
				<h4>swap out hero (who)</h4>
<p>
			Moves the named hero from your active party into your reserve. Use the constants defined in your HSI file. They are in the form of hero:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-lockhero"></a>
				<h4>lock hero (who)</h4>
<p>
			Locking a hero prevents the player from moving the hero on the party menu. Locked heroes in the active party cannot be moved into the reserve, and locked heroes in the reserve are completely hidden. Also prevents a hero from being moved by <a href="#about-swapinhero" class="ref">swap in hero</a> or <a href="#about-swapouthero" class="ref">swap out hero</a>. Use the constants defined in your HSI file. They are in the form of hero:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-unlockhero"></a>
				<h4>unlock hero (who)</h4>
<p>
			Reverses <a href="#about-lockhero" class="ref">lock hero</a>, and makes it possible to move a hero in and out of the active party again. Use the constants defined in your HSI file. They are in the form of hero:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-swapbyname"></a>
				<h4>swap by name (name,name)</h4>
<p>
			Swaps two named heroes in your party no matter what position they are in. Use the names defined in your HSI file in the form hero:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-swapbyposition"></a>
				<h4>swap by position (slot1, slot2)</h4>
<p>
			
				Swaps two heroes in your party by their positions in the party (ie, by party slot).
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Money"></a>
		<h3>
<span class="backlink"></span>Money</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Money-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-partymoney">party money</a><br>
		<a href="#about-getmoney">get money (amount)</a><br>
		<a href="#about-losemoney">lose money (amount)</a><br>
		<a href="#about-setmoney">set money (amount)</a><br>
		<a href="#about-paymoney">pay money (amount)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-partymoney"></a>
				<h4>party money</h4>
<p>
			Returns how much money your party has.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmoney"></a>
				<h4>get money (amount)</h4>
<p>
			Adds the specified amount to your party's money
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-losemoney"></a>
				<h4>lose money (amount)</h4>
<p>
			Subtracts the specified amount from your party's money.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmoney"></a>
				<h4>set money (amount)</h4>
<p>
			Changes the amount of money your party has.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-paymoney"></a>
				<h4>pay money (amount)</h4>
<p>
			A function that checks to see if you have enough money to pay the amount specified. If you do, it subtracts it, and returns <a href="#about-true" class="ref">true</a>. If you do not have enough, it subtracts nothing, but returns <a href="#about-false" class="ref">false</a>. Intended for use in <a href="#about-if" class="ref">if</a> statements.
			
			<pre>if(pay money(1000)) then, begin
	get item(item:uber sword)
end, else, begin
	show text box(61) # ha ha, no uber sword for you!
	wait for text box
end</pre>
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Items"></a>
		<h3>
<span class="backlink"></span>Items</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>Currently there are almost no script commands to get or set any item data, except for the name and description of an item.</p>
<div class="select-content-shown" id="Items-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-useitem">use item (item)</a><br>
		<a href="#about-getitemname">get item name (ID, item)</a><br>
		<a href="#about-getitemdescription">get item description (ID, item)</a><br>
		<a href="#about-getitemmaximumstacksize">get item maximum stack size (item)</a><br>
</div>
		<li>
<a href="#Inventory">Inventory</a><br>
		<ul class="content-shown">
		<a href="#about-getitem">get item (item, number)</a><br>
		<a href="#about-deleteitem">delete item (item, number)</a><br>
		<a href="#about-iteminslot">item in slot (slot)</a><br>
		<a href="#about-setiteminslot">set item in slot (slot, item)</a><br>
		<a href="#about-itemcountinslot">item count in slot (slot)</a><br>
		<a href="#about-setitemcountinslot">set item count in slot (slot, count)</a><br>
		<a href="#about-useiteminslot">use item in slot (slot)</a><br>
		<a href="#about-inventory">inventory (item)</a><br>
		<a href="#about-getinventorysize">get inventory size</a><br>
		<a href="#about-setinventorysize">set inventory size (new size)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Equipment">Equipment</a><br>
		<ul class="content-shown">
		<a href="#about-unequip">unequip (hero, slot)</a><br>
		<a href="#about-forceequip">force equip (hero, slot, item)</a><br>
		<a href="#about-equipwhere">equip where (hero, item)</a><br>
		<a href="#about-checkequipment">check equipment (hero, slot)</a><br>
		<a href="#about-getdefaultweapon">get default weapon (hero)</a><br>
		<a href="#about-setdefaultweapon">set default weapon (hero, item)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-useitem"></a>
				<h4>use item (item)</h4>
<p>
			Attempts to use an item as if you had selected it in the items menu. The argument is the item's ID number, or one of the <span class="param">item:name</span> constants in your .hsi file. This command will only work if the item can be used outside of battle, either as a cure attack, or to teach a hero a spell, or to trigger a text box. This command does not care if you actually have any of the item in your inventory, and if it is a consumable item, you will not lose any. The return value is true if you successfully used the item, or false if the item was unusable or the user cancelled.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If the item causes an attack to happen which kills all the heroes in the party (outside of battles a hero isn't counted as dead if their maximum HP is zero or negative), a normal game over occurs: the game over script is run if there is one, otherwise the game ends. However the game over won't happen until the next wait command (such as <a href="#about-wait" class="ref">wait</a>).</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-useiteminslot" class="ref">use item in slot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getitemname"></a>
				<h4>get item name (ID, item)</h4>
<p>
			This command will take the name of item #<span class="param">item</span> and stick it in string #<span class="param">ID</span>, overwriting its contents. This can be useful for "You got &lt;item&gt;!" type messages.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getitemdescription"></a>
				<h4>get item description (ID, item)</h4>
<p>
			This command will take the description of item #<span class="param">item</span> and stick it in string #<span class="param">ID</span>, overwriting its contents.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getitemmaximumstacksize"></a>
				<h4>get item maximum stack size (item)</h4>
<p>
			Returns the maximum allowed size of a stack of items in the inventory. The <span class="param">item</span> argument is an item ID; you can refer to the item by number, or you can use the constants defined in your .hsi file, which are in the form of item:name. If the item uses the default stack size, then the default value is returned.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-itemcountinslot" class="ref">item count in slot</a>, </li>
<li><a href="#about-getinventorysize" class="ref">get inventory size</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>equip where (hero, item)</h4>
		<p><a href="#about-equipwhere">Documented in the Equipment section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Inventory"></a>
		<h3>
<span class="backlink"><a href="#Items">Items</a> →
			</span>Inventory</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-getitem"></a>
				<h4>get item (item, number)</h4>
<p>
			Adds the specified number of the specified item to your inventory. If you do not specify a number, only one will be added. You can refer to the item by number, or you can use the constants defined in your HSI file, which are in the form of item:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-deleteitem"></a>
				<h4>delete item (item, number)</h4>
<p>
			Removes the specified number of the specified item from your inventory. If you do not specify a number, only one will be removed. You can refer to the item by number, or you can use the constants defined in your HSI file, which are in the form of item:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-iteminslot"></a>
				<h4>item in slot (slot)</h4>
<p>
			Return a the item ID number at a specific slot in your inventory. If the inventory slot is empty, it will return -1. Slots are numbered from 0 to <a href="#about-getinventorysize" class="ref">get inventory size</a>-1.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setiteminslot" class="ref">set item in slot</a>, </li>
<li>
<a href="#about-itemcountinslot" class="ref">item count in slot</a>, </li>
<li>
<a href="#about-setitemcountinslot" class="ref">set item count in slot</a>, </li>
<li><a href="#about-getinventorysize" class="ref">get inventory size</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setiteminslot"></a>
				<h4>set item in slot (slot, item)</h4>
<p>
			Change the item ID number at a specific slot in your inventory. The <span class="param">slot</span> argument is the position in your inventory screen (slots are numbered from 0 to <a href="#about-getinventorysize" class="ref">get inventory size</a>-1), and the <span class="param">item</span> argument is the item ID number, or one of the <span class="param">item:name</span> constants defined in your .hsi file. If you want to erase an item slot, use -1 as the item ID. If the slot was empty, one copy of the item will be placed in it. Otherwise the original item count is preserved. If the maximum stack size of the new item type is less than the number of items in that slot, the extra items will be removed from that slot and placed whereever there is room.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-iteminslot" class="ref">item in slot</a>, </li>
<li>
<a href="#about-itemcountinslot" class="ref">item count in slot</a>, </li>
<li>
<a href="#about-setitemcountinslot" class="ref">set item count in slot</a>, </li>
<li>
<a href="#about-getinventorysize" class="ref">get inventory size</a>, </li>
<li><a href="#about-getitemmaximumstacksize" class="ref">get item maximum stack size</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-itemcountinslot"></a>
				<h4>item count in slot (slot)</h4>
<p>
			Return the count of items at a specific slot in your inventory, or 0 if that slot is empty. Slots are numbered from 0 to <a href="#about-getinventorysize" class="ref">get inventory size</a>-1.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-iteminslot" class="ref">item in slot</a>, </li>
<li>
<a href="#about-setiteminslot" class="ref">set item in slot</a>, </li>
<li>
<a href="#about-setitemcountinslot" class="ref">set item count in slot</a>, </li>
<li>
<a href="#about-getinventorysize" class="ref">get inventory size</a>, </li>
<li><a href="#about-getitemmaximumstacksize" class="ref">get item maximum stack size</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setitemcountinslot"></a>
				<h4>set item count in slot (slot, count)</h4>
<p>
			Change the count of items at a specific slot in your inventory. The <span class="param">count</span> argument is the new number of items from 1 up to the maximum count (which is dependent on the item, but no more than 99; see <a href="#about-getitemmaximumstacksize" class="ref">get item maximum stack size</a>), or 0 if you want to delete any items currently in the slot. If the slot is empty or if the item count is out of bounds, this command will fail.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-iteminslot" class="ref">item in slot</a>, </li>
<li>
<a href="#about-setiteminslot" class="ref">set item in slot</a>, </li>
<li>
<a href="#about-setitemcountinslot" class="ref">set item count in slot</a>, </li>
<li>
<a href="#about-getinventorysize" class="ref">get inventory size</a>, </li>
<li><a href="#about-getitemmaximumstacksize" class="ref">get item maximum stack size</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>get item maximum stack size (item)</h4>
		<p><a href="#about-getitemmaximumstacksize">Documented in the Items section.</a></p>
		</div>
		<div class="command">
			<a name="about-useiteminslot"></a>
				<h4>use item in slot (slot)</h4>
<p>
			Attempts to use whatever item is in a given inventory slot as if you had selected it in the items menu. The argument is the inventory slot number. This command will only work if there is actually an item in the slot, and the item can be used outside of battle, either as a cure attack, or to teach a hero a spell, or to trigger a text box. The return value is true if you successfully used the item, or false if the item was unusable or the user cancelled.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If the item causes an attack to happen which kills all the heroes in the party (outside of battles a hero isn't counted as dead if their maximum HP is zero or negative), a normal game over occurs: the game over script is run if there is one, otherwise the game ends. However the game over won't happen until the next wait command (such as <a href="#about-wait" class="ref">wait</a>).</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-useitem" class="ref">use item</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-inventory"></a>
				<h4>inventory (item)</h4>
<p>
			Returns a count of how many of the specified item are in your inventory. If you do not have the item, it returns zero or <a href="#about-false" class="ref">false</a>. You can refer to the item by number, or you can use the constants defined in your HSI file, which are in the form of item:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getinventorysize"></a>
				<h4>get inventory size</h4>
<p>
			Returns the number of inventory slots.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setinventorysize" class="ref">set inventory size</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setinventorysize"></a>
				<h4>set inventory size (new size)</h4>
<p>
			Changes the number of inventory slots that are available. Use the constant <span class="param">inv:max</span> to restore the maximum value. The number you give will be rounded up to the nearest multiple of 3.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getinventorysize" class="ref">get inventory size</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Equipment"></a>
		<h3>
<span class="backlink"><a href="#Items">Items</a> →
			</span>Equipment</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-unequip"></a>
				<h4>unequip (hero, slot)</h4>
<p>
			
				Removes the item that the specified hero has equipped in the specified slot.
				The first argument is the position of the hero in your party,
				0-3 for the active party, 4-40 for the reserve.
				(Use <a href="#about-findhero" class="ref">find hero</a> if you want to refer to the hero by name).
				The second argument is the slot to unequip. Use the slot:weapon, slot:armor,
				etc. constants from your .hsi file.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					When a hero's equipment changes, the current values of all stats other than
					HP and MP for the hero are reset to their new maximum values.
					The current values of the HP and MP stats are capped to the new maximums
					but not otherwise changed.
					If you want to cause the HP and MP to be scaled up or down proportionally
					(so that e.g. 8/10 HP becomes 16/20 HP),
					the easiest way to do that is to make use of a side-effect of <a href="#about-gainherostat" class="ref">gain hero stat</a>:
					<pre>gain hero stat(who, stat:hp, 0)
gain hero stat(who, stat:mp, 0)</pre>
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-forceequip" class="ref">force equip</a>, </li>
<li><a href="#about-checkequipment" class="ref">check equipment</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-forceequip"></a>
				<h4>force equip (hero, slot, item)</h4>
<p>
			
				Forces a hero to equip an item, even if it is not normally equipable.
				The first argument is the position of the hero in your party,
				0-3 for the active party, 4-40 for the reserve.
				(Use <a href="#about-findhero" class="ref">find hero</a> if you want to refer to the hero by name).
				The second argument is the slot to equip. Use the <span class="code">slot:weapon</span>, <span class="code">slot:armor</span>,
				etc. constants (or whatever you've named the slots).
				(These constants can been seen in the autogenerated .hsi file.)
				The third argument is the item to equip.
				You can use the item's ID number or the <span class="code">item:name</span> constants from your .hsi file.
				The item equipped will be deducted from your inventory,
				but if you <span class="param">force equip</span> an item that you do not already have then a free copy of it will be created.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					When a hero's equipment changes, their current HP and MP stats aren't updated.
					See the Note at <a href="#about-unequip" class="ref">unequip</a> for more information.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-unequip" class="ref">unequip</a>, </li>
<li>
<a href="#about-equipwhere" class="ref">equip where</a>, </li>
<li><a href="#about-checkequipment" class="ref">check equipment</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-equipwhere"></a>
				<h4>equip where (hero, item)</h4>
<p>
			
				Returns the number of the slot that a hero can equip an item in
				(a constant of the form slot:weapon, etc, in your .hsi file),
				or <a href="#about-false" class="ref">false</a> if the hero cannot equip it.
				The first argument is the position of the hero in your party,
				0-3 for the active party, 4-40 for the reserve.
				(Use <a href="#about-findhero" class="ref">find hero</a> if you want to refer to the hero by name).
				The second argument is the item to check the equipability of.
				You can use the item's number or the item:name constants from your .hsi file.
				<br>
				If the item can be equipped in more than one different slot, this command only returns the first valid slot.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					When a hero's equipment changes, their current HP and MP stats aren't updated.
					See the Note at <a href="#about-unequip" class="ref">unequip</a> for more information.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-unequip" class="ref">unequip</a>, </li>
<li><a href="#about-checkequipment" class="ref">check equipment</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-checkequipment"></a>
				<h4>check equipment (hero, slot)</h4>
<p>
			Returns the number of the item that the specified hero has equipped in the specified slot, or -1 if there is nothing equipped there. The first argument is the position of the hero in your party, 0-3 for the active party, 4-40 for the reserve. (Use <a href="#about-findhero" class="ref">find hero</a> if you want to refer to the hero by name). The second argument is the slot to check. Use the slot:weapon, slot:armor, etc. constants from your .hsi file.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-forceequip" class="ref">force equip</a>, </li>
<li>
<a href="#about-unequip" class="ref">unequip</a>, </li>
<li><a href="#about-equipwhere" class="ref">equip where</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getdefaultweapon"></a>
				<h4>get default weapon (hero)</h4>
<p>
			Returns the number of the item that the specified hero uses as a default weapon when no other weapon is equipped. The argument is the position of the hero in your party, 0-3 for the active party, 4-40 for the reserve. (Use <a href="#about-findhero" class="ref">find hero</a> if you want to refer to the hero by name).
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setdefaultweapon"></a>
				<h4>set default weapon (hero, item)</h4>
<p>
			Changes the item that the specified hero uses as a default weapon when no other weapon is equipped. The first argument is the position of the hero in your party, 0-3 for the active party, 4-40 for the reserve. (Use <a href="#about-findhero" class="ref">find hero</a> if you want to refer to the hero by name). The second argument is the item to use as the new default weapon. You can use the item's number or the item:name constants from your .HSI file.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Effects"></a>
		<h3>
<span class="backlink"></span>Effects</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Effects-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown"></div>
		<li>
<a href="#Music">Music</a><br>
		<ul class="content-shown">
		<a href="#about-playsong">play song (song)</a><br>
		<a href="#about-currentsong">current song</a><br>
		<a href="#about-stopsong">stop song</a><br>
		<a href="#about-setvictorymusic">set victory music (song)</a><br>
		<a href="#about-getvictorymusic">get victory music</a><br>
		<a href="#about-setambientmusic">set ambient music (song)</a><br>
		<a href="#about-getambientmusic">get ambient music</a><br>
		<a href="#about-setmusicvolume">set music volume (volume)</a><br>
		<a href="#about-getmusicvolume">get music volume</a><br>
		<a href="#about-setglobalsoundvolume">set global sound volume (volume)</a><br>
		<a href="#about-getglobalsoundvolume">get global sound volume</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Master%20Palette%20and%20Screen%20Fades">Master Palette and Screen Fades</a><br>
		<ul class="content-shown">
		<a href="#about-fadescreenout">fade screen out (red, green, blue)</a><br>
		<a href="#about-fadescreenin">fade screen in</a><br>
		<a href="#about-loadpalette">load palette (palette number)</a><br>
		<a href="#about-updatepalette">update palette</a><br>
		<a href="#about-greyscalepalette">greyscale palette (first, last)</a><br>
		<a href="#about-tweakpalette">tweak palette (red, green, blue, first, last)</a><br>
		<a href="#about-resetpalette">reset palette</a><br>
		<a href="#about-readcolor">read color (index, element)</a><br>
		<a href="#about-writecolor">write color (index, element, value)</a><br>
		<a href="#about-getcolor">get color (index)</a><br>
		<a href="#about-setcolor">set color (index, value)</a><br>
		<a href="#about-findcolor">find color (r, g, b, searchstart)</a><br>
		<a href="#about-rgb">RGB (red, green, blue)</a><br>
		<a href="#about-extractcolor">extract color (color, component)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Sound%20Effects">Sound Effects</a><br>
		<ul class="content-shown">
		<a href="#about-playsound">play sound (num, loop, preempt)</a><br>
		<a href="#about-stopsound">stop sound (num)</a><br>
		<a href="#about-pausesound">pause sound (num)</a><br>
		<a href="#about-soundisplaying">sound is playing (num)</a><br>
		<a href="#about-waitforsound">wait for sound (num)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Music"></a>
		<h3>
<span class="backlink"><a href="#Effects">Effects</a> →
			</span>Music</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-playsong"></a>
				<h4>play song (song)</h4>
<p>
			Plays the specified song. Use the constants defined in your HSI file. They appear in the form of song:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-currentsong"></a>
				<h4>current song</h4>
<p>
			Returns the number of the currently playing song, or -1 if none.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stopsong"></a>
				<h4>stop song</h4>
<p>
			Stops whatever music is currently playing.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setvictorymusic"></a>
				<h4>set victory music (song)</h4>
<p>
			Changes the after-battle victory music to the specified song. Use the constants defined in your HSI file. They appear in the form of song:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getvictorymusic"></a>
				<h4>get victory music</h4>
<p>
			Returns the number of the after-battle victory music. Compare with the constants defined in your HSI file. They appear in the form of song:name
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setambientmusic"></a>
				<h4>set ambient music (song)</h4>
<p>
			Plays a song and sets it as the map's ambient music, that is the song that is played when you enter the map (if you call <a href="#about-savemapstate" class="ref">save map state</a> with mapstate:all or mapstate:mapsettings) or after a textbox with 'restore music' set. Unless you save the mapstate, the effect goes away if you change maps or fight a battle. You can use the constants <a href="#about-song:silence" class="ref">song: silence</a> and <a href="#about-song:sameaslastmap" class="ref">song: same as last map</a> for <span class="param">song</span>, the default is silence.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-playsong" class="ref">play song</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getambientmusic"></a>
				<h4>get ambient music</h4>
<p>
			Returns the song number of the map's ambient music, either a song ID or the constants <a href="#about-song:silence" class="ref">song: silence</a> or <a href="#about-song:sameaslastmap" class="ref">song: same as last map</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-currentsong" class="ref">current song</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmusicvolume"></a>
				<h4>set music volume (volume)</h4>
<p>
			
				Sets the volume at which music is played,
				<span class="param">volume</span> being a number on the scale of 0 to 255, 0 being silent, 255 loudest.
				This is the same as the Music setting in the in-game Volume menu.
				If you want to manipulate the sound (e.g. fading out the music)
				you should take note of the original volume that the player has set and return to this later.
				The default volume is usually not the maximum 255, so you should not hardcode fades to begin at volume 255.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					The actual resolution at which the volume is set is not necessarily 1/255th
					of full volume but depends on the engine version.
					For example, music_sdl only supports 128 different volume levels.
					So if you set the volume and then read it back, it might change slightly.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmusicvolume"></a>
				<h4>get music volume</h4>
<p>
			
				Returns the volume at which music is played, on a scale of 0 to 255,
				0 being silent, 255 loudest.
				This is the same as the Music setting in the in-game Volume menu.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setglobalsoundvolume"></a>
				<h4>set global sound volume (volume)</h4>
<p>
			
				Sets the volume at which sound effects (sfx) are played,
				<span class="param">volume</span> being a number on the scale of 0 to 255, 0 being silent, 255 loudest.
				This is the same as the Sound setting in the in-game Volume menu.
				Any currently playing sounds are affected, so this can be used for fading.
				If you want to temporarily change the volume
				you should record the original volume that the player has set and return to this later.
				The default volume is usually not the maximum 255, so you should not hardcode fades to begin at volume 255.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getglobalsoundvolume"></a>
				<h4>get global sound volume</h4>
<p>
			
				Returns the volume at which music is played, on a scale of 0 to 255,
				0 being silent, 255 loudest.
				This is the same as the Sound setting in the in-game Volume menu.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Master%20Palette%20and%20Screen%20Fades"></a>
		<h3>
<span class="backlink"><a href="#Effects">Effects</a> →
			</span>Master Palette and Screen Fades</h3>
		<p>
			Everything displayed on-screen uses colors from a 256-color master palette.
			Screen fading works by momentarily changing the colors in the palette,
			for example shifting them all to black.
			The screen fade commands are a very common source of confusion because they pause
			the engine during the fade, and don't redraw the screen at all.
			Instead, what is already on-screen (which was drawn in the <b>previous</b> game tick)
			is re-displayed with a new palette. So
			<pre>fade screen out
show backdrop (1)
fade screen out</pre>
			will <b>not</b> work as expected: the screen fades out, then it fades back in,
			then the backdrop appears instantly.
			You need to add a <a href="#about-wait" class="ref">wait</a><span class="code">(1)</span> immediately after the <a href="#about-showbackdrop" class="ref">show backdrop</a>
			so that the engine repaints the screen (still entirely black) with the backdrop
			before it fades the backdrop into view.
			<br>
			This works because there's both a 'visible' master palette and a 'loaded' one.
			<a href="#about-fadescreenout" class="ref">fade screen out</a> smoothly changes the visible one to be all the same color
			but doesn't modified the loaded one.
			<a href="#about-fadescreenin" class="ref">fade screen in</a> changes the visible one smoothly back to the loaded one.
			<a href="#about-loadpalette" class="ref">load palette</a>, <a href="#about-tweakpalette" class="ref">tweak palette</a>, <a href="#about-writecolor" class="ref">write color</a>, etc
			modify the loaded palette but not the visible one.
			You need to call either <a href="#about-fadescreenin" class="ref">fade screen in</a> or <a href="#about-updatepalette" class="ref">update palette</a>
			to copy the loaded palette to the visible one to make your changes visible.
			<a href="#about-updatepalette" class="ref">update palette</a> instantly changes the visible palette to the loaded one.
			<br>
			For example, this means you can fade between two different master palettes like so:
			<pre>load palette(2)
fade screen in</pre>
		</p>
<ul></ul>
		<div class="command">
			<a name="about-fadescreenout"></a>
				<h4>fade screen out (red, green, blue)</h4>
<p>
			Fades the screen to a solid color. If you do not specify any arguments, the screen will fade to black. The red, green, blue values are numbers from 0 to 63 that tell how bright that particular color should be. (63,0,0) would be blood red. (40,0,40) would be purple. (63,63,63) would be bright white. The screen will remain faded out until you run <a href="#about-fadescreenin" class="ref">fade screen in</a>, fight a battle, or use a door.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-fadescreenin"></a>
				<h4>fade screen in</h4>
<p>
			
				Fades the screen back to normal after a <a href="#about-fadescreenout" class="ref">fade screen out</a> command,
				or smoothly applies the changes made with other palette commands such as <a href="#about-greyscalepalette" class="ref">greyscale palette</a>,
				<a href="#about-tweakpalette" class="ref">tweak palette</a>,  <a href="#about-loadpalette" class="ref">load palette</a>, <a href="#about-resetpalette" class="ref">reset palette</a>, and <a href="#about-writecolor" class="ref">write color</a>.
				<br>
				(You can also make palette changes take effect immediately without a fade using <a href="#about-updatepalette" class="ref">update palette</a>.)
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					Switching a game to 24-bit mode causes this command (but no others)
					to behave slightly differently when used after modifying the master palette
					(<a href="#about-tweakpalette" class="ref">tweak palette</a>,, etc): it does an extra (implicit) <span class="code">wait(1)</span>.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-loadpalette"></a>
				<h4>load palette (palette number)</h4>
<p>
			Loads a different master palette (one of the palettes on the "View Master Palettes..." menu), and the user interface colors for that palette. Use this if a backdrop or entire map was imported/drawn with a palette other than the default. Changes to the palette do not take effect until you call <a href="#about-updatepalette" class="ref">update palette</a> or <a href="#about-fadescreenin" class="ref">fade screen in</a>, however the UI colors are changed immediately.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-updatepalette"></a>
				<h4>update palette</h4>
<p>
			Instantly returns from fade screen out, and applies changes made by other palette command such as <a href="#about-greyscalepalette" class="ref">greyscale palette</a>, <a href="#about-tweakpalette" class="ref">tweak palette</a>, <a href="#about-resetpalette" class="ref">reset palette</a>, and <a href="#about-writecolor" class="ref">write color</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-greyscalepalette"></a>
				<h4>greyscale palette (first, last)</h4>
<p>
			Converts a section of the master palette from color to greyscale. The two arguments determine what range of colors will be affected. If called with no arguments, the entire palette is affected. Changes do not take effect until you call <a href="#about-updatepalette" class="ref">update palette</a> or <a href="#about-fadescreenin" class="ref">fade screen in</a>. Changes to the master palette last as long as you are playing, but are not stored in saved-games. If you need to make master-palette changes persist in saved-games you will have to use the on-load plotscript trigger.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-tweakpalette"></a>
				<h4>tweak palette (red, green, blue, first, last)</h4>
<p>
			Color-adjusts a section of the master palette. The first three arguments are the changes to make to the red, green, and blue values of each palette color. For example, tweak palette (20,-30,0) would redden everything, and drop out most of the green. These arguments expect values in the range -63 to 63, NOT -255 to 255. The last two arguments determine what range of colors will be affected. If they are left out, the entire palette is affected. Changes do not take effect until you call <a href="#about-updatepalette" class="ref">update palette</a> or <a href="#about-fadescreenin" class="ref">fade screen in</a>. Changes to the master palette last as long as you are playing, but are not stored in saved-games. If you need to make master-palette changes persist in saved-games you will have to use the on-load plotscript trigger.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resetpalette"></a>
				<h4>reset palette</h4>
<p>
			Reloads the default master palette and its user interface colors, undoing any changes you have made with other palette-altering commands such as <a href="#about-tweakpalette" class="ref">tweak palette</a>, <a href="#about-greyscalepalette" class="ref">greyscale palette</a>, or <a href="#about-loadpalette" class="ref">load palette</a>. Changes to the palette do not take effect until you call <a href="#about-updatepalette" class="ref">update palette</a> or <a href="#about-fadescreenin" class="ref">fade screen in</a>. However the UI color indices (those in the 'Change User-Interface Colors' menu) are changed immediately (if you're not using multiple master palettes, then UI color indices never change).
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-readcolor"></a>
				<h4>read color (index, element)</h4>
<p>
			Returns a color value from the master palette, in the range 0 to 63. The first argument is the index in the palette to read from, 0 to 255. The second argument is the color value to read, red, green, or blue. You can use 0,1, and 2, or you can use the predefined constants <a href="#about-colorred" class="ref">color:red</a>, <a href="#about-colorgreen" class="ref">color:green</a>, and <a href="#about-colorblue" class="ref">color:blue</a>. The counterpart to this is <a href="#about-writecolor" class="ref">write color</a>.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
				This command converts color components from the usual 0-255 down to 0-63,
				for compatibility with old OHRRPGCE versions which ran on DOS!
				For operation on full color values (0-255), use <a href="#about-getcolor" class="ref">get color</a>.
			</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getcolor" class="ref">get color</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-writecolor"></a>
				<h4>write color (index, element, value)</h4>
<p>
			Writes a color value into the master palette. The first argument is the index in the palette to write to, 0 to 255. The second argument is the color value to write, red, green, or blue. You can use 0, 1, and 2, or you can use the predefined constants <a href="#about-colorred" class="ref">color:red</a>, <a href="#about-colorgreen" class="ref">color:green</a>, and <a href="#about-colorblue" class="ref">color:blue</a>. The third argument is the color value to write. It should be in the range of 0 to 63, NOT 0 to 255 as is used in nearly all computer programs. Use <a href="#about-setcolor" class="ref">set color</a> if you want to set color values in the 0-255 range. Changes do not take effect until you call <a href="#about-updatepalette" class="ref">update palette</a> or <a href="#about-fadescreenin" class="ref">fade screen in</a>. Changes to the master palette last as long as you are playing, but are not stored in saved-games. If you need to make master-palette changes persist in saved-games you will have to use the on-loadgame plotscript trigger.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setcolor" class="ref">set color</a>, </li>
<li><a href="#about-readcolor" class="ref">read color</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getcolor"></a>
				<h4>get color (index)</h4>
<p>
			Returns a color value from the master palette. The argument is which index in the palette to return. The value is a 32-bit number representing the red, green and blue components of the palette entry. See <a href="#about-rgb" class="ref">RGB</a> for more details on its format.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setcolor" class="ref">set color</a>, </li>
<li><a href="#about-extractcolor" class="ref">extract color</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setcolor"></a>
				<h4>set color (index, value)</h4>
<p>
			Updates the master palette with a new 32-bit color. The <span class="param">value</span>, a 32-bit number representing the red, green and blue components of the color, can come from <a href="#about-rgb" class="ref">RGB</a> or <a href="#about-getcolor" class="ref">get color</a>. Changes do not take effect until you call <a href="#about-updatepalette" class="ref">update palette</a> or <a href="#about-fadescreenin" class="ref">fade screen in</a>. Changes to the master palette last as long as you are playing, but are not stored in saved-games. If you need to make master-palette changes persist in saved-games you will have to use the on-loadgame plotscript trigger.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getcolor" class="ref">get color</a>, </li>
<li><a href="#about-rgb" class="ref">RGB</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-findcolor"></a>
				<h4>find color (r, g, b, searchstart)</h4>
<p>
			
				Searches the master palette for the color most similar to the given <span class="param">r</span>, <span class="param">g</span>, <span class="param">b</span>
				triple and returns its index, from 0 to 255.
				The color is selected using an approximate perceptual distance function.
				<br>
				<span class="param">r</span>, <span class="param">g</span>, <span class="param">b</span> should be in the range 0-255
				(but out-of-bounds values are allowed, which weights those colors even more heavily).
				The <span class="param">searchstart</span> argument is optional, and defaults to 0.
				It says how many colors at the beginning of the palette to ignore.
				For example, if <span class="param">searchstart</span> is 1, then color 0 will never be returned,
				which is useful because 0 is often used as the transparent color.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-rgb"></a>
				<h4>RGB (red, green, blue)</h4>
<p>
			Combines the individual red, green and blue components of a color into a single 32-bit number. The formula used is "red * 256 * 256 + green * 256 + blue". The highest byte is unused, but reserved for future potential use for alpha transparency.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-extractcolor" class="ref">extract color</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-extractcolor"></a>
				<h4>extract color (color, component)</h4>
<p>
			Takes a 32-bit color value (as returned by <a href="#about-getcolor" class="ref">get color</a>), and extracts the red, green or blue component, based on the <span class="param">component</span> parameter. You may use the <a href="#about-colorred" class="ref">color:red</a>, <a href="#about-colorgreen" class="ref">color:green</a> and <a href="#about-colorblue" class="ref">color:blue</a> parameters to choose which one.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-rgb" class="ref">RGB</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>get ui color (color, autotoggle)</h4>
		<p><a href="#about-getuicolor">Documented in the User Interface Colors and Box Styles section.</a></p>
		</div>
		<div class="command">
		<h4>set ui color (color, palette index)</h4>
		<p><a href="#about-setuicolor">Documented in the User Interface Colors and Box Styles section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Sound%20Effects"></a>
		<h3>
<span class="backlink"><a href="#Effects">Effects</a> →
			</span>Sound Effects</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-playsound"></a>
				<h4>play sound (num, loop, preempt)</h4>
<p>
			
				Plays or resumes a sound effect.
				Pass <a href="#about-true" class="ref">true</a> to <span class="param">loop</span> if you want the sound effect to start over when it finishes
				instead of stopping (it defaults to false).
				Pass <a href="#about-true" class="ref">true</a> to <span class="param">preempt</span> if you want to automatically stop the sound before playing it.
				If <span class="param">preempt</span> is <a href="#about-false" class="ref">false</a> (which is the default), and the sound is already playing
				(and not paused) then this command will do nothing.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					There isn't yet a way to play a sound effect twice at the same time.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-stopsound" class="ref">stop sound</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-stopsound"></a>
				<h4>stop sound (num)</h4>
<p>
			Stops a sound effect. If the sound is not playing, nothing will happen.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-playsound" class="ref">play sound</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-pausesound"></a>
				<h4>pause sound (num)</h4>
<p>
			Temporarily stops a sound effect. It can be resumed with <a href="#about-playsound" class="ref">play sound</a>, which causes it to continue from whence it left off.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-playsound" class="ref">play sound</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-soundisplaying"></a>
				<h4>sound is playing (num)</h4>
<p>
			Checks to see whether a sound effect is playing or not. Useful for synchronization, etc. Returns true if the sound is paused but not stopped.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-playsound" class="ref">play sound</a>, </li>
<li>
<a href="#about-stopsound" class="ref">stop sound</a>, </li>
<li><a href="#about-waitforsound" class="ref">wait for sound</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-waitforsound"></a>
				<h4>wait for sound (num)</h4>
<p>
			Waits until a sound effect has finished playing. Useful for synchronization, etc.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-soundisplaying" class="ref">sound is playing</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>get global sound volume</h4>
		<p><a href="#about-getglobalsoundvolume">Documented in the Music section.</a></p>
		</div>
		<div class="command">
		<h4>set global sound volume (volume)</h4>
		<p><a href="#about-setglobalsoundvolume">Documented in the Music section.</a></p>
		</div>
		<hr>
		</div>
		<div class="section">
<a name="User%20Interface%20Colors%20and%20Box%20Styles"></a>
		<h3>
<span class="backlink"></span>User Interface Colors and Box Styles</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="User Interface Colors and Box Styles-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-getuicolor">get ui color (color, autotoggle)</a><br>
		<a href="#about-setuicolor">set ui color (color, palette index)</a><br>
		<a href="#about-getboxstylecolor">get box style color (box style)</a><br>
		<a href="#about-getboxstyleedgecolor">get box style edge color (box style)</a><br>
		<a href="#about-getboxstyleborder">get box style border (box style)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-getuicolor"></a>
				<h4>get ui color (color, autotoggle)</h4>
<p>
			
				Look up which color a UI color is.
				<span class="param">color</span> should normally be a <span class="code">ui:</span> constant such as <span class="code">ui:menu item</span>.
				See <a href="#about-colorcode" class="ref">color code</a> for a list of constants.
				Also, if <span class="param">color</span> is a palette index (0 - 255) then it is returned unchanged.
				<br>
				<span class="param">autotoggle</span> is optional, and defaults to false.
				If <span class="code">true</span>, when you get certain UI colors that normally flash
				(for example, <span class="code">ui:selected item</span>), the return value will change
				every tick according to the flashing, rather than just returning the value seen
				in the Edit User-Interface Colors menu.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setuicolor" class="ref">set ui color</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setuicolor"></a>
				<h4>set ui color (color, palette index)</h4>
<p>
			
				Change a UI color.
				<span class="param">color</span> should be a <span class="code">ui:</span> constant such as <span class="code">ui:menu item</span>.
				See <a href="#about-colorcode" class="ref">color code</a> for a list of constants.
				<span class="param">palette index</span> should be a value 0-255, an index in the current master palette.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					The change will be lost if you call <a href="#about-loadpalette" class="ref">load palette</a>, <a href="#about-resetpalette" class="ref">reset palette</a>, quit the game, or load a game.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getuicolor" class="ref">get ui color</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getboxstylecolor"></a>
				<h4>get box style color (box style)</h4>
<p>
			
				Returns the background/fill color (0-255 master palette index) of <span class="param">box style</span>,
				which should be 0 to 14.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getboxstyleedgecolor"></a>
				<h4>get box style edge color (box style)</h4>
<p>
			
				Returns the edge color (0-255 master palette index) of <span class="param">box style</span>,
				which should be 0 to 14.
				<br>
				This is the color of the simple line border;
				if the box style uses a box border spriteset (see <a href="#about-getboxstyleborder" class="ref">get box style border</a>)
				then the line border is usually not visible.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getboxstyleborder"></a>
				<h4>get box style border (box style)</h4>
<p>
			
				Returns either <span class="code">border:line</span> (which is -1) if a box style use a simple line
				border rather than a box border spriteset,
				or the spriteset ID of the border for <span class="param">box style</span>,
				which should be 0 to 14.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Hero%20Data"></a>
		<h3>
<span class="backlink"></span>Hero Data</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>
			See also <a href="#The%20Party" class="ref">The Party</a> section for commands for finding, adding, removing or swapping
			heroes in the party.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
			You should definitely read <a href="http://rpg.hamsterrepublic.com/ohrrpgce/Ways_to_refer_to_a_hero_in_a_script">
			Ways to refer to a hero in a script</a> to understand the differences between hero ID numbers
			(including <span class="code">hero:name</span> constants), hero party slots, and walkabout rank!
			</div>
		</p>
<div class="select-content-shown" id="Hero Data-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-renamehero">rename hero (who)</a><br>
		<a href="#about-renameherobyslot">rename hero by slot (who)</a><br>
</div>
		<li>
<a href="#Hero%20Graphics">Hero Graphics</a><br>
		<ul class="content-shown">
		<a href="#about-setheropicture">set hero picture (who, picture, type)</a><br>
		<a href="#about-setheropalette">set hero palette (who, palette, type)</a><br>
		<a href="#about-getheropicture">get hero picture (who, type)</a><br>
		<a href="#about-getheropalette">get hero palette (who, type)</a><br>
		<a href="#about-resetheropicture">reset hero picture (who, type)</a><br>
		<a href="#about-resetheropalette">reset hero palette (who, type)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Hero%20Hand%20Position">Hero Hand Position</a><br>
		<ul class="content-shown">
		<a href="#about-getherohandx">get hero hand x (who, frame)</a><br>
		<a href="#about-getherohandy">get hero hand y (who, frame)</a><br>
		<a href="#about-setherohandx">set hero hand x (who, frame, new x)</a><br>
		<a href="#about-setherohandy">set hero hand y (who, frame, new y)</a><br>
		<a href="#about-getdefaultherohandx">get default hero hand x (who, frame)</a><br>
		<a href="#about-getdefaultherohandy">get default hero hand y (who, frame)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Hero%20Stats">Hero Stats</a><br>
		<ul class="content-shown">
		<a href="#about-getherostat">get hero stat (who, stat, type)</a><br>
		<a href="#about-setherostat">set hero stat (who, stat, value, type)</a><br>
		<a href="#about-gainherostat">gain hero stat (who, stat, amount, reset to max)</a><br>
		<a href="#about-setcappedherostat">set capped hero stat (who, stat, value, type)</a><br>
		<a href="#about-getherostatcap">get hero stat cap (stat)</a><br>
		<a href="#about-setherostatcap">set hero stat cap (stat, value)</a><br>
		<a href="#about-getlevelmp">get level MP (who, mp level slot, type)</a><br>
		<a href="#about-setlevelmp">set level MP (who, mp level slot, new value)</a><br>
		<a href="#about-herobaseelementalresistasint">hero base elemental resist as int (who, element)</a><br>
		<a href="#about-setherobaseelementalresist">set hero base elemental resist (who, element, percent)</a><br>
		<a href="#about-herototalelementalresistasint">hero total elemental resist as int (who, element)</a><br>
</ul>
<ul>
		<li>
<a href="#Experience%20and%20Levels">Experience and Levels</a><br>
		<ul class="content-shown">
		<a href="#about-getherolevel">get hero level (who)</a><br>
		<a href="#about-setherolevel">set hero level (who, level, forgetspells)</a><br>
		<a href="#about-setexperience">set experience (who, experience, allowforget)</a><br>
		<a href="#about-herolevelled">hero levelled (who)</a><br>
		<a href="#about-totalexperience">total experience (who)</a><br>
		<a href="#about-experiencetonextlevel">experience to next level (who)</a><br>
		<a href="#about-experiencetolevel">experience to level (level, hero slot)</a><br>
		<a href="#about-giveexperience">give experience (hero, amount)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Hero's%20Spells">Hero's Spells</a><br>
		<ul class="content-shown">
		<a href="#about-teachspell">teach spell (hero, attack)</a><br>
		<a href="#about-forgetspell">forget spell (hero, attack)</a><br>
		<a href="#about-readspell">read spell (hero, list, slot)</a><br>
		<a href="#about-writespell">write spell (hero, list, slot, attack)</a><br>
		<a href="#about-knowsspell">knows spell (hero, attack)</a><br>
		<a href="#about-canlearnspell">can learn spell (hero, attack)</a><br>
		<a href="#about-spellslearnt">spells learnt (hero, number)</a><br>
		<a href="#about-spellslearned">spells learned (hero, number)</a><br>
		<a href="#about-updateleveluplearning">update level up learning(who, allowforget)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Out-of-battle%20Attacks">Out-of-battle Attacks</a><br>
		<ul class="content-shown">
		<a href="#about-outsidebattlecure">outside battle cure (attack minus 1, target, attacker)</a><br>
		<a href="#about-mapcure">map cure (attack, target, attacker)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-renamehero"></a>
				<h4>rename hero (who)</h4>
<p>
			
				Pops up a name-editing box that allows you to change the name of a hero in the party.
				The game and scripts are paused while this menu is up.
				<br>
				The argument is the hero's ID number, or name in the format hero:name.
				The return value is true if the player renamed the hero, or false if they cancelled.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-renameherobyslot"></a>
				<h4>rename hero by slot (who)</h4>
<p>
			
				Pops up a name-editing box that allows you to change the name of a hero in the party.
				The game and scripts are paused while this menu is up.
				<br>
				The argument is the hero's position in the party as returned by <a href="#about-findhero" class="ref">find hero</a>.
				The return value is true if the player the hero renamed, or false if they cancelled.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Hero%20Graphics"></a>
		<h3>
<span class="backlink"><a href="#Hero%20Data">Hero Data</a> →
			</span>Hero Graphics</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-setheropicture"></a>
				<h4>set hero picture (who, picture, type)</h4>
<p>
			
				Permanently changes a hero's picture.
				The first argument is the hero's position in the party.
				(Use <a href="#about-findhero" class="ref">find hero</a> if you want refer to the hero by name.)
				The second argument is the index number of the picture to use (the sprite set of the appropriate type),
				and the last argument is a constant <a href="#about-insidebattle" class="ref">inside battle</a> or <a href="#about-outsidebattle" class="ref">outside battle</a> or <a href="#about-heroportrait" class="ref">hero portrait</a>,
				which determines if you are changing the hero's battle picture or their walkabout picture or their portrait.
				If the last argument is left out, <a href="#about-outsidebattle" class="ref">outside battle</a> is assumed.
				<br>
				The palette is not modified (but if the palette is "default" it will of course update to the spriteset's default).
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-resetheropicture" class="ref">reset hero picture</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setheropalette"></a>
				<h4>set hero palette (who, palette, type)</h4>
<p>
			Permanently changes a hero's 16-color palette. The first argument is the hero's position in the party. (Use <a href="#about-findhero" class="ref">find hero</a> if you want refer to the hero by name.) The second argument is the index number of the 16-color palette to use, and the last argument is a constant <a href="#about-insidebattle" class="ref">inside battle</a> or <a href="#about-outsidebattle" class="ref">outside battle</a> or <a href="#about-heroportrait" class="ref">hero portrait</a>, which determines if you are changing the hero's battle palette or their walkabout palette or their portrait palette. If the last argument is left out, <a href="#about-outsidebattle" class="ref">outside battle</a> is assumed.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-resetheropalette" class="ref">reset hero palette</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getheropicture"></a>
				<h4>get hero picture (who, type)</h4>
<p>
			A function that returns the index number of a hero's picture. The first argument is the hero's position in the party as returned by <a href="#about-findhero" class="ref">find hero</a>. The second argument is a constant <a href="#about-insidebattle" class="ref">inside battle</a> or <a href="#about-outsidebattle" class="ref">outside battle</a> or <a href="#about-heroportrait" class="ref">hero portrait</a>, which determines if you are checking the hero's battle picture or their walkabout picture or their portrait. If the second argument is left out, <a href="#about-outsidebattle" class="ref">outside battle</a> is assumed.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getheropalette"></a>
				<h4>get hero palette (who, type)</h4>
<p>
			A function that returns the index number of a hero's 16-color palette. The first argument is the hero's position in the party as returned by <a href="#about-findhero" class="ref">find hero</a>. The second argument is a constant <a href="#about-insidebattle" class="ref">inside battle</a> or <a href="#about-outsidebattle" class="ref">outside battle</a> or <a href="#about-heroportrait" class="ref">hero portrait</a>, which determines if you are checking the hero's battle palette or their walkabout palette or their portrait palette. If the second argument is left out, <a href="#about-outsidebattle" class="ref">outside battle</a> is assumed.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resetheropicture"></a>
				<h4>reset hero picture (who, type)</h4>
<p>
			
				Resets a hero's picture that was previously changed with <a href="#about-setheropicture" class="ref">set hero picture</a> back to the default picture.
				The first argument is the hero's position in the party.
				(Use <a href="#about-findhero" class="ref">find hero</a> if you want refer to the hero by name).
				The second argument is a constant <a href="#about-insidebattle" class="ref">inside battle</a> or <a href="#about-outsidebattle" class="ref">outside battle</a> or <a href="#about-heroportrait" class="ref">hero portrait</a>,
				which determines if you are resetting the hero's battle picture or their walkabout picture or their portrait.
				If the last argument is left out, <a href="#about-outsidebattle" class="ref">outside battle</a> is assumed.
				<br>
				The palette is not modified (but if the palette is "default" it will of course update to the spriteset's default).
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setheropicture" class="ref">set hero picture</a>, </li>
<li><a href="#about-resetheropalette" class="ref">reset hero palette</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-resetheropalette"></a>
				<h4>reset hero palette (who, type)</h4>
<p>
			Resets a hero's palette that was previously changed with <a href="#about-setheropalette" class="ref">set hero palette</a> back to the default palette. The first argument is the hero's position in the party. (Use <a href="#about-findhero" class="ref">find hero</a> if you want refer to the hero by name.) The second argument is a constant <a href="#about-insidebattle" class="ref">inside battle</a> or <a href="#about-outsidebattle" class="ref">outside battle</a> or <a href="#about-heroportrait" class="ref">hero portrait</a>, which determines if you are resetting the hero's battle palette or their walkabout palette or their portrait palette. If the last argument is left out, <a href="#about-outsidebattle" class="ref">outside battle</a> is assumed.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setheropicture" class="ref">set hero picture</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Hero%20Hand%20Position"></a>
		<h3>
<span class="backlink"><a href="#Hero%20Data">Hero Data</a> →
			</span>Hero Hand Position</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-getherohandx"></a>
				<h4>get hero hand x (who, frame)</h4>
<p>
			Get the x position of a hero's weapon hand in battle. The position is in pixels relative to the top left corner of the hero's battle sprite. The first argument is the hero's position in the party. The second argument is the attack frame. You can use the constants <span class="param">hand:Attack A</span> and <span class="param">hand:Attack B</span>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherohandx" class="ref">get hero hand x</a>, </li>
<li>
<a href="#about-getherohandy" class="ref">get hero hand y</a>, </li>
<li>
<a href="#about-setherohandx" class="ref">set hero hand x</a>, </li>
<li>
<a href="#about-setherohandy" class="ref">set hero hand y</a>, </li>
<li>
<a href="#about-getdefaultherohandx" class="ref">get default hero hand x</a>, </li>
<li><a href="#about-getdefaultherohandy" class="ref">get default hero hand y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getherohandy"></a>
				<h4>get hero hand y (who, frame)</h4>
<p>
			Get the y position of a hero's weapon hand in battle. The position is in pixels relative to the top left corner of the hero's battle sprite. The first argument is the hero's position in the party. The second argument is the attack frame. You can use the constants <span class="param">hand:Attack A</span> and <span class="param">hand:Attack B</span>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherohandx" class="ref">get hero hand x</a>, </li>
<li>
<a href="#about-getherohandy" class="ref">get hero hand y</a>, </li>
<li>
<a href="#about-setherohandx" class="ref">set hero hand x</a>, </li>
<li>
<a href="#about-setherohandy" class="ref">set hero hand y</a>, </li>
<li>
<a href="#about-getdefaultherohandx" class="ref">get default hero hand x</a>, </li>
<li><a href="#about-getdefaultherohandy" class="ref">get default hero hand y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherohandx"></a>
				<h4>set hero hand x (who, frame, new x)</h4>
<p>
			Change the x position of a hero's weapon hand in battle. The position is in pixels relative to the top left corner of the hero's battle sprite. The first argument is the hero's position in the party. The second argument is the attack frame. You can use the constants <span class="param">hand:Attack A</span> and <span class="param">hand:Attack B</span> The third argument is the new x position.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherohandx" class="ref">get hero hand x</a>, </li>
<li>
<a href="#about-getherohandy" class="ref">get hero hand y</a>, </li>
<li>
<a href="#about-setherohandx" class="ref">set hero hand x</a>, </li>
<li>
<a href="#about-setherohandy" class="ref">set hero hand y</a>, </li>
<li>
<a href="#about-getdefaultherohandx" class="ref">get default hero hand x</a>, </li>
<li><a href="#about-getdefaultherohandy" class="ref">get default hero hand y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherohandy"></a>
				<h4>set hero hand y (who, frame, new y)</h4>
<p>
			Change the y position of a hero's weapon hand in battle. The position is in pixels relative to the top left corner of the hero's battle sprite. The first argument is the hero's position in the party. The second argument is the attack frame. You can use the constants <span class="param">hand:Attack A</span> and <span class="param">hand:Attack B</span> The third argument is the new y position.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherohandx" class="ref">get hero hand x</a>, </li>
<li>
<a href="#about-getherohandy" class="ref">get hero hand y</a>, </li>
<li>
<a href="#about-setherohandx" class="ref">set hero hand x</a>, </li>
<li>
<a href="#about-setherohandy" class="ref">set hero hand y</a>, </li>
<li>
<a href="#about-getdefaultherohandx" class="ref">get default hero hand x</a>, </li>
<li><a href="#about-getdefaultherohandy" class="ref">get default hero hand y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getdefaultherohandx"></a>
				<h4>get default hero hand x (who, frame)</h4>
<p>
			Get the original x position of a hero's weapon hand in battle as specified in the hero editor. The position is in pixels relative to the top left corner of the hero's battle sprite. The first argument is the hero's position in the party. The second argument is the attack frame. You can use the constants <span class="param">hand:Attack A</span> and <span class="param">hand:Attack B</span>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherohandx" class="ref">get hero hand x</a>, </li>
<li>
<a href="#about-getherohandy" class="ref">get hero hand y</a>, </li>
<li>
<a href="#about-setherohandx" class="ref">set hero hand x</a>, </li>
<li>
<a href="#about-setherohandy" class="ref">set hero hand y</a>, </li>
<li>
<a href="#about-getdefaultherohandx" class="ref">get default hero hand x</a>, </li>
<li><a href="#about-getdefaultherohandy" class="ref">get default hero hand y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getdefaultherohandy"></a>
				<h4>get default hero hand y (who, frame)</h4>
<p>
			Get the original y position of a hero's weapon hand in battle as specified in the hero editor. The position is in pixels relative to the top left corner of the hero's battle sprite. The first argument is the hero's position in the party. The second argument is the attack frame. You can use the constants <span class="param">hand:Attack A</span> and <span class="param">hand:Attack B</span>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherohandx" class="ref">get hero hand x</a>, </li>
<li>
<a href="#about-getherohandy" class="ref">get hero hand y</a>, </li>
<li>
<a href="#about-setherohandx" class="ref">set hero hand x</a>, </li>
<li>
<a href="#about-setherohandy" class="ref">set hero hand y</a>, </li>
<li>
<a href="#about-getdefaultherohandx" class="ref">get default hero hand x</a>, </li>
<li><a href="#about-getdefaultherohandy" class="ref">get default hero hand y</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Hero%20Stats"></a>
		<h3>
<span class="backlink"><a href="#Hero%20Data">Hero Data</a> →
			</span>Hero Stats</h3>
		<p></p>
<ul>
		<li>
<a href="#Experience%20and%20Levels">Experience and Levels</a><br>
		<ul></ul>
</li>
</ul>
		<div class="command">
			<a name="about-getherostat"></a>
				<h4>get hero stat (who, stat, type)</h4>
<p>
			A function that returns one of a hero's stats. The first argument is the position of the hero you want to check in your party as as returned by <a href="#about-findhero" class="ref">find hero</a>. The second argument is the name of the stat that you want to check. The names of the stats are defined in your HSI file in the form stat:name. The third argument is either <a href="#about-currentstat" class="ref">current stat</a> or <a href="#about-maximumstat" class="ref">maximum stat</a> or <a href="#about-basestat" class="ref">base stat</a>. Follow those links for explanations. If you leave out the type, <a href="#about-currentstat" class="ref">current stat</a> will be assumed.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setherostat" class="ref">set hero stat</a>, </li>
<li>
<a href="#about-gainherostat" class="ref">gain hero stat</a>, </li>
<li>
<a href="#about-getlevelmp" class="ref">get level MP</a>, </li>
<li>
<a href="#about-getherolevel" class="ref">get hero level</a>, </li>
<li>
<a href="#about-totalexperience" class="ref">total experience</a>, </li>
<li>
<a href="#about-herototalelementalresistasint" class="ref">hero total elemental resist as int</a>, </li>
<li>
<a href="#about-setenemystat" class="ref">set enemy stat</a>, </li>
<li><a href="#about-getenemystat" class="ref">get enemy stat</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherostat"></a>
				<h4>set hero stat (who, stat, value, type)</h4>
<p>
			A command that changes one of a hero's stats. The first argument is the position of the hero you want to change in your party as returned by <a href="#about-findhero" class="ref">find hero</a>. The second argument is the name of the stat that you want to change. The names of the stats are defined in your HSI file in the form stat:name. The third argument is the new value of the stat. The last argument is either <a href="#about-currentstat" class="ref">current stat</a> or <a href="#about-maximumstat" class="ref">maximum stat</a> or <a href="#about-basestat" class="ref">base stat</a>. Follow those links for explanations. If you leave the last argument blank, <a href="#about-currentstat" class="ref">current stat</a> will be assumed. You can set the current value of a stat to more than the maximum value. If you want to permanently change a stat you would change both the current value and just one of either the maximum value or the base value.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Cap stats are ignored by this command.
					Use <a href="#about-setcappedherostat" class="ref">set capped hero stat</a> if you want to limit the current or maximum value of a stat to a cap.
					But the stat will be capped later due to certain events such as equipping or unequipping an item, levelling up, or using <a href="#about-setherostatcap" class="ref">set hero stat cap</a>. Caps don't apply to base stats.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					The maximum and base values of a stat are tied together.
					Modifying the max will always modify the other by the same amount.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you want to increase or decrease a stat by a certain amount, just use <a href="#about-gainherostat" class="ref">gain hero stat</a>.
				</div>
			
			
			<pre># Use this script to reset a stat to its max value
script, reset stat, hero slot, stat, begin
  set hero stat(hero slot, stat, get hero stat(hero slot, stat, maximum stat), current stat) 
end</pre><pre># Use this script to permanently increase (or decrease, if amount is negative) a stat, without violating stat caps
script, adjust stat, hero slot, stat, amount, begin 
  set capped hero stat(hero slot, stat, get hero stat(hero slot, stat, current stat) + amount, current stat) 
  set hero stat(hero slot, stat, get hero stat(hero slot, stat, base stat) + amount, base stat) 
end</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-gainherostat" class="ref">gain hero stat</a>, </li>
<li>
<a href="#about-getherostat" class="ref">get hero stat</a>, </li>
<li>
<a href="#about-setcappedherostat" class="ref">set capped hero stat</a>, </li>
<li>
<a href="#about-setherostatcap" class="ref">set hero stat cap</a>, </li>
<li>
<a href="#about-setenemystat" class="ref">set enemy stat</a>, </li>
<li><a href="#about-getenemystat" class="ref">get enemy stat</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gainherostat"></a>
				<h4>gain hero stat (who, stat, amount, reset to max)</h4>
<p>
			
				Increase or decrease one of a hero's stats.
				The base, maximum and current value of the stat are all changed, consistently.
				<br>
				The first argument <span class="code">who</span> is the position in your party of the hero you want
				to change, as returned by <a href="#about-findhero" class="ref">find hero</a>.
				<br>
				The second argument is the name of the <span class="code">stat</span> that you want to change.
				The names of the stats are defined in your HSI file in the form <span class="code">stat:name</span>,
				such as <span class="code">stat:hp</span>.
				<br>
				The third argument is the <span class="code">amount</span> to change the stat;
				it will be added to the base value and maximum value of the stat.
				<br>
				The optional fourth argument <span class="code">reset to max</span> says how the current value of
				the stat should be updated.
				If <span class="code">false</span> (which is the default), the current value will be set so that it's the
				same percentage of the max before and after.
				For example, 8/10 HP become 12/15 HP.
				If <span class="code">reset to max</span> is <span class="code">true</span>, then the current value is set equal to the max.
				<br>
				The maximum and current stat values are capped to the stat cap, if any.
				(Base stats are by definition not capped.)
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherostat" class="ref">get hero stat</a>, </li>
<li>
<a href="#about-setherostat" class="ref">set hero stat</a>, </li>
<li>
<a href="#about-setcappedherostat" class="ref">set capped hero stat</a>, </li>
<li><a href="#about-setherostatcap" class="ref">set hero stat cap</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setcappedherostat"></a>
				<h4>set capped hero stat (who, stat, value, type)</h4>
<p>
			A command that changes one of a hero's stats. The first argument is the position of the hero you want to change in your party as returned by <a href="#about-findhero" class="ref">find hero</a>. The second argument is the name of the stat that you want to change. The names of the stats are defined in your HSI file in the form <span class="code">stat:name</span>. The third argument is the new value of the stat. Unlike <a href="#about-setherostat" class="ref">set hero stat</a>, if you try to set a stat to a value larger than the stat cap it will be reduced to the stat cap (without an error). The last argument is either <a href="#about-currentstat" class="ref">current stat</a> or <a href="#about-maximumstat" class="ref">maximum stat</a> (<a href="#about-basestat" class="ref">base stat</a> will also work but will not be capped). If you leave the last argument out, <a href="#about-currentstat" class="ref">current stat</a> will be assumed.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setherostat" class="ref">set hero stat</a>, </li>
<li>
<a href="#about-getherostatcap" class="ref">get hero stat cap</a>, </li>
<li>
<a href="#about-setherostatcap" class="ref">set hero stat cap</a>, </li>
<li><a href="#about-gainherostat" class="ref">gain hero stat</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getherostatcap"></a>
				<h4>get hero stat cap (stat)</h4>
<p>
			A function that returns the maximum allowed value for a hero stat (as set in the Stat Caps menu in Custom). The argument is the stat you want to check; one of the stat:name constants defined in your HSI file. If the return value is 0 or false there is no stat cap for that stat.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setcappedherostat" class="ref">set capped hero stat</a>, </li>
<li><a href="#about-setherostatcap" class="ref">set hero stat cap</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherostatcap"></a>
				<h4>set hero stat cap (stat, value)</h4>
<p>
			Set the maximum allowed value for a hero stat. The <span class="param">stat</span> argument is the stat to affect; one of the stat:name constants defined in your HSI file. The <span class="param">value</span> argument should be either greater than zero to set a cap, or 0/false to remove the cap for that stat.
<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">The new cap comes into immediate force: the current and maximum values of all stats of all heroes in the party are capped according to the caps. In addition, the current values of all stats other than HP and MP for all heroes are reset to their new maximum values. The current values of the HP and MP stats are not otherwise changed aside from being capped, so you might like to check and scale up HP and MP of heroes if the new max is more than the old cap.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getherostatcap" class="ref">get hero stat cap</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getlevelmp"></a>
				<h4>get level MP (who, mp level slot, type)</h4>
<p>
			Returns a hero's level MP (FF1-style MP). The argument <span class="param">who</span> is the hero's position in the party, as returned by <a href="#about-findhero" class="ref">find hero</a>. The argument <span class="param">mp level slot</span> is a number from 0 to 7 that represents a row of spells in the hero's spell list (the level is NOT counted from 1 to 8, as it's displayed in-game and in the spell-list editor!) The optional third argument is either <a href="#about-currentstat" class="ref">current stat</a> or <a href="#about-maximumstat" class="ref">maximum stat</a>. If you leave out the type <a href="#about-currentstat" class="ref">current stat</a> will be assumed. Pass <a href="#about-maximumstat" class="ref">maximum stat</a> instead to get the hero's maximum amount of level MP for that slot. The maximum depends only on the hero's experience level.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setlevelmp"></a>
				<h4>set level MP (who, mp level slot, new value)</h4>
<p>
			
				Changes one of a hero's level MP (FF1-style MP) numbers.
				The argument <span class="param">who</span> is the hero's position in the party,
as returned by <a href="#about-findhero" class="ref">find hero</a>.
				The argument <span class="param">mp level slot</span> is a number from 0 to 7 that represents a row of spells in the hero's spell list
				(the level is NOT counted from 1 to 8, as it's displayed in-game and in the spell-list editor!)
				The argument <span class="param">new value</span> is the new number of level MP points.
				Each point lets the player cast one spell from that row.
				<br>
				This changes the current value of a Level MP stat, therefore changes
				will be erased if the hero levels up or otherwise has their MP restored
				(e.g. by an inn).
				There's not yet any command to make a permanent change (to maximum level MP).
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-herobaseelementalresistasint"></a>
				<h4>hero base elemental resist as int (who, element)</h4>
<p>
			Gets the 'intrinsic' amount of damage that a hero receives from attacks of a certain element, as a percentage of normal. (That is, the value entered in the 'Elemental Resistances' menu in Custom. Equipment elemental modifiers are added onto this value.) The argument <span class="param">who</span> is the hero's position in the party, as returned by <a href="#about-findhero" class="ref">find hero</a>. The argument <span class="param">element</span> is a number from 0 to whatever the highest enabled element is. The result is rounded to the nearest integer. For example, if the hero takes 2.6% damage (1/40 normal), then the result will be 3.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">When floating point support is added to HamsterSpeak, an alternative to this command will be added.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setherobaseelementalresist" class="ref">set hero base elemental resist</a>, </li>
<li><a href="#about-herototalelementalresistasint" class="ref">hero total elemental resist as int</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherobaseelementalresist"></a>
				<h4>set hero base elemental resist (who, element, percent)</h4>
<p>
			Sets the 'intrinsic' amount of damage that a hero receives from attacks of a certain element, as a percentage of normal. (That is, the value entered in the 'Elemental Resistances' menu in Custom. Equipment elemental modifiers are added onto this value.) The argument <span class="param">who</span> is the hero's position in the party, as returned by <a href="#about-findhero" class="ref">find hero</a>. The argument <span class="param">element</span> is a number from 0 to whatever the highest enabled element is. The argument <span class="param">percent</span> is the percentage (written without a percent sign). For example -50 means the hero is healed by 50% of the attack damage instead of being hurt.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Unlike the elemental resist editors in Custom, you can't use fractions of a percent here.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-herobaseelementalresistasint" class="ref">hero base elemental resist as int</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-herototalelementalresistasint"></a>
				<h4>hero total elemental resist as int (who, element)</h4>
<p>
			Gets the amount of damage that a hero receives from attacks of a certain element, as a percentage of normal. The argument <span class="param">who</span> is the hero's position in the party, as returned by <a href="#about-findhero" class="ref">find hero</a>. The argument <span class="param">element</span> is a number from 0 to whatever the highest enabled element is. The result is rounded to the nearest integer. For example, if the hero takes 2.6% damage (1/40 normal), then the result will be 3. This is the value calculated from the hero's 'intrinsic' resistances combined with the equipment they are wearing.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">When floating point support is added to HamsterSpeak, an alternative to this command will be added.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-herobaseelementalresistasint" class="ref">hero base elemental resist as int</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Experience%20and%20Levels"></a>
		<h3>
<span class="backlink"><a href="#Hero%20Data">Hero Data</a> →
			<a href="#Hero%20Stats">Hero Stats</a> →
			</span>Experience and Levels</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-getherolevel"></a>
				<h4>get hero level (who)</h4>
<p>
			A function that returns a hero's current level. The argument is the position of the hero you want to check in your party as as returned by <a href="#about-findhero" class="ref">find hero</a>. The return value with be your current level, from 0 to 99
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setherolevel" class="ref">set hero level</a>, </li>
<li><a href="#about-totalexperience" class="ref">total experience</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setherolevel"></a>
				<h4>set hero level (who, level, forgetspells)</h4>
<p>
			A command that sets a hero's current level. The first argument is the position of the hero you want to change in your party as as returned by <a href="#about-findhero" class="ref">find hero</a>. You can specify any hero in the active or reserve party and any (non-negative) level (even above the level cap). Unlike old workarounds, this command teaches the hero any spells they would have learnt by that level and correctly sets the experience to next level-up (experience gained to the current next level is lost). You can also decrease the hero's level, which will cause spells to be forgotten, unless the optional 3rd argument (defaulting to true) is set as false.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherolevel" class="ref">get hero level</a>, </li>
<li>
<a href="#about-herolevelled" class="ref">hero levelled</a>, </li>
<li>
<a href="#about-spellslearnt" class="ref">spells learnt</a>, </li>
<li><a href="#about-setexperience" class="ref">set experience</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setexperience"></a>
				<h4>set experience (who, experience, allowforget)</h4>
<p>
			Sets a hero's total experience and updates their experience level, stats and spell list. The argument is the position of the hero you want to check in your party as as returned by <a href="#about-findhero" class="ref">find hero</a>. To decrease a hero's level without forgetting spells which are learnt at a certain experience level, pass false as the optional third argument. Heroes won't level beyond the level cap (which is 99 usually), though you can temporarily raise the cap using <a href="#about-setlevelcap" class="ref">set level cap</a> to get around this.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setherolevel" class="ref">set hero level</a>, </li>
<li>
<a href="#about-totalexperience" class="ref">total experience</a>, </li>
<li>
<a href="#about-herolevelled" class="ref">hero levelled</a>, </li>
<li><a href="#about-spellslearned" class="ref">spells learned</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>update level up learning(who, allowforget)</h4>
		<p><a href="#about-updateleveluplearning">Documented in the Hero's Spells section.</a></p>
		</div>
		<div class="command">
			<a name="about-herolevelled"></a>
				<h4>hero levelled (who)</h4>
<p>
			Returns the number of levels the specified hero gained. <span class="param">who</span> is the hero's position in the battle party. If you want to use <span class="param">hero:Name</span> you should use <a href="#about-findhero" class="ref">find hero</a>. This command only applies to the most recent battle or <a href="#about-giveexperience" class="ref">give experience</a>, <a href="#about-setherolevel" class="ref">set hero level</a> or <a href="#about-setexperience" class="ref">set experience</a> command that targeted either this hero (or who party) - levels gained from previous battles or commands are forgotten. If the hero lost levels, the result is negative. In other words, this does not return true or false, but can be be used in an if statement like:
			
			<pre>give experience (party, 50)
if (herolevelled (find hero (hero: Bob))) then (
  $31="Bob gained "
  append number(31, hero levelled (find hero (hero: Bob)))
  $31+" level(s)!"
  show textbox (233) # ${S31} :show string 31
)</pre>
			
		</p>
</div>
		<div class="command">
		<h4>spells learned (hero, number)</h4>
		<p><a href="#about-spellslearned">Documented in the Hero's Spells section.</a></p>
		</div>
		<div class="command">
			<a name="about-totalexperience"></a>
				<h4>total experience (who)</h4>
<p>
			Returns a hero's total experience. The argument is the position of the hero you want to check in your party as as returned by <a href="#about-findhero" class="ref">find hero</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setexperience" class="ref">set experience</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-experiencetonextlevel"></a>
				<h4>experience to next level (who)</h4>
<p>
			Returns experience required by a hero to reach the next level. The argument is the position of the hero you want to check in your party as as returned by <a href="#about-findhero" class="ref">find hero</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-experiencetolevel"></a>
				<h4>experience to level (level, hero slot)</h4>
<p>
			Returns the total experience required to reach a specified level from level 0. The second argument is a hero slot. Different heroes may have different experience curves. If the <span class="param">hero slot</span> argument is left out, then the default experience curve will be used.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-giveexperience"></a>
				<h4>give experience (hero, amount)</h4>
<p>
			Gives experience to either a hero by position in party (use result returned by <a href="#about-findhero" class="ref">find hero</a> command if you want to give experience by name or ID) or the whole party, if the constant <a href="#about-party" class="ref">party</a> is passed as first argument. If you give experience to the whole party, then it will be split amongst the heroes as it is in battle; dead heroes get experience depending on whether the "Dead heroes gain share of experience" general bitset is set, and swapped out heroes gain according to the options in the Battle System Options menu. This command can cause heroes to level up and learn spells but does not inform the player or trigger any effects. See <a href="#about-herolevelled" class="ref">hero levelled</a> and <a href="#about-spellslearned" class="ref">spells learned</a> for dealing with this. This command can give negative experience, but it will never cause a hero to delevel. You should use <a href="#about-setexperience" class="ref">set experience</a> to remove experience in a way that allows delevelling. You can't give experience to heroes with level equal to or greater than the level cap (which is 99 usually), though you can temporarily raise the cap using <a href="#about-setlevelcap" class="ref">set level cap</a> to get around this.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Hero's%20Spells"></a>
		<h3>
<span class="backlink"><a href="#Hero%20Data">Hero Data</a> →
			</span>Hero's Spells</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-teachspell"></a>
				<h4>teach spell (hero, attack)</h4>
<p>
			Tries to teach a hero a spell. This only works when the spell is set to "learned from item" in one of the hero's spell lists; it will not work for spells learned based on level. The first argument is the hero's position in the party (as returned by <a href="#about-findhero" class="ref">find hero</a>). The second argument is the attack to learn. You can use the names defined in your .HSI file in the form atk:attackname. (You may also use the attack's ID number. This is the number you see in the attack editor + 1.) If the hero was taught the spell, teach spell will return <a href="#about-true" class="ref">true</a>, or if the hero cannot learn the spell (perhaps because they already know it) it will return <a href="#about-false" class="ref">false</a>. Use <a href="#about-writespell" class="ref">write spell</a> to add a spell to a spell list without restriction.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-forgetspell"></a>
				<h4>forget spell (hero, attack)</h4>
<p>
			
				Causes a hero to forget a spell, by deleting all occurrences of it in their spell lists, regardless of how the spell was learnt.
				If the hero doesn't know the spell, nothing happens.
				(This doesn't affect attacks which are options directly in the hero's battle menu.)
				Returns <a href="#about-true" class="ref">true</a> if the hero knew the spell, <a href="#about-false" class="ref">false</a> if not.
				<br>
				The first argument is the hero's position in the party (as returned by <a href="#about-findhero" class="ref">find hero</a>).
				<br>
				The second argument is the attack to forget.
				You can use the constants (defined in your .hsi file) in the form <span class="code">atk:attackname</span>.
				(You may also use the attack's ID number. This is the number you see in the attack editor + 1).
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-readspell"></a>
				<h4>read spell (hero, list, slot)</h4>
<p>
			
				Checks what spell (attack) is in a certain slot of a hero spell list.
				Returns 0 (<a href="#about-false" class="ref">false</a>) if the slot is empty,
				otherwise the attack ID (i.e. one of the <span class="code">atk:attackname</span> constants),
				which is the ID shown in the attack editor + 1.
				The first argument is the hero's position in the party (as returned by <a href="#about-findhero" class="ref">find hero</a>).
				The second argument is the number of the spell list to check.
				This is a value from 0 to 3.
				The third argument is the slot to check.
				This is a number from 0 to 23.
				Spell slots are numbered in rows, so the first row is 0,1,2 the second row is 3,4,5, and so on.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-writespell"></a>
				<h4>write spell (hero, list, slot, attack)</h4>
<p>
			Forces a hero to learn a particular spell. The first argument is the hero's position in the party (as returned by <a href="#about-findhero" class="ref">find hero</a>). The second argument is the spell list to put the spell in. This is a number from 0 to 3. The third argument is the slot to put the spell in. This is a number from 0 to 23. Spell slots are numbered in rows, so the first row is 0,1,2 the second row is 3,4,5, and so-on. The last argument is the attack to put in the spell list. You can use the names defined in your .HSI file in the form atk:attackname (You may also use the attack's ID number. This is the number you see in the attack editor + 1). You can also erase a spell by writing 0 or <a href="#about-none" class="ref">none</a> as the attack ID. Note that this command will overwrite and replace any spell that is already in that slot. If you overwrite a slot that can normally learn another spell, you will never learn that other spell (unless you first erase the spell you wrote there)
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-knowsspell"></a>
				<h4>knows spell (hero, attack)</h4>
<p>
			
				Checks whether a hero already knows a spell (whether it's in one of their spell lists - if it's an option directly in the hero's battle menu that doesn't count!)
				and returns <a href="#about-true" class="ref">true</a> or <a href="#about-false" class="ref">false</a>.
				<br>
				The first argument is the hero's position in the party (as returned by <a href="#about-findhero" class="ref">find hero</a>).
				<br>
				The second argument is the attack to check for.
				You can use the constants (defined in your .hsi file) in the form <span class="code">atk:attackname</span>.
				(You may also use the attack's ID number. This is the number you see in the attack editor + 1).
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-canlearnspell"></a>
				<h4>can learn spell (hero, attack)</h4>
<p>
			
				Checks whether a hero is capable of learning a spell from an item (and therefore also with the <a href="#about-teachspell" class="ref">teach spell</a> command) and returns <a href="#about-true" class="ref">true</a> or <a href="#about-false" class="ref">false</a>.
				<br>
				The first argument is the hero's position in the party (as returned by <a href="#about-findhero" class="ref">find hero</a>).
				<br>
				The second argument is the attack to check for.
				You can use the constants (defined in your .hsi file) in the form <span class="code">atk:attackname</span>.
				(You may also use the attack's ID number. This is the number you see in the attack editor + 1).
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-spellslearnt"></a>
				<h4>spells learnt (hero, number)</h4>
<p>
			This is deprecated, do not use it. It is identical to <a href="#about-spellslearned" class="ref">spells learned</a> except it returns the id numbers of spells, instead of the id numbers +1. The attack constants exported in your .hsi file are all +1 the attack IDs in Custom.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-spellslearned"></a>
				<h4>spells learned (hero, number)</h4>
<p>
			Returns the id numbers (+1) of spells the hero learned from the last battle or <a href="#about-giveexperience" class="ref">give experience</a>, <a href="#about-setherolevel" class="ref">set hero level</a> or <a href="#about-setexperience" class="ref">set experience</a> command that targeted either this hero or the whole party. If the second argument is <a href="#about-getcount" class="ref">get count</a> then the number of spells that the hero learned is returned. Pass 0 for <span class="param">number</span> to get the first spell learnt, 1 to get the second, etc. You can use a loop and strings to list to the player all the spells a hero learned:
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If you want to compare attacks returned by this command with attack ID numbers, you must add 1 to the ID number, unless you use <span class="code">atk:...</span> constants.</div>
			
			
			<pre># The following script uses strings 0, 1, 2 for its use (they will be overwritten)
plotscript, print learned spells, who=0, begin
  variable(i)
  get hero name (1, who)  # construct the static part of the text in string 1
  $1+" learned spell "
  for (i, 0, spells learned (who, get count) -- 1) do (
    read attack name (2, spells learned (who, i))  # get the i-th spell learnt
    0 $= 1  # copy the static part to the displayed string
    0 $+ 2  # combine with the spell name
    show string at (0, 160, 100)
    wait for keypress (anykey)
  )
  hide string (0)
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-updateleveluplearning"></a>
				<h4>update level up learning(who, allowforget)</h4>
<p>
			Update a hero to make sure they know the spells they are supposed to have learned for their current level. The <span class="param">who</span> is the hero's position in the battle party. You can optionally pass <a href="#about-false" class="ref">false</a> as the <span class="param">allowforget</span> argument if you want to make sure the hero will not forget any spells that they are not supposed to know yet. This command is most useful for situations where you are manipulating the hero's level, and for some reason do not want to use <a href="#about-setherolevel" class="ref">set hero level</a> which automatically handles spell learning. This command can also be handy when playtesting a game in progress, since it can be used to make sure that heroes loaded from a saved-game will learn spells that did not exist yet at the time when they got their last level-ups.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Out-of-battle%20Attacks"></a>
		<h3>
<span class="backlink"><a href="#Hero%20Data">Hero Data</a> →
			</span>Out-of-battle Attacks</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-outsidebattlecure"></a>
				<h4>outside battle cure (attack minus 1, target, attacker)</h4>
<p>
			
				Obsolete, replaced by <a href="#about-mapcure" class="ref">map cure</a>.
				This is identical to mapcure except for the <span class="param">attack</span> argument differing by one.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mapcure"></a>
				<h4>map cure (attack, target, attacker)</h4>
<p>
			Uses an attack on a hero outside of battle as if you had used it from an item or cast it as a spell. In spite of the name, it works for both cure spells and damage spells. The first argument, <span class="param">attack</span> is name of the attack from your HSI file in the form atk:name. (You may also use the attack's ID number. This is the number you see in the attack editor + 1.) The second argument, <span class="param">target</span> is the position in the party of the hero to cure (or harm). The third optional argument, <span class="param">attacker</span> is the position in the party of the hero who is using the attack. If this argument is omitted or set to -1, then the average stats of the active party will be used, just like when the attack is used from an item. The return value is <a href="#about-true" class="ref">true</a> if the cure/attack succeeded, and <a href="#about-false" class="ref">false</a> if it did nothing.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">The <span class="param">map cure</span> command replaces the old command <span class="param">outside battle cure</span> which had a bug which required you to use <span class="param">atk:name -- 1</span> instead of <span class="param">atk:name</span> for the <span class="param">attack</span> argument.</div>
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If the attack results in all the heroes in the party being dead (outside of battles a hero isn't counted as dead if their maximum HP is zero or negative), a normal game over occurs: the game over script is run if there is one, otherwise the game ends. However the game over won't happen until the next wait command (such as <a href="#about-wait" class="ref">wait</a>).</div>
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
				If you want to cure a hero that has 0 HP with an attack, then the attack's Target Class
				needs to be set to something that allows targetting dead heroes.
				Otherwise the attack doesn't happen and this command returns <span class="code">false</span>.
				Other Target settings, including "Spread Attack", are ignored.
			</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-useitem" class="ref">use item</a>, </li>
<li>
<a href="#about-setherostat" class="ref">set hero stat</a>, </li>
<li><a href="#about-setdeathscript" class="ref">set death script</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Enemy%20and%20Formation%20Functions"></a>
		<h3>
<span class="backlink"></span>Enemy and Formation Functions</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Enemy and Formation Functions-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-getenemystat">get enemy stat(enemy, stat)</a><br>
		<a href="#about-setenemystat">set enemy stat(enemy, stat, value)</a><br>
		<a href="#about-enemyelementalresistasint">enemy elemental resist as int (enemy, element)</a><br>
		<a href="#about-getenemyname">get enemy name (enemyid, stringid)</a><br>
		<a href="#about-setenemyname">set enemy name (enemyid, stringid)</a><br>
		<a href="#about-getenemyappearance">get enemy appearance (enemyid, appearance)</a><br>
		<a href="#about-setenemyappearance">set enemy appearance (enemyid, appearance, value)</a><br>
		<a href="#about-readenemydata">read enemy data (enemyid, data)</a><br>
		<a href="#about-writeenemydata">write enemy data (enemyid, data, value)</a><br>
</div>
		<li>
<a href="#Formations">Formations</a><br>
		<ul class="content-shown">
		<a href="#about-addenemytoformation">add enemy to formation (formation, enemy id, x, y, slot)</a><br>
		<a href="#about-deleteenemyfromformation">delete enemy from formation (formation, slot)</a><br>
		<a href="#about-findenemyinformation">find enemy in formation (formation, enemy id, copy number)</a><br>
		<a href="#about-formationslotenemy">formation slot enemy (formation, slot)</a><br>
		<a href="#about-formationslotx">formation slot x (formation, slot)</a><br>
		<a href="#about-formationsloty">formation slot y (formation, slot)</a><br>
		<a href="#about-setformationbackground">set formation background (formation, background, animation frames, animation ticks)</a><br>
		<a href="#about-getformationbackground">get formation background (formation)</a><br>
		<a href="#about-setformationsong">set formation song (formation, song)</a><br>
		<a href="#about-getformationsong">get formation song (formation)</a><br>
		<a href="#about-resetformation">reset formation (formation)</a><br>
		<a href="#about-resetformationslot">reset formation slot (formation, slot)</a><br>
		<a href="#about-lastformation">last formation</a><br>
		<a href="#about-randomformation">random formation (formation set)</a><br>
		<a href="#about-formationsetfrequency">formation set frequency (formation set)</a><br>
		<a href="#about-getbattlecountdown">get battle countdown</a><br>
		<a href="#about-setbattlecountdown">set battle countdown (value)</a><br>
		<a href="#about-formationprobability">formation probability (formation set, formation)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-getenemystat"></a>
				<h4>get enemy stat(enemy, stat)</h4>
<p>
			Returns the selected stat from the selected enemy. The first argument is the number of the enemy whose stats you want to check. The second argument is the name of the stat that you want to check. The names of the stats are defined in your HSI file in the form stat:name. 
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setenemystat" class="ref">set enemy stat</a>, </li>
<li>
<a href="#about-enemyelementalresistasint" class="ref">enemy elemental resist as int</a>, </li>
<li>
<a href="#about-getherostat" class="ref">get hero stat</a>, </li>
<li><a href="#about-setherostat" class="ref">set hero stat</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setenemystat"></a>
				<h4>set enemy stat(enemy, stat, value)</h4>
<p>
			Sets the selected stat of the selected enemy to the value you supply. The first argument is the number of the enemy whose stats you want to set. The second argument is the name of the stat that you want to set. The names of the stats are defined in your HSI file in the form stat:name. The third is the new value of the stat.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Enemy stat changes are temporary. They are not saved in the game save.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getenemystat" class="ref">get enemy stat</a>, </li>
<li>
<a href="#about-getherostat" class="ref">get hero stat</a>, </li>
<li><a href="#about-setherostat" class="ref">set hero stat</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-enemyelementalresistasint"></a>
				<h4>enemy elemental resist as int (enemy, element)</h4>
<p>
			Gets the amount of damage that an enemy receives from attacks of a certain element, as a percentage of normal. The argument <span class="param">enemy</span> is the enemy's ID number. The argument <span class="param">element</span> is a number from 0 to whatever the highest enabled element is. The result is rounded to the nearest integer. For example, if the enemy takes 2.6% damage (1/40th normal), then the result will be 3.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">When floating point support is added to HamsterSpeak, an alternative to this command will be added.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getenemystat" class="ref">get enemy stat</a>, </li>
<li><a href="#about-herototalelementalresistasint" class="ref">hero total elemental resist as int</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getenemyname"></a>
				<h4>get enemy name (enemyid, stringid)</h4>
<p>
			
				Put the name of an enemy in a string.
				<span class="param">enemyid</span> is the number of the enemy
				(you can use a constant like <span class="code">enemy: skeleton</span>,
				and <span class="param">stringid</span> is the number of the string in which to store the name of the enemy.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					The arguments are the opposite order to every other "get ... name" command! Whoops!
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setenemyname" class="ref">set enemy name</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setenemyname"></a>
				<h4>set enemy name (enemyid, stringid)</h4>
<p>
			
				Lets you change an enemy's name from a string.
				The string length cannot be more then 16 characters, if it is more then 16 the name will be truncated.
				<br>
				<span class="param">enemyid</span> is the number of the enemy
				(you can use a constant like <span class="code">enemy: skeleton</span>,
				and <span class="param">stringid</span> is the number of the string that you supply the name of the enemy from.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Enemy name changes are temporary. They are not saved in saved games.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getenemyname" class="ref">get enemy name</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getenemyappearance"></a>
				<h4>get enemy appearance (enemyid, appearance)</h4>
<p>
			
				Returns data on the appearance of a enemy.
				<span class="param">enemyid</span> is the enemy number that you want to return the appearance of,
				<span class="param">appearance</span> is one of the following constants:
				<ul>
					<li>enemy:picture</li>
					<li>enemy:palette</li>
					<li>enemy:picturesize</li>
				</ul>
				<br>
				You can compare the values returned for <span class="code">enemy:picturesize</span> with the constants <span class="code">enemysize:small</span>, <span class="code">enemysize:medium</span> and <span class="code">enemysize:large</span>.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setenemyappearance" class="ref">set enemy appearance</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setenemyappearance"></a>
				<h4>set enemy appearance (enemyid, appearance, value)</h4>
<p>
			
				Lets you change an enemy's appearance.
				<span class="param">enemyid</span> is the number of the enemy's appearance that you want to change,
				<span class="param">appearance</span> is one of the constants given in <a href="#about-getenemyappearance" class="ref">get enemy appearance</a>.
				<span class="param">value</span> is the value to assign:
				spriteset id for <span class="code">enemy:picture</span>;
				constants <span class="code">enemysize:small</span>,
				<span class="code">enemysize:medium</span>, or <span class="code">enemysize:large</span> when changing picture size
				(spriteset group);
				or palette number when changing palette.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Enemy appearance changes are temporary: they are not saved in saved games.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getenemyappearance" class="ref">get enemy appearance</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-readenemydata"></a>
				<h4>read enemy data (enemyid, data)</h4>
<p>
			
				Returns the enemy's reward values.
				Enemyid is the number of enemy, data is a predefined constant defining the data you want returned.
				Use the following constants:
				<ul>
					<li>enemy:gold</li>
					<li>enemy:experience</li>
					<li>enemy:item</li>
					<li>enemy:itempercent</li>
					<li>enemy:rareitem</li>
					<li>enemy:rareitempercent</li>
					<li>stealability</li>
					<li>stealableitem</li>
					<li>stealableitemchance</li>
					<li>stealablerareitem</li>
					<li>stealablerareitemchance</li>
				</ul>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-writeenemydata" class="ref">write enemy data</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-writeenemydata"></a>
				<h4>write enemy data (enemyid, data, value)</h4>
<p>
			Lets you set items of an enemy's data. Enemyid is the number of enemy, data is a predefined constant for the data you want to change. Value is the new value given to that setting. Use the same constants as are given at <a href="#about-readenemydata" class="ref">read enemy data</a>.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Enemy data changes are temporary. They are not saved in saved games.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-readenemydata" class="ref">read enemy data</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Formations"></a>
		<h3>
<span class="backlink"><a href="#Enemy%20and%20Formation%20Functions">Enemy and Formation Functions</a> →
			</span>Formations</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-addenemytoformation"></a>
				<h4>add enemy to formation (formation, enemy id, x, y, slot)</h4>
<p>
			
				Adds an enemy with given <span class="param">enemy id</span>
				(use the constants of the form <span class="param">enemy:name</span> in your exported .hsi file) to the specified <span class="param">formation</span>.
				<span class="param">x</span> (0 to 320) and <span class="param">y</span> (from roughly 17 to 240, depending on enemy size)
				give the position of the center of the bottom edge of the enemy
				- approximately where it appears to stand.
				<span class="param">slot</span> (0 to 7) is an optional argument,
				if you specify it, then the enemy is created in the suggested slot if empty.
				If you omit <span class="param">slot</span> or <span class="param">slot</span> isn't empty, the enemy is put in the first empty slot.
				The actual slot number used is returned, or -1 if the enemy couldn't be added.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Changes to enemy formations are temporary: they are not saved in save files.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-deleteenemyfromformation" class="ref">delete enemy from formation</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-deleteenemyfromformation"></a>
				<h4>delete enemy from formation (formation, slot)</h4>
<p>
			Deletes an enemy in the given <span class="param">slot</span> (as returned by <a href="#about-findenemyinformation" class="ref">find enemy in formation</a> for example) in the <span class="param">formation</span>.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Changes to enemy formations are temporary: they are not saved in save files.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-addenemytoformation" class="ref">add enemy to formation</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-findenemyinformation"></a>
				<h4>find enemy in formation (formation, enemy id, copy number)</h4>
<p>
			Searches for an enemy in a formation, returning the slot number, or -1 if not found. <span class="param">copy number</span> is optional, use 0 or greater specify which enemy to return if there is more than one, or the constant <a href="#about-getcount" class="ref">get count</a>. The first (searching the slots sequentially) enemy copy is number 0. The number of specified enemies in the formation is returned if the constant get count is used. <span class="param">enemy id</span> can be either an enemy id, or the constant <span class="param">any enemy</span>, which searches for any enemy (the first enemy in the formation by default), or the total number of enemies with <a href="#about-getcount" class="ref">get count</a>.
			
			<pre>plotscript, look at formation, formation, begin
  # In this example, we'll pick a random enemy from a formation, and check if there are any plips.
  # You'll need an enemy named plip to try this out, or change the "enemy:plip" constant below to something else
  variable (number of enemies, random enemy slot)

  # The total number of enemies
  number of enemies := find enemy in formation (formation, any enemy, get count)
  # Pick an enemy at random
  random enemy slot := find enemy in formation (formation, any enemy, random(0, number of enemies -- 1))

  $30 = "There is a "
  # Here we append the enemy's name to string 30
  get enemy name (formation slot enemy (formation, random enemy slot), 30)
  $30 + " in this formation"
  show string (30)

  # Let's check whether there is at least one plip in this formation
  variable (number, plip slot)
  number := find enemy in formation (formation, enemy:plip, get count)
  if (number &gt; 0) then (
    # We'll put a string onscreen where the plip appears in battle
    $31 = "Plip!"
    plip slot := find enemy in formation (formation, enemy:plip)
    center string at (31, formation slot x (formation, plip slot), formation slot y (formation, plip slot) -- 20)
  )
end
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-deleteenemyfromformation" class="ref">delete enemy from formation</a>, </li>
<li>
<a href="#about-formationslotenemy" class="ref">formation slot enemy</a>, </li>
<li>
<a href="#about-formationslotx" class="ref">formation slot x</a>, </li>
<li><a href="#about-formationsloty" class="ref">formation slot y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-formationslotenemy"></a>
				<h4>formation slot enemy (formation, slot)</h4>
<p>
			Returns the ID number of the enemy in the specified formation slot (0 to 7), or -1 if the slot is empty.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-findenemyinformation" class="ref">find enemy in formation</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-formationslotx"></a>
				<h4>formation slot x (formation, slot)</h4>
<p>
			Returns the x position of the center of the enemy in the specified formation slot (0 to 7). An enemies position is the center of the bottom edge of the enemy - approximately where it appears to stand.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-findenemyinformation" class="ref">find enemy in formation</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-formationsloty"></a>
				<h4>formation slot y (formation, slot)</h4>
<p>
			Returns the y position of the bottom edge of the enemy sprite in the specified formation slot (0 to 7). An enemies position is the center of the bottom edge of the enemy - approximately where it appears to stand.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-findenemyinformation" class="ref">find enemy in formation</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setformationbackground"></a>
				<h4>set formation background (formation, background, animation frames, animation ticks)</h4>
<p>
			Sets the background and the background animation for a <span class="param">formation</span>. The animation arguments do not need to be given, producing a static background. <span class="param">animation frames</span>, optional, is the number of frames (1 to 50) to use for the background animation. 1 is non-animating. <span class="param">animation ticks</span>, also optional, is the number of ticks to display each backdrop for. The engine normally (but not reliably) runs at 18 ticks per second.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Changes to enemy formations are temporary: they are not saved in save files.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getformationbackground" class="ref">get formation background</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getformationbackground"></a>
				<h4>get formation background (formation)</h4>
<p>
			Gets the background used by a <span class="param">formation</span>. If the backdrop is animated, this returns the ID of the first backdrop (the one set in Custom).
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setformationbackground" class="ref">set formation background</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setformationsong"></a>
				<h4>set formation song (formation, song)</h4>
<p>
			Changes an enemy formation to use <span class="param">song</span> as its music. Use the constants of the form <span class="param">song:songname</span> from your exported .hsi file, or the special constants <a href="#about-song:silence" class="ref">song: silence</a> or <a href="#about-song:sameasmap" class="ref">song: same as map</a><div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Changes to enemy formations are temporary: they are not saved in save files.</div>
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getformationsong" class="ref">get formation song</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getformationsong"></a>
				<h4>get formation song (formation)</h4>
<p>
			Returns the song associated with <span class="param">formation</span>. Compare the result with the constants of the form <span class="param">song:songname</span> from your exported .hsi file, or the special constants <a href="#about-song:silence" class="ref">song: silence</a> or <a href="#about-song:sameasmap" class="ref">song: same as map</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setformationsong" class="ref">set formation song</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-resetformation"></a>
				<h4>reset formation (formation)</h4>
<p>
			Reset any scripted changes to <span class="param">formation</span>. This script erases changes made with <a href="#about-addenemytoformation" class="ref">add enemy to formation</a>, <a href="#about-deleteenemyfromformation" class="ref">delete enemy from formation</a>, <a href="#about-setformationbackground" class="ref">set formation background</a>, and <a href="#about-setformationsong" class="ref">set formation song</a> and changes the formation back to the way it was defined in the Formation Editor in custom.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-resetformationslot" class="ref">reset formation slot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-resetformationslot"></a>
				<h4>reset formation slot (formation, slot)</h4>
<p>
			Reset any scripted changes to a specific <span class="param">slot</span> in a <span class="param">formation</span>. This script erases changes to enemy id, enemy x, and enemy y made with <a href="#about-addenemytoformation" class="ref">add enemy to formation</a> or <a href="#about-deleteenemyfromformation" class="ref">delete enemy from formation</a> and changes the formation slot back to the way it was defined in the Formation Editor in custom.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-resetformation" class="ref">reset formation</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-lastformation"></a>
				<h4>last formation</h4>
<p>
			Returns the last formation fought. If the player hasn't fought any formations yet (since starting or loading the game), it returns -1.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-readfoemap" class="ref">read foemap</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-randomformation"></a>
				<h4>random formation (formation set)</h4>
<p>
			Picks a formation randomly from the given <span class="param">formation set</span> (1 to 255), returning the formation number.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-formationprobability" class="ref">formation probability</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-formationsetfrequency"></a>
				<h4>formation set frequency (formation set)</h4>
<p>
			
				Returns the formation frequency (from 0 to 200) of a <span class="param">formation set</span> (1 to 255), as set in the Formation Set Editor.
				Note that the frequency is not actually a probability (as a percentage) of a battle occurring each step,
				but is roughly the number of battles per 100 steps, spaced randomly.
				The frequency is used to update the random battle countdown every step (see <a href="#about-getbattlecountdown" class="ref">get battle countdown</a>).
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-randomformation" class="ref">random formation</a>, </li>
<li>
<a href="#about-getbattlecountdown" class="ref">get battle countdown</a>, </li>
<li><a href="#about-setbattlecountdown" class="ref">set battle countdown</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getbattlecountdown"></a>
				<h4>get battle countdown</h4>
<p>
			
				Returns the random battle countdown value.
				This counter starts at a random value from 40 to 160, and is reduced by the formation set
				frequency whenever the player steps on a tile marked on the foemap.
				When it reaches zero a formation from that formation set is triggered and it resets.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-formationsetfrequency" class="ref">formation set frequency</a>, </li>
<li>
<a href="#about-getbattlecountdown" class="ref">get battle countdown</a>, </li>
<li>
<a href="#about-setbattlecountdown" class="ref">set battle countdown</a>, </li>
<li><a href="#about-readfoemap" class="ref">read foemap</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setbattlecountdown"></a>
				<h4>set battle countdown (value)</h4>
<p>
			
				Sets the random battle countdown value (see <a href="#about-getbattlecountdown" class="ref">get battle countdown</a>).
				Setting the value to 0 or less means that the next step will
				trigger a battle (even if the frequency is 0!)
				The counter is saved in save games, but resets
				when fighting a battle (for any reason),
				using a door (even to the same map) or <a href="#about-teleporttomap" class="ref">teleport to map</a>,
				or dismounting a vehicle.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-formationsetfrequency" class="ref">formation set frequency</a>, </li>
<li>
<a href="#about-getbattlecountdown" class="ref">get battle countdown</a>, </li>
<li><a href="#about-setbattlecountdown" class="ref">set battle countdown</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-formationprobability"></a>
				<h4>formation probability (formation set, formation)</h4>
<p>
			Returns the probability of a particular <span class="param">formation</span> in a <span class="param">formation set</span> being fought, as a percentage from 0 to 100. This does take the number of times the formation appears in the formation set into account.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-randomformation" class="ref">random formation</a>, </li>
<li><a href="#about-random" class="ref">random</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Getting%20Player%20Input"></a>
		<h3>
<span class="backlink"></span>Getting Player Input</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Getting Player Input-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-pickhero">pick hero (message, skip if alone)</a><br>
</div>
		<li>
<a href="#Keyboard%20Input">Keyboard Input</a><br>
		<ul class="content-shown">
		<a href="#about-keyispressed">key is pressed (scancode, player)</a><br>
		<a href="#about-keypress">keypress (scancode, player)</a><br>
		<a href="#about-newkeypress">new keypress (scancode, player)</a><br>
		<a href="#about-keyval">keyval (scancode, player)</a><br>
		<a href="#about-lastascii">last ascii</a><br>
		<a href="#about-getscancodename">get scancode name(string id, scancode, long name)</a><br>
		<a href="#about-enableinputtext">enable input text (enable)</a><br>
		<a href="#about-getinputtext">get input text (string id)</a><br>
		<a href="#about-inputstring">input string (ID, maxlength, use current, center, position x, position y)</a><br>
		<a href="#about-inputstringwithvirtualkeyboard">input string with virtual keyboard (ID, maxlength, onlyplayer)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Joystick/Gamepad%20Input">Joystick/Gamepad Input</a><br>
		<ul class="content-shown">
		<a href="#about-joystickbutton">joystick button (button, player)</a><br>
		<a href="#about-joystickaxis">joystick axis (axis, multiplier, player)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Mouse%20Input">Mouse Input</a><br>
		<ul class="content-shown">
		<a href="#about-initmouse">init mouse</a><br>
		<a href="#about-mousepixelx">mouse pixel X</a><br>
		<a href="#about-mousepixely">mouse pixel Y</a><br>
		<a href="#about-mousebutton">mouse button (which)</a><br>
		<a href="#about-mouseclick">mouse click (which)</a><br>
		<a href="#about-mouserelease">mouse release (which)</a><br>
		<a href="#about-putmouse">put mouse (X, Y)</a><br>
		<a href="#about-mouseregion">mouse region (x min, x max, y min, y max)</a><br>
		<a href="#about-inputstringwithmousekeyboard">input string with mouse keyboard (ID, maxlength)</a><br>
		<a href="#about-unhidemousecursor">unhide mouse cursor</a><br>
		<a href="#about-showmousecursor">show mouse cursor</a><br>
		<a href="#about-hidemousecursor">hide mouse cursor</a><br>
</ul>
<ul>
		<li>
<a href="#Helpful%20Related%20Commands">Helpful Related Commands</a><br>
		<ul class="content-shown"></ul>
<ul></ul>
</li>
</ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-pickhero"></a>
				<h4>pick hero (message, skip if alone)</h4>
<p>
			
				Pops up a hero-picker box that lets you choose one of the heroes in your active party.
				The return value is the position in the party of the hero you picked, or -1 if the player cancelled.
				<br>
				Both arguments are optional.
				<br>
				<span class="param">message</span> is the ID of the string to use for the prompt, which defaults to "Which Hero?".
				If you leave it out or pass -1, the default message is used,
				which is defined in the Global Text Strings menu (search it for "pick hero").
				<br>
				If <span class="param">skip if alone</span> is true then if there's only one hero in the active party
				then will automatically be picked, without showing the menu.
				It defaults to <span class="code">false</span>!
			
			
			
			
		</p>
</div>
		<div class="command">
		<h4>rename hero (who)</h4>
		<p><a href="#about-renamehero">Documented in the Hero Data section.</a></p>
		</div>
		<div class="command">
		<h4>rename hero by slot (who)</h4>
		<p><a href="#about-renameherobyslot">Documented in the Hero Data section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Keyboard%20Input"></a>
		<h3>
<span class="backlink"><a href="#Getting%20Player%20Input">Getting Player Input</a> →
			</span>Keyboard Input</h3>
		<p>
			There are three main commands for checking for keypresses: <a href="#about-keypress" class="ref">keypress</a>,
			<a href="#about-newkeypress" class="ref">new keypress</a> and <a href="#about-keyispressed" class="ref">key is pressed</a>.
			Use <a href="#about-keyispressed" class="ref">key is pressed</a> (which checks whether a key is down) when you want the player to do something continually,
			such for moving, running, jumping, or attacking repeatedly
			each time a cooldown expires (you'll need to script your own cooldown).
			For nearly everything else you will use <a href="#about-keypress" class="ref">keypress</a>,
			(or <a href="#about-newkeypress" class="ref">new keypress</a> instead if you don't want key repeat),
			such as when you script a menu
			(both activating menu items and moving the cursor - since the cursor moves in jumps rather than continually),
			or to use a special ability such throwing a ball.
			You should use <a href="#about-keypress" class="ref">keypress</a> for key repeat for scripted menus.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
				You can NOT wait for the player to press a key by continually polling <a href="#about-keyispressed" class="ref">key is pressed</a>, etc,
				in a <a href="#about-while" class="ref">while</a> loop unless you stick a <a href="#about-wait" class="ref">wait</a> in your loop.
				That's because key, joystick and mouse commands don't return real time data,
				but the state of the devices at the beginning of the current game tick (after the last wait).
			</div>
		</p>
<ul></ul>
		<div class="command">
			<a name="about-keyispressed"></a>
				<h4>key is pressed (scancode, player)</h4>
<p>
			
				Returns <a href="#about-true" class="ref">true</a> if the keyboard or joystick key with the specified <a href="#about-scancode" class="ref">scancode</a> is being pressed
				(either held down or pressed since last tick), or <a href="#about-false" class="ref">false</a> if it is not.
				The <span class="param">scancode</span> argument is a <a href="#about-scancode" class="ref">scancode</a> such as a keyboard key (e.g. <span class="code">key:ctrl</span>)
				a joystick button (e.g. <span class="code">joy:left</span>), or a virtual scancode such as
				<a href="#about-usekey" class="ref">use key</a> (see <a href="#about-controlcodes" class="ref">control codes</a>).
				<br>
				<span class="param">player</span> is an optional <a href="#about-playernumber" class="ref">player number</a>,
				normally only used with <span class="code">joy:...</span> joystick scancodes
				or <a href="#about-controlcodes" class="ref">control codes</a>, and tells which player's controller to read.
				By default it checks for a button press on any plugged-in controller.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command is an alternative to <a href="#about-keypress" class="ref">keypress</a> or <a href="#about-newkeypress" class="ref">new keypress</a>;
					see <a href="#Keyboard%20Input" class="ref">Keyboard Input</a> for usage hints.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Previously you couldn't use virtual scancodes like <a href="#about-usekey" class="ref">use key</a>,
					which could only be used with <a href="#about-waitforkey" class="ref">wait for key</a>.
					Now all key commands accept any kind of constant; what a relief!
				</div>
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					You can't rely on the behaviour of the caps-, scroll- and num-lock keys.
					They might report on/off state instead of pressed/not pressed,
					depending on the graphics backend, operating system, and engine version.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-keypress" class="ref">keypress</a>, </li>
<li>
<a href="#about-newkeypress" class="ref">new keypress</a>, </li>
<li><a href="#about-keyval" class="ref">keyval</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-keypress"></a>
				<h4>keypress (scancode, player)</h4>
<p>
			
				Checks for a keypress event, and returns <span class="code">true</span> or <span class="code">false</span>.
				A keypress happens either when there's a new keypress (the key/button gets pressed down),
				or each time it repeats once it's been held down for a little while
				(18 times a second after it's been held half a second, by default).
				<br>
				The <span class="param">scancode</span> argument is a <a href="#about-scancode" class="ref">scancode</a> such as a keyboard key (e.g. <span class="code">key:ctrl</span>)
				a joystick button (e.g. <span class="code">joy:left</span>), or a virtual scancode such as
				<a href="#about-usekey" class="ref">use key</a> (see <a href="#about-controlcodes" class="ref">control codes</a>).
				<br>
				<span class="param">player</span> is an optional <a href="#about-playernumber" class="ref">player number</a>,
				normally only used with <span class="code">joy:...</span> joystick scancodes
				or <a href="#about-controlcodes" class="ref">control codes</a>, and tells which player's controller to read.
				By default it checks for a button press on any plugged-in controller.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command is an alternative to <a href="#about-newkeypress" class="ref">new keypress</a> or <a href="#about-keyispressed" class="ref">key is pressed</a>;
					see <a href="#Keyboard%20Input" class="ref">Keyboard Input</a> for usage hints.
				</div>
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					It's not a good idea to rely on the key repeat rate for things that affect gameplay such as the rate at which you can shoot bullets!
					The repeat rate is once every 55 milliseconds (18 times a second), independent of the frames per second (fps) that
					the game is running at.
					Suppose you use key repeat to shoot bullets and your game runs at 36 fps,
					then a bullet will be fired every other frame.
					But if played on a really slow computer that only ran the game at 18 fps, a bullet will be fired every frame!
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-keyispressed" class="ref">key is pressed</a>, </li>
<li>
<a href="#about-newkeypress" class="ref">new keypress</a>, </li>
<li><a href="#about-keyval" class="ref">keyval</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-newkeypress"></a>
				<h4>new keypress (scancode, player)</h4>
<p>
			
				Checks for a new keypress (the key/button gets pressed down), and returns <span class="code">true</span> or <span class="code">false</span>.
				<br>
				The <span class="param">scancode</span> argument is a <a href="#about-scancode" class="ref">scancode</a> such as a keyboard key (e.g. <span class="code">key:ctrl</span>)
				a joystick button (e.g. <span class="code">joy:left</span>), or a virtual scancode such as
				<a href="#about-usekey" class="ref">use key</a> (see <a href="#about-controlcodes" class="ref">control codes</a>).
				<br>
				<span class="param">player</span> is an optional <a href="#about-playernumber" class="ref">player number</a>,
				normally only used with <span class="code">joy:...</span> joystick scancodes
				or <a href="#about-controlcodes" class="ref">control codes</a>, and tells which player's controller to read.
				By default it checks for a button press on any plugged-in controller.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command is an alternative to <a href="#about-keypress" class="ref">keypress</a> or <a href="#about-keyispressed" class="ref">key is pressed</a>;
					see <a href="#Keyboard%20Input" class="ref">Keyboard Input</a> for hints.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-keyispressed" class="ref">key is pressed</a>, </li>
<li>
<a href="#about-keypress" class="ref">keypress</a>, </li>
<li><a href="#about-keyval" class="ref">keyval</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-keyval"></a>
				<h4>keyval (scancode, player)</h4>
<p>
			
			(Obsolete, you can now use simpler commands like <a href="#about-keypress" class="ref">keypress</a> instead.)
			<br>
			Returns a bitmask for the state of the specified key, joystick/gamepad button, or virtual scancode.
			<br>
			The <span class="param">scancode</span> argument is a <a href="#about-scancode" class="ref">scancode</a> such as a keyboard key (e.g. <span class="code">key:ctrl</span>)
			a joystick button (e.g. <span class="code">joy:left</span>), or a virtual scancode such as
			<a href="#about-usekey" class="ref">use key</a> (see <a href="#about-controlcodes" class="ref">control codes</a>).
			<br>
			<span class="param">player</span> is an optional <a href="#about-playernumber" class="ref">player number</a>,
			normally only used with <span class="code">joy:...</span> joystick scancodes
			or <a href="#about-controlcodes" class="ref">control codes</a>, and tells which player's controller to read.
			By default it checks for a button press on any plugged-in controller.
			<br>
			The result holds the same information as given by the <a href="#about-keyispressed" class="ref">key is pressed</a> and <a href="#about-keypress" class="ref">keypress</a> commands,
			so you can use those instead.
			The first (least significant) bit is whether the key was depressed at the beginning of the current tick.
			The second bit is whether a keypress event happened (either this is a new keypress, or key repeat occurred)
			- same as <a href="#about-keypress" class="ref">keypress</a>.
			<br>
			It can therefore return 0, 1, 2 or 3:
			<br>
			0 = not pressed<br>
			1 = key held down since last tick, but is not a new press<br>
			2 = the player pressed the key and released it, all in the same tick<br>
			3 = new keypress (or typematic repeat)
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
				Previously you couldn't use virtual scancodes like <a href="#about-usekey" class="ref">use key</a>,
				which could only be used with <a href="#about-waitforkey" class="ref">wait for key</a>.
				Now all key commands accept any kind of constant; what a relief!
			</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-keyispressed" class="ref">key is pressed</a>, </li>
<li>
<a href="#about-keypress" class="ref">keypress</a>, </li>
<li><a href="#about-newkeypress" class="ref">new keypress</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-lastascii"></a>
				<h4>last ascii</h4>
<p>
			This command is obsolete. Use <a href="#about-getinputtext" class="ref">get input text</a> instead, if possible.<br>Returns the character code of any currently pressed key, or 0 if none are. If more than one key corresponding to an ascii character is being pressed, then only one can be returned.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getscancodename" class="ref">get scancode name</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getscancodename"></a>
				<h4>get scancode name(string id, scancode, long name)</h4>
<p>
			
				Get a name for a <a href="#about-scancode" class="ref">scancode</a>, what the key does if Shift isn't pressed,
				and put it in <span class="param">string id</span>.
				For example, "7", "Q", "Space", "Caps Lock", "Gamepad Button 1", "Gamepad Up".
				<br>
				<span class="param">scancode</span> can be any <span class="code">key:...</span> or <span class="code">joy:...</span> scancode,
				or <a href="#about-usekey" class="ref">use key</a>, <a href="#about-menukey" class="ref">menu key</a>, etc.
				<br>
				Normally a long name like "Left Shift" is returned, but if
				optional argument <span class="param">long name</span> is false, then
				a one-character string for what the key inserts
				is returned if available, for example "[" instead of "Left Bracket",
				with the exception of "Space" and "Enter" and numpad keys like "Numpad Minus" which
				are always returned as long names.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getinputtext" class="ref">get input text</a>, </li>
<li><a href="#about-lastascii" class="ref">last ascii</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-enableinputtext"></a>
				<h4>enable input text (enable)</h4>
<p>
			This command needs to be called before <a href="#about-getinputtext" class="ref">get input text</a> can be used. If the optional argument is <a href="#about-true" class="ref">true</a> or not given then <span class="param">get input text</span> is enabled, otherwise it is disabled. Enabling <a href="#about-getinputtext" class="ref">get input text</a> may cause some of the keys on international keyboards ("combining" keys, which are usually punctuation keys) to go "dead" --- that is, commands such as <a href="#about-keyispressed" class="ref">key is pressed</a> and <a href="#about-waitforkey" class="ref">wait for key</a> will stop showing that they are pressed. For that reason, <span class="param">get input text</span> is disabled by default. You don't need to use this command before calling <a href="#about-inputstring" class="ref">input string</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getinputtext" class="ref">get input text</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getinputtext"></a>
				<h4>get input text (string id)</h4>
<p>
			Places in the specified string any text that the player has typed since the last tick. (The string will be empty if nothing has been.) Textual input must be enabled using <a href="#about-enableinputtext" class="ref">enable input text</a> before this command can be used! See that command for details. You will normally call this every tick in a loop and use <a href="#about-concatenatestrings" class="ref">concatenate strings</a> to read the player's complete input. However it is much easier to call the <a href="#about-inputstring" class="ref">input string</a> function instead, which does this for you.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-inputstring" class="ref">input string</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-inputstring"></a>
				<h4>input string (ID, maxlength, use current, center, position x, position y)</h4>
<p>
			
				Allows the player to type in a string (until they press ENTER).
				Returns false if they press ESC to cancel.
				<span class="param">ID</span> is the string you want to use.
				All other arguments are optional:
				<span class="param">maxlen</span> is the length of input, if left blank the limit will be equal to
				the maximum length that fits on-screen (40 characters if the screen is the default 320 pixels wide).
				<span class="param">use current</span> is whether you want to add to the existing string, or clear the string before typing.
				The default is to clear the string before typing, valid arguments are <a href="#about-true" class="ref">true</a> or <a href="#about-false" class="ref">false</a>.
				The string will be centered (see <a href="#about-centerstringat" class="ref">center string at</a> unless <span class="param">center</span> is <a href="#about-false" class="ref">false</a>.
				If the string is not visible, then it will automatically be placed onscreen
				(centered if not specified) and hidden when done.
				<span class="param">position x</span> and <span class="param">position y</span> are optional (defaulting to the center of the screen),
				and are the position at which the string will be shown as it is being typed;
				otherwise the string will use its current positioning if already visible.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getinputtext" class="ref">get input text</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-inputstringwithvirtualkeyboard"></a>
				<h4>input string with virtual keyboard (ID, maxlength, onlyplayer)</h4>
<p>
			Allows the player to input a string using a virtual keyboard. The exact appearance and behavior of the virtual keyboard will vary on different platforms, for example, on Android a touch-screen keyboard will appear, but when playing on a console, the virtual keyboard will be controlled with the d-pad and buttons. You have no control over what portion of the screen is obscured by the virtual keyboard. The virtual keyboard will vanish when the command is finished. <span class="param">ID</span> is the string you want to use. All other arguments are optional: <span class="param">maxlen</span> is the length of input, if left blank the limit will be set to 40 (max visible onscreen length). The <span class="param">onlyplayer</span> is optional. It only matters when the game is played on a console with multiple gamepads configured. It can be a number from 0 to 3, being that only that specific player has control over the virtual keyboard. By default onlyplayer is -1, which means that any player can control it.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-inputstring" class="ref">input string</a>, </li>
<li><a href="#about-inputstringwithmousekeyboard" class="ref">input string with mouse keyboard</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>show virtual gamepad</h4>
		<p><a href="#about-showvirtualgamepad">Documented in the Platform Specific section.</a></p>
		</div>
		<div class="command">
		<h4>hide virtual gamepad</h4>
		<p><a href="#about-hidevirtualgamepad">Documented in the Platform Specific section.</a></p>
		</div>
		<div class="command">
		<h4>auto virtual gamepad</h4>
		<p><a href="#about-autovirtualgamepad">Documented in the Platform Specific section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Joystick/Gamepad%20Input"></a>
		<h3>
<span class="backlink"><a href="#Getting%20Player%20Input">Getting Player Input</a> →
			</span>Joystick/Gamepad Input</h3>
		<p>
			Joystick buttons and up/down/left/right directions can also be read using the
			<a href="#about-keypress" class="ref">keypress</a>, <a href="#about-newkeypress" class="ref">new keypress</a>, <a href="#about-keyispressed" class="ref">key is pressed</a> and <a href="#about-waitforkey" class="ref">wait for key</a>
			commands, by using the <span class="code">joy:...</span> <a href="#about-scancode" class="ref">scancode</a> constants instead of keyboard scancodes.
			<br>
			But the best way to support joysticks is to use <a href="#about-controlcodes" class="ref">control codes</a> such as <a href="#about-usekey" class="ref">use key</a>
			instead of keyboard scancodes, e.g. write <span class="code">if (keypress(use key))</span> instead of
			<span class="code">if (keypress(key:space) || keypress(key:enter) || keypress(key:ctrl))</span>.
		</p>
<ul></ul>
		<div class="command">
			<a name="about-joystickbutton"></a>
				<h4>joystick button (button, player)</h4>
<p>
			
				Returns <a href="#about-true" class="ref">true</a> or <a href="#about-false" class="ref">false</a> depending on whether button
				number <span class="param">button</span> on the <span class="param">player</span>'s joystick/gamepad is pressed.
				<span class="param">button</span> can be from 1-32 (assuming the joystick has that many buttons),
				or a joystick <a href="#about-scancode" class="ref">scancode</a> like <span class="code">joy:Up</span>.
				<br>
				<span class="param">player</span> is an optional <a href="#about-playernumber" class="ref">player number</a> telling which player's controller to read.
				By default it checks for button presses on any plugged-in controller.
				<br>
				This command is redundant to <a href="#about-keyispressed" class="ref">key is pressed</a>.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you want to check for new button presses, or want key-repeat to happen,
					use the <a href="#about-keypress" class="ref">keypress</a> or <a href="#about-newkeypress" class="ref">new keypress</a> commands instead
					with a <span class="code">joy:...</span> scancode.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-joystickaxis"></a>
				<h4>joystick axis (axis, multiplier, player)</h4>
<p>
			
				Returns the position of one of a joystick/gamepad's sticks along the X or Y axis, or of one of the trigger buttons.
				<span class="param">axis</span> is a value 0 or higher, or one of the constants:
				<ul>
					<li>
						<span class="code">axis:X</span> - the X axis of the joystick, or left thumbstick on a gamepad.
						Negative for left, positive for right.
						(You can also use the obsolete <span class="code">x axis</span> alias)
					</li>
					<li>
						<span class="code">axis:Y</span> - the Y axis of the joystick, or left thumbstick on a gamepad.
						Negative for up, positive for down.
						(You can also use the obsolete <span class="code">y axis</span> alias)
					</li>
					<li>
<span class="code">axis:Right X</span> - X axis of the right thumbstick</li>
					<li>
<span class="code">axis:Right Y</span> - Y axis of the right thumbstick</li>
					<li>
<span class="code">axis:L2</span> - the left trigger button. Never negative</li>
					<li>
<span class="code">axis:R2</span> - the right trigger button. Never negative</li>
				</ul>
				<br>
				The optional <span class="param">multiplier</span> is the range of the return value: between <span class="code">-multiplier ... multiplier</span>
				(or <span class="code">0 ... multiplier</span> for <span class="code">axis:L2</span> or <span class="code">axis:R2</span>).
				By default, the range is -100 - 100.
				<br>
				<span class="param">player</span> is an optional <a href="#about-playernumber" class="ref">player number</a> telling which player's controller to read.
				By default it check all controllers and combines their input.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					All axes are meant to return 0 when the player isn't touching the stick/trigger,
					but you must NOT rely on this as joysticks/thumbsticks in general don't return to exactly 0,0!
					Instead, you must use a "dead zone" around 0 where input is ignored.
					For example, ignore values between -50 and 50.
					Also, if you push a stick diagonally (e.g. up-right) it probably won't reach 100,-100.
					<br>
					If possible, use the <span class="code">joy:Up, joy:Down, joy:Left, joy:Right</span> or
					<span class="code">joy:RStick Up, joy:RStick Down, joy:RStick Left, joy:RStick Right</span>
					buttons with <a href="#about-keyispressed" class="ref">key is pressed</a> instead.
					These allow 8-directional movement and have a proper circular dead zone.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Constants like <span class="code">axis:Right X</span> only mean what they say if the controller
					is a gamepad and if you're using the default gfx_sdl2 backend. All the other
					backends number gamepad buttons and axes unpredictably.
					So that means <span class="code">axis:L2</span> and <span class="code">axis:R2</span> can actually return negatives.
				</div>
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Mouse%20Input"></a>
		<h3>
<span class="backlink"><a href="#Getting%20Player%20Input">Getting Player Input</a> →
			</span>Mouse Input</h3>
		<p></p>
<ul>
		<li>
<a href="#Helpful%20Related%20Commands">Helpful Related Commands</a><br>
		<ul></ul>
</li>
</ul>
		<div class="command">
			<a name="about-initmouse"></a>
				<h4>init mouse</h4>
<p>
			Informs the engine that you intend to use the mouse. This command should be run before any mouse functions are be used. It causes the normal mouse cursor to be hidden when over the game's window, and causes mouse buttons to trigger on-keypress scripts. Therefore, it is a good idea to place this command in the newgame and loadgame scripts if you are going to use the mouse.<br><div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Running this command does not draw a cursor onscreen. Either you can enable the default mouse cursor with <a href="#about-unhidemousecursor" class="ref">unhidemousecursor</a>, or your script may display the cursor itself by placing a slice at the appropriate location. If you use a slice, your cursor will appear below menus and text and strings shown with <a href="#about-showvalue" class="ref">show value</a>, <a href="#about-showstringat" class="ref">show string at</a>, etc., which is currently unavoidable.</div> Here is an example:
			
			<pre>#Simple Mouse cursor example

plotscript, display mouse, begin

  # Hide the normal mouse cursor
  init mouse
  # Re-enables the normal mouse cursor
  unhide mouse cursor

end</pre><pre>#Custom Mouse cursor example

plotscript, display mouse, begin

  # Hides the normal mouse cursor
  init mouse

  # Use a small enemy sprite (ID 1) slice as a mouse cursor
  variable (cursor)
  cursor := load small enemy sprite (1)
  # The following is optional: causes the mouse to be displayed
  # above textboxes and above all other slices (it still appears behind menus though)
  move slice above (cursor, lookup slice (sl:textbox layer))

  # Loop while the game is running
  while (true) do, begin
    put slice (cursor, mouse pixel x, mouse pixel y)
    wait (1)
  end
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-mousepixelx"></a>
				<h4>mouse pixel X</h4>
<p>
			Returns the X coordinate in pixels of the mouse on the screen.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mousepixely"></a>
				<h4>mouse pixel Y</h4>
<p>
			Returns the Y coordinate in pixels of the mouse on the screen.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mousebutton"></a>
				<h4>mouse button (which)</h4>
<p>
			
				Returns <a href="#about-true" class="ref">true</a> if the specified mouse button is currently pressed down.
				You can use the constants <a href="#about-leftbutton" class="ref">left button</a>, <a href="#about-middlebutton" class="ref">middle button</a> or <a href="#about-rightbutton" class="ref">right button</a> to specify the button.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Just like keyboard commands such as <a href="#about-keyispressed" class="ref">key is pressed</a>, you can <b>not</b>
					wait for the player to click the mouse with a while loop that doesn't contain
					a <a href="#about-wait" class="ref">wait</a> command, because the mouse state is only updated once per frame.
				</div>
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					When scripting a user interface (GUI or menu) with custom mouse-based controls,
					you should almost always use <a href="#about-mouserelease" class="ref">mouse release</a> instead of <a href="#about-mousebutton" class="ref">mouse button</a>
					or <a href="#about-mouseclick" class="ref">mouse click</a>.
					(<span class="code">mouse button</span> is fine for gameplay actions, like throwing projectiles.)
					<br>
					There are two reasons: firstly, that's how the mouse works in almost all software (try it!).
					Secondly, the engine itself uses 'mouse release' everywhere,
					so you may run into problems if you use <span class="code">mouse button</span> for UI stuff.
					For example if you quit a custom menu on <span class="code">mouse button</span> (ie the button is pushed down),
					but then the engine will do something like walk the hero to a tile when it sees the button goes back up,
					that'll cause an unwanted action.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-mouseclick" class="ref">mouse click</a>, </li>
<li><a href="#about-mouserelease" class="ref">mouse release</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-mouseclick"></a>
				<h4>mouse click (which)</h4>
<p>
			
				Returns <a href="#about-true" class="ref">true</a> if the specified mouse button has been 'clicked' down in the last tick.
				You can use the constants <a href="#about-leftbutton" class="ref">left button</a>, <a href="#about-middlebutton" class="ref">middle button</a> or <a href="#about-rightbutton" class="ref">right button</a> to specify the button.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Just like keyboard commands such as <a href="#about-keyispressed" class="ref">key is pressed</a>, you can <b>not</b>
					wait for the player to click the mouse with a while loop that doesn't contain
					a <a href="#about-wait" class="ref">wait</a> command, because the mouse state is only updated once per frame.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-mousebutton" class="ref">mouse button</a>, </li>
<li><a href="#about-mouserelease" class="ref">mouse release</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-mouserelease"></a>
				<h4>mouse release (which)</h4>
<p>
			
				Returns <a href="#about-true" class="ref">true</a> if the specified mouse button has been released since the last tick.
				You can use the constants <a href="#about-leftbutton" class="ref">left button</a>, <a href="#about-middlebutton" class="ref">middle button</a> and <a href="#about-rightbutton" class="ref">right button</a> to specify the button.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Just like keyboard commands such as <a href="#about-keyispressed" class="ref">key is pressed</a>, you can <b>not</b>
					wait for the player to click the mouse with a while loop that doesn't contain
					a <a href="#about-wait" class="ref">wait</a> command, because the mouse state is only updated once per frame.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-mousebutton" class="ref">mouse button</a>, </li>
<li><a href="#about-mouseclick" class="ref">mouse click</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-putmouse"></a>
				<h4>put mouse (X, Y)</h4>
<p>
			Changes the location of the mouse on the screen, in pixels. Note that this function might do nothing, if the game's window is not active. <a href="#about-initmouse" class="ref">init mouse</a> should be called before this command is used.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mouseregion"></a>
				<h4>mouse region (x min, x max, y min, y max)</h4>
<p>
			Constricts the mouse to a rectangular part of the window/screen, such as a choice selection box. It is recommend you do not use this command, as it is very annoying in windowed mode. The maximum values are inclusive. Call without arguments to free the mouse to leave the window. <a href="#about-initmouse" class="ref">init mouse</a> should be called before this command is used.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-inputstringwithmousekeyboard"></a>
				<h4>input string with mouse keyboard (ID, maxlength)</h4>
<p>
			Allows the player to input a string using a virtual keyboard that respons to mouse clicks or touchscreen touches. You have no control over what portion of the screen is obscured by the virtual keyboard. The virtual keyboard will vanish when the command is finished. <span class="param">ID</span> is the string you want to use. All other arguments are optional: <span class="param">maxlen</span> is the length of input, if left blank the limit will be set to 40 (max visible onscreen length).
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-inputstring" class="ref">input string</a>, </li>
<li><a href="#about-inputstringwithvirtualkeyboard" class="ref">input string with virtual keyboard</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-unhidemousecursor"></a>
			<a name="about-showmousecursor"></a>
				<h4>unhide mouse cursor</h4>
			<div class="notetext">Alias:</div>
			<h4>show mouse cursor</h4>
<p>
			
				Causes the normal OS mouse cursor to be displayed, even when fullscreened.
				You may want to run this command right after <a href="#about-initmouse" class="ref">init mouse</a> unless you plan to use a scripted customized mouse cursor.
				<br>
				If you don't call <a href="#about-initmouse" class="ref">init mouse</a>, <a href="#about-hidemousecursor" class="ref">hidemousecursor</a> or <a href="#about-unhidemousecursor" class="ref">unhidemousecursor</a> then
				the default behaviour is for the cursor to be shown when running in a window and hidden in fullscreen.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command has no effect if the game is running on Android, because a mouse cursor is usually inappropriate on a touch screen.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-hidemousecursor"></a>
				<h4>hide mouse cursor</h4>
<p>
			Causes the normal OS mouse cursor to be hidden. This command is seldom needed, because the cursor is hidden by default when you run <a href="#about-initmouse" class="ref">init mouse</a>.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Helpful%20Related%20Commands"></a>
		<h3>
<span class="backlink"><a href="#Getting%20Player%20Input">Getting Player Input</a> →
			<a href="#Mouse%20Input">Mouse Input</a> →
			</span>Helpful Related Commands</h3>
		<p></p>
<ul></ul>
		<div class="command">
		<h4>camera pixel X</h4>
		<p><a href="#about-camerapixelx">Documented in the The Camera section.</a></p>
		</div>
		<div class="command">
		<h4>camera pixel Y</h4>
		<p><a href="#about-camerapixely">Documented in the The Camera section.</a></p>
		</div>
		<div class="command">
		<h4>slice at pixel (parent, x, y, number, check descendants, visible only)</h4>
		<p><a href="#about-sliceatpixel">Documented in the Slice Collision Testing section.</a></p>
		</div>
		<div class="command">
		<h4>slice collide point (handle, x, y)</h4>
		<p><a href="#about-slicecollidepoint">Documented in the Slice Collision Testing section.</a></p>
		</div>
		<div class="command">
		<h4>NPC at pixel (x, y, number)</h4>
		<p><a href="#about-npcatpixel">Documented in the NPCs section.</a></p>
		</div>
		<div class="command">
		<h4>menu item at pixel(x, y)</h4>
		<p><a href="#about-menuitematpixel">Documented in the Menu Items section.</a></p>
		</div>
		<hr>
		</div>
		<div class="section">
<a name="String%20Functions"></a>
		<h3>
<span class="backlink"></span>String Functions</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>In HamsterSpeak, strings are special variables which hold pieces of text, and are referred to by their ID numbers. There are 100 string variables, with IDs 0 to 99. Strings variables can be displayed onscreen directly, or alternatively embedded in textboxes or displayed with text slices. For more information, see the <a href="rpg.hamsterrepublic.com/ohrrpgce/Strings">wiki article on strings</a>.<br>
You can set the value of a string directly with <a href="#about-__setstring__" class="ref">$id="..."</a> and append to an existing string with <a href="#about-__appendstring__" class="ref">$id+"..."</a>.
There is no limit on string length.<br>
<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Unlike almost all other indices in the OHRRPGCE, when referring to a position in a string, <span class="param">position</span> is a 1-based index into the string, not a 0-based index. For example, given a string "ABCDEFG", position=3 is "C", not "D". This means that position 0 is invalid. Beware!</div>
<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Strings are not saved in saved games by default, but this can be enabled in the Saved Game Settings menu.</div></p>
<div class="select-content-shown" id="String Functions-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-expandstring">expand string(ID, saveslot)</a><br>
</div>
		<li>
<a href="#Basic%20String%20Commands">Basic String Commands</a><br>
		<ul class="content-shown">
		<a href="#about-__setstring__">$id="some text"</a><br>
		<a href="#about-__appendstring__">$id+"some text"</a><br>
		<a href="#about-clearstring">clear string(ID)</a><br>
		<a href="#about-appendnumber">append number (ID, number, min length, pad with zeros)</a><br>
		<a href="#about-stringsprintf">string sprintf (dest string ID, format string ID, arguments...)</a><br>
		<a href="#about-numberfromstring">number from string (ID, default)</a><br>
		<a href="#about-copystring">copy string (dest, source)</a><br>
		<a href="#about-concatenatestrings">concatenate strings (dest, source)</a><br>
		<a href="#about-stringlength">string length (ID)</a><br>
		<a href="#about-stringequal">string equal (ID1, ID2)</a><br>
		<a href="#about-stringcompare">string compare (ID1, ID2)</a><br>
		<a href="#about-searchstring">search string (ID1, ID2, start)</a><br>
		<a href="#about-trimstring">trim string (ID, start, length)</a><br>
		<a href="#about-replacesubstring">replace substring (in string, replace what, with what, max replacements, case insensitive)</a><br>
		<a href="#about-appendascii">append ascii (ID, char)</a><br>
		<a href="#about-replacechar">replace char (ID, position, char)</a><br>
		<a href="#about-deletechar">delete char (ID, position)</a><br>
		<a href="#about-asciifromstring">ascii from string (ID, position)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Get/Set%20Names%20of%20Things">Get/Set Names of Things</a><br>
		<ul class="content-shown">
		<a href="#about-getheroname">get hero name (ID, hero)</a><br>
		<a href="#about-setheroname">set hero name (ID, hero)</a><br>
		<a href="#about-getmapname">get map name (ID, map)</a><br>
		<a href="#about-readattackname">get attack name</a><br>
		<a href="#about-readattackname">read attack name (ID, attack)</a><br>
		<a href="#about-getattackcaption">get attack caption (ID, attack)</a><br>
		<a href="#about-getsongname">get song name (ID, song)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Showing%20Plotstrings">Showing Plotstrings</a><br>
		<ul class="content-shown">
		<a href="#about-showstringat">show string at (ID, x, y)</a><br>
		<a href="#about-centerstringat">center string at (ID, x, y)</a><br>
		<a href="#about-hidestring">hide string (ID)</a><br>
		<a href="#about-stringisvisible">string is visible (ID)</a><br>
		<a href="#about-stringstyle">string style (ID, style)</a><br>
		<a href="#about-stringcolor">string color (ID, foreground color, background color)</a><br>
		<a href="#about-positionstring">positionstring (ID, x, y)</a><br>
		<a href="#about-stringx">string X (ID)</a><br>
		<a href="#about-stringy">string Y (ID)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Obsolete%20Commands">Obsolete Commands</a><br>
		<ul class="content-shown">
		<a href="#about-stringtoglobals">string to globals (ID, starting global, length)</a><br>
		<a href="#about-globalstostring">globals to string(ID, starting global, length)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
		<h4>show string (ID)</h4>
		<p><a href="#about-showstring">Documented in the Basic Display Commands section.</a></p>
		</div>
		<div class="command">
		<h4>input string (ID, maxlength, use current, center, position x, position y)</h4>
		<p><a href="#about-inputstring">Documented in the Keyboard Input section.</a></p>
		</div>
		<div class="command">
			<a name="about-expandstring"></a>
				<h4>expand string(ID, saveslot)</h4>
<p>
			
				Expands "embed" codes in string <span class="param">ID</span> such as ${H1}, modifying the string.
				(See the textbox editor for the list of all available embed codes.)
				This does the same thing that textboxes do automatically.
				The <span class="param">saveslot</span> argument is optional.
				If you leave it out, the string's codes will be expanded based on the currently running game state.
				If you specify a save slot number (from 1-1000) then the string will be expanded based on data
				(hero names, variables, strings, etc.) from that saved game.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-expandstringsinslices" class="ref">expand strings in slices</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Basic%20String%20Commands"></a>
		<h3>
<span class="backlink"><a href="#String%20Functions">String Functions</a> →
			</span>Basic String Commands</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-__setstring__"></a>
				<h4>$id="some text"</h4>
<p>
			Sets the contents of a string variable given by <span class="param">id</span>, which can be a constant like 0 or 1, a variable, or even an expression like a call to a script, to a piece of text. The previous contents are erased. The whole statement must be on a single line; you can't split the text onto multiple lines (use multiple <a href="#about-__appendstring__" class="ref">$id+"..."</a> statements instead). The value of the whole statement is equal to <span class="param">id</span> for convenience (see the example). The text (which is called a string literal) can contain certain escape codes (see examples below):<br>
\\ turns into a single \<br>
\" turns into a single " without signalling the end of the literal<br>
\n is a new line character, which can be used in text slices, <a href="#about-showstring" class="ref">show string</a>, <a href="#about-showstringat" class="ref">show string at</a> and <a href="#about-trace" class="ref">trace</a>.<br>
\t is a tab character (which isn't useful at all as it doesn't actually cause a tab except when printing to a file with <a href="#about-trace" class="ref">trace</a>).<br>
\x## where ## is a two digit hexidecimal number adds an ASCII character to the string. For example \x4b is the letter K.
			
			<pre># This displays Some text! in the corner of the screen
$1 = "Some text!"
showstring(1)

# This displays
# Guard:
#   "Halt!"
# near the bottom left corner of the screen (at 30,150) for a moment
show string at ($1="Guard:\n  \"Halt!\"", 30, 150)
wait (40)
hide string (1)</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-__appendstring__"></a>
				<h4>$id+"some text"</h4>
<p>
			Appends a string literal to a string variable. This is the same as <a href="#about-__setstring__" class="ref">$id="..."</a>, except that the existing contents of the string are preserved and appended to.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-clearstring"></a>
				<h4>clear string(ID)</h4>
<p>
			Erases the string buffer #ID to the empty string (""). That's all.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-appendnumber"></a>
				<h4>append number (ID, number, min length, pad with zeros)</h4>
<p>
			
				Appends the decimal representation of <span class="param">number</span> to the string with ID #<span class="param">ID</span>.
				The optional <span class="param">min length</span> argument can be used to add padding to the left or right.
				It's the minimum length of the string to append - if the number of digits
				(including the leading negative sign, if any)
				is less than this, then spaces or zeroes are added as padding:
				<ul>
					<li>
						If the optional argument <span class="param">pad with zeros</span> (which defaults to false)
						is false, then spaces are added to the left (left of the negative
						sign, if any)
					</li>
					<li>
						If <span class="param">pad with zeros</span> is true, then zeroes are added to the left
						(to the right of the negative sign, if any)
					</li>
					<li>
						If <span class="param">min length</span> is negative, then the padding is added to the
						right instead.
						E.g. -4 means a minimum length of 4, padded to the right.
						<span class="param">pad with zeros</span> is ignored.
					</li>
				</ul>
			
			
			<pre>append number(1, 65)           # Appends "65" to string 1.
append number(1, 1234, 3)      # Appends "1234" to string 1: no padding added

append number(1, 65, 4)        # Appends "  65" to string 1.
append number(1, 65, 4, true)  # Appends "0065" to string 1.

append number(1, -65, 4)       # Appends " -65" to string 1.
append number(1, -65, 4, true) # Appends "-065" to string 1.

append number(1, 65, -4)       # Appends "65  " to string 1.
append number(1, 65, -4, true) # Appends "65  " to string 1: the 4th argument is ignored
append number(1, -65, -4)      # Appends "-65 " to string 1.</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-appendascii" class="ref">append ascii</a>, </li>
<li>
<a href="#about-stringsprintf" class="ref">string sprintf</a>, </li>
<li><a href="#about-numberfromstring" class="ref">number from string</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-stringsprintf"></a>
				<h4>string sprintf (dest string ID, format string ID, arguments...)</h4>
<p>
			Builds a string from a template (given by <span class="param">format string ID</span>) and zero or more additional arguments, and puts the result in the string <span class="param">dest string ID</span>. This is a restricted version of the sprintf function in other programming languages. This function takes at least 2 arguments. The format string is a mix of regular text and codes like %d. For each code, one argument is read and used to substitute for the code. The codes are:<br>
<span class="param">%d</span>: substituted with a number, printed as a decimal.<br>
<span class="param">%x</span>: substituted with a number, printed as a unsigned 32 bit hexidecimal, in lower case and without a leading 0x.<br>
<span class="param">%o</span>: substituted with a number, printed as a unsigned 32 bit octal number, without a leading 0o.<br>
<span class="param">%b</span>: substituted with a number, printed as a unsigned 32 bit binary number, with a space between every 8 bits, without a leading 0b.<br>
<span class="param">%s</span>: substituted with a string. The argument should be a valid string ID.<br>
<span class="param">%c</span>: substituted with a single character. The argument should be an ASCII code (that is, a number between 0 and 255).<br>
<span class="param">%%</span>: substituted with a single %. In this case an argument is NOT used up.<br>
More sophisticated formatting codes like %-04d that are possible in other programming languages are not supported yet.
<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
	Modifiers like field width and precision which are available in other programming languages,
	e.g. "%4d" or "%.2f", aren't available. But <a href="#about-appendnumber" class="ref">append number</a> has extra options for these.
</div>

			
			<pre># This displays some text like "HP: 30  MP: 12  $: 104" at the bottom of the screen
$1 = "HP: %d  MP: %d  $: %d"
string sprintf(0, 1, getherostat(me, stat:HP), getherostat(me, stat:MP), partymoney)
show string(0)</pre><pre># This displays some text like "Ah Bob! You've brought me 5 apples."
# in the centre of the screen, and waits for the player to press a key.
$10 = "Ah %s! You've brought me %d apples."
getheroname(11, findhero(leader))
string sprintf(12, 10, 11, inventory(item:apple))
center string at(12, 160, 100)
wait for key(anykey)
hide string(12)
</pre><pre># This displays "1abcdef ffffffff A%"
# Notice that the expression '$1="%x %x %c%%"' returns the string ID 1 as a side effect.
string sprintf(0, $1="%x %x %c%%", 28036591, -1, 65)
show string(0)</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-appendascii" class="ref">append ascii</a>, </li>
<li><a href="#about-appendnumber" class="ref">append number</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-numberfromstring"></a>
				<h4>number from string (ID, default)</h4>
<p>
			Try to read the string specified by <span class="param">ID</span> as a number and return it. Blank spaces at the beginning of the string will be ignored, and the string can start with a - sign for negatives. No other characters except numerical digits can appear in the string. You can also provide an optional <span class="param">default</span> value that will be returned if the string is not a valid number (for example, if it contains a non-numeric letter)
			
			
			<div class="seealso">See also: <ul><li><a href="#about-appendnumber" class="ref">append number</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-copystring"></a>
				<h4>copy string (dest, source)</h4>
<p>
			Copies the text from string #<span class="param">source</span> to string #<span class="param">dest</span>, overwriting the existing string completely. <br>If you prefer, you can write <span class="param">dest $= source</span> instead. You must supply string id numbers, not strings, as arguments.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-concatenatestrings"></a>
				<h4>concatenate strings (dest, source)</h4>
<p>
			Copies the text from string #<span class="param">source</span> to string #<span class="param">dest</span>. However, unlike <a href="#about-copystring" class="ref">copy string</a>, the text is appended to the end of <span class="param">dest</span>.  <br>If you prefer, you can write <span class="param">dest $+ source</span> instead. You must supply string id numbers, not strings, as arguments.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stringlength"></a>
				<h4>string length (ID)</h4>
<p>
			Returns the length of string #<span class="param">ID</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stringequal"></a>
			<a name="about-stringcompare"></a>
				<h4>string equal (ID1, ID2)</h4>
			<div class="notetext">Alias:</div>
			<h4>string compare (ID1, ID2)</h4>
<p>
			Returns true if the two strings #<span class="param">ID1</span> and #<span class="param">ID2</span> are identical, case sensitive.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-searchstring"></a>
				<h4>search string (ID1, ID2, start)</h4>
<p>
			Searches the string for a specified string, returns the position at which the string was found. <span class="param">start</span> is the position at which you want to start looking, default is 1. <span class="param">ID1</span> is the the string you want to search, <span class="param">ID2</span> is the string expression you want to find. Returns <a href="#about-false" class="ref">false</a> if the string wasn't found
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-trimstring"></a>
				<h4>trim string (ID, start, length)</h4>
				<h4>trim string (ID)</h4>
<p>
			
				Cuts a string to the specified substring (if you specify <span class="param">start</span> and <span class="param">length</span>),
				OR removes all whitespace (spaces, tabs and newlines) from the beginning and end of the string
				(if you only provide <span class="param">ID</span>).
				<span class="param">ID</span> is the string you want to trim.
				<br>
				<span class="param">start</span> is the position at which you want the new string to start,
				anything to the left of this will be deleted from the string.
				Pass <span class="code">1</span> if you don't want to cut anything from the start but just want to shorten the string.
				If <span class="code">start</span> is past the end of the string, the string is blanked (this isn't an error).
				<br>
				<span class="param">length</span> is the size of the string you want,
				anything to the right of <span class="code">start+length</span> will be deleted.
				It's not an error if <span class="code">start+length</span> is beyond the end of the string or if <span class="code">length &lt;= 0</span>.
				<br>
			
			
			<pre>$1 = "  this silly example \n "
# \n is the newline character, if you remove the trimstring(1) now you'll see the text is two lines high
trim string(1)
show string(1)  # Shows "this silly example"
wait(30)
trim string(1, 3, 8)
show string(1)  # Shows "is silly"</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-replacesubstring"></a>
				<h4>replace substring (in string, replace what, with what, max replacements, case insensitive)</h4>
<p>
			
				Replace occurrences in string ID <span class="param">in string</span> of a substring (ID <span class="param">replace what</span>)
				with a different string (ID <span class="param">with what</span>).
				<br>
				By default, replaces all occurrences of <span class="code">replace what</span>,
				but optionally you can limit the number of times to do the replacement by passing <span class="param">max replacements</span>;
				there's no limit if it's &lt; 0.
				Inserted text is not eligible for further replacements (see examples).
				<br>
				If you pass <span class="code">true</span> as the optional argument <span class="param">case insensitive</span> (which defaults to false),
				then the search for <span class="code">replace what</span> is case-insensitive.
				For example, "hi" matches "hi", "Hi", "HI" and "hI".
				<br>
				Returns the number of replacements done.
			
			
			<pre>$1 = "This is an example of replace substring"
# Shows '2'
show value (replace substring (1, $2="is", $3="iiss"))
wait for key
# Note that although "iiss" contains "is", it isn't replaced again with "iiisss"
show string (1)  # "Thiiss iiss an example of replace substring"
wait for key

$1 = "AaabaAaa"
replace substring (1, $2="AA", $3="CA", 2, true)  # Do only 2 replacements, case insensitively
# Again, Aaab becomes CAab but the new Aa isn't replaced, because part of it was a replacement
show string (1)  # "CAabCAaa"
</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-appendascii"></a>
				<h4>append ascii (ID, char)</h4>
<p>
			
				Appends the character with ASCII code <span class="param">char</span> to the string with ID <span class="param">ID</span>.
				The font editor displays the character code of each character.
				For example numbers are 48 - 57, uppercase letters are 65 - 90, lowercase letters are 97 - 122.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-stringsprintf" class="ref">string sprintf</a>, </li>
<li><a href="#about-appendnumber" class="ref">append number</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replacechar"></a>
				<h4>replace char (ID, position, char)</h4>
<p>
			Replaces the character at <span class="param">position</span> in string #<span class="param">ID</span> with a character with ascii code <span class="param">char</span>. The first position of the string is 1, and the last position of the string is the same as <a href="#about-stringlength" class="ref">string length</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-deletechar"></a>
				<h4>delete char (ID, position)</h4>
<p>
			This deletes the character at <span class="param">position</span> in string #<span class="param">ID</span>, causing all the following characters to move over a slot. The first position of the string is 1, and the last position of the string is the same as <a href="#about-stringlength" class="ref">string length</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-asciifromstring"></a>
				<h4>ascii from string (ID, position)</h4>
<p>
			Returns the ascii code of the character at <span class="param">position</span> in string #<span class="param">ID</span>. The first position of the string is 1, and the last position of the string is the same as <a href="#about-stringlength" class="ref">string length</a>. If you pass 0 as the position or a position past the end of the string, 0 will be returned.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Get/Set%20Names%20of%20Things"></a>
		<h3>
<span class="backlink"><a href="#String%20Functions">String Functions</a> →
			</span>Get/Set Names of Things</h3>
		<p>This section is a catch-all for commands that get or set bits of game data that are strings, however a number of such commands, like <a href="#about-getmenuitemcaption" class="ref">get menu item caption</a> live elsewhere, in more sensible sections!</p>
<ul></ul>
		<div class="command">
			<a name="about-getheroname"></a>
				<h4>get hero name (ID, hero)</h4>
<p>
			This command will take the name of the hero in the party slot #<span class="param">hero</span>, and stick it in string #<span class="param">ID</span>, overwriting its contents. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Remember that this command expects the hero's position in the party, not the hero:name constants nor the hero's position in the walkabout party. If you want to get the name of a hero according to their position in the walkabout party, you should use <a href="#about-herobyrank" class="ref">hero by rank</a> and <a href="#about-findhero" class="ref">find hero</a>
</div>
			
			<pre># This example gets the name of the leader and stores it in string ID 1

get hero name (1, find hero (leader))
</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-setheroname"></a>
				<h4>set hero name (ID, hero)</h4>
<p>
			This command changes the name of the hero in party slot #<span class="param">hero</span> (as returned by <a href="#about-findhero" class="ref">find hero</a>) to the contents of string #<span class="param">ID</span>. The length is not limited by the hero's Max Name Length setting.
			
			
			
		</p>
</div>
		<div class="command">
		<h4>get enemy name (enemyid, stringid)</h4>
		<p><a href="#about-getenemyname">Documented in the Enemy and Formation Functions section.</a></p>
		</div>
		<div class="command">
		<h4>set enemy name (enemyid, stringid)</h4>
		<p><a href="#about-setenemyname">Documented in the Enemy and Formation Functions section.</a></p>
		</div>
		<div class="command">
			<a name="about-getmapname"></a>
				<h4>get map name (ID, map)</h4>
<p>
			This command will take the name of map #<span class="param">map</span> and stick it in string #<span class="param">ID</span>, overwriting its contents.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getattackname"></a>
				<h4>get attack name</h4>
				An alias for <a href="#about-readattackname">read attack name</a>.
			</div>
		<div class="command">
			<a name="about-readattackname"></a>
				<h4>read attack name (ID, attack)</h4>
<p>
			This command will take the name of <span class="param">attack</span> and stick it in string #<span class="param">ID</span>, overwriting its contents. Use the <span class="param">atk:name</span> constants from your HSI file.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If you want to use this command with attack ID numbers, you must add 1 to the ID number.</div>
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">This command replaces the old <span class="param">get attack name</span> which required you to use <span class="param">atk:name -- 2</span> or the attack id number <span class="param">-- 1</span>
</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getattackcaption"></a>
				<h4>get attack caption (ID, attack)</h4>
<p>
			This command will take the caption of <span class="param">attack</span> and stick it in string #<span class="param">ID</span>, overwriting its contents. Use the <span class="param">atk:name</span> constants from your HSI file.
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">If you want to use this command with attack ID numbers, you must add 1 to the ID number.</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getsongname"></a>
				<h4>get song name (ID, song)</h4>
<p>
			Gets the name of song #<span class="param">song</span> and puts it in string #<span class="param">ID</span>.
			
			
			
		</p>
</div>
		<div class="command">
		<h4>string from textbox (ID, textbox, line, ignored)</h4>
		<p><a href="#about-stringfromtextbox">Documented in the Text Boxes section.</a></p>
		</div>
		<div class="command">
		<h4>textbox line (string ID, textbox, line, expand, strip)</h4>
		<p><a href="#about-textboxline">Documented in the Text Boxes section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Showing%20Plotstrings"></a>
		<h3>
<span class="backlink"><a href="#String%20Functions">String Functions</a> →
			</span>Showing Plotstrings</h3>
		<p>These commands are an old (and largely obsolete) method of showing strings on the screen. They're completely separate to, and superceded by <a href="#Text%20Slices" class="ref">Text Slices</a>. The <a href="#about-showstring" class="ref">show string</a> command is yet another separate way to display a string.</p>
<ul></ul>
		<div class="command">
		<h4>show string (ID)</h4>
		<p><a href="#about-showstring">Documented in the Basic Display Commands section.</a></p>
		</div>
		<div class="command">
			<a name="about-showstringat"></a>
				<h4>show string at (ID, x, y)</h4>
<p>
			Displays string #<span class="param">ID</span> on the screen, positioning its top left corner at the given (<span class="param">x</span>,<span class="param">y</span>) coordinates. Unlike <a href="#about-showstring" class="ref">show string</a>, changes to the string will be displayed in real-time.
			The string will not auto-wrap at the edge of the screen, but it can contain new lines (<span class="code">\n</span>). 
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-centerstringat"></a>
				<h4>center string at (ID, x, y)</h4>
<p>
			
				Displays string #<span class="param">ID</span> on the screen, positioning its top-middle at the
				given (<span class="param">x</span>,<span class="param">y</span>) coordinates.
				Unlike <a href="#about-showstring" class="ref">show string</a>, changes to the string will be displayed in real-time.
				<span class="param">x</span>,<span class="param">y</span> are optional: if they are missing then the string is centered
				in the center of the screen.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					The string is not re-centered automatically if its length changes.
					If you change the string and want to keep it centered, call showstringat again.
					Otherwise, its top-left corner will stay fixed.
				</div>
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					The string position will be miscalculated if it contains newlines (\n characters).
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-hidestring"></a>
				<h4>hide string (ID)</h4>
<p>
			Makes a string previously displayed with <a href="#about-showstringat" class="ref">show string at</a> or <a href="#about-centerstringat" class="ref">center string at</a> disappear. Has no effect on strings displayed with <a href="#about-showstring" class="ref">show string</a>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stringisvisible"></a>
				<h4>string is visible (ID)</h4>
<p>
			Returns true if a string is being displayed by <a href="#about-showstringat" class="ref">show string at</a> or <a href="#about-centerstringat" class="ref">center string at</a>. Otherwise, returns false. Is not effected by <a href="#about-showstring" class="ref">show string</a>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stringstyle"></a>
				<h4>string style (ID, style)</h4>
<p>
			Changes the appearance of a string. Use this in conjunction with (before or after) <a href="#about-showstringat" class="ref">show string at</a> or <a href="#about-centerstringat" class="ref">center string at</a>. Choice of <span class="param">style</span> is string:outline and string:flat. string:outline is the style of string you are familiar with in textboxes: they are outlined with colour 0 (black). string:flat have no outline but can have a solid rectangular background of any colour displayed behind the string.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stringcolor"></a>
				<h4>string color (ID, foreground color, background color)</h4>
<p>
			Changes the color of a string. Use this in conjunction with (before or after) <a href="#about-showstringat" class="ref">show string at</a> or <a href="#about-centerstringat" class="ref">center string at</a>. Foreground color is the colour of the text itself. Background color has no meaning for style:outline strings (the outline is always black). For style:flat strings, it is the color of the solid background if 1 to 255, or causes no background if 0. If you omit <span class="param">background color</span>, the background will be transparent. Omit <span class="param">foreground color</span> as well to reset the color to default ('Text' User-interface color).
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-positionstring"></a>
				<h4>positionstring (ID, x, y)</h4>
<p>
			Positions the top left corner of string #<span class="param">ID</span> at the given <span class="param">x</span>,<span class="param">y</span> coordinates. Unlike <a href="#about-showstringat" class="ref">show string at</a>, this command will not affect the visibility of a string.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stringx"></a>
				<h4>string X (ID)</h4>
<p>
			Returns the horizontal X position of the top left corner of string #<span class="param">ID</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-stringy"></a>
				<h4>string Y (ID)</h4>
<p>
			Returns the vertical Y position of the top left corner of string #<span class="param">ID</span>
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Obsolete%20Commands"></a>
		<h3>
<span class="backlink"><a href="#String%20Functions">String Functions</a> →
			</span>Obsolete Commands</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-stringtoglobals"></a>
				<h4>string to globals (ID, starting global, length)</h4>
<p>
			
				This command will fill global variables (starting with #<span class="param">starting global</span>),
				up to <span class="param">length</span> globals, with the ascii values of the characters in string #<span class="param">ID</span>.
				If the string is not long enough, the rest of the globals in this "field" are padded with the value 256.
				If the string is too long, then only part of it is saved.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command is deprecated.
					The Saved Game Settings menu now has an option to store strings in saved games.
					There is no reason to use this command in new games,
					unless you're using <a href="#about-importglobals" class="ref">import globals</a>/<a href="#about-exportglobals" class="ref">export globals</a>.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-globalstostring" class="ref">globals to string</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-globalstostring"></a>
				<h4>globals to string(ID, starting global, length)</h4>
<p>
			
				This command is the opposite of <a href="#about-stringtoglobals" class="ref">string to globals</a>.
				It will build a new string in slot #<span class="param">ID</span>,
				using the ascii values from the global variables #<span class="param">starting global</span>
				and <span class="param">length</span> globals thereafter.
				Pass the same value for <span class="param">length</span> as you did to <a href="#about-stringtoglobals" class="ref">string to globals</a>
				if you don't know the length of the string.
				If a global has a value greater than 255, the value will be ignored.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command is deprecated.
					The Saved Game Settings menu now has an option to store strings in saved games.
					There is no reason to use this command in new games,
					unless you're using <a href="#about-importglobals" class="ref">import globals</a>/<a href="#about-exportglobals" class="ref">export globals</a>.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-stringtoglobals" class="ref">string to globals</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Menu%20Functions"></a>
		<h3>
<span class="backlink"></span>Menu Functions</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Menu Functions-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-openmenu">open menu (ID, allow duplicate)</a><br>
		<a href="#about-createmenu">create menu</a><br>
		<a href="#about-closemenu">close menu(menu handle, run close script)</a><br>
		<a href="#about-topmenu">top menu</a><br>
		<a href="#about-bottommenu">bottom menu</a><br>
		<a href="#about-previousmenu">previous menu(menu handle)</a><br>
		<a href="#about-nextmenu">next menu(menu handle)</a><br>
		<a href="#about-bringmenuforward">bring menu forward(menu handle)</a><br>
		<a href="#about-findmenuid">find menu ID(menu ID)</a><br>
		<a href="#about-menuisopen">menu is open(menu handle)</a><br>
		<a href="#about-parentmenu">parent menu(menu item handle)</a><br>
		<a href="#about-getmenuid">get menu ID(menu handle)</a><br>
</div>
		<li>
<a href="#Menu%20Items">Menu Items</a><br>
		<ul class="content-shown">
		<a href="#about-addmenuitem">add menu item(menu handle)</a><br>
		<a href="#about-deletemenuitem">delete menu item(menu item handle)</a><br>
		<a href="#about-swapmenuitems">swap menu items(handle1, handle2)</a><br>
		<a href="#about-selectmenuitem">select menu item(menu item handle)</a><br>
		<a href="#about-selectedmenuitem">selected menu item(menu handle)</a><br>
		<a href="#about-menuitemdisabled">menu item disabled(menu item handle)</a><br>
		<a href="#about-menuitemvisible">menu item visible(menu item handle)</a><br>
		<a href="#about-menuitemselectable">menu item selectable(menu item handle)</a><br>
		<a href="#about-usemenuitem">use menu item(menu item handle)</a><br>
		<a href="#about-firstmenuitem">first menu item(menu handle)</a><br>
		<a href="#about-lastmenuitem">last menu item(menu handle, visible only)</a><br>
		<a href="#about-nextmenuitem">next menu item(menu item handle, visible only)</a><br>
		<a href="#about-previousmenuitem">previous menu item(menu item handle, visible only)</a><br>
		<a href="#about-menuitemcount">menu item count(menu handle)</a><br>
		<a href="#about-visiblemenuitemcount">visible menu item count(menu handle)</a><br>
		<a href="#about-menuitembytrueslot">menu item by true slot(menu handle, slot)</a><br>
		<a href="#about-menuitemtrueslot">menu item true slot(menu item handle)</a><br>
		<a href="#about-menuitembyslot">menu item by slot(menu handle, slot, visible only)</a><br>
		<a href="#about-menuitemslot">menu item slot(menu item handle)</a><br>
		<a href="#about-findmenuitemcaption">find menu item caption(menu handle, string ID, search after handle, visible only)</a><br>
		<a href="#about-menuitematpixel">menu item at pixel(x, y)</a><br>
</ul>
<ul>
		<li>
<a href="#Menu%20Item%20Data">Menu Item Data</a><br>
		<ul class="content-shown">
		<a href="#about-getmenuitemcaption">get menu item caption(menu item handle, string ID)</a><br>
		<a href="#about-setmenuitemcaption">set menu item caption(menu item handle, string ID)</a><br>
		<a href="#about-getmenuitemtype">get menu item type(menu item handle)</a><br>
		<a href="#about-setmenuitemtype">set menu item type(menu item handle, new type)</a><br>
		<a href="#about-getmenuitemsubtype">get menu item subtype(menu item handle)</a><br>
		<a href="#about-setmenuitemsubtype">set menu item subtype(menu item handle, new subtype)</a><br>
		<a href="#about-getmenuitemtag">get menu item tag(menu item handle, whichtag)</a><br>
		<a href="#about-setmenuitemtag">set menu item tag(menu item handle, new tag, whichtag)</a><br>
		<a href="#about-getmenuitemsettag">get menu item settag(menu item handle)</a><br>
		<a href="#about-setmenuitemsettag">set menu item settag(menu item handle, new settag)</a><br>
		<a href="#about-getmenuitemtogtag">get menu item togtag(menu item handle)</a><br>
		<a href="#about-setmenuitemtogtag">set menu item togtag(menu item handle, new settag)</a><br>
		<a href="#about-getmenuitembit">get menu item bit(menu item handle, bit)</a><br>
		<a href="#about-setmenuitembit">set menu item bit(menu item handle, bit, value)</a><br>
		<a href="#about-getmenuitemextra">get menu item extra(menu item handle, extra)</a><br>
		<a href="#about-setmenuitemextra">set menu item extra(menu item handle, extra, num)</a><br>
		<a href="#about-getmenuitemcolor">get menu item color(menu item handle)</a><br>
		<a href="#about-setmenuitemcolor">set menu item color(menu item handle, colorcode)</a><br>
		<a href="#about-getmenuitemdisabledcolor">get menu item disabled color(menu item handle)</a><br>
		<a href="#about-setmenuitemdisabledcolor">set menu item disabled color(menu item handle, colorcode)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Menu%20Data">Menu Data</a><br>
		<ul class="content-shown">
		<a href="#about-getmenubit">get menu bit(menu handle, bit)</a><br>
		<a href="#about-setmenubit">set menu bit(menu handle, bit, value)</a><br>
		<a href="#about-getmenuboxstyle">get menu boxstyle(menu handle)</a><br>
		<a href="#about-setmenuboxstyle">set menu boxstyle(menu handle, new box style)</a><br>
		<a href="#about-getmenutextcolor">get menu textcolor(menu handle)</a><br>
		<a href="#about-setmenutextcolor">set menu textcolor(menu handle, new textcolor)</a><br>
		<a href="#about-getmenudisabledtextcolor">get menu disabled textcolor(menu handle)</a><br>
		<a href="#about-setmenudisabledtextcolor">set menu disabled textcolor(menu handle, new textcolor)</a><br>
		<a href="#about-getmenumaxrows">get menu max rows(menu handle)</a><br>
		<a href="#about-setmenumaxrows">set menu max rows(menu handle, new max rows)</a><br>
		<a href="#about-getmenuoffsetx">get menu offset x(menu handle)</a><br>
		<a href="#about-getmenuoffsety">get menu offset y(menu handle)</a><br>
		<a href="#about-setmenuoffsetx">set menu offset x(menu handle, new x)</a><br>
		<a href="#about-setmenuoffsety">set menu offset y(menu handle, new y)</a><br>
		<a href="#about-getmenuanchorx">get menu anchor x(menu handle)</a><br>
		<a href="#about-getmenuanchory">get menu anchor y(menu handle)</a><br>
		<a href="#about-setmenuanchorx">set menu anchor x(menu handle, new anchor)</a><br>
		<a href="#about-setmenuanchory">set menu anchor y(menu handle, new anchor)</a><br>
		<a href="#about-getmenutextalign">get menu text align(menu handle)</a><br>
		<a href="#about-setmenutextalign">set menu text align(menu handle, new align)</a><br>
		<a href="#about-getmenuminchars">get menu min chars(menu handle)</a><br>
		<a href="#about-setmenuminchars">set menu min chars(menu handle, new min)</a><br>
		<a href="#about-getmenumaxchars">get menu max chars(menu handle)</a><br>
		<a href="#about-setmenumaxchars">set menu max chars(menu handle, new max)</a><br>
		<a href="#about-getmenuborder">get menu border(menu handle)</a><br>
		<a href="#about-setmenuborder">set menu border(menu handle, new border)</a><br>
		<a href="#about-getmenuonclosescript">get menu on close script(menu handle)</a><br>
		<a href="#about-setmenuonclosescript">set menu on close script(menu handle, script id)</a><br>
		<a href="#about-getmenucancelbuttonmenu">get menu cancel button menu(menu handle)</a><br>
		<a href="#about-setmenucancelbuttonmenu">set menu cancel button menu(menu handle, menu)</a><br>
		<a href="#about-getmenuitemspacing">get menu item spacing(menu handle)</a><br>
		<a href="#about-setmenuitemspacing">set menu item spacing(menu handle, spacing)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-openmenu"></a>
				<h4>open menu (ID, allow duplicate)</h4>
<p>
			
				Opens the menu specified by <span class="param">ID</span>.
				You can also use the constants defined in your HSI file in the form <span class="code">menu:name</span>.
				The menu will be opened on top of any menus that are already open.
				<br>
				The optional second argument <span class="param">allow duplicates</span> (defaulting to <span class="code">false</span>)
				can be <a href="#about-true" class="ref">true</a> if you want to be able to open more than one
				copy of the same menu at the same time.
				If <span class="param">allow duplicates</span> is false and the menu is already open,
				then the existing menu (the top-most one, if there's more than one)
				is brought to the top.
				<br>
				The return value is a menu handle that you should store in a variable for use with
				other menu-related commands.
				(If an existing menu was brought to top, its handle is returned
				<br>
				If <span class="param">ID</span> isn't a valid menu, this acts like <a href="#about-createmenu" class="ref">create menu</a>.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					If menu 0 does NOT have the "Allow gameplay &amp; scripts" bit set,
					then your script will pause as soon as the menu opens, until either
					it's closed or another menu with that bit ON is opened.
					And once the menu has closed the menu handle is invalid!
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-createmenu"></a>
				<h4>create menu</h4>
<p>
			Create a new empty menu. You can add menu items to it with the <a href="#about-addmenuitem" class="ref">add menu item</a> command. The return value is a menu handle that you should save in a variable for use with other menu related commands. Menus created with this command have the "Allow gameplay and scripts" bitset turned on by default.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-closemenu"></a>
				<h4>close menu(menu handle, run close script)</h4>
<p>
			
				Close a menu.
				The first argument is a <span class="param">menu handle</span>
				(for example, the one returned by <a href="#about-openmenu" class="ref">open menu</a> or <a href="#about-topmenu" class="ref">top menu</a>).
				The second argument <span class="param">run close script</span>, which defaults to <a href="#about-false" class="ref">false</a>,
				states whether to run the menu's on-close script, if there is one.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-topmenu"></a>
				<h4>top menu</h4>
<p>
			Return a menu handle for the topmost menu. Returns <a href="#about-false" class="ref">false</a> if no menus are open.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-bottommenu"></a>
				<h4>bottom menu</h4>
<p>
			Return a menu handle for the bottom menu (the menu underneath all other open menus). Returns <a href="#about-false" class="ref">false</a> if no menus are open.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-previousmenu"></a>
				<h4>previous menu(menu handle)</h4>
<p>
			Return a menu handle for the menu beneath the one specified by <span class="param">menu handle</span>, or false if there is no menu underneath.
			
			<pre>variable(menu)
menu := topmenu
while(menu) do, begin
 # do things to each menu
 menu := previous menu(menu)
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-nextmenu"></a>
				<h4>next menu(menu handle)</h4>
<p>
			Return a menu handle for the menu on top of the one specified by <span class="param">menu handle</span>, or false if there is no menu on top
			
			<pre>variable(menu)
menu := bottom menu
while(menu) do, begin
 # do things to each menu
 menu := next menu(menu)
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-bringmenuforward"></a>
				<h4>bring menu forward(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, move the menu to the top of all other open menus.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-findmenuid"></a>
				<h4>find menu ID(menu ID)</h4>
<p>
			Given a <span class="param">menu ID</span> number or a constant in the form of <span class="param">menu:name</span>, check to see if it is already open, and if so return a <a href="#about-menuhandle" class="ref">menu handle</a> to it. Otherwise returns <a href="#about-false" class="ref">false</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-menuisopen"></a>
				<h4>menu is open(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, checks to see whether it is still open, and returns <a href="#about-true" class="ref">true</a> if it is, or <a href="#about-false" class="ref">false</a> if it has been closed.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-parentmenu"></a>
				<h4>parent menu(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return a menu handle for the menu that the menu item belongs to.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuid"></a>
				<h4>get menu ID(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the ID number of the menu, or -1 if the men was created with the <a href="#about-createmenu" class="ref">create menu</a> command.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Menu%20Items"></a>
		<h3>
<span class="backlink"><a href="#Menu%20Functions">Menu Functions</a> →
			</span>Menu Items</h3>
		<p></p>
<ul>
		<li>
<a href="#Menu%20Item%20Data">Menu Item Data</a><br>
		<ul></ul>
</li>
</ul>
		<div class="command">
			<a name="about-addmenuitem"></a>
				<h4>add menu item(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, adds a new blank menu item to the end of the menu. Returns a menu item handle, which you can store in a variable for use with commands like <a href="#about-setmenuitemcaption" class="ref">set menu item caption</a> or <a href="#about-setmenuitemtype" class="ref">set menu item type</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-deletemenuitem"></a>
				<h4>delete menu item(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, delete the menu item from the menu. (The change does not affect other copies/instances of the same menu if this menu was created in the menu editor.)
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-swapmenuitems"></a>
				<h4>swap menu items(handle1, handle2)</h4>
<p>
			Given two <a href="#about-menuitemhandle" class="ref">menu item handle</a>s switch the positions of the two menu items. Note that this works both to rearrange menu items within one menu, or to move menu items between different menus.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-selectmenuitem"></a>
				<h4>select menu item(menu item handle)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				move the menu selection cursor to point to that menu item.
				This works even if the menu item is in a menu that's not top-most/selected, but the
				menu won't become selected.
				Unselectable menu items (see <a href="#about-menuitemselectable" class="ref">menu item selectable</a>) can't be selected;
				if you try to select one this command silently fails and returns <span class="code">false</span>;
				normally it returns <span class="code">true</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-selectedmenuitem"></a>
				<h4>selected menu item(menu handle)</h4>
<p>
			
				Returns the handle for the selected menu item in the topmost menu
				if the optional <span class="param">menu handle</span> is omitted, or,
				with a <a href="#about-menuhandle" class="ref">menu handle</a>
				returns the selected item in that menu.
				Returns <a href="#about-false" class="ref">false</a> if no menus are open, or if the topmost or specified menu
				has no selection (which happens if it's empty, or all menu items are unselectable or hidden).
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-menuitemdisabled"></a>
				<h4>menu item disabled(menu item handle)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				returns whether that menu item is disabled (true or false).
				Menu items can be disabled for a range of reasons such as tag conditions.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-menuitemvisible"></a>
				<h4>menu item visible(menu item handle)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				returns whether that menu item is visible (true or false).
				A menu item is hidden only if it's disabled and has the "Hide if disabled" bit set.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-menuitemselectable"></a>
				<h4>menu item selectable(menu item handle)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				returns true or false, telling whether that menu item is visible and can be selected by normal controls,
				(rather than being skipped over).
				<br>
				Currently only hidden menu items and Labels which "Can't be selected" return false.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-usemenuitem"></a>
				<h4>use menu item(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, activate the menu item. This will cause whatever actions (text box, menu, script, tag changes, etc.) that have been configured for this menu item to be triggered.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstmenuitem"></a>
				<h4>first menu item(menu handle)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return a menu item handle for the menu item at the
				top of the menu, or 0 (false) if there are no visible menu items.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This is NOT the handle for the first menu item defined in the menu editor.
					Use <span class="code"><a href="#about-menuitembytrueslot" class="ref">menu item by true slot</a>(menu, 0)</span> to get that one.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-lastmenuitem"></a>
				<h4>last menu item(menu handle, visible only)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>, by default returns a menu item handle for the
				last visible menu item, at the bottom of the menu.
				<span class="param">visible only</span> defaults to <span class="code">true</span>.
				If you pass <span class="param">false</span> as the <span class="param">visible only</span> argument,
				then returns the last visible or invisible menu item
				(last as seen by <a href="#about-menuitembyslot" class="ref">menu item by slot</a> or <a href="#about-nextmenuitem" class="ref">next menu item</a>).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					<span class="code">last menu item(menu, false)</span> does NOT return the handle for the
					last menu item that appears in the menu editor, because menu items are
					sorted based on visibility: all invisible items to the end.
					Use <span class="code"><a href="#about-menuitembytrueslot" class="ref">menu item by true slot</a>(menu, <a href="#about-menuitemcount" class="ref">menu item count</a>(menu) -- 1)</span>
					to get that one.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextmenuitem"></a>
				<h4>next menu item(menu item handle, visible only)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return a menu item handle for the menu item below the specified one, or <a href="#about-false" class="ref">false</a> there is no next menu item. You can optionally include invisible items by using the optional argument <span class="param">visible only</span>, which defaults to <a href="#about-true" class="ref">true</a>.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Invisible menu items are always at the end of the menu,
					after the last visible menu item,
					not in the order in which they are defined in the menu editor!
					See <a href="#about-menuitembytrueslot" class="ref">menu item by true slot</a> if that's undesirable.
				</div>
			
			
			<pre>variable(mi)
mi := first menu item
while(mi) do, begin
  # do things to each visible menu item
  mi := next menu item(mi)
end
</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-previousmenuitem"></a>
				<h4>previous menu item(menu item handle, visible only)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return a menu item handle for the menu item above the specified one, or <a href="#about-false" class="ref">false</a> there is no previous menu item. You can optionally include invisible items by using the optional argument <span class="param">visible only</span>, which defaults to <a href="#about-true" class="ref">true</a>. Note that invisible menu items are always at the end of the menu, after the last visible menu item. See <a href="#about-menuitembytrueslot" class="ref">menu item by true slot</a> if that's undesirable.
			
			<pre>variable(m)
m := previous menu item(selected menu item)</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-menuitemcount"></a>
				<h4>menu item count(menu handle)</h4>
<p>
			
				Returns the total number of menu items in a menu,
				both visible and invisible (disabled).
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-visiblemenuitemcount" class="ref">visible menu item count</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-visiblemenuitemcount"></a>
				<h4>visible menu item count(menu handle)</h4>
<p>
			
				Returns the number of visible menu items in a menu.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-menuitemcount" class="ref">menu item count</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-menuitembytrueslot"></a>
				<h4>menu item by true slot(menu handle, slot)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return a menu item handle for the menu item at the position specified by <span class="param">slot</span>. The first slot in the menu is 0. This command uses the ordering of menu items as they appear in the Menu Editor in Custom.  The "true order" doesn't change as menu items are hidden or unhidden, unlike the slot returned by <a href="#about-menuitemslot" class="ref">menu item slot</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-menuitembyslot" class="ref">menu item by slot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-menuitemtrueslot"></a>
				<h4>menu item true slot(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return the slot number of the menu item, as it appears in the Menu Editor. The first slot in the menu is 0. The "true order" doesn't change as menu items are hidden or unhidden, unlike the slot returned by <a href="#about-menuitemslot" class="ref">menu item slot</a>.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-menuitemslot" class="ref">menu item slot</a>, </li>
<li><a href="#about-menuitembytrueslot" class="ref">menu item by true slot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-menuitembyslot"></a>
				<h4>menu item by slot(menu handle, slot, visible only)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return a menu item handle for the menu item at the position specified by <span class="param">slot</span>. The first slot in the menu is 0. You can optionally include invisible items by using the optional argument <span class="param">visible only</span>, which defaults to <a href="#about-true" class="ref">true</a>. Note that invisible menu items are always at the end of the menu, after the last visible menu item -- menu items are NOT in the same order as they appear in the Menu Editor! This means menu item slot numbers change as menu items are hidden or unhidden. Use <a href="#about-menuitembytrueslot" class="ref">menu item by true slot</a> if you want to use the order shown in the Menu Editor.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-menuitemslot" class="ref">menu item slot</a>, </li>
<li>
<a href="#about-menuitembytrueslot" class="ref">menu item by true slot</a>, </li>
<li>
<a href="#about-menuitemcount" class="ref">menu item count</a>, </li>
<li><a href="#about-visiblemenuitemcount" class="ref">visible menu item count</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-menuitemslot"></a>
				<h4>menu item slot(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return a the slot number of the menu item. The first slot in the menu is 0. Menu item slot numbers change as menu items are hidden or unhidden. Use <a href="#about-menuitemtrueslot" class="ref">menu item true slot</a> if you want to know the slot number as it appears in the Menu Editor.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-menuitembyslot" class="ref">menu item by slot</a>, </li>
<li><a href="#about-menuitemtrueslot" class="ref">menu item true slot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-findmenuitemcaption"></a>
				<h4>find menu item caption(menu handle, string ID, search after handle, visible only)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, and a string identified by <span class="param">string ID</span>, Search the menu for a menu item with a label that is the same as the string, and return a handle to the matching menu item. The optional third argument <span class="param">search after handle</span> is a menu item handle to start searching after instead of searching from the top of the menu (so it must belong to the same menu). The optional fourth argument <span class="param">visible only</span> is a <a href="#about-true" class="ref">true</a> or <a href="#about-false" class="ref">false</a> value that determines whether or not to include hidden items. It defaults to <a href="#about-true" class="ref">true</a>.
			
			<pre>variable(menu, mi)
menu := open menu(menu:test menu)
$0="Puppies"
mi := find menu item caption(menu, 0)
while(mi) do, begin
 # do something to each menu item labelled "Puppies"
 mi := find menu item(menu, 0, mi)
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-menuitematpixel"></a>
				<h4>menu item at pixel(x, y)</h4>
<p>
			
				Given a position on the screen (for example <span class="param">menu item at pixel</span>(<a href="#about-mousepixelx" class="ref">mouse pixel X</a>, <a href="#about-mousepixely" class="ref">mouse pixel Y</a>)),
				returns the handle for the menu item at that position, or <span class="param">false</span> if none.
				If multiple menus overlap at that location the top-most one is returned.
				You can find the menu that the menu item belongs to with <a href="#about-parentmenu" class="ref">parent menu</a>.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					The menu item might not actually be selectable. Check with <a href="#about-menuitemselectable" class="ref">menu item selectable</a>.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-selectedmenuitem" class="ref">selected menu item</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Menu%20Item%20Data"></a>
		<h3>
<span class="backlink"><a href="#Menu%20Functions">Menu Functions</a> →
			<a href="#Menu%20Items">Menu Items</a> →
			</span>Menu Item Data</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-getmenuitemcaption"></a>
				<h4>get menu item caption(menu item handle, string ID)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, take the caption and copy it into the string identified by <span class="param">string ID</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemcaption"></a>
				<h4>set menu item caption(menu item handle, string ID)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, replace the caption with the string identified by <span class="param">string ID</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemtype"></a>
				<h4>get menu item type(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return the type of the menu item.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemtype"></a>
				<h4>set menu item type(menu item handle, new type)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				change the type of the menu item to <span class="param">new type</span>.
				Available constants are:
				<span class="code">menutype:label</span> (aka <span class="code">menutype:caption</span>), <span class="code">menutype:special</span>, <span class="code">menutype:menu</span>,
				<span class="code">menutype:textbox</span>, and <span class="code">menutype:script</span>.
				<br>
				You will also need to call
				<a href="#about-setmenuitemsubtype" class="ref">set menu item subtype</a> to fully specify the action attached to the menu item.
				Setting just the item type does NOT change the subtype to a sensible value!
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemsubtype"></a>
				<h4>get menu item subtype(menu item handle)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				return the subtype of the menu item. The meaning of the subtype varies depending on the type
				(see <a href="#about-setmenuitemsubtype" class="ref">set menu item subtype</a>).
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setmenuitemsubtype" class="ref">set menu item subtype</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemsubtype"></a>
				<h4>set menu item subtype(menu item handle, new subtype)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				change the subtype of the menu item to <span class="param">new subtype</span>.
				The meaning of the subtype varies depending on the type of the menu item,
				which is changed with <a href="#about-setmenuitemtype" class="ref">set menu item type</a>:

				<ul>
					<li>
						For <span class="code">menutype:label</span> use the constants:
						<ul>
							<li>
								<span class="param">menulabel:selectable</span>
							</li>
							<li>
								<span class="param">menulabel:disabled</span> -
								The menu item is always disabled, regardless of tags.
								Hence, the Set Tag and Toggle Tag options and the
								"Close menu when activated" bitset are ignored.
							</li>
							<li>
								<span class="param">menulabel:unselectable</span> - (aka <span class="param">menulabel:cant be selected</span>)
								Can't be selected with normal controls.
								Can still be selected using <a href="#about-selectmenuitem" class="ref">select menu item</a>
								(but can't be activated).
							</li>
						</ul>
					</li>
					<li>
						For <span class="code">menutype:special</span> use the constants:
						<ul>
							<li>
								<span class="param">menuspecial:items</span>
							</li>
							<li>
								<span class="param">menuspecial:spells</span>
							</li>
							<li>
								<span class="param">menuspecial:status</span>
							</li>
							<li>
								<span class="param">menuspecial:equip</span>
							</li>
							<li>
								<span class="param">menuspecial:order</span> - Reorder the active party
							</li>
							<li>
								<span class="param">menuspecial:team</span> - Reorder, or swap heroes in and out of the active party 
							</li>
							<li>
								<span class="param">menuspecial:order team</span> -
								Either the Team menu if the "Hero Swapping Always
								Available" general preference bitset is turned on,
								otherwise the Order menu.
							</li>
							<li>
								<span class="param">menuspecial:map</span> - Minimap.
								Appears only if allowed in the Map General Settings.
							</li>
							<li>
								<span class="param">menuspecial:save</span> -
								Appears only if allowed in the Map General Settings.
							</li>
							<li>
								<span class="param">menuspecial:load</span>
							</li>
							<li>
								<span class="param">menuspecial:quit</span>
							</li>
							<li>
								<span class="param">menuspecial:volume</span> - Obsolete.
								This lets you adjust the music volume, and pressing
								Enter opens a new menu with Music and Sound Volume
								options.
							</li>
							<li>
								<span class="param">menuspecial:map always</span> - Minimap.
								Appears even if the minimap isn't allowed in Map General Settings.
							</li>
							<li>
								<span class="param">menuspecial:save always</span> -
								Appears even if saving isn't allowed in Map General Settings.
							</li>
							<li>
								<span class="param">menuspecial:margins</span> -
								An option to adjust margins at the edges of the screen,
								when playing a game on a console like the Ouya which
								displays on a TV.
								(Only appears on consoles)
							</li>
							<li>
								<span class="param">menuspecial:purchases</span> -
								Appears only if a store has been set in the
								In-App Purchases menu.
							</li>
							<li>
								<span class="param">menuspecial:windowed</span> -
								Appears only if currently playing fullscreen, and
								switching to windowed is supported.
							</li>
							<li>
								<span class="param">menuspecial:fullscreen</span> -
								Appears only if currently playing windowed, and
								switching to fullscreen is supported.
								<br>
								You must add BOTH Fullscreen and Windowed menu items
								next to each other to allow players to switch to-and-fro.
							</li>
							<li>
								<span class="param">menuspecial:music volume</span>
							</li>
							<li>
								<span class="param">menuspecial:sound volume</span>
							</li>
						</ul>
					</li>
					<li>
						For <span class="code">menutype:textbox</span> use the textbox's ID number.
					</li>
					<li>

						For <span class="code">menutype:menu</span> use the menu's ID number or a menu:name constant from your HSI file.
					</li>
					<li>
						For <span class="code">menutype:script</span> use script references in the form <span class="code">@scriptname</span>.
					</li>
				</ul>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemtag"></a>
				<h4>get menu item tag(menu item handle, whichtag)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, and a tag number <span class="param">whichtag</span> which can be 1 or 2, return the a tag required for the menu item to be available. The tag number will be positive if the tag needs to be ON, or negative if the tag needs to be OFF.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemtag"></a>
				<h4>set menu item tag(menu item handle, new tag, whichtag)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, and a tag number <span class="param">whichtag</span> which can be 1 or 2, set the tag required for the menu item to <span class="param">new tag</span>. Use a positive number if the tag needs to be turned ON, and a negative number if the tag needs to be turned OFF.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemsettag"></a>
				<h4>get menu item settag(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return the number of the tag that will be set when the menu item is selected. The tag number will be positive if the tag will be set ON, or negative if the tag will be set OFF.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemsettag"></a>
				<h4>set menu item settag(menu item handle, new settag)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, change the tag that will be set when the menu item is selected. Use a positive number if the tag should be turned ON, and a negative number if the tag should be turned OFF.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemtogtag"></a>
				<h4>get menu item togtag(menu item handle)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, return the number of the tag that will be toggled when the menu item is selected. (The tag number will always be a positive number).
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemtogtag"></a>
				<h4>set menu item togtag(menu item handle, new settag)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, change the tag that will be toggled when the menu item is selected. (The tag number will always be positive).
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitembit"></a>
				<h4>get menu item bit(menu item handle, bit)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				and bit number <span class="param">bit</span>,
				return <a href="#about-true" class="ref">true</a> if the bitset is ON, and <a href="#about-false" class="ref">false</a> if the bitset is OFF.
				See <a href="#about-setmenuitembit" class="ref">set menu item bit</a> for the constants you can pass as the value of <span class="param">bit</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitembit"></a>
				<h4>set menu item bit(menu item handle, bit, value)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>,
				and bit number <span class="param">bit</span>, set the bitset is ON or OFF depending on <span class="param">value</span>.
				You can use the following constants for <span class="param">bit</span>:
				<ul>
					<li>
						<span class="param">menu item bit:Hide when disabled</span>
					</li>
					<li>
						<span class="param">menu item bit:Close menu when activated</span> (the old name, <span class="param">menu item bit:Close menu when selected</span>, can also be used)
					</li>
					<li>
						<span class="param">menu item bit:Skip close script</span> (ie "Don't run on-close script")
					</li>
				</ul>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemextra"></a>
				<h4>get menu item extra(menu item handle, extra)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, and an <span class="param">extra</span> data number which can be 0, 1, or 2, return the the number stored in the extra data space. This extra data has no meaning of its own, and is just useful for advanced menu scripting.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemextra"></a>
				<h4>set menu item extra(menu item handle, extra, num)</h4>
<p>
			Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, and an <span class="param">extra</span> data number which can be 0, 1, or 2, change the number stored in the extra data space to <span class="param">num</span>. This extra data has no meaning of its own, and is just useful for advanced menu scripting.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemcolor"></a>
				<h4>get menu item color(menu item handle)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, get its normal color (when it isn't disabled). This will be a <a href="#about-colorcode" class="ref">color code</a>.
				0 means the default for the menu is used, which is <a href="#about-getmenutextcolor" class="ref">get menu textcolor</a>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenutextcolor" class="ref">get menu textcolor</a>, </li>
<li><a href="#about-menuitemdisabled" class="ref">menu item disabled</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemcolor"></a>
				<h4>set menu item color(menu item handle, colorcode)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, set its normal color (when it isn't disabled). This should be a <a href="#about-colorcode" class="ref">color code</a>.
				0 means to use the default for the menu, which is <a href="#about-getmenutextcolor" class="ref">get menu textcolor</a>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setmenutextcolor" class="ref">set menu textcolor</a>, </li>
<li><a href="#about-menuitemdisabled" class="ref">menu item disabled</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemdisabledcolor"></a>
				<h4>get menu item disabled color(menu item handle)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, get the color it uses when disabled. This will be a <a href="#about-colorcode" class="ref">color code</a>.
				0 means the default for the menu is used, which is <a href="#about-getmenudisabledtextcolor" class="ref">get menu disabled textcolor</a>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setmenudisabledtextcolor" class="ref">set menu disabled textcolor</a>, </li>
<li><a href="#about-menuitemdisabled" class="ref">menu item disabled</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemdisabledcolor"></a>
				<h4>set menu item disabled color(menu item handle, colorcode)</h4>
<p>
			
				Given a <a href="#about-menuitemhandle" class="ref">menu item handle</a>, set its color it uses when disabled. This should be a <a href="#about-colorcode" class="ref">color code</a>.
				0 means to use the default for the menu, which is <a href="#about-getmenudisabledtextcolor" class="ref">get menu disabled textcolor</a>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setmenudisabledtextcolor" class="ref">set menu disabled textcolor</a>, </li>
<li><a href="#about-menuitemdisabled" class="ref">menu item disabled</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Menu%20Data"></a>
		<h3>
<span class="backlink"><a href="#Menu%20Functions">Menu Functions</a> →
			</span>Menu Data</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-getmenubit"></a>
				<h4>get menu bit(menu handle, bit)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>,
				and bit number <span class="param">bit</span>, returns <a href="#about-true" class="ref">true</a> if the bitset is ON, and <a href="#about-false" class="ref">false</a> if the bitset is OFF.
				For the <span class="param">bit</span> bit number you should use one of the constants:
				<ul>
					<li>menubit:translucent box</li>
					<li>menubit:never show scrollbar</li>
					<li>menubit:allow gameplay</li>
					<li>menubit:suspend player even if gameplay allowed</li>
					<li>menubit:no box</li>
					<li>menubit:no close</li>
					<li>menubit:no controls</li>
					<li>menubit:prevent main menu</li>
					<li>menubit:advance text box when menu closes</li>
					<li>menubit:highlight selection background</li>
					<li>menubit:remember selection</li>
				</ul>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenubit"></a>
				<h4>set menu bit(menu handle, bit, value)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>,
				and bit number <span class="param">bit</span>, sets the bitset is ON or OFF depending on <span class="param">value</span>.
				For the <span class="param">bit</span> bit number you should use one of the <span class="param">menubit:...</span> constants.
				See <a href="#about-getmenubit" class="ref">get menu bit</a> for the available constants.
				<br>
				Note that this command only changes an open instance of a menu, it doesn't
				change the menu definition, so if the menu is closed and reopened any
				edits are reverted.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuboxstyle"></a>
				<h4>get menu boxstyle(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return a the boxstyle of the menu. This will be a number from 0 to 14.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenuboxstyle"></a>
				<h4>set menu boxstyle(menu handle, new box style)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the boxstyle of the menu. <span class="param">new box style</span> will be a number from 0 to 14.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenutextcolor"></a>
				<h4>get menu textcolor(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the default text color of the menu items. This will be a <a href="#about-colorcode" class="ref">color code</a>. 0 means the default is used, which is the "Menu item" color (<span class="code">ui:menuitem</span>) in the User Interface Colors menu.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenutextcolor"></a>
				<h4>set menu textcolor(menu handle, new textcolor)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the default text color of its menu items. <span class="param">new textcolor</span> should be a <a href="#about-colorcode" class="ref">color code</a>. 0 means the default is used, which is the "Menu item" color (<span class="code">ui:menuitem</span>) in the User Interface Colors menu.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenudisabledtextcolor"></a>
				<h4>get menu disabled textcolor(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the default text color of disabled menu items. This will be a <a href="#about-colorcode" class="ref">color code</a>. 0 means the default is used, which is the "Disabled menu item" color (<span class="code">ui:disableditem</span>) in the User Interface Colors menu.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenudisabledtextcolor"></a>
				<h4>set menu disabled textcolor(menu handle, new textcolor)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the default text color of disabled menu items. <span class="param">new textcolor</span> should be a <a href="#about-colorcode" class="ref">color code</a>. 0 means the default is used, which is the "Disabled menu item" color (<span class="code">ui:disableditem</span>) in the User Interface Colors menu.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenumaxrows"></a>
				<h4>get menu max rows(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return a max rows to display of the menu, or 0 if the menu is auto-sizing. If the actual number of menu items is larger than the max rows, the menu will be scrollable.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmenumaxrows"></a>
				<h4>set menu max rows(menu handle, new max rows)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the max rows to display of the menu to <span class="param">new max rows</span>. Use 0 if you want the menu to be auto-sizing. If the actual number of menu items is larger than the max rows, the menu will be scrollable.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmenuoffsetx"></a>
				<h4>get menu offset x(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the x offset position of the menu's anchor point in pixels relative to the center of the screen.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuoffsety" class="ref">get menu offset y</a>, </li>
<li>
<a href="#about-setmenuoffsetx" class="ref">set menu offset x</a>, </li>
<li><a href="#about-setmenuoffsety" class="ref">set menu offset y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuoffsety"></a>
				<h4>get menu offset y(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the y offset position of the menu's anchor point in pixels relative to the center of the screen.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuoffsetx" class="ref">get menu offset x</a>, </li>
<li>
<a href="#about-setmenuoffsetx" class="ref">set menu offset x</a>, </li>
<li><a href="#about-setmenuoffsety" class="ref">set menu offset y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuoffsetx"></a>
				<h4>set menu offset x(menu handle, new x)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the x offset position of the menu's anchor point in pixels relative to the center of the screen.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuoffsetx" class="ref">get menu offset x</a>, </li>
<li>
<a href="#about-getmenuoffsety" class="ref">get menu offset y</a>, </li>
<li><a href="#about-setmenuoffsety" class="ref">set menu offset y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuoffsety"></a>
				<h4>set menu offset y(menu handle, new y)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the y offset position of the menu's anchor point in pixels relative to the center of the screen.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuoffsetx" class="ref">get menu offset x</a>, </li>
<li>
<a href="#about-getmenuoffsety" class="ref">get menu offset y</a>, </li>
<li><a href="#about-setmenuoffsetx" class="ref">set menu offset x</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuanchorx"></a>
				<h4>get menu anchor x(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the x anchor position of the menu. The return value will be <span class="param">align:center</span>, <span class="param">align:left</span> or <span class="param">align:right</span>. (Not the <span class="code">edge:</span> constants used by slices!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuanchory" class="ref">get menu anchor y</a>, </li>
<li>
<a href="#about-setmenuanchorx" class="ref">set menu anchor x</a>, </li>
<li><a href="#about-setmenuanchory" class="ref">set menu anchor y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuanchory"></a>
				<h4>get menu anchor y(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the y anchor position of the menu. The return value will be <span class="param">align:center</span>, <span class="param">align:top</span> or <span class="param">align:bottom</span>. (Not the <span class="code">edge:</span> constants used by slices!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuanchorx" class="ref">get menu anchor x</a>, </li>
<li>
<a href="#about-setmenuanchorx" class="ref">set menu anchor x</a>, </li>
<li><a href="#about-setmenuanchory" class="ref">set menu anchor y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuanchorx"></a>
				<h4>set menu anchor x(menu handle, new anchor)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the horizontal x anchor position of the menu. The <span class="param">new anchor</span> can be <span class="param">align:center</span>, <span class="param">align:left</span> or <span class="param">align:right</span>.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuanchorx" class="ref">get menu anchor x</a>, </li>
<li>
<a href="#about-getmenuanchory" class="ref">get menu anchor y</a>, </li>
<li><a href="#about-setmenuanchory" class="ref">set menu anchor y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuanchory"></a>
				<h4>set menu anchor y(menu handle, new anchor)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the vertical y anchor position of the menu. The <span class="param">new anchor</span> can be <span class="param">align:center</span>, <span class="param">align:top</span> or <span class="param">align:bottom</span>. (Not the <span class="code">edge:</span> constants used by slices!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmenuanchorx" class="ref">get menu anchor x</a>, </li>
<li>
<a href="#about-getmenuanchory" class="ref">get menu anchor y</a>, </li>
<li><a href="#about-setmenuanchorx" class="ref">set menu anchor x</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenutextalign"></a>
				<h4>get menu text align(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the text alignment of the menu. The return value will be <span class="param">align:center</span>, <span class="param">align:left</span> or <span class="param">align:right</span>. (Not the <span class="code">edge:</span> constants used by slices!)
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setmenutextalign" class="ref">set menu text align</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenutextalign"></a>
				<h4>set menu text align(menu handle, new align)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the text alignment of the menu. The <span class="param">new align</span> can be <span class="param">align:center</span>, <span class="param">align:left</span> or <span class="param">align:right</span>. (Not the <span class="code">edge:</span> constants used by slices!)
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getmenutextalign" class="ref">get menu text align</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuminchars"></a>
				<h4>get menu min chars(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the minimum width of the menu in chars, or 0 for menus that have their width autodetected.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setmenuminchars" class="ref">set menu min chars</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuminchars"></a>
				<h4>set menu min chars(menu handle, new min)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the minimum width of the menu in chars, or use 0 to make the menu width autodetected.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getmenuminchars" class="ref">get menu min chars</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenumaxchars"></a>
				<h4>get menu max chars(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the maximum width of the menu in chars, or 0 for menus that do not have a maximum.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setmenumaxchars" class="ref">set menu max chars</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenumaxchars"></a>
				<h4>set menu max chars(menu handle, new max)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the maximum width of the menu in chars, or use 0 for no maximum.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getmenumaxchars" class="ref">get menu max chars</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuborder"></a>
				<h4>get menu border(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return the border thickness of the menu in pixels. Positive numbers indicate a thicker border. Negative numbers indicate a thinner border.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setmenuborder" class="ref">set menu border</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuborder"></a>
				<h4>set menu border(menu handle, new border)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, change the border thickness of the menu in pixels. Positive numbers will result in a thicker border. Negative numbers will result in a thinner border.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getmenuborder" class="ref">get menu border</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuonclosescript"></a>
				<h4>get menu on close script(menu handle)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, return a <a href="#about-scriptid" class="ref">script ID</a> for the script that will be run when the menu is closed, or <span class="param">false</span> if there is none. This command is only useful with scripts that have the <span class="param">allow gameplay and scripts</span> bitset turned on.
			
			<pre>variable(m, s)
m := open menu(5)
s := get menu on close script(m)
run script by id(s)
			</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-runscriptbyid" class="ref">run script by ID</a>, </li>
<li><a href="#about-setmenuonclosescript" class="ref">set menu on close script</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuonclosescript"></a>
				<h4>set menu on close script(menu handle, script id)</h4>
<p>
			Given a <a href="#about-menuhandle" class="ref">menu handle</a>, assign the <a href="#about-scriptid" class="ref">script ID</a> that will be run when the menu is closed, or <span class="param">false</span> to disable any on-close script that has already been set. The script trigger only takes effect the next time you close the menu. If you re-open the menu again, you will need to re-set the on-close script again. This command is only useful with scripts that have the <span class="param">allow gameplay and scripts</span> bitset turned on.
			
			<pre>variable(m, s)
m := open menu(5)
set menu on close script(m, @my menu exit handler)
			</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-runscriptbyid" class="ref">run script by ID</a>, </li>
<li><a href="#about-setmenuonclosescript" class="ref">set menu on close script</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenucancelbuttonmenu"></a>
				<h4>get menu cancel button menu(menu handle)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>,
				returns the action that happens when the player presses a cancel button.
				-1 means the menu simply closes.
				0 or greater is a menu ID to open in its place
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setmenucancelbuttonmenu" class="ref">set menu cancel button menu</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenucancelbuttonmenu"></a>
				<h4>set menu cancel button menu(menu handle, menu)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>,
				sets the action that happens when the player presses a cancel button.
				<span class="param">menu</span> can be either -1, in which the menu simply closes,
				or a menu ID to open in its place (which is 0 or greater).
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getmenucancelbuttonmenu" class="ref">get menu cancel button menu</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getmenuitemspacing"></a>
				<h4>get menu item spacing(menu handle)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>,
				returns the amount of extra spacing in pixels between menu items.
				0 is the default.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setmenuitemspacing" class="ref">set menu item spacing</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setmenuitemspacing"></a>
				<h4>set menu item spacing(menu handle, spacing)</h4>
<p>
			
				Given a <a href="#about-menuhandle" class="ref">menu handle</a>,
				sets the amount of extra spacing in pixels between menu items.
				0 is the default.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getmenuitemspacing" class="ref">get menu item spacing</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Slices"></a>
		<h3>
<span class="backlink"></span>Slices</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>
			To learn what a slice is, read the <a href="http://rpg.hamsterrepublic.com/ohrrpgce/Slices">Slices article</a> on the wiki,
			or one of the other tutorials you can find there.
			Although there are many commands here for manipulating slices, it's much easier to create slices
			in the Slice Collection Editor and then use <a href="#about-loadslicecollection" class="ref">load slice collection</a>.
			<br>
			Slices are referred to with <a href="#about-slicehandle" class="ref">slice handle</a>s.
		</p>
<div class="select-content-shown" id="Slices-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-setparent">set parent (handle, parent handle)</a><br>
		<a href="#about-sliceisvalid">slice is valid (id)</a><br>
		<a href="#about-freeslice">free slice (handle)</a><br>
		<a href="#about-freeslicechildren">free slice children (handle)</a><br>
		<a href="#about-cloneslice">clone slice (handle, recurse)</a><br>
		<a href="#about-setsliceextra">set slice extra (handle, extra, value)</a><br>
		<a href="#about-getsliceextra">get slice extra (handle, extra)</a><br>
		<a href="#about-reparenttonpc">reparent to npc (handle, npc)</a><br>
		<a href="#about-reparenttohero">reparent to hero (handle, hero)</a><br>
</div>
		<li>
<a href="#Getting%20Slices">Getting Slices</a><br>
		<ul class="content-shown">
		<a href="#about-loadslicecollection">load slice collection (id)</a><br>
		<a href="#about-lookupslice">lookup slice (lookup code, start slice)</a><br>
		<a href="#about-spritelayer">sprite layer</a><br>
		<a href="#about-getslicelookup">get slice lookup (handle)</a><br>
		<a href="#about-setslicelookup">set slice lookup (handle, code)</a><br>
		<a href="#about-getheroslice">get hero slice (rank)</a><br>
		<a href="#about-getheroslicebyslot">get hero slice by slot (slot)</a><br>
		<a href="#about-getherosprite">get hero sprite (rank)</a><br>
		<a href="#about-getherospritebyslot">get hero sprite by slot (slot)</a><br>
		<a href="#about-herorankfromslice">hero rank from slice (handle)</a><br>
		<a href="#about-heroslotfromslice">hero slot from slice (handle)</a><br>
		<a href="#about-getnpcslice">get npc slice (npc)</a><br>
		<a href="#about-getnpcsprite">get npc sprite (npc)</a><br>
		<a href="#about-npcreferencefromslice">npc reference from slice (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Slice%20Sizing">Slice Sizing</a><br>
		<ul class="content-shown">
		<a href="#about-slicewidth">slice width (handle)</a><br>
		<a href="#about-sliceheight">slice height (handle)</a><br>
		<a href="#about-setslicewidth">set slice width (handle, width)</a><br>
		<a href="#about-setsliceheight">set slice height (handle, height)</a><br>
		<a href="#about-setslicesize">set slice size (handle, width, height)</a><br>
		<a href="#about-clampslice">clamp slice (slice, within slice)</a><br>
		<a href="#about-fillparent">fill parent (handle, true_or_false)</a><br>
		<a href="#about-isfillingparent">is filling parent (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Positioning%20Slices">Positioning Slices</a><br>
		<ul class="content-shown">
		<a href="#about-slicex">slice x (handle)</a><br>
		<a href="#about-slicey">slice y (handle)</a><br>
		<a href="#about-putslice">put slice (handle, X, Y)</a><br>
		<a href="#about-setslicex">set slice x (handle, X)</a><br>
		<a href="#about-setslicey">set slice y (handle, Y)</a><br>
		<a href="#about-slicescreenx">slice screen x (handle)</a><br>
		<a href="#about-slicescreeny">slice screen y (handle)</a><br>
		<a href="#about-putslicescreen">put slice screen (handle, x, y)</a><br>
		<a href="#about-setslicescreenx">set slice screen x (handle, x)</a><br>
		<a href="#about-setslicescreeny">set slice screen y (handle, y)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Visibility%20and%20Clipping">Visibility and Clipping</a><br>
		<ul class="content-shown">
		<a href="#about-setslicevisible">set slice visible (handle, vis)</a><br>
		<a href="#about-setslicevisible">set sprite visible</a><br>
		<a href="#about-getslicevisible">get slice visible (handle)</a><br>
		<a href="#about-setsliceclipping">set slice clipping (handle, clip)</a><br>
		<a href="#about-getsliceclipping">get slice clipping (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Slice%20Blending">Slice Blending</a><br>
		<ul class="content-shown">
		<a href="#about-setopacity">set opacity (handle, percent)</a><br>
		<a href="#about-getopacity">get opacity (handle)</a><br>
		<a href="#about-setblendmode">set blend mode (handle, blend mode)</a><br>
		<a href="#about-getblendmode">get blend mode (handle)</a><br>
		<a href="#about-setblendingenabled">set blending enabled (handle, state)</a><br>
		<a href="#about-getblendingenabled">get blending enabled (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Alignment%20and%20Anchor%20Points">Alignment and Anchor Points</a><br>
		<ul class="content-shown">
		<a href="#about-sliceedgex">slice edge x (handle, edge)</a><br>
		<a href="#about-sliceedgey">slice edge y (handle, edge)</a><br>
		<a href="#about-setsliceedgex">set slice edge x (handle, edge, value)</a><br>
		<a href="#about-setsliceedgey">set slice edge y (handle, edge, value)</a><br>
		<a href="#about-sethorizalign">set horiz align (handle, edge)</a><br>
		<a href="#about-setvertalign">set vert align (handle, edge)</a><br>
		<a href="#about-sethorizanchor">set horiz anchor (handle, edge)</a><br>
		<a href="#about-setvertanchor">set vert anchor (handle, edge)</a><br>
		<a href="#about-gethorizalign">get horiz align (handle)</a><br>
		<a href="#about-getvertalign">get vert align (handle)</a><br>
		<a href="#about-gethorizanchor">get horiz anchor (handle)</a><br>
		<a href="#about-getvertanchor">get vert anchor (handle)</a><br>
		<a href="#about-realignslice">realign slice (handle, horiz align, vert align, horiz anchor, vert anchor)</a><br>
		<a href="#about-centerslice">center slice (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Padding">Padding</a><br>
		<ul class="content-shown">
		<a href="#about-setpadding">set padding (handle, pixels)</a><br>
		<a href="#about-gettoppadding">get top padding (handle)</a><br>
		<a href="#about-settoppadding">set top padding (handle, pixels)</a><br>
		<a href="#about-getleftpadding">get left padding (handle)</a><br>
		<a href="#about-setleftpadding">set left padding (handle, pixels)</a><br>
		<a href="#about-getrightpadding">get right padding (handle)</a><br>
		<a href="#about-setrightpadding">set right padding (handle, pixels)</a><br>
		<a href="#about-getbottompadding">get bottom padding (handle)</a><br>
		<a href="#about-setbottompadding">set bottom padding (handle, pixels)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Moving%20Slices">Moving Slices</a><br>
		<ul class="content-shown">
		<a href="#about-setslicevelocityx">set slice velocity x (handle, pixels per tick, ticks)</a><br>
		<a href="#about-setslicevelocityy">set slice velocity y (handle, pixels per tick, ticks)</a><br>
		<a href="#about-getslicevelocityx">get slice velocity x (handle)</a><br>
		<a href="#about-getslicevelocityy">get slice velocity y (handle)</a><br>
		<a href="#about-setslicevelocity">set slice velocity (handle, horiz pixels per tick, vert pixels per tick, ticks)</a><br>
		<a href="#about-stopslice">stop slice (handle)</a><br>
		<a href="#about-movesliceto">move slice to (handle, x, y, ticks)</a><br>
		<a href="#about-movesliceby">move slice by (handle, relative x, relative y, ticks)</a><br>
		<a href="#about-waitforslice">wait for slice (handle)</a><br>
		<a href="#about-sliceismoving">slice is moving (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Moving%20Around%20the%20Slice%20Tree">Moving Around the Slice Tree</a><br>
		<ul class="content-shown">
		<a href="#about-slicechild">slice child (handle, number)</a><br>
		<a href="#about-childcount">child count (handle)</a><br>
		<a href="#about-slicechildindex">slice child index (handle)</a><br>
		<a href="#about-firstchild">first child (handle)</a><br>
		<a href="#about-lastchild">last child (handle)</a><br>
		<a href="#about-nextsibling">next sibling (handle)</a><br>
		<a href="#about-previoussibling">previous sibling (handle)</a><br>
		<a href="#about-parentslice">parent slice (handle)</a><br>
		<a href="#about-sliceparent">slice parent (handle)</a><br>
		<a href="#about-checkparentage">check parentage (handle, ancestor handle)</a><br>
</ul>
<ul>
		<li>
<a href="#Type-specific%20Iteration%20Commands">Type-specific Iteration Commands</a><br>
		<ul class="content-shown">
		<a href="#about-firstchildoftype">first child of type(handle, type)</a><br>
		<a href="#about-nextsiblingoftype">next sibling of type (handle, type)</a><br>
		<a href="#about-firstcontainerchild">first container child (handle)</a><br>
		<a href="#about-nextcontainersibling">next container sibling (handle)</a><br>
		<a href="#about-firstrectchild">first rect child (handle)</a><br>
		<a href="#about-nextrectsibling">next rect sibling (handle)</a><br>
		<a href="#about-firstspritechild">first sprite child (handle)</a><br>
		<a href="#about-nextspritesibling">next sprite sibling (handle)</a><br>
		<a href="#about-firsttextchild">first text child (handle)</a><br>
		<a href="#about-nexttextsibling">next text sibling (handle)</a><br>
		<a href="#about-firstellipsechild">first ellipse child (handle)</a><br>
		<a href="#about-nextellipsesibling">next ellipse sibling (handle)</a><br>
		<a href="#about-firstgridchild">first grid child (handle)</a><br>
		<a href="#about-nextgridsibling">next grid sibling (handle)</a><br>
		<a href="#about-firstscrollchild">first scroll child (handle)</a><br>
		<a href="#about-nextscrollsibling">next scroll sibling (handle)</a><br>
		<a href="#about-firstselectchild">first select child (handle)</a><br>
		<a href="#about-nextselectsibling">next select sibling (handle)</a><br>
		<a href="#about-firstpanelchild">first panel child (handle)</a><br>
		<a href="#about-nextpanelsibling">next panel sibling (handle)</a><br>
		<a href="#about-firstlinechild">first line child (handle)</a><br>
		<a href="#about-nextlinesibling">next line sibling (handle)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Reordering%20Slices">Reordering Slices</a><br>
		<ul class="content-shown">
		<a href="#about-slicetofront">slice to front (handle)</a><br>
		<a href="#about-slicetoback">slice to back (handle)</a><br>
		<a href="#about-movesliceabove">move slice above (handle, above what handle)</a><br>
		<a href="#about-moveslicebelow">move slice below (handle, below what handle)</a><br>
</ul>
<ul>
		<li>
<a href="#Sorting%20Slices">Sorting Slices</a><br>
		<ul class="content-shown">
		<a href="#about-ysortchildren">Y sort children (handle)</a><br>
		<a href="#about-setsortorder">set sort order (handle, order)</a><br>
		<a href="#about-getsortorder">get sort order (handle)</a><br>
		<a href="#about-sortchildren">sort children (handle, wipe)</a><br>
		<a href="#about-getchildautosort">get child autosort (handle)</a><br>
		<a href="#about-setchildautosort">set child autosort (handle, setting)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Slice%20Types">Slice Types</a><br>
		<ul class="content-shown"></ul>
<ul>
		<li>
<a href="#Checking%20Slice%20Type">Checking Slice Type</a><br>
		<ul class="content-shown">
		<a href="#about-slicetype">slice type (handle)</a><br>
		<a href="#about-sliceiscontainer">slice is container (handle)</a><br>
		<a href="#about-sliceissprite">slice is sprite (handle)</a><br>
		<a href="#about-sliceisrect">slice is rect (handle)</a><br>
		<a href="#about-sliceisline">slice is line (handle)</a><br>
		<a href="#about-sliceisellipse">slice is ellipse (handle)</a><br>
		<a href="#about-sliceistext">slice is text (handle)</a><br>
		<a href="#about-sliceisgrid">slice is grid (handle)</a><br>
		<a href="#about-sliceisselect">slice is select (handle)</a><br>
		<a href="#about-sliceisscroll">slice is scroll (handle)</a><br>
		<a href="#about-sliceispanel">slice is panel (handle)</a><br>
		<a href="#about-sliceismaplayer">slice is map layer (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Container%20Slices">Container Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createcontainer">create container (width, height)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Sprite%20Slices">Sprite Slices</a><br>
		<ul class="content-shown">
		<a href="#about-loadsprite">load sprite (sprite type, num, palette)</a><br>
		<a href="#about-loadsprite">create sprite</a><br>
		<a href="#about-replacesprite">replace sprite (slice, sprite type, num, palette)</a><br>
		<a href="#about-loadherosprite">load hero sprite (num, palette)</a><br>
		<a href="#about-replaceherosprite">replace hero sprite (handle, num, palette)</a><br>
		<a href="#about-loadwalkaboutsprite">load walkabout sprite (num, palette)</a><br>
		<a href="#about-replacewalkaboutsprite">replace walkabout sprite (handle, num, palette)</a><br>
		<a href="#about-loadsmallenemysprite">load small enemy sprite (num, palette)</a><br>
		<a href="#about-replacesmallenemysprite">replace small enemy sprite (handle, num, palette)</a><br>
		<a href="#about-loadmediumenemysprite">load medium enemy sprite (num, palette)</a><br>
		<a href="#about-replacemediumenemysprite">replace medium enemy sprite (handle, num, palette)</a><br>
		<a href="#about-loadlargeenemysprite">load large enemy sprite (num, palette)</a><br>
		<a href="#about-replacelargeenemysprite">replace large enemy sprite (handle, num, palette)</a><br>
		<a href="#about-loadattacksprite">load attack sprite (num, palette)</a><br>
		<a href="#about-replaceattacksprite">replace attack sprite (handle, num, palette)</a><br>
		<a href="#about-loadweaponsprite">load weapon sprite (num, palette)</a><br>
		<a href="#about-replaceweaponsprite">replace weapon sprite (handle, num, palette)</a><br>
		<a href="#about-loadbordersprite">load border sprite (num, palette)</a><br>
		<a href="#about-replacebordersprite">replace border sprite (handle, num, palette)</a><br>
		<a href="#about-loadportraitsprite">load portrait sprite (num, palette)</a><br>
		<a href="#about-replaceportraitsprite">replace portrait sprite (handle, num, palette)</a><br>
		<a href="#about-loadbackdropsprite">load backdrop sprite (num)</a><br>
		<a href="#about-replacebackdropsprite">replace backdrop sprite (handle, num)</a><br>
		<a href="#about-freesprite">free sprite (handle)</a><br>
		<a href="#about-clonesprite">clone sprite (handle)</a><br>
		<a href="#about-putsprite">put sprite (handle, x, y)</a><br>
		<a href="#about-putsprite">place sprite</a><br>
		<a href="#about-getspritetype">get sprite type (handle)</a><br>
		<a href="#about-setspritesetnumber">set sprite set number (handle, record)</a><br>
		<a href="#about-getspritesetnumber">get sprite set number (handle)</a><br>
		<a href="#about-setspritepalette">set sprite palette (handle, num)</a><br>
		<a href="#about-getspritepalette">get sprite palette (handle)</a><br>
		<a href="#about-getspritedefaultpal">get sprite default pal (handle)</a><br>
		<a href="#about-setspriteframe">set sprite frame (handle, num)</a><br>
		<a href="#about-getspriteframe">get sprite frame (handle)</a><br>
		<a href="#about-spriteframecount">sprite frame count (handle)</a><br>
		<a href="#about-horizflipsprite">horiz flip sprite (handle, flip)</a><br>
		<a href="#about-vertflipsprite">vert flip sprite (handle, flip)</a><br>
		<a href="#about-spriteishorizflipped">sprite is horiz flipped (handle)</a><br>
		<a href="#about-spriteisvertflipped">sprite is vert flipped (handle)</a><br>
		<a href="#about-getspritetrans">get sprite trans (handle)</a><br>
		<a href="#about-setspritetrans">set sprite trans (handle, drawtransparent)</a><br>
		<a href="#about-dissolvesprite">dissolve sprite (handle, dissolve type, total ticks, start tick, backwards, automatic)</a><br>
		<a href="#about-canceldissolve">cancel dissolve (handle)</a><br>
		<a href="#about-spriteisdissolving">sprite is dissolving (handle)</a><br>
		<a href="#about-waitfordissolve">wait for dissolve (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Rect%20Slices">Rect Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createrect">create rect (width, height, style)</a><br>
		<a href="#about-getrectstyle">get rect style (handle)</a><br>
		<a href="#about-setrectstyle">set rect style (handle, style)</a><br>
		<a href="#about-getrectbgcol">get rect bgcol (handle)</a><br>
		<a href="#about-setrectbgcol">set rect bgcol (handle, color)</a><br>
		<a href="#about-getrectfgcol">get rect fgcol (handle)</a><br>
		<a href="#about-setrectfgcol">set rect fgcol (handle, color)</a><br>
		<a href="#about-getrectborder">get rect border (handle)</a><br>
		<a href="#about-getrectrawborder">get rect raw border (handle)</a><br>
		<a href="#about-setrectborder">set rect border (handle, border)</a><br>
		<a href="#about-setrectrawborder">set rect raw border (handle, border)</a><br>
		<a href="#about-getrecttrans">get rect trans (handle)</a><br>
		<a href="#about-setrecttrans">set rect trans (handle, transparency setting)</a><br>
		<a href="#about-getrectfuzziness">get rect fuzziness (handle)</a><br>
		<a href="#about-getrectopacity">get rect opacity (handle)</a><br>
		<a href="#about-setrectfuzziness">set rect fuzziness (handle, percent)</a><br>
		<a href="#about-setrectopacity">set rect opacity (handle, percent)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Line%20Slices">Line Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createline">create line (width, height, color)</a><br>
		<a href="#about-getlinecolor">get line color (handle)</a><br>
		<a href="#about-setlinecolor">set line color (handle, color)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Ellipse%20Slices">Ellipse Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createellipse">create ellipse (width, height, border color, fill color)</a><br>
		<a href="#about-getellipsebordercol">get ellipse border col (handle)</a><br>
		<a href="#about-setellipsebordercol">set ellipse border col (handle, color)</a><br>
		<a href="#about-getellipsefillcol">get ellipse fill col (handle)</a><br>
		<a href="#about-setellipsefillcol">set ellipse fill col (handle, color)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Text%20Slices">Text Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createtext">create text</a><br>
		<a href="#about-setslicetext">set slice text(handle, string id)</a><br>
		<a href="#about-getslicetext">get slice text(string id, slice handle)</a><br>
		<a href="#about-expandstringsinslices">expand strings in slices(handle, saveslot)</a><br>
		<a href="#about-gettextcolor">get text color(handle)</a><br>
		<a href="#about-settextcolor">set text color(handle, color)</a><br>
		<a href="#about-gettextbg">get text bg(handle)</a><br>
		<a href="#about-settextbg">set text bg(handle, color)</a><br>
		<a href="#about-getoutline">get outline(handle)</a><br>
		<a href="#about-setoutline">set outline(handle, outline)</a><br>
		<a href="#about-getwrap">get wrap(handle)</a><br>
		<a href="#about-setwrap">set wrap(handle, wrap)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Grid%20Slices">Grid Slices</a><br>
		<ul class="content-shown">
		<a href="#about-creategrid">create grid (width, height, rows, columns)</a><br>
		<a href="#about-setgridcolumns">set grid columns (handle, columns)</a><br>
		<a href="#about-getgridcolumns">get grid columns (handle)</a><br>
		<a href="#about-setgridrows">set grid rows (handle, rows)</a><br>
		<a href="#about-getgridrows">get grid rows (handle)</a><br>
		<a href="#about-showgrid">show grid (handle, shown)</a><br>
		<a href="#about-gridisshown">grid is shown (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Select%20Slices">Select Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createselect">create select (width, height)</a><br>
		<a href="#about-setselectsliceindex">set select slice index (handle, index)</a><br>
		<a href="#about-getselectsliceindex">get select slice index (handle)</a><br>
		<a href="#about-setselectedchild">set selected child (select, child)</a><br>
		<a href="#about-getselectedchild">get selected child (handle)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Scroll%20Slices">Scroll Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createscroll">create scroll (width, height)</a><br>
		<a href="#about-setscrollbarstyle">set scroll bar style (handle, style)</a><br>
		<a href="#about-getscrollbarstyle">get scroll bar style (handle)</a><br>
		<a href="#about-setscrollcheckdepth">set scroll check depth (handle, depth)</a><br>
		<a href="#about-getscrollcheckdepth">get scroll check depth (handle)</a><br>
		<a href="#about-scrolltoslice">scroll to child</a><br>
		<a href="#about-scrolltoslice">scroll to slice (parent, sl, apply padding)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Panel%20Slices">Panel Slices</a><br>
		<ul class="content-shown">
		<a href="#about-createpanel">create panel (width, height)</a><br>
		<a href="#about-getpanelisvertical">get panel is vertical (handle)</a><br>
		<a href="#about-setpanelisvertical">set panel is vertical (handle, value)</a><br>
		<a href="#about-getpanelprimaryindex">get panel primary index (handle)</a><br>
		<a href="#about-setpanelprimaryindex">set panel primary index (handle, zero or one)</a><br>
		<a href="#about-getpanelpercentasint">get panel percent as int (handle)</a><br>
		<a href="#about-setpanelpercent">set panel percent (handle, percent)</a><br>
		<a href="#about-getpanelpixels">get panel pixels (handle)</a><br>
		<a href="#about-setpanelpixels">set panel pixels (handle, pixels)</a><br>
		<a href="#about-getpanelpadding">get panel padding (handle)</a><br>
		<a href="#about-setpanelpadding">set panel padding (handle, padding)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Map%20Layer%20Slices">Map Layer Slices</a><br>
		<ul class="content-shown"></ul>
<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Slice%20Collision%20Testing">Slice Collision Testing</a><br>
		<ul class="content-shown">
		<a href="#about-slicecollidepoint">slice collide point (handle, x, y)</a><br>
		<a href="#about-slicecollide">slice collide (handle1, handle2)</a><br>
		<a href="#about-slicecontains">slice contains (handle1, handle2)</a><br>
		<a href="#about-sliceatpixel">slice at pixel (parent, x, y, number, check descendants, visible only)</a><br>
		<a href="#about-findcollidingslice">find colliding slice (parent, slice, number, check descendants, visible only)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-setparent"></a>
				<h4>set parent (handle, parent handle)</h4>
<p>
			Moves a slice <span class="param">handle</span> to a different <span class="param">parent handle</span>. A slice is connected to its parent, and is positioned based on its parent's position. When you move a slice to a new parent, it will become that parent's last child, meaning it will be drawn on top of any other children that the parent already had.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-parentslice" class="ref">parent slice</a>, </li>
<li>
<a href="#about-checkparentage" class="ref">check parentage</a>, </li>
<li><a href="#about-slicechild" class="ref">slice child</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sliceisvalid"></a>
				<h4>slice is valid (id)</h4>
<p>
			
				Returns true if the given <span class="param">id</span> is a valid slice handle to some existing slice.
				However this tells you nothing about whether the slice it points to is the original one.
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					<b>You should almost never use this command.</b>
					Just because a slice handle is valid doesn't mean it points to the slice that you expected.
					After a slice is deleted, its handle can be reused for new slices!
					If you delete a slice but still have a slice handle to it stored in a variable,
					you must never access that handle again, because it will either be invalid,
					causing an error when you use it, or even worse, it will point to some
					random slice, which is a bug in your script!
					For alternatives to sliceisvalid, please see the examples.
				</div>
				When you want to check whether the result of a slice command is a valid slice,
				you can just test whether the handle is <span class="param">false</span>, as this example shows:
				<pre>
variable(sl)
# Let's find a slice.
sl := lookup code(sl:textbox portrait box)
# Does this special slice exist?
# You could write if(slice is valid(sl)) then (....),
# and it would be correct to do so, but it's pointless.
# You should just write this instead:
if (sl) then (....)
# All commands that normally return a slice handle and might fail will return 'false',
# so there is never a need to use sliceisvalid in that situation.
				</pre>
				The following example shows how to be safe when deleting a slice:
				<pre>
global variable (1, bullet slice)

###### Suppose we have one script that creates a temporary slice:

plotscript, fire bullet, begin
	bullet slice := create rect (3, 3)
	...
end

###### And somewhere else (say, inside our main loop) we want to use it:

	# Test for collision with the player
	if (slice collide (bullet slice, get hero slice(me))) then (
		...

		###### Also, the temp slice can be deleted:
		# Bullet is destroyed
		free slice (bullet slice)
	)

###### Wait! First we need to test if there is a bullet slice at all, or we have an error.
###### You might be tempted to use sliceisvalid:

	if (slice is valid (bullet slice)) then (     # &lt;--- Sometimes returns WRONG result!
		# Test for collision with the player
		if (slice collide (bullet slice, get hero slice(me))) then (
			...
		)
	)

###### That's a mistake. Instead, you should make sure to set the variable
###### bulletslice to 0 in every single place you delete it.
###### Some of other places aren't obvious! They include leaving the map, or loading a saved game!

	if (bullet slice) then (     # &lt;--- Since we do the needed bookkeeping, this is correct
		# Test for collision with the player
		if (slice collide (bullet slice, get hero slice(me))) then (
			...
			# Bullet is destroyed
			free slice (bullet slice)
			bullet slice := 0     # &lt;--- Very important!
		)
	)
				</pre>
			
			
			
			
		</p>
</div>
		<div class="command">
		<h4>dump slice tree (slice)</h4>
		<p><a href="#about-dumpslicetree">Documented in the Debugging section.</a></p>
		</div>
		<div class="command">
			<a name="about-freeslice"></a>
				<h4>free slice (handle)</h4>
<p>
			
				Deletes a slice and any child slices.
				This works on any type of slice.
				This removes the slice from the screen and removes it from memory.
				You should free your slices after you are completely done with them.
				<br>
				Freeing the same slice handle twice shows a warning
				(if slice error reporting is enabled, e.g. while testing your game).
				However, <span class="code">free slice (0)</span> is fine.
				It's good practice to set a variable containing a slice handle to 0
				after you free it, so that the script can test whether the slice
				exists or not. (<a href="#about-sliceisvalid" class="ref">slice is valid</a> is not reliable.)
			
			
			<pre>
script, simple example, begin
  variable(sl)
  sl := load hero sprite(0)
  wait(20)
  free slice(sl)
end

script, example with children, begin
  variable(box, sl)
  
  # create a box
  box := create rect(100, 60)
  
  # center a hero as a child of the box
  sl := load hero sprite(0)
  set parent(sl, box)
  center slice(sl)
  
  wait(20)
  
  # when you free the box, the hero will be freed too
  free slice(box)

  # The sprite is gone now, so if you use the handle that used to point
  # to it, you will get an error message in your g_debug.txt file
  position sprite(sl, 25, 25)
end

script, wrong way to free in a loop, begin
  # this loop is the WRONG way to remove all sprites that show frame number 1
  # because removing a slice inside a loop will interfere with the "next sibling"
  # command causing the loop to end early
  variable(sl)
  sl := first child(sprite layer)
  while(sl) do, begin
    if(slice is sprite(sl)) then, begin
      if(get sprite frame(sl) == 1) then(free slice(sl))
    end
    sl := next sibling(sl)
  end
end

script, right way to free in a loop, begin
  # this loop is the right way to remove all sprites that show frame number 1
  # by waiting until AFTER the "next sibling" command, we can free the slice
  # without ending the loop early
  variable(sl, deleteme)
  sl := first child(sprite layer)
  while(sl) do, begin
    deleteme := 0
    if(slice is sprite(sl)) then, begin
      if(get sprite frame(sl) == 1) then(deleteme := sl)
    end
    sl := next sibling(sl)
    if(deleteme) then(free slice(deleteme))
  end
end
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-freesprite" class="ref">free sprite</a>, </li>
<li><a href="#about-freeslicechildren" class="ref">free slice children</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-freeslicechildren"></a>
				<h4>free slice children (handle)</h4>
<p>
			Frees all the children of a slice, but not the slice itself. See <a href="#about-freeslice" class="ref">free slice</a> for more details.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-freeslice" class="ref">free slice</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-cloneslice"></a>
				<h4>clone slice (handle, recurse)</h4>
<p>
			
				Copies (clones) a slice.
				If the optional argument <span class="param">recurse</span> is true (which is the default),
				then all its children and descendents are copied too.
				Returns the slice handle for the copy, which has the same parent,
				and becomes the previous sibling to <span class="param">handle</span>.
				<br>
				You can copy a protected slice (such as an NPC); the result isn't protected.
				Any slices with special lookup codes (those listed in <a href="#about-lookupslice" class="ref">lookup slice</a>)
				won't have their lookup codes copied; they'll be set to 0 instead.
				Passing the root slice or a Map slice as <span class="param">handle</span> is an error.
				Trying to clone a slice which has a Map slice as a descendent is OK,
				the Map slices just won't be copied.
				Any slices of type Special (such as the textbox or script layers) will be copied as
				plain Container slices (there isn't really any difference between them).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Ongoing slice movement (e.g. velocity) and sprite dissolves are copied into the clone too,
					so you might need to reset those.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setsliceextra"></a>
				<h4>set slice extra (handle, extra, value)</h4>
<p>
			Sets one of three extra data variables that every slice has, on the slice <span class="param">handle</span>. <span class="param">extra</span> is a number from 0 to 2 which indicates which extra data field to write  (you may also use the constants <span class="param">extra 0</span>, <span class="param">extra 1</span>, <span class="param">extra 2</span>). The extra data has no meaning to the slice, it is only for use by scripts.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getsliceextra" class="ref">get slice extra</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getsliceextra"></a>
				<h4>get slice extra (handle, extra)</h4>
<p>
			Retrieve an extra data value previously set on a slice <span class="param">handle</span> with <a href="#about-setsliceextra" class="ref">set slice extra</a>. <span class="param">extra</span> is a number from 0 to 2 which indicates which extra data field to read.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-reparenttonpc"></a>
				<h4>reparent to npc (handle, npc)</h4>
<p>
			Reparent a slice <span class="param">handle</span> so that it is attached to an NPC's sprite. The <span class="param">npc</span> argument can be an ID number or an NPC reference. The slice will be parented to the NPC's sprite component. If you want it to be parented to the NPC's container slice you should use <a href="#about-setparent" class="ref">set parent</a>(<span class="param">handle</span>, <a href="#about-getnpcslice" class="ref">get npc slice</a>(<span class="param">npc</span>)) instead.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-reparenttohero"></a>
				<h4>reparent to hero (handle, hero)</h4>
<p>
			Reparent a slice <span class="param">handle</span> so that it is attached to an hero's walkabout caterpillar sprite. The <span class="param">hero</span> argument is the hero's rank in the caterpillar party. The slice will be parented to the hero's sprite component. If you want it to be parented to the hero's container slice you should use <a href="#about-setparent" class="ref">set parent</a>(<span class="param">handle</span>, <a href="#about-getheroslice" class="ref">get hero slice</a>(<span class="param">hero</span>)) instead.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Getting%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Getting Slices</h3>
		<p>This section describes commands to find existing slices or load them from a defined slice collection. Commands to create slices are in other sections.</p>
<ul></ul>
		<div class="command">
			<a name="about-loadslicecollection"></a>
				<h4>load slice collection (id)</h4>
<p>
			Loads a collection of slices that you have defined in the slice collection editor. The argument is the <span class="param">id</span> number of the collection. The return value is a handle to the container that holds the loaded collection.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-lookupslice"></a>
				<h4>lookup slice (lookup code, start slice)</h4>
<p>
			
				Search for an important slice using a <a href="#about-lookupcode" class="ref">slice lookup code</a>, and return a handle to it, or 0 if it is not found.
				You can optionally specify a slice for the <span class="param">lookup slice</span> command to start searching from,
				but if you do not, the whole slice tree will be searched.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You can use a number as a lookup code, but usually you use a builtin code constant, starting with <span class="code">sl:</span>
					(see below), or name a code in the slice editor, in which case the constant will start with <span class="code">sli:</span>.
					Don't mix them up!
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Although the user-defined slice lookup codes are always safe to use for any purpose, there is a lot of potential mischief that you can do with a handle to a special slice. If you do anything dubious, like reordering, reparenting, or god forbid freeing the special slice, don't expect your scripts to work in later versions of the engine, which are likely to impose stricter restrictions! Deleting or reparenting special slices generally won't work. You may parent your own slices to these special slices, though.</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Be aware that when there is more than one slice with the same lookup code, the <span class="param">lookup slice</span> command will only return the first one it finds in a depth-first search. If you need to find multiple slices with the same lookup code, you must search manually using <a href="#about-getslicelookup" class="ref">get slice lookup</a>.</div>
			You may <a href="#about-setparent" class="ref">set parent</a> a slice to a map layer to make it move with the camera just like heroes and NPCs do.
			
			
			<pre>
# this example loads a saved slice collection,
# and gets a handle to a slice in it that you
# have marked with a slice lookup code name.
variable(collection, sl)
collection := load slice collection(5)
sl := lookup slice(sli:my special slice, collection)
</pre><pre>
# this example gets a handle to the portrait of the currently displaying
# text box (if any) and allows you to manipulate it.
variable(portrait)
portrait := lookup slice(sl:textbox portrait)
if(portrait) then(
  replace portrait sprite(portrait, 5)
)

# This is a list of special slice lookup codes
lookup slice(sl:root)
lookup slice(sl:textbox text)
lookup slice(sl:textbox portrait)
lookup slice(sl:textbox choice0)
lookup slice(sl:textbox choice1)
lookup slice(sl:textbox box)
lookup slice(sl:textbox portrait box)
lookup slice(sl:textbox choice box)
lookup slice(sl:textbox root)
lookup slice(sl:script layer)
lookup slice(sl:textbox layer)
lookup slice(sl:string layer)
lookup slice(sl:reserve)
lookup slice(sl:maproot)
lookup slice(sl:obsolete overhead)
lookup slice(sl:map overlay)
lookup slice(sl:walkabout layer)
lookup slice(sl:hero layer)
lookup slice(sl:npc layer)
lookup slice(sl:walkabout sprite)
lookup slice(sl:walkabout sprite component)  # Same as lookup slice(sl:walkabout sprite)
lookup slice(sl:walkabout shadow)
lookup slice(sl:walkabout shadow component)  # Same as lookup slice(sl:walkabout shadow)
lookup slice(sl:backdrop)
lookup slice(sl:map layer0)
lookup slice(sl:map layer1)
lookup slice(sl:map layer2)
lookup slice(sl:map layer3)
lookup slice(sl:map layer4)
lookup slice(sl:map layer5)
lookup slice(sl:map layer6)
lookup slice(sl:map layer7)
lookup slice(sl:map layer8)
lookup slice(sl:map layer9)
lookup slice(sl:map layer10)
lookup slice(sl:map layer11)
lookup slice(sl:map layer12)
lookup slice(sl:map layer13)
lookup slice(sl:map layer14)
lookup slice(sl:map layer15)
lookup slice(sl:pathfind dest display)
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicelookup" class="ref">set slice lookup</a>, </li>
<li><a href="#about-getslicelookup" class="ref">get slice lookup</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-spritelayer"></a>
				<h4>sprite layer</h4>
<p>
			Returns a slice handle for the slice (also called the 'script layer') which is the default parent of all new script-created slices, such as created by <a href="#about-loadherosprite" class="ref">load hero sprite</a> and <a href="#about-createrect" class="ref">create rect</a>. You can move slices elsewhere in the slice tree with <a href="#about-setparent" class="ref">set parent</a>. You can use spritelayer together with <a href="#about-firstchild" class="ref">first child</a> if you want to loop through all your slices without knowing their handles. Another way to get this slice is to use <a href="#about-lookupslice" class="ref">lookup slice</a>: <span class="param">lookup slice(sl:script layer)</span>.
			
			<pre>variable(sl)
sl := first child(sprite layer)
while (sl) do, begin
 if (slice is sprite(sl)) then, begin
   # do an operation on each sprite
 end
 sl := next sibling(sl)
end
</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-getslicelookup"></a>
				<h4>get slice lookup (handle)</h4>
<p>
			Returns the <a href="#about-lookupcode" class="ref">slice lookup code</a> of a slice, or <a href="#about-false" class="ref">false</a> if it has none. You can compare the result with the <span class="param">sli:</span> slice lookup values in your hsi file, or with the <span class="param">sl:</span> special builtin lookup values
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-lookupslice" class="ref">lookup slice</a>, </li>
<li><a href="#about-setslicelookup" class="ref">set slice lookup</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicelookup"></a>
				<h4>set slice lookup (handle, code)</h4>
<p>
			
				Changes the lookup code of a slice.
				The first argument is the <a href="#about-slicehandle" class="ref">slice handle</a>, the second is the new <a href="#about-lookupcode" class="ref">slice lookup code</a>.
				You can pass <a href="#about-false" class="ref">false</a> as the lookup code to remove it.
				The <span class="param">code</span> can be either a lookup code you named in the slice editor,
				which is available as a constant with a <span class="code">sli:</span> prefix added (e.g. "menubg" becomes <span class="code">sli:menubg</span>),
				or any positive number - you don't have to give a name to a lookup code
				before using it!
				(The values of <span class="code">sli:</span> codes count up from 1, so use large numbers for unnamed
				lookup codes, to avoid clashing).
				<br>
				You can't use <span class="code">sl:</span> special builtin lookup codes,
				nor can you modify the lookup code of slices that already have special lookup codes.
				Only user-defined lookup codes can be changed. Built-in special lookup codes cannot.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-lookupslice" class="ref">lookup slice</a>, </li>
<li><a href="#about-getslicelookup" class="ref">get slice lookup</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>get slice lookup name (string id, code, use default name)</h4>
		<p><a href="#about-getslicelookupname">Documented in the Debugging section.</a></p>
		</div>
		<div class="command">
			<a name="about-getheroslice"></a>
				<h4>get hero slice (rank)</h4>
<p>
			
				Get a hero walkabout container slice (the parent of all slices for the hero).
				<span class="param">rank</span> is the hero's rank in the walkabout caterpillar, from 0-3,
				e.g. <a href="#about-me" class="ref">me</a> for the leader.
				Returns 0 if there is no hero in that rank in the active party,
				but still returns the slice even if the caterpillar party is disabled
				(the slice will be hidden).
				You can use <a href="#about-getheroslicebyslot" class="ref">get hero slice by slot</a> instead, which works for heroes
				in the reserve party too.
				<br>
				You won't be able to manually reposition this slice (e.g. <a href="#about-putslice" class="ref">put slice</a> does not work) - use <a href="#about-puthero" class="ref">put hero</a> instead.
				<br>
				Once you have this slice you can access any other slices attached to the hero, such as the sprite slice
				(e.g. <a href="#about-lookupslice" class="ref">lookup slice</a><span class="code">(sl:walkabout sprite component, get hero slice(rank))</span>, which is equivalent to <a href="#about-getherosprite" class="ref">get hero sprite</a><span class="code">(rank)</span>),
				or attach other slices to a hero walkabout.
				See <a href="#about-lookupslice" class="ref">lookup slice</a> for the different walkabout components.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getheroslicebyslot" class="ref">get hero slice by slot</a>, </li>
<li>
<a href="#about-herorankfromslice" class="ref">hero rank from slice</a>, </li>
<li><a href="#about-getnpcslice" class="ref">get npc slice</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getheroslicebyslot"></a>
				<h4>get hero slice by slot (slot)</h4>
<p>
			
				Get a hero walkabout container slice (the parent of all slices for the hero),
				from the <span class="param">slot</span> in the hero party.
				Returns 0 if there is no hero in that slot.
				<br>
				This is an alternative to <a href="#about-getheroslice" class="ref">get hero slice</a>, see that command for more info.
				<br>
				<span class="param">slot</span> can even be in the reserve party: all heroes have slices.
				Slices for heroes in the reserve party are parented to the special 'Reserve'
				slice (<span class="code">lookup slice(sl:reserve)</span>) instead of to a walktabout layer.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getheroslice" class="ref">get hero slice</a>, </li>
<li>
<a href="#about-heroslotfromslice" class="ref">hero slot from slice</a>, </li>
<li><a href="#about-getherospritebyslot" class="ref">get hero sprite by slot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getherosprite"></a>
				<h4>get hero sprite (rank)</h4>
<p>
			
				Get the walkabout sprite slice for a hero.
				<span class="param">rank</span> is the hero's rank in the walkabout caterpillar (0-3),
				e.g. <a href="#about-me" class="ref">me</a> for the leader.
				This is equivalent to
				<a href="#about-lookupslice" class="ref">lookup slice</a><span class="code">(sl:walkabout sprite component, get hero slice(rank))</span>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getheroslice" class="ref">get hero slice</a>, </li>
<li><a href="#about-getherospritebyslot" class="ref">get hero sprite by slot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getherospritebyslot"></a>
				<h4>get hero sprite by slot (slot)</h4>
<p>
			
				Get the walkabout sprite slice for a hero.
				<span class="param">slot</span> is the hero's slot in the party, including reserve party slots.
				This is equivalent to
				<a href="#about-lookupslice" class="ref">lookup slice</a><span class="code">(sl:walkabout sprite component, get hero slice by slot(slot))</span>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getherosprite" class="ref">get hero sprite</a>, </li>
<li><a href="#about-getheroslice" class="ref">get hero slice</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-herorankfromslice"></a>
				<h4>hero rank from slice (handle)</h4>
<p>
			
				The opposite of <a href="#about-getheroslice" class="ref">get hero slice</a>:
				Given a slice <span class="param">handle</span>, check whether it's the walkabout container slice of some hero,
				and if so, returns the hero rank in the party
				(always a number between 0 and 3 if the hero is in the active party).
				If it doesn't belong to any hero, returns -1, <b>not</b> 0/false, like
				<a href="#about-npcreferencefromslice" class="ref">npc reference from slice</a> does!
				<br>
				This also returns -1 for slices parented to a hero slice, such as the 'walkabout
				sprite component'.
				<br>
				This command is useful if you've detected a collision between two slices
				(e.g. using <a href="#about-findcollidingslice" class="ref">find colliding slice</a>), such as a projectile and another slice,
				and you want to check whether the projectile hit a hero, and which one.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-heroslotfromslice" class="ref">hero slot from slice</a>, </li>
<li>
<a href="#about-getheroslice" class="ref">get hero slice</a>, </li>
<li><a href="#about-npcreferencefromslice" class="ref">npc reference from slice</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-heroslotfromslice"></a>
				<h4>hero slot from slice (handle)</h4>
<p>
			
				The opposite of <a href="#about-getheroslicebyslot" class="ref">get hero slice by slot</a>:
				Given a slice <span class="param">handle</span>, check whether it's the walkabout container slice of some hero,
				and if so, returns the hero's party slot (0 or higher).
				If it doesn't belong to any hero, returns -1, <b>not</b> 0/false, like
				<a href="#about-npcreferencefromslice" class="ref">npc reference from slice</a> does!
				<br>
				See <a href="#about-herorankfromslice" class="ref">hero rank from slice</a> for more information.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-herorankfromslice" class="ref">hero rank from slice</a>, </li>
<li>
<a href="#about-getheroslicebyslot" class="ref">get hero slice by slot</a>, </li>
<li><a href="#about-npcreferencefromslice" class="ref">npc reference from slice</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcslice"></a>
				<h4>get npc slice (npc)</h4>
<p>
			
				Get an NPC walkabout container slice (the parent of all slices for the NPC).
				The argument is an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a>.
				If the NPC is tag-disabled, it has no slice so this command returns 0/false.
				If there are no copies of an NPC ID on the map, an error is thrown.
				You will not be able to manually reposition this slice (e.g. <a href="#about-putslice" class="ref">put slice</a> does not work) - use <a href="#about-putnpc" class="ref">put NPC</a> instead.
				<br>
				Once you have this slice you can access any other slices attached to the npc, such as the sprite slice
				(e.g. <a href="#about-lookupslice" class="ref">lookup slice</a><span class="code">(sl:walkabout sprite component, get npc slice(npc))</span>, which is equivalent to <a href="#about-getnpcsprite" class="ref">get npc sprite</a><span class="code">(npc)</span>),
				or attach other slices to an npc walkabout.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-npcreferencefromslice" class="ref">npc reference from slice</a>, </li>
<li><a href="#about-getheroslice" class="ref">get hero slice</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getnpcsprite"></a>
				<h4>get npc sprite (npc)</h4>
<p>
			
				Get the walkabout sprite slice for a npc.
				<span class="param">npc</span> is an <a href="#about-npcref" class="ref">NPC reference</a> or <a href="#about-npcid" class="ref">NPC ID</a>.
				This is equivalent to
				<a href="#about-lookupslice" class="ref">lookup slice</a><span class="code">(sl:walkabout sprite component, get npc slice(npc))</span>.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getnpcslice" class="ref">get npc slice</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-npcreferencefromslice"></a>
				<h4>npc reference from slice (handle)</h4>
<p>
			
				The opposite of <a href="#about-getnpcslice" class="ref">get npc slice</a>:
				Given a slice <span class="param">handle</span>, check whether it's the walkabout container slice of some NPC,
				and if so, returns the <a href="#about-npcref" class="ref">NPC reference</a>.
				If it doesn't belong to any NPC, returns 0.
				<br>
				This also returns 0 for slices parented to the NPC's slices, such as the 'walkabout
				sprite component'.
				<br>
				This command is useful if you've detected a collision between two slices
				(e.g. using <a href="#about-findcollidingslice" class="ref">find colliding slice</a>), such as a projectile and another slice,
				and you want to check whether the projectile hit an NPC, and which one.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-herorankfromslice" class="ref">hero rank from slice</a>, </li>
<li><a href="#about-getnpcslice" class="ref">get npc slice</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Slice%20Sizing"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Slice Sizing</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-slicewidth"></a>
				<h4>slice width (handle)</h4>
<p>
			Returns the width of any slice, for example a sprite.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sliceheight" class="ref">slice height</a>, </li>
<li><a href="#about-setslicewidth" class="ref">set slice width</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sliceheight"></a>
				<h4>slice height (handle)</h4>
<p>
			Returns the height of any slice, for example a sprite.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicewidth" class="ref">slice width</a>, </li>
<li><a href="#about-setsliceheight" class="ref">set slice height</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicewidth"></a>
				<h4>set slice width (handle, width)</h4>
<p>
			
				Changes the width of a slice.
				This command doesn't work (and shows an error)
				on sprite and map slices, on text slices that aren't set to wrap,
				and on slices set to Fill Parent, because they all have a fixed size.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicewidth" class="ref">slice width</a>, </li>
<li>
<a href="#about-setsliceheight" class="ref">set slice height</a>, </li>
<li><a href="#about-setslicesize" class="ref">set slice size</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setsliceheight"></a>
				<h4>set slice height (handle, height)</h4>
<p>
			
				Changes the height of a slice.
				This command doesn't work (and shows an error)
				on sprite and map slices, on text slices that aren't set to wrap,
				and on slices set to Fill Parent, because they all have a fixed size.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sliceheight" class="ref">slice height</a>, </li>
<li>
<a href="#about-setslicewidth" class="ref">set slice width</a>, </li>
<li><a href="#about-setslicesize" class="ref">set slice size</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicesize"></a>
				<h4>set slice size (handle, width, height)</h4>
<p>
			
				Changes the width and height of a slice.
				This command doesn't work (and shows an error)
				on sprite and map slices, on text slices that aren't set to wrap,
				and on slices set to Fill Parent, because they all have a fixed size.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicewidth" class="ref">set slice width</a>, </li>
<li><a href="#about-setsliceheight" class="ref">set slice height</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-clampslice"></a>
				<h4>clamp slice (slice, within slice)</h4>
<p>
			
				Try to move <span class="param">slice</span> so that its screen position will
				be inside the screen position of <span class="param">within slice</span>.
				The size of the slices will not be changed, so if
				<span class="param">within sl</span> isn't large enough to contain <span class="param">slice</span> it will stick out at least one side
				(it's shifted to align with the nearest vertical and nearest horizontal edge of <span class="param">within slice</span>).
				It does not matter whether the slices are related.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-slicecontains" class="ref">slice contains</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-fillparent"></a>
				<h4>fill parent (handle, true_or_false)</h4>
<p>
			Make a slice <span class="param">handle</span> automatically fill its parent. This will change the position and size of the slice so that it completely fills the parent (minus the parent's padding). You can also disable filling with this command by passing <span class="param">false</span> as the second argument, such as <span class="param">fill parent(handle, false)</span>. If a slice is filling its parent, then any commands which modify the width or height of the slice will fail. You should resize the parent instead. This command only works on rects and containers. It will not work on sprites because they cannot change size.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-isfillingparent" class="ref">is filling parent</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-isfillingparent"></a>
				<h4>is filling parent (handle)</h4>
<p>
			Returns true if a slice <span class="param">handle</span> is set to automatically fill its parent, or false if it is not. This command always returns false for sprite slice handles because sprites cannot be set to fill parent.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-fillparent" class="ref">fill parent</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Positioning%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Positioning Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-slicex"></a>
				<h4>slice x (handle)</h4>
<p>
			Returns the X position of any slice, for example a sprite. This position is relative to the slice's parent, and may depend upon the slice's Align settings.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you want the global position of a slice (i.e. relative to top-left of the map),
					use the <a href="#about-slicescreenx" class="ref">slice screen x</a> example script.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicey" class="ref">slice y</a>, </li>
<li>
<a href="#about-setslicex" class="ref">set slice x</a>, </li>
<li><a href="#about-slicescreenx" class="ref">slice screen x</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-slicey"></a>
				<h4>slice y (handle)</h4>
<p>
			Returns the Y position of any slice, for example a sprite. This position is relative to the slice's parent, and may depend upon the slice's Align settings.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicex" class="ref">slice x</a>, </li>
<li>
<a href="#about-setslicey" class="ref">set slice y</a>, </li>
<li><a href="#about-slicescreeny" class="ref">slice screen y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-putslice"></a>
				<h4>put slice (handle, X, Y)</h4>
<p>
			Changes the position of any slice, for example a sprite. This position is relative to the slice's parent, and may depend upon the slice's Align settings.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-putsprite" class="ref">put sprite</a>, </li>
<li>
<a href="#about-putslicescreen" class="ref">put slice screen</a>, </li>
<li><a href="#about-movesliceto" class="ref">move slice to</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicex"></a>
				<h4>set slice x (handle, X)</h4>
<p>
			
				Changes the X position of any slice, for example a sprite.
				This position is relative to the slice's parent.
				More exactly, it's the relative displacement between this slice's anchor point, and the selected align point on the parent.
				The position of the parent's align point also depends on the amount of padding the parent has.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-putslice" class="ref">put slice</a>, </li>
<li>
<a href="#about-slicex" class="ref">slice x</a>, </li>
<li><a href="#about-setslicey" class="ref">set slice y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicey"></a>
				<h4>set slice y (handle, Y)</h4>
<p>
			
				Changes the Y position of any slice, for example a sprite.
				This position is relative to the slice's parent.
				More exactly, it's the relative displacement between this slice's anchor point, and the selected align point on the parent.
				The position of the parent's align point also depends on the amount of padding the parent has.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-putslice" class="ref">put slice</a>, </li>
<li>
<a href="#about-slicey" class="ref">slice y</a>, </li>
<li><a href="#about-setslicex" class="ref">set slice x</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-slicescreenx"></a>
				<h4>slice screen x (handle)</h4>
<p>
			
				Returns the X position on the screen of the anchor point of a slice.
				This position is relative to the screen, so it is calculated based on not only the slice's X position,
				but also its alignment, and the position and size of its parents.
				However, the slice's anchor point setting doesn't affect this, because that
				specifies which point on the slice is attached to the anchor point.
			
			
			<pre># slice screen x can be used to compute the position of a slice on the map, in pixels:
variable (map x, map y)
map x := slice screen x(sl) + camera pixel x
map y := slice screen y(sl) + camera pixel y</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicescreeny" class="ref">slice screen y</a>, </li>
<li><a href="#about-slicex" class="ref">slice x</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-slicescreeny"></a>
				<h4>slice screen y (handle)</h4>
<p>
			
				Returns the Y position on the screen of the anchor point of a slice.
				This position is relative to the screen, so it is calculated based on not only the slice's Y position,
				but also its alignment, and the position and size of its parents.
				However, the slice's anchor point setting doesn't affect this, because that
				specifies which point on the slice is attached to the anchor point.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicescreenx" class="ref">slice screen x</a>, </li>
<li><a href="#about-slicey" class="ref">slice y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-putslicescreen"></a>
				<h4>put slice screen (handle, x, y)</h4>
<p>
			Change the screen position of any slice. The position of the slice relative to its parent will automatically be corrected. Alignment and anchor will not be changed. Note that this does not work when a slice is filling its parent.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-putslice" class="ref">put slice</a>, </li>
<li>
<a href="#about-slicescreenx" class="ref">slice screen x</a>, </li>
<li><a href="#about-setslicescreeny" class="ref">set slice screen y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicescreenx"></a>
				<h4>set slice screen x (handle, x)</h4>
<p>
			Change the screen X position of any slice. The position of the slice relative to its parent will automatically be corrected. Alignment and anchor will not be changed. Note that this does not work when a slice is filling its parent.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-putslicescreen" class="ref">put slice screen</a>, </li>
<li>
<a href="#about-slicescreenx" class="ref">slice screen x</a>, </li>
<li><a href="#about-setslicescreeny" class="ref">set slice screen y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicescreeny"></a>
				<h4>set slice screen y (handle, y)</h4>
<p>
			Change the screen Y position of any slice. The position of the slice relative to its parent will automatically be corrected. Alignment and anchor will not be changed. Note that this does not work when a slice is filling its parent.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-putslicescreen" class="ref">put slice screen</a>, </li>
<li>
<a href="#about-slicescreeny" class="ref">slice screen y</a>, </li>
<li><a href="#about-setslicescreenx" class="ref">set slice screen x</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Visibility%20and%20Clipping"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Visibility and Clipping</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-setslicevisible"></a>
				<h4>set slice visible (handle, vis)</h4>
<p>
			
				Makes slice <span class="param">handle</span> invisible or visible. <span class="param">vis</span> is a true or false value.
				Slices are automatically visible when you load them,
				but you can make them invisible with <span class="param">set slice visible(handle, off)</span>.
				If the slice has children, they will become invisible too.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setspritevisible"></a>
				<h4>set sprite visible</h4>
				An alias for <a href="#about-setslicevisible">set slice visible</a>.
			</div>
		<div class="command">
			<a name="about-getslicevisible"></a>
				<h4>get slice visible (handle)</h4>
<p>
			Returns the visibility setting for slice <span class="param">handle</span>.  This is true for visible, or false for invisible. Note that this only tells you if the slice is set to be invisible, it will not tell you if the slice is invisible for some other reason, such as if it is offscreen, or if it is the child of an invisible parent or grandparent.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setsliceclipping"></a>
				<h4>set slice clipping (handle, clip)</h4>
<p>
			Changes whether or not a slice will clip its children if they overflow its edges. The first argument is a slice <span class="param">handle</span>. The second argument is true to make the slice clip, or false to allow its children to overflow. (newly created slices do not clip by default)
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getsliceclipping"></a>
				<h4>get slice clipping (handle)</h4>
<p>
			Returns true if the slice <span class="param">handle</span> is set to clip drawing its children, or false if child slices are allowed to be drawn overflowing its edges.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Slice%20Blending"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Slice Blending</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-setopacity"></a>
				<h4>set opacity (handle, percent)</h4>
<p>
			
				Set the opacity (the opposite of transparency) of a slice.
				<span class="param">handle</span> is a <a href="#about-blendableslicehandle" class="ref">blendable slice handle</a>.
				<span class="param">percent</span> is normally a value from 0 to 100;
				values outside this range are clipped to 0-100 without showing an error.
				Opacity 0 is completely invisible, and 100 is fully opaque (solid) if the blending mode is 'Normal'.
				If the blending mode is 'Add' or 'Multiply', the slice is never opaque,
				due to how those work.
				<br>
				If <span class="code">percent &lt; 100</span> then blending is automatically enabled (<a href="#about-setblendingenabled" class="ref">set blending enabled</a>).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You have to use <a href="#about-setrectopacity" class="ref">set rect opacity</a> instead on Rect slices.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getopacity" class="ref">get opacity</a>, </li>
<li><a href="#about-setrectopacity" class="ref">set rect opacity</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getopacity"></a>
				<h4>get opacity (handle)</h4>
<p>
			
				Returns the opacity of any slice (from 0-100; see <a href="#about-setopacity" class="ref">set opacity</a>).
				<span class="param">handle</span> is a <a href="#about-slicehandle" class="ref">slice handle</a>;
				if it isn't a <a href="#about-blendableslicehandle" class="ref">blendable slice handle</a> or if blending is disabled
				for this slice, 100 is returned without showing an error.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You have to use <a href="#about-getrectopacity" class="ref">get rect opacity</a> instead on Rect slices.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setopacity" class="ref">set opacity</a>, </li>
<li><a href="#about-getrectopacity" class="ref">get rect opacity</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setblendmode"></a>
				<h4>set blend mode (handle, blend mode)</h4>
<p>
			
				Set the blending mode (aka blend mode) of a slice, also enables blending (<a href="#about-setblendingenabled" class="ref">set blending enabled</a>).
				<span class="param">handle</span> is a <a href="#about-blendableslicehandle" class="ref">blendable slice handle</a>.
				<span class="param">blend mode</span> is one of:
				<ul>
					<li>
<span class="code">blend:normal</span> -- (Default) Ordinary transparency; no effect if opacity is 100%</li>
					<li>
<span class="code">blend:add</span> or <span class="code">blend:additive</span> -- Lightens the image by adding to the RGB channels</li>
					<li>
<span class="code">blend:multiply </span> -- Darkens the image by multiplying the RGB channels</li>
				</ul>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getblendmode" class="ref">get blend mode</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getblendmode"></a>
				<h4>get blend mode (handle)</h4>
<p>
			
				Gets the blend mode of any slice (see <a href="#about-setblendmode" class="ref">set blend mode</a>).
				<span class="param">handle</span> is a <a href="#about-slicehandle" class="ref">slice handle</a>;
				if it isn't a <a href="#about-blendableslicehandle" class="ref">blendable slice handle</a> or if blending is disabled
				for this slice, then this returns <span class="code">blend:normal</span> without showing an error.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setblendmode" class="ref">set blend mode</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setblendingenabled"></a>
				<h4>set blending enabled (handle, state)</h4>
<p>
			
				Set whether blending (opacity and blend mode) is enabled for a slice.
				<span class="param">handle</span> is a <a href="#about-blendableslicehandle" class="ref">blendable slice handle</a>.
				<span class="param">state</span> is a true or false value.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You normally don't need to use this command, because setting a slice's opacity or
					blend mode will automatically enable blending.
					This command is only useful if you want to temporarily disable blending
					and then reenable it later, because disabling it (including in the slice editor)
					preserves the other blending settings, even though they're hidden in the editor.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getblendingenabled" class="ref">get blending enabled</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getblendingenabled"></a>
				<h4>get blending enabled (handle)</h4>
<p>
			
				Tells whether any slice has its blending settings, if any, enabled;
				returns <span class="code">true</span> or <span class="code">false</span>.
				<span class="param">handle</span> is a <a href="#about-slicehandle" class="ref">slice handle</a>;
				if it isn't a <a href="#about-blendableslicehandle" class="ref">blendable slice handle</a> then this returns <span class="code">false</span>
				without showing an error.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You normally wouldn't use this command for anything.
					Even if blending is enabled, that doesn't tell whether
					the slice is transparent/blended or appears normally.
					To check that, instead of this command, write
					<br>
					<span class="code">if (<a href="#about-getopacity" class="ref">get opacity</a>(sl) &lt; 100 || get blend mode(sl) &lt;&gt; blend:normal)</span>
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setblendingenabled" class="ref">set blending enabled</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Alignment%20and%20Anchor%20Points"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Alignment and Anchor Points</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-sliceedgex"></a>
				<h4>slice edge x (handle, edge)</h4>
<p>
			Returns the x position of a particular edge of a slice. Use the constants <span class="param">edge:left</span>, <span class="param">edge:center</span>, <span class="param">edge:right</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sliceedgey" class="ref">slice edge y</a>, </li>
<li>
<a href="#about-setsliceedgex" class="ref">set slice edge x</a>, </li>
<li><a href="#about-setsliceedgey" class="ref">set slice edge y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sliceedgey"></a>
				<h4>slice edge y (handle, edge)</h4>
<p>
			Returns the y position of a particular edge of a slice. Use the constants <span class="param">edge:top</span>, <span class="param">edge:middle</span>, <span class="param">edge:bottom</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sliceedgex" class="ref">slice edge x</a>, </li>
<li>
<a href="#about-setsliceedgex" class="ref">set slice edge x</a>, </li>
<li><a href="#about-setsliceedgey" class="ref">set slice edge y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setsliceedgex"></a>
				<h4>set slice edge x (handle, edge, value)</h4>
<p>
			Changes the X position of a specific edge of a slice. This is like <a href="#about-setslicex" class="ref">set slice x</a>, except that you can set by any edge regardless of the slice's anchor. Use the constants <span class="param">edge:left</span>, <span class="param">edge:center</span>, <span class="param">edge:right</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sliceedgex" class="ref">slice edge x</a>, </li>
<li>
<a href="#about-sliceedgey" class="ref">slice edge y</a>, </li>
<li><a href="#about-setsliceedgey" class="ref">set slice edge y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setsliceedgey"></a>
				<h4>set slice edge y (handle, edge, value)</h4>
<p>
			Changes the Y position of a specific edge of a slice. This is like <a href="#about-setslicey" class="ref">set slice y</a>, except that you can set by any edge regardless of the slice's anchor. Use the constants <span class="param">edge:top</span>, <span class="param">edge:middle</span>, <span class="param">edge:bottom</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sliceedgex" class="ref">slice edge x</a>, </li>
<li>
<a href="#about-sliceedgey" class="ref">slice edge y</a>, </li>
<li><a href="#about-setsliceedgex" class="ref">set slice edge x</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sethorizalign"></a>
				<h4>set horiz align (handle, edge)</h4>
<p>
			Changes the horizontal alignment of any slice relative to its parent. The available edges are <span class="param">edge:left</span>, <span class="param">edge:center</span>, <span class="param">edge:right</span>. (Not the <span class="code">align:</span> constants used by menus!) The default value is edge:left.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setvertalign" class="ref">set vert align</a>, </li>
<li>
<a href="#about-sethorizanchor" class="ref">set horiz anchor</a>, </li>
<li>
<a href="#about-setvertanchor" class="ref">set vert anchor</a>, </li>
<li><a href="#about-gethorizalign" class="ref">get horiz align</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setvertalign"></a>
				<h4>set vert align (handle, edge)</h4>
<p>
			Changes the vertical alignment of any slice relative to its parent. The available edges are <span class="param">edge:top</span>, <span class="param">edge:middle</span>, <span class="param">edge:bottom</span>. (Not the <span class="code">align:</span> constants used by menus!) The default value is edge:top.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sethorizalign" class="ref">set horiz align</a>, </li>
<li>
<a href="#about-sethorizanchor" class="ref">set horiz anchor</a>, </li>
<li>
<a href="#about-setvertanchor" class="ref">set vert anchor</a>, </li>
<li><a href="#about-getvertalign" class="ref">get vert align</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sethorizanchor"></a>
				<h4>set horiz anchor (handle, edge)</h4>
<p>
			Changes the horizontal anchor of any slice. The available anchor values are <span class="param">edge:left</span>, <span class="param">edge:center</span>, <span class="param">edge:right</span>. (Not the <span class="code">align:</span> constants used by menus!) The default value is edge:left.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setvertalign" class="ref">set vert align</a>, </li>
<li>
<a href="#about-sethorizalign" class="ref">set horiz align</a>, </li>
<li>
<a href="#about-setvertanchor" class="ref">set vert anchor</a>, </li>
<li><a href="#about-gethorizanchor" class="ref">get horiz anchor</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setvertanchor"></a>
				<h4>set vert anchor (handle, edge)</h4>
<p>
			Changes the vertical anchor of any slice. The available anchor values are <span class="param">edge:top</span>, <span class="param">edge:middle</span>, <span class="param">edge:bottom</span>. (Not the <span class="code">align:</span> constants used by menus!) The default value is edge:top.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setvertalign" class="ref">set vert align</a>, </li>
<li>
<a href="#about-sethorizalign" class="ref">set horiz align</a>, </li>
<li>
<a href="#about-sethorizanchor" class="ref">set horiz anchor</a>, </li>
<li><a href="#about-getvertanchor" class="ref">get vert anchor</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gethorizalign"></a>
				<h4>get horiz align (handle)</h4>
<p>
			Returns the horizontal alignment of any slice relative to its parent. The return value will be one of <span class="param">edge:left</span>, <span class="param">edge:center</span>, <span class="param">edge:right</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getvertalign" class="ref">get vert align</a>, </li>
<li>
<a href="#about-gethorizanchor" class="ref">get horiz anchor</a>, </li>
<li>
<a href="#about-getvertanchor" class="ref">get vert anchor</a>, </li>
<li><a href="#about-sethorizalign" class="ref">set horiz align</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getvertalign"></a>
				<h4>get vert align (handle)</h4>
<p>
			Returns the vertical alignment of any slice relative to its parent. The return value will be one of <span class="param">edge:top</span>, <span class="param">edge:middle</span>, <span class="param">edge:bottom</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-gethorizalign" class="ref">get horiz align</a>, </li>
<li>
<a href="#about-gethorizanchor" class="ref">get horiz anchor</a>, </li>
<li>
<a href="#about-getvertanchor" class="ref">get vert anchor</a>, </li>
<li><a href="#about-setvertalign" class="ref">set vert align</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gethorizanchor"></a>
				<h4>get horiz anchor (handle)</h4>
<p>
			Returns the horizontal anchor that a slice uses to position itself relative to its parent. The return value will be one of <span class="param">edge:left</span>, <span class="param">edge:center</span>, <span class="param">edge:right</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getvertanchor" class="ref">get vert anchor</a>, </li>
<li>
<a href="#about-gethorizalign" class="ref">get horiz align</a>, </li>
<li>
<a href="#about-getvertalign" class="ref">get vert align</a>, </li>
<li><a href="#about-sethorizanchor" class="ref">set horiz anchor</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getvertanchor"></a>
				<h4>get vert anchor (handle)</h4>
<p>
			Returns the vertical anchor that a slice uses to position itself relative to its parent. The return value will be one of <span class="param">edge:top</span>, <span class="param">edge:middle</span>, <span class="param">edge:bottom</span>. (Not the <span class="code">align:</span> constants used by menus!)
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-gethorizanchor" class="ref">get horiz anchor</a>, </li>
<li>
<a href="#about-gethorizalign" class="ref">get horiz align</a>, </li>
<li>
<a href="#about-getvertalign" class="ref">get vert align</a>, </li>
<li><a href="#about-setvertanchor" class="ref">set vert anchor</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-realignslice"></a>
				<h4>realign slice (handle, horiz align, vert align, horiz anchor, vert anchor)</h4>
<p>
			A quick way to set the alignment and optionally the anchor of a slice with a single command. If you leave out the arguments for the anchor then only the alignment will be changed.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sethorizalign" class="ref">set horiz align</a>, </li>
<li>
<a href="#about-setvertalign" class="ref">set vert align</a>, </li>
<li>
<a href="#about-sethorizanchor" class="ref">set horiz anchor</a>, </li>
<li><a href="#about-setvertanchor" class="ref">set vert anchor</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-centerslice"></a>
				<h4>center slice (handle)</h4>
<p>
			A quick way to center the alignment and the anchor of a slice with a single command. Equivalent to <span class="param">realign slice(handle, edge:center, edge:center, edge:middle, edge:middle)</span>.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-realignslice" class="ref">realign slice</a>, </li>
<li>
<a href="#about-sethorizalign" class="ref">set horiz align</a>, </li>
<li>
<a href="#about-setvertalign" class="ref">set vert align</a>, </li>
<li>
<a href="#about-sethorizanchor" class="ref">set horiz anchor</a>, </li>
<li><a href="#about-setvertanchor" class="ref">set vert anchor</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Padding"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Padding</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-setpadding"></a>
				<h4>set padding (handle, pixels)</h4>
<p>
			Sets the padding value in pixels for all the edges of a slice <span class="param">handle</span>. This is a positive number to move children attached to the edges towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-settoppadding" class="ref">set top padding</a>, </li>
<li>
<a href="#about-setleftpadding" class="ref">set left padding</a>, </li>
<li>
<a href="#about-setrightpadding" class="ref">set right padding</a>, </li>
<li><a href="#about-setbottompadding" class="ref">set bottom padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gettoppadding"></a>
				<h4>get top padding (handle)</h4>
<p>
			Get the padding value in pixels for the top edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-settoppadding" class="ref">set top padding</a>, </li>
<li>
<a href="#about-getleftpadding" class="ref">get left padding</a>, </li>
<li>
<a href="#about-getrightpadding" class="ref">get right padding</a>, </li>
<li><a href="#about-getbottompadding" class="ref">get bottom padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-settoppadding"></a>
				<h4>set top padding (handle, pixels)</h4>
<p>
			Set the padding value in pixels for the top edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-gettoppadding" class="ref">get top padding</a>, </li>
<li>
<a href="#about-setleftpadding" class="ref">set left padding</a>, </li>
<li>
<a href="#about-setrightpadding" class="ref">set right padding</a>, </li>
<li><a href="#about-setbottompadding" class="ref">set bottom padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getleftpadding"></a>
				<h4>get left padding (handle)</h4>
<p>
			Get the padding value in pixels for the left edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setleftpadding" class="ref">set left padding</a>, </li>
<li>
<a href="#about-gettoppadding" class="ref">get top padding</a>, </li>
<li>
<a href="#about-getrightpadding" class="ref">get right padding</a>, </li>
<li><a href="#about-getbottompadding" class="ref">get bottom padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setleftpadding"></a>
				<h4>set left padding (handle, pixels)</h4>
<p>
			Set the padding value in pixels for the left edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getleftpadding" class="ref">get left padding</a>, </li>
<li>
<a href="#about-settoppadding" class="ref">set top padding</a>, </li>
<li>
<a href="#about-setrightpadding" class="ref">set right padding</a>, </li>
<li><a href="#about-setbottompadding" class="ref">set bottom padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getrightpadding"></a>
				<h4>get right padding (handle)</h4>
<p>
			Get the padding value in pixels for the right edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrightpadding" class="ref">set right padding</a>, </li>
<li>
<a href="#about-gettoppadding" class="ref">get top padding</a>, </li>
<li>
<a href="#about-getleftpadding" class="ref">get left padding</a>, </li>
<li><a href="#about-getbottompadding" class="ref">get bottom padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrightpadding"></a>
				<h4>set right padding (handle, pixels)</h4>
<p>
			Set the padding value in pixels for the right edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getrightpadding" class="ref">get right padding</a>, </li>
<li>
<a href="#about-settoppadding" class="ref">set top padding</a>, </li>
<li>
<a href="#about-setleftpadding" class="ref">set left padding</a>, </li>
<li><a href="#about-setbottompadding" class="ref">set bottom padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getbottompadding"></a>
				<h4>get bottom padding (handle)</h4>
<p>
			Get the padding value in pixels for the bottom edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setbottompadding" class="ref">set bottom padding</a>, </li>
<li>
<a href="#about-gettoppadding" class="ref">get top padding</a>, </li>
<li>
<a href="#about-getleftpadding" class="ref">get left padding</a>, </li>
<li><a href="#about-getrightpadding" class="ref">get right padding</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setbottompadding"></a>
				<h4>set bottom padding (handle, pixels)</h4>
<p>
			Set the padding value in pixels for the bottom edge of a slice <span class="param">handle</span>. This is a positive number to move children attached to this edge towards the center of the slice, or a negative number to move attached children further from the center.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getbottompadding" class="ref">get bottom padding</a>, </li>
<li>
<a href="#about-settoppadding" class="ref">set top padding</a>, </li>
<li>
<a href="#about-setleftpadding" class="ref">set left padding</a>, </li>
<li><a href="#about-setrightpadding" class="ref">set right padding</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Moving%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Moving Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-setslicevelocityx"></a>
				<h4>set slice velocity x (handle, pixels per tick, ticks)</h4>
<p>
			
				Cause slice <span class="param">handle</span> to start moving horizontally.
				A negative value for <span class="param">pixels per tick</span> moves left,
				and a positive value for <span class="param">pixels per tick</span> moves right.
				The <span class="param">ticks</span> argument is optional.
				If you do not specify the number of ticks, the slice will keep moving indefinitely.
				If you specify the number of ticks, the velocity will expire and be set back to
				zero automatically after that number of ticks has passed.
				<br>
				Calling this command causes movement due to <a href="#about-movesliceby" class="ref">move slice by</a> or
				<a href="#about-movesliceto" class="ref">move slice to</a>
				to be cancelled.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Movement in horizontal and vertical directions is independent,
					and can timeout after different numbers of ticks.
					For example if you set a slice's x velocity to 10 for 5 ticks,
					and y velocity to 10 for 2 ticks, it'll move diagonally down-right for
					2 ticks and then right for 3 ticks.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicevelocityy"></a>
				<h4>set slice velocity y (handle, pixels per tick, ticks)</h4>
<p>
			
				Cause slice <span class="param">handle</span> to start moving vertically.
				A negative value for <span class="param">pixels per tick</span> moves up,
				and a positive value for <span class="param">pixels per tick</span> moves down.
				The <span class="param">ticks</span> argument is optional.
				If you do not specify the number of ticks, the slice will keep moving indefinitely.
				If you specify the number of ticks, the velocity will expire and be set
				back to zero automatically after that number of ticks has passed.
				<br>
				Calling this command causes movement due to <a href="#about-movesliceby" class="ref">move slice by</a> or
				<a href="#about-movesliceto" class="ref">move slice to</a> to be cancelled.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Movement in horizontal and vertical directions is independent,
					and can timeout after different numbers of ticks.
					For example if you set a slice's x velocity to 10 for 5 ticks,
					and y velocity to 10 for 2 ticks, it'll move diagonally down-right
					for 2 ticks and then right for 3 ticks.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getslicevelocityx"></a>
				<h4>get slice velocity x (handle)</h4>
<p>
			Returns a number representing the horizontal velocity of slice <span class="param">handle</span>. The return value is in pixels per tick. A negative value means the slice is moving left, and a positive value means the slice is moving right.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getslicevelocityy"></a>
				<h4>get slice velocity y (handle)</h4>
<p>
			Returns a number representing the vertical velocity of slice <span class="param">handle</span>. The return value is in pixels per tick. A negative value means the slice is moving up, and a positive value means the slice is moving down.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setslicevelocity"></a>
				<h4>set slice velocity (handle, horiz pixels per tick, vert pixels per tick, ticks)</h4>
<p>
			
				Cause slice <span class="param">handle</span> to start moving.
				This is similar to using both <a href="#about-setslicevelocityx" class="ref">set slice velocity x</a> and
				<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a> at the same time (except that those let you use
				different <span class="param">ticks</span> for the X and Y velocities).
				The <span class="param">ticks</span> argument is optional.
				If you do not specify the number of ticks, the slice will keep moving indefinitely.
				If you specify the number of ticks, the velocity will expire and be set back to
				zero automatically after that number of ticks has passed.
				<br>
				Calling this command causes movement due to <a href="#about-movesliceby" class="ref">move slice by</a> or <a href="#about-movesliceto" class="ref">move slice to</a> to be cancelled.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-stopslice"></a>
				<h4>stop slice (handle)</h4>
<p>
			Cause slice <span class="param">handle</span> to stop moving. This cancels any previous slice velocity and move slice commands.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-movesliceto"></a>
				<h4>move slice to (handle, x, y, ticks)</h4>
<p>
			
				Instruct slice <span class="param">handle</span> to move in a straight line to a specific
				<span class="param">x</span> and <span class="param">y</span> position over a given number of <span class="param">ticks</span>.
				(As always, the position is an offset relative to its parent.)
				<br>
				If the slice had velocity set with <a href="#about-setslicevelocity" class="ref">set slice velocity</a>,
				<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a> or <a href="#about-setslicevelocityy" class="ref">set slice velocity y</a> it will be cancelled.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you change the slice's position manually during that time (eg. with <a href="#about-putslice" class="ref">put slice</a>),
					it'll continue to move towards the original target in a straight line
					(but now with a different velocity), until <span class="code">ticks</span> is up.
					Use <a href="#about-setslicevelocity" class="ref">set slice velocity</a> instead if you don't want this.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-movesliceby"></a>
				<h4>move slice by (handle, relative x, relative y, ticks)</h4>
<p>
			
				Instruct slice <span class="param">handle</span> to move in a straight line to an <span class="param">x</span> and <span class="param">y</span>
				offset relative to its current position over a given number of <span class="param">ticks</span>.
				<br>
				A negative <span class="param">relative x</span> moves left.<br>
				A positive <span class="param">relative x</span> moves right.<br>
				A negative <span class="param">relative y</span> moves up.<br>
				A positive <span class="param">relative y</span> moves down.
				<br>
				If the slice had velocity set with <a href="#about-setslicevelocity" class="ref">set slice velocity</a>,
				<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a> or <a href="#about-setslicevelocityy" class="ref">set slice velocity y</a> it will be cancelled.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you change the slice's position manually during that time (eg. with <a href="#about-putslice" class="ref">put slice</a>),
					it'll continue to move towards the original target in a straight line
					(but now with a different velocity), until <span class="code">ticks</span> is up.
					Use <a href="#about-setslicevelocity" class="ref">set slice velocity</a> instead if you don't want this.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-waitforslice"></a>
				<h4>wait for slice (handle)</h4>
<p>
			Cause the script to wait until slice <span class="param">handle</span> has stopped moving. This only applies to commands that operate over time like <a href="#about-setslicevelocityx" class="ref">set slice velocity x</a> or <a href="#about-setslicevelocity" class="ref">set slice velocity</a> or <a href="#about-movesliceto" class="ref">move slice to</a> or <a href="#about-movesliceby" class="ref">move slice by</a>. There is no reason to use this command for instantaneous slice moving commands like <a href="#about-putslice" class="ref">put slice</a> or <a href="#about-setslicex" class="ref">set slice x</a> or <a href="#about-setslicey" class="ref">set slice y</a>.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sliceismoving"></a>
				<h4>slice is moving (handle)</h4>
<p>
			Returns true if the slice <span class="param">handle</span> is moving (has velocity or has been instructed to move to some point). Returns false if the slice is not moving.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setslicevelocityx" class="ref">set slice velocity x</a>, </li>
<li>
<a href="#about-setslicevelocityy" class="ref">set slice velocity y</a>, </li>
<li>
<a href="#about-getslicevelocityx" class="ref">get slice velocity x</a>, </li>
<li>
<a href="#about-getslicevelocityy" class="ref">get slice velocity y</a>, </li>
<li>
<a href="#about-setslicevelocity" class="ref">set slice velocity</a>, </li>
<li>
<a href="#about-stopslice" class="ref">stop slice</a>, </li>
<li>
<a href="#about-movesliceto" class="ref">move slice to</a>, </li>
<li>
<a href="#about-movesliceby" class="ref">move slice by</a>, </li>
<li>
<a href="#about-waitforslice" class="ref">wait for slice</a>, </li>
<li><a href="#about-sliceismoving" class="ref">slice is moving</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>move slice with wallchecking (sl, relative x, relative y, friction%)</h4>
		<p><a href="#about-moveslicewithwallchecking">Documented in the Wall Checking section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Moving%20Around%20the%20Slice%20Tree"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Moving Around the Slice Tree</h3>
		<p></p>
<ul>
		<li>
<a href="#Type-specific%20Iteration%20Commands">Type-specific Iteration Commands</a><br>
		<ul></ul>
</li>
</ul>
		<div class="command">
			<a name="about-slicechild"></a>
				<h4>slice child (handle, number)</h4>
<p>
			Returns a handle for the nth child of a slice, counting from 0. Returns <span class="param">false</span> if <span class="param">number</span> is too large (<span class="param">last child(handle)</span> is equivalent to <span class="param">slice child(handle, child count(handle) -- 1)</span>). Note that you will need to use <a href="#about-firstchild" class="ref">first child</a> and <a href="#about-nextsibling" class="ref">next sibling</a> to iterate over the children of a slice, rather than this command, when you are moving the children around.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-childcount" class="ref">child count</a>, </li>
<li>
<a href="#about-parentslice" class="ref">parent slice</a>, </li>
<li>
<a href="#about-firstchild" class="ref">first child</a>, </li>
<li><a href="#about-lastchild" class="ref">last child</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-childcount"></a>
				<h4>child count (handle)</h4>
<p>
			Returns the number of children that slice <span class="param">handle</span> has.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicechild" class="ref">slice child</a>, </li>
<li><a href="#about-firstchild" class="ref">first child</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-slicechildindex"></a>
				<h4>slice child index (handle)</h4>
<p>
			Returns an integer that that indicates which number this slice is among its sibling slices that share the same parent. The first slice will return index 0, the second slice 1, the third slice 2, etc...
			
			
			<div class="seealso">See also: <ul><li><a href="#about-slicechild" class="ref">slice child</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-firstchild"></a>
				<h4>first child (handle)</h4>
<p>
			Returns a slice handle for the first child of a given slice <span class="param">handle</span>. Returns <span class="param">false</span> if the slice has no children. You can use this to loop through all the children of a slice.
			
			<pre>variable(sl)
sl := first child(sprite layer)
while (sl) do, begin
 if (slice is sprite(sl)) then, begin
   # do an operation on each sprite
 end
 sl := next sibling(sl)
end
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicechild" class="ref">slice child</a>, </li>
<li>
<a href="#about-firstspritechild" class="ref">first sprite child</a>, </li>
<li>
<a href="#about-firstrectchild" class="ref">first rect child</a>, </li>
<li>
<a href="#about-firstcontainerchild" class="ref">first container child</a>, </li>
<li>
<a href="#about-lastchild" class="ref">last child</a>, </li>
<li><a href="#about-childcount" class="ref">child count</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-lastchild"></a>
				<h4>last child (handle)</h4>
<p>
			Returns a slice handle for the last child of a given slice <span class="param">handle</span>. Returns <span class="param">false</span> if the slice has no children.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicechild" class="ref">slice child</a>, </li>
<li>
<a href="#about-firstchild" class="ref">first child</a>, </li>
<li><a href="#about-childcount" class="ref">child count</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-nextsibling"></a>
				<h4>next sibling (handle)</h4>
<p>
			Returns a slice handle for the next sibling of a given slice <span class="param">handle</span>. Returns <span class="param">false</span> if the given slice is the last sibling of its parent. This is useful when looping through slices.
			
			<pre>variable(sl)
sl := first child(sprite layer)
while (sl) do, begin
 if (slice is sprite(sl)) then, begin
   # do an operation on each sprite
 end
 sl := next sibling(sl)
end
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-previoussibling" class="ref">previous sibling</a>, </li>
<li>
<a href="#about-nextspritesibling" class="ref">next sprite sibling</a>, </li>
<li>
<a href="#about-nextrectsibling" class="ref">next rect sibling</a>, </li>
<li>
<a href="#about-nextcontainersibling" class="ref">next container sibling</a>, </li>
<li>
<a href="#about-slicechild" class="ref">slice child</a>, </li>
<li>
<a href="#about-freeslice" class="ref">free slice</a>, </li>
<li>
<a href="#about-slicetofront" class="ref">slice to front</a>, </li>
<li>
<a href="#about-slicetoback" class="ref">slice to back</a>, </li>
<li>
<a href="#about-movesliceabove" class="ref">move slice above</a>, </li>
<li><a href="#about-moveslicebelow" class="ref">move slice below</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-previoussibling"></a>
				<h4>previous sibling (handle)</h4>
<p>
			Returns a slice handle for the previous sibling of a given slice <span class="param">handle</span>, the inverse of <a href="#about-nextsibling" class="ref">next sibling</a> . Returns <span class="param">false</span> if the given slice is the first sibling of its parent. This is useful when looping through slices.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-nextsibling" class="ref">next sibling</a>, </li>
<li>
<a href="#about-slicechild" class="ref">slice child</a>, </li>
<li>
<a href="#about-freeslice" class="ref">free slice</a>, </li>
<li>
<a href="#about-slicetofront" class="ref">slice to front</a>, </li>
<li>
<a href="#about-slicetoback" class="ref">slice to back</a>, </li>
<li>
<a href="#about-movesliceabove" class="ref">move slice above</a>, </li>
<li><a href="#about-moveslicebelow" class="ref">move slice below</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-parentslice"></a>
			<a name="about-sliceparent"></a>
				<h4>parent slice (handle)</h4>
			<div class="notetext">Alias:</div>
			<h4>slice parent (handle)</h4>
<p>
			Returns a slice handle for the parent of slice <span class="param">handle</span>, or 0 if <span class="param">handle</span> is the root slice.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setparent" class="ref">set parent</a>, </li>
<li>
<a href="#about-checkparentage" class="ref">check parentage</a>, </li>
<li><a href="#about-slicechild" class="ref">slice child</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-checkparentage"></a>
				<h4>check parentage (handle, ancestor handle)</h4>
<p>
			
				Checks to see if <span class="param">handle</span> is a child (or grandchild, or great-grandchild, etc...) of <span class="param">ancestor handle</span>.
				Returns <a href="#about-true" class="ref">true</a> or <a href="#about-false" class="ref">false</a>.
				The result is <span class="code">false</span> if <span class="code">handle == ancestor handle</span>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-parentslice" class="ref">parent slice</a>, </li>
<li><a href="#about-setparent" class="ref">set parent</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Type-specific%20Iteration%20Commands"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Moving%20Around%20the%20Slice%20Tree">Moving Around the Slice Tree</a> →
			</span>Type-specific Iteration Commands</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-firstchildoftype"></a>
				<h4>first child of type(handle, type)</h4>
<p>
			
				Returns a slice handle for the first child of a given
				slice <span class="param">handle</span> which has the given <span class="param">type</span>.
				<span class="param">type</span> is one of the <span class="code">slicetype:</span>
				constants, such as <span class="code">slicetype:sprite</span>.
				See <a href="#about-slicetype" class="ref">slice type</a> for the full list.
				Returns <span class="param">false</span> if the slice has no children of that type.
				Children of other types will be ignored.
				This is useful when looping through slices.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-firstchild" class="ref">first child</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-nextsiblingoftype"></a>
				<h4>next sibling of type (handle, type)</h4>
<p>
			
				Returns a slice handle for the next sibling of a given
				slice <span class="param">handle</span> which has the given <span class="param">type</span>.
				<span class="param">type</span> is one of the <span class="code">slicetype:</span>
				constants, such as <span class="code">slicetype:sprite</span>.
				See <a href="#about-slicetype" class="ref">slice type</a> for the full list.
				Returns <span class="param">false</span> if there are no more children of that type.
				Children of other types will be ignored.
				This is useful when looping through slices.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-nextsibling" class="ref">next sibling</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-firstcontainerchild"></a>
				<h4>first container child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:container)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextcontainersibling"></a>
				<h4>next container sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:container)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstrectchild"></a>
				<h4>first rect child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:rect)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextrectsibling"></a>
				<h4>next rect sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:rect)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstspritechild"></a>
				<h4>first sprite child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:sprite)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextspritesibling"></a>
				<h4>next sprite sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:sprite)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firsttextchild"></a>
				<h4>first text child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:text)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nexttextsibling"></a>
				<h4>next text sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:text)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstellipsechild"></a>
				<h4>first ellipse child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:ellipse)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextellipsesibling"></a>
				<h4>next ellipse sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:ellipse)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstgridchild"></a>
				<h4>first grid child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:grid)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextgridsibling"></a>
				<h4>next grid sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:grid)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstscrollchild"></a>
				<h4>first scroll child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:scroll)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextscrollsibling"></a>
				<h4>next scroll sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:scroll)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstselectchild"></a>
				<h4>first select child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:select)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextselectsibling"></a>
				<h4>next select sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:select)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstpanelchild"></a>
				<h4>first panel child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:panel)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextpanelsibling"></a>
				<h4>next panel sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:panel)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-firstlinechild"></a>
				<h4>first line child (handle)</h4>
<p>
			
				An alias for <a href="#about-firstchildoftype" class="ref">first child of type</a><span class="code">(handle, slicetype:line)</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-nextlinesibling"></a>
				<h4>next line sibling (handle)</h4>
<p>
			
				An alias for <a href="#about-nextsiblingoftype" class="ref">next sibling of type</a><span class="code">(handle, slicetype:line)</span>.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Reordering%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Reordering Slices</h3>
		<p></p>
<ul>
		<li>
<a href="#Sorting%20Slices">Sorting Slices</a><br>
		<ul></ul>
</li>
</ul>
		<div class="command">
			<a name="about-slicetofront"></a>
				<h4>slice to front (handle)</h4>
<p>
			Sort a slice <span class="param">handle</span> so that it is drawn in front of other slices with the same parent. This is done by moving it to the end of its parent's child list. If you use this command inside a loop that iterates through slices using <a href="#about-nextsibling" class="ref">next sibling</a> be careful not to accidentally create an endless loop.
			
			<pre>
script, simple example, begin
  # As long as you are not looping with the "next sibling" command
  # then "slice to front" is safe and easy to use.
  variable(sl)
  sl := first child(sprite layer)
  slice to front(sl)
end

script, dangerous sorting, begin
  # this is an example of the WRONG way to move all rect slices to the
  # front in a loop. Because moving a slice to the front adds it to the
  # end of the list, the loop will go on forever.
  variable(sl)
  sl := first child(sprite layer)
  while(sl) do, begin
    if(slice is rect(sl)) then, begin
      slice to front(sl)
    end
    sl := next sibling(sl)
  end
end

script, safe sorting, begin
  # This is an example of the right way to move all rect slices to the
  # front in a loop. By remembering which slice was last before the
  # loop starts (or by using "previous sibling") it is safe to move slices
  # to the end of the sibling list.
  # We also ensure the rects stay in the same relative order by writing
  # the loop so that we move the last slice to front if it is a rect.
  variable(sl, last, prev)
  last := last child(sprite layer)
  sl := first child(sprite layer)
  while(sl &amp;&amp; sl &lt;&gt; last) do, begin
    prev := sl
    sl := next sibling(sl)			    
    if(slice is rect(prev)) then(slice to front(prev))
  end
end

script, easier safe sorting, begin
  # If you need to sort slices in a loop, you might find it easier
  # to avoid the "slice to front" command and use "set sort order"
  # and "sort children" instead.
  variable(sl)
  sl := first child(sprite layer)
  while(sl) do, begin
    if(slice is rect(sl)) then, begin
      set sort order(sl, 1)
    end
    sl := next sibling(sl)
  end
  sort children(sprite layer)
end
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicetoback" class="ref">slice to back</a>, </li>
<li><a href="#about-movesliceabove" class="ref">move slice above</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-slicetoback"></a>
				<h4>slice to back (handle)</h4>
<p>
			Sort a slice <span class="param">handle</span> so it will be drawn behind other slices with the same parent. If you use this command inside a loop, be careful not to accidentally create an endless loop. Moving a slice to the back also moves it to the first position of its parent's sibling list.
			
			<pre>
script, simple example, begin
  # As long as you are not looping with the "next sibling" command
  # then "slice to back" is safe and easy to use.
  variable(sl)
  sl := load hero sprite(0)
  slice to back(sl)
end

script, dangerous sorting, begin
  # This is an example of the WRONG way to move all rect slices to the
  # back in a loop. Because moving a slice to the back moves it to the
  # top of the list, the loop will be restarted each time
  variable(sl)
  sl := first child(sprite layer)
  while(sl) do, begin
    if(slice is rect(sl)) then, begin
      slice to back(sl)
    end
    sl := next sibling(sl)
  end
end

script, safe but incorrect sorting, begin
  # This is an example of a safe way to move all the rect slices to the
  # back. HOWEVER the order in which all the rects will be drawn will
  # be reversed! That might be alright for your need.
  # By moving the slice AFTER using the "next sibling" command we avoid 
  # re-starting the loop.
  variable(sl, moveme)
  sl := first child(sprite layer)
  while(sl) do, begin
    moveme := 0
    if(slice is rect(sl)) then, begin
      moveme := sl
    end
    sl := next sibling(sl)
    if(moveme) then(slice to back(moveme))
  end
end

script, correct sorting, begin
  # This is an example of one right way to move all rect slices to the
  # back with a loop and preservw relative ordering between the rects.
  # Note that we ensure the rects stay in the same relative order by writing
  # the loop so that we also move the 'first' slice to back if it is a rect.
  variable(sl, first, prev)
  first := first child(sprite layer)
  sl := last child(sprite layer)
  while(sl &amp;&amp; sl &lt;&gt; first) do, begin
    prev := sl
    sl := previous sibling(sl)			    
    if(slice is rect(prev)) then(slice to back(prev))
  end
end

script, easier safe sorting, begin
  # If you need to sort slices in a loop, you might find it easier
  # to avoid the "slice to back" command and use "set sort order"
  # and "sort children" instead.
  variable(sl)
  sl := first child(sprite layer)
  while(sl) do, begin
    if(slice is rect(sl)) then, begin
      set sort order(sl, -1)
    end
    sl := next sibling(sl)
  end
  sort children(sprite layer)
end
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicetofront" class="ref">slice to front</a>, </li>
<li><a href="#about-moveslicebelow" class="ref">move slice below</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-movesliceabove"></a>
				<h4>move slice above (handle, above what handle)</h4>
<p>
			Given a slice <span class="param">handle</span>, move it so that it is the next sibling of another slice given by <span class="param">above what handle</span> (changing its parent if necessary). This will cause it to be drawn immediately after that slice.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-moveslicebelow" class="ref">move slice below</a>, </li>
<li>
<a href="#about-slicetofront" class="ref">slice to front</a>, </li>
<li>
<a href="#about-slicetoback" class="ref">slice to back</a>, </li>
<li><a href="#about-nextsibling" class="ref">next sibling</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-moveslicebelow"></a>
				<h4>move slice below (handle, below what handle)</h4>
<p>
			Given a slice <span class="param">handle</span>, move it so that it is the previous sibling of another slice given by <span class="param">below what handle</span> (changing its parent if necessary). This will cause it to be drawn immediately before that slice.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-movesliceabove" class="ref">move slice above</a>, </li>
<li>
<a href="#about-slicetofront" class="ref">slice to front</a>, </li>
<li>
<a href="#about-slicetoback" class="ref">slice to back</a>, </li>
<li><a href="#about-previoussibling" class="ref">previous sibling</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Sorting%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Reordering%20Slices">Reordering Slices</a> →
			</span>Sorting Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-ysortchildren"></a>
				<h4>Y sort children (handle)</h4>
<p>
			Given a slice <span class="param">handle</span>, sort all of its children according to their Y position. This means that sibling slices lower on the screen will be drawn over siblings higher on the screen.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-sortchildren" class="ref">sort children</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setsortorder"></a>
				<h4>set sort order (handle, order)</h4>
<p>
			Assign a sort order value to a slice <span class="param">handle</span>. This can be any arbitrary number that will be used to sort the slice relative to its sibling slices the next time that <a href="#about-sortchildren" class="ref">sort children</a> is called. Give a slice a low number to sort it to the back or a high number to sort it to the front. This means it functions like (or can be used as) a z-depth. If you give two sibling slices the same sort order number they will be sorted to the same depth, and they will remain in their original order in relation to one another.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getsortorder" class="ref">get sort order</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getsortorder"></a>
				<h4>get sort order (handle)</h4>
<p>
			Retrieve the sort order value previously set on a slice <span class="param">handle</span> with <a href="#about-getsortorder" class="ref">get sort order</a>. Note that calling <a href="#about-sortchildren" class="ref">sort children</a> by default resets all the sort order values to zero, unless <a href="#about-false" class="ref">false</a> is passed as <span class="param">wipe</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sortchildren"></a>
				<h4>sort children (handle, wipe)</h4>
<p>
			Given a slice <span class="param">handle</span>, sort all of its children according to the sort order that you previously set with the <a href="#about-setsortorder" class="ref">set sort order</a> command. If no sort order values have been set then no changes will be made to the order of the slices. <span class="param">wipe</span> is an optional argument, defaulting to <a href="#about-true" class="ref">true</a>, which specifies whether to zero out the sort order value for each slice after they have been sorted. This zeroing out behaviour is intended to let you use temporary sort values to perform some sorting operation on sibling slices (see especially the examples to <a href="#about-slicetofront" class="ref">slice to front</a> and <a href="#about-slicetoback" class="ref">slice to back</a>).
			
			<pre>
plotscript, reverse Y sort, begin
  variable(sl)
  sl := first child(sprite layer)
  while(sl) then, begin
    set sort order(sl, slice y(sl) * -1)
    sl := next sibling(sl)
  end
  sort children(sprite layer)
end
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setsortorder" class="ref">set sort order</a>, </li>
<li>
<a href="#about-getsortorder" class="ref">get sort order</a>, </li>
<li><a href="#about-ysortchildren" class="ref">Y sort children</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getchildautosort"></a>
				<h4>get child autosort (handle)</h4>
<p>
			
				Get slice <span class="param">handle</span>'s "autosort children" setting, which is one of the following constants:
				<ul>
					<li><span class="code">autosort: Off</span></li>
					<li>
<span class="code">autosort: Custom</span> -
						sorted according to the sort order value (<a href="#about-setsortorder" class="ref">set sort order</a>),
						just like <a href="#about-sortchildren" class="ref">sort children</a> (sort order not wiped after sorting)
					</li>
					<li>
<span class="code">autosort: Y</span> - sorted by each child's Y (<a href="#about-slicey" class="ref">slice y</a>), ignoring anchoring and alignment</li>
					<li>
<span class="code">autosort: Top Y</span> - sorted by top edge position </li>
					<li>
<span class="code">autosort: Center Y</span> - sorted by center position</li>
					<li>
<span class="code">autosort: Bottom Y</span> - sorted by bottom edge position</li>
				</ul>
				Every tick immediately before the screen is redrawn the children of the slice will
				be sorted according to the autosort setting.
				This is useful for emulating 3D (or "2.5D") environments, causing slices for objects that are closer to the "view"
				(the bottom of the screen) to be drawn on top of ones further away.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setchildautosort"></a>
				<h4>set child autosort (handle, setting)</h4>
<p>
			
				Change a slice <span class="param">handle</span>'s "autosort children" setting.
				<span class="param">setting</span> should be one of the <span class="code">autosort: ...</span> settings; see <a href="#about-getchildautosort" class="ref">get child autosort</a>.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Slice%20Types"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Slice Types</h3>
		<p>
				For a description of the different slice types, see the <a href="http://rpg.hamsterrepublic.com/ohrrpgce/Slices#Slice_types">Slices</a> article on the wiki.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					There are two types of slice used by the engine for which there are no commands:
					'special' slices (such as <a href="#about-spritelayer" class="ref">sprite layer</a>),
					and 'map' slices (which are map layers).
					However you can use <a href="#about-lookupslice" class="ref">lookup slice</a> to find each instance of these.
					Special slices are nothing but container slices with special purposes (but not special behaviour).
					None of these kinds of slices can be created or manipulated in the slice collection editor either.
				</div>
			</p>
<ul>
		<li>
<a href="#Checking%20Slice%20Type">Checking Slice Type</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Container%20Slices">Container Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Sprite%20Slices">Sprite Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Rect%20Slices">Rect Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Line%20Slices">Line Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Ellipse%20Slices">Ellipse Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Text%20Slices">Text Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Grid%20Slices">Grid Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Select%20Slices">Select Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Scroll%20Slices">Scroll Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Panel%20Slices">Panel Slices</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Map%20Layer%20Slices">Map Layer Slices</a><br>
		<ul></ul>
</li>
</ul>
		<hr>
		</div>
		<div class="subsection">
<a name="Checking%20Slice%20Type"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Checking Slice Type</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-slicetype"></a>
				<h4>slice type (handle)</h4>
<p>
			
				Returns the type of the given slice <span class="param">handle</span>, one of the constants:
				<span class="code">slicetype:Special</span>,
				<span class="code">slicetype:Container</span>,
				<span class="code">slicetype:Rect</span>,
				<span class="code">slicetype:Line</span>,
				<span class="code">slicetype:Ellipse</span>,
				<span class="code">slicetype:Sprite</span>,
				<span class="code">slicetype:Text</span>,
				<span class="code">slicetype:Map</span>,
				<span class="code">slicetype:Grid</span>,
				<span class="code">slicetype:Scroll</span>,
				<span class="code">slicetype:Select</span>,
				<span class="code">slicetype:Panel</span>,
				<span class="code">slicetype:Layout</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceiscontainer"></a>
				<h4>slice is container (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a container, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceissprite"></a>
				<h4>slice is sprite (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a sprite, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceisrect"></a>
				<h4>slice is rect (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a rect, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceisline"></a>
				<h4>slice is line (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a line, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceisellipse"></a>
				<h4>slice is ellipse (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a ellipse, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceistext"></a>
				<h4>slice is text (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a text slice, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceisgrid"></a>
				<h4>slice is grid (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a grid, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceisselect"></a>
				<h4>slice is select (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a select slice, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceisscroll"></a>
				<h4>slice is scroll (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a scroll slice, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceispanel"></a>
				<h4>slice is panel (handle)</h4>
<p>
			Returns true if the given slice <span class="param">handle</span> is a panel slice, or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sliceismaplayer"></a>
				<h4>slice is map layer (handle)</h4>
<p>
			
				Returns true if the given slice <span class="param">handle</span> is a map layer,
				or false for any other type. It's an error to provide an invalid <span class="param">handle</span>.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Container%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Container Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-createcontainer"></a>
				<h4>create container (width, height)</h4>
<p>
			Create a new container slice and return a handle to it. Containers are invisible slices used only for grouping other slices. You can optionaly specify a <span class="param">width</span> and <span class="param">height</span> for the container.
<pre>variable(holder, sl)
holder := create container(200,100)
sl := load hero sprite(0)
set parent(sl, holder)
set horiz align(sl, edge:left)
sl := load hero sprite(1)
set parent(sl, holder)
set horiz align(sl, edge:right)
</pre>
			The example above creates a container and then puts two hero sprites inside it, one aligned left and one aligned right. If you move or resize the container, the sprites inside it will also be moved.
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is container (handle)</h4>
		<p><a href="#about-sliceiscontainer">Documented in the Checking Slice Type section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Sprite%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Sprite Slices</h3>
		<p>Unlike the other types of slices, sprite slices come in different subtypes for each of the different sprite sizes. A sprite slice of one subtype can be turned into another subtype with the <span class="param">replace*sprite</span> commands.</p>
<ul></ul>
		<div class="command">
		<h4>slice is sprite (handle)</h4>
		<p><a href="#about-sliceissprite">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-loadsprite"></a>
				<h4>load sprite (sprite type, num, palette)</h4>
<p>
			
				Creates a sprite slice by loading a sprite of the given <span class="param">sprite type</span>
				(use a constant like <span class="code">spritetype:walkabout</span>; see <a href="#about-getspritetype" class="ref">get sprite type</a> for more),
				with sprite set number <span class="param">num</span> and with given <span class="param">palette</span>.
				Returns a handle for the slice.
				You may omit <span class="param">palette</span>,
				in which case the default palette for that sprite will be loaded.
				<span class="param">palette</span> is ignored for <span class="code">spritetype:backdrop</span>.
				You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replacesprite" class="ref">replace sprite</a>, </li>
<li>
<a href="#about-loadherosprite" class="ref">load hero sprite</a>, </li>
<li>
<a href="#about-loadsmallenemysprite" class="ref">load small enemy sprite</a>, </li>
<li>
<a href="#about-loadmediumenemysprite" class="ref">load medium enemy sprite</a>, </li>
<li>
<a href="#about-loadlargeenemysprite" class="ref">load large enemy sprite</a>, </li>
<li>
<a href="#about-loadwalkaboutsprite" class="ref">load walkabout sprite</a>, </li>
<li>
<a href="#about-loadattacksprite" class="ref">load attack sprite</a>, </li>
<li>
<a href="#about-loadbordersprite" class="ref">load border sprite</a>, </li>
<li>
<a href="#about-loadportraitsprite" class="ref">load portrait sprite</a>, </li>
<li>
<a href="#about-loadbackdropsprite" class="ref">load backdrop sprite</a>, </li>
<li>
<a href="#about-getspritetype" class="ref">get sprite type</a>, </li>
<li>
<a href="#about-getspritesetnumber" class="ref">get sprite set number</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-createsprite"></a>
				<h4>create sprite</h4>
				An alias for <a href="#about-loadsprite">load sprite</a>.
			</div>
		<div class="command">
			<a name="about-replacesprite"></a>
				<h4>replace sprite (slice, sprite type, num, palette)</h4>
<p>
			
				Change an existing sprite <span class="param">slice</span> into a different sprite,
				loading a sprite of the given <span class="param">sprite type</span>
				(use a constant like <span class="code">spritetype:walkabout</span>; see <a href="#about-getspritetype" class="ref">get sprite type</a> for more),
				with sprite set number <span class="param">num</span> and with given <span class="param">palette</span>.
				You may omit <span class="param">palette</span>,
				in which case the default palette for that sprite will be loaded.
				<span class="param">palette</span> is ignored for <span class="code">spritetype:backdrop</span>.
				The handle for the slice doesn't change,
				and everything except the size of the slice stays the same.
				You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadsprite" class="ref">load sprite</a>, </li>
<li>
<a href="#about-replaceherosprite" class="ref">replace hero sprite</a>, </li>
<li>
<a href="#about-replacesmallenemysprite" class="ref">replace small enemy sprite</a>, </li>
<li>
<a href="#about-replacemediumenemysprite" class="ref">replace medium enemy sprite</a>, </li>
<li>
<a href="#about-replacelargeenemysprite" class="ref">replace large enemy sprite</a>, </li>
<li>
<a href="#about-replacewalkaboutsprite" class="ref">replace walkabout sprite</a>, </li>
<li>
<a href="#about-replaceattacksprite" class="ref">replace attack sprite</a>, </li>
<li>
<a href="#about-replacebordersprite" class="ref">replace border sprite</a>, </li>
<li>
<a href="#about-replaceportraitsprite" class="ref">replace portrait sprite</a>, </li>
<li>
<a href="#about-replacebackdropsprite" class="ref">replace backdrop sprite</a>, </li>
<li>
<a href="#about-getspritetype" class="ref">get sprite type</a>, </li>
<li>
<a href="#about-getspritesetnumber" class="ref">get sprite set number</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadherosprite"></a>
				<h4>load hero sprite (num, palette)</h4>
<p>
			Loads hero battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replaceherosprite" class="ref">replace hero sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replaceherosprite" class="ref">replace hero sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replaceherosprite"></a>
				<h4>replace hero sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to hero battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadherosprite" class="ref">load hero sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadherosprite" class="ref">load hero sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadherosprite" class="ref">load hero sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadwalkaboutsprite"></a>
				<h4>load walkabout sprite (num, palette)</h4>
<p>
			Loads walkabout sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replacewalkaboutsprite" class="ref">replace walkabout sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replacewalkaboutsprite" class="ref">replace walkabout sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replacewalkaboutsprite"></a>
				<h4>replace walkabout sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to walkabout sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadwalkaboutsprite" class="ref">load walkabout sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadwalkaboutsprite" class="ref">load walkabout sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadwalkaboutsprite" class="ref">load walkabout sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadsmallenemysprite"></a>
				<h4>load small enemy sprite (num, palette)</h4>
<p>
			Loads small enemy sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replacesmallenemysprite" class="ref">replace small enemy sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replacesmallenemysprite" class="ref">replace small enemy sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replacesmallenemysprite"></a>
				<h4>replace small enemy sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to small enemy sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadsmallenemysprite" class="ref">load small enemy sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadsmallenemysprite" class="ref">load small enemy sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadsmallenemysprite" class="ref">load small enemy sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadmediumenemysprite"></a>
				<h4>load medium enemy sprite (num, palette)</h4>
<p>
			Loads medium enemy sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replacemediumenemysprite" class="ref">replace medium enemy sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replacemediumenemysprite" class="ref">replace medium enemy sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replacemediumenemysprite"></a>
				<h4>replace medium enemy sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to medium enemy sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadmediumenemysprite" class="ref">load medium enemy sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadmediumenemysprite" class="ref">load medium enemy sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadmediumenemysprite" class="ref">load medium enemy sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadlargeenemysprite"></a>
				<h4>load large enemy sprite (num, palette)</h4>
<p>
			Loads large enemy sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replacelargeenemysprite" class="ref">replace large enemy sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replacelargeenemysprite" class="ref">replace large enemy sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replacelargeenemysprite"></a>
				<h4>replace large enemy sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to large enemy sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadlargeenemysprite" class="ref">load large enemy sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadlargeenemysprite" class="ref">load large enemy sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadlargeenemysprite" class="ref">load large enemy sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadattacksprite"></a>
				<h4>load attack sprite (num, palette)</h4>
<p>
			Loads attack battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replaceattacksprite" class="ref">replace attack sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replaceattacksprite" class="ref">replace attack sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replaceattacksprite"></a>
				<h4>replace attack sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to attack battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadattacksprite" class="ref">load attack sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadattacksprite" class="ref">load attack sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadattacksprite" class="ref">load attack sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadweaponsprite"></a>
				<h4>load weapon sprite (num, palette)</h4>
<p>
			Loads weapon battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replaceweaponsprite" class="ref">replace weapon sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replaceweaponsprite" class="ref">replace weapon sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replaceweaponsprite"></a>
				<h4>replace weapon sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to weapon battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadweaponsprite" class="ref">load weapon sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadweaponsprite" class="ref">load weapon sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadweaponsprite" class="ref">load weapon sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadbordersprite"></a>
				<h4>load border sprite (num, palette)</h4>
<p>
			Loads border battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replacebordersprite" class="ref">replace border sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replacebordersprite" class="ref">replace border sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replacebordersprite"></a>
				<h4>replace border sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to border battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadbordersprite" class="ref">load border sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadbordersprite" class="ref">load border sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadbordersprite" class="ref">load border sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadportraitsprite"></a>
				<h4>load portrait sprite (num, palette)</h4>
<p>
			Loads portrait battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replaceportraitsprite" class="ref">replace portrait sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-replaceportraitsprite" class="ref">replace portrait sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replaceportraitsprite"></a>
				<h4>replace portrait sprite (handle, num, palette)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to portrait battle sprite #<span class="param">num</span> with palette <span class="param">palette</span>. As with <a href="#about-loadportraitsprite" class="ref">load portrait sprite</a>, you may omit <span class="param">palette</span>, in which case the default palette for that sprite will be loaded. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadportraitsprite" class="ref">load portrait sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadportraitsprite" class="ref">load portrait sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadbackdropsprite"></a>
				<h4>load backdrop sprite (num)</h4>
<p>
			Loads backdrop #<span class="param">num</span> as a sprite, and returns a <a href="#about-slicehandle" class="ref">slice handle</a>.. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">If you want to replace an existing sprite (or other slice) either use <a href="#about-freesprite" class="ref">free sprite</a> first, or use <a href="#about-replacebackdropsprite" class="ref">replace backdrop sprite</a>!</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-showbackdrop" class="ref">show backdrop</a>, </li>
<li>
<a href="#about-replacebackdropsprite" class="ref">replace backdrop sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-replacebackdropsprite"></a>
				<h4>replace backdrop sprite (handle, num)</h4>
<p>
			Given an existing sprite <span class="param">handle</span>, changes it to backdrop #<span class="param">num</span>. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done. This function is used when you merely wish to change the image, but not move it or anything. You must free it with <a href="#about-freesprite" class="ref">free sprite</a> when you are done.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">You may use this on any sprite, not just ones loaded with <a href="#about-loadbackdropsprite" class="ref">load backdrop sprite</a>.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadbackdropsprite" class="ref">load backdrop sprite</a>, </li>
<li><a href="#about-freesprite" class="ref">free sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-freesprite"></a>
				<h4>free sprite (handle)</h4>
<p>
			Unloads a sprite loaded by any of the "load x sprite" functions. This removes the sprite from the screen and removes it from memory. It is a good idea to free sprites when you are completely done with them. Unlike <a href="#about-freeslice" class="ref">free slice</a>, this command only works on sprites, but it will still also free any children of the sprite it is freeing regardless of what kind of children they are. The only purpose of this command is additional error checking.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-freeslice" class="ref">free slice</a>, </li>
<li><a href="#about-loadherosprite" class="ref">load hero sprite</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-clonesprite"></a>
				<h4>clone sprite (handle)</h4>
<p>
			Duplicates a sprite slice, returning a handle to it. The new sprite inherits only the sprite-related data; in all other ways it is like a freshly created new slice. For example, the parent of the new slice is <a href="#about-spritelayer" class="ref">sprite layer</a> and it starts out visible, with default anchoring, is at position 0,0, has no children, etc.. If you clone a sprite, remember that you will need to call <a href="#about-freesprite" class="ref">free sprite</a> on both the original and the clone.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you want to copy a non-sprite slice, copy all the properties of the slice,
					or copy its children, then use the <a href="#about-cloneslice" class="ref">clone slice</a> command instead.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-freesprite" class="ref">free sprite</a>, </li>
<li><a href="#about-cloneslice" class="ref">clone slice</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-putsprite"></a>
				<h4>put sprite (handle, x, y)</h4>
<p>
			Moves sprite <span class="param">handle</span> to position (<span class="param">x</span>, <span class="param">y</span>). This can only be used on sprites, use <a href="#about-putslice" class="ref">put slice</a> in general. 
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-placesprite"></a>
				<h4>place sprite</h4>
				An alias for <a href="#about-putsprite">put sprite</a>.
			</div>
		<div class="command">
			<a name="about-getspritetype"></a>
				<h4>get sprite type (handle)</h4>
<p>
			
				Gets the type of sprite slice <span class="param">handle</span>, or returns -1 if the slice is not a sprite.
				You can compare the result with the following constants:
				<ul>
					<li>spritetype:hero</li>
					<li>spritetype:small enemy</li>
					<li>spritetype:medium enemy</li>
					<li>spritetype:large enemy</li>
					<li>spritetype:walkabout</li>
					<li>spritetype:weapon</li>
					<li>spritetype:attack</li>
					<li>spritetype:border</li>
					<li>spritetype:portrait</li>
					<li>spritetype:backdrop</li>
				</ul>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getspritesetnumber" class="ref">get sprite set number</a>, </li>
<li>
<a href="#about-getspritepalette" class="ref">get sprite palette</a>, </li>
<li><a href="#about-getspriteframe" class="ref">get sprite frame</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setspritesetnumber"></a>
				<h4>set sprite set number (handle, record)</h4>
<p>
			Changes the record number of the spriteset of a sprite slice <span class="param">handle</span>.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getspritesetnumber" class="ref">get sprite set number</a>, </li>
<li>
<a href="#about-setspritepalette" class="ref">set sprite palette</a>, </li>
<li><a href="#about-setspriteframe" class="ref">set sprite frame</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getspritesetnumber"></a>
				<h4>get sprite set number (handle)</h4>
<p>
			Gets the record number of the spriteset of a sprite slice <span class="param">handle</span>.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getspritetype" class="ref">get sprite type</a>, </li>
<li>
<a href="#about-getspritepalette" class="ref">get sprite palette</a>, </li>
<li><a href="#about-getspriteframe" class="ref">get sprite frame</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setspritepalette"></a>
				<h4>set sprite palette (handle, num)</h4>
<p>
			
				Changes the palette of sprite slice <span class="param">handle</span> to be <span class="param">num</span>.
				If <span class="param">num</span> is -1 or omitted, the default palette for that sprite is loaded.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getspritepalette" class="ref">get sprite palette</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getspritepalette"></a>
				<h4>get sprite palette (handle)</h4>
<p>
			
				Returns the palette of sprite slice <span class="param">handle</span>,
				or returns -1 if the sprite is set to use the default palette
				(use <a href="#about-getspritedefaultpal" class="ref">get sprite default pal</a> to figure which that is).
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getspritetype" class="ref">get sprite type</a>, </li>
<li>
<a href="#about-getspritesetnumber" class="ref">get sprite set number</a>, </li>
<li><a href="#about-getspriteframe" class="ref">get sprite frame</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getspritedefaultpal"></a>
				<h4>get sprite default pal (handle)</h4>
<p>
			
				Returns the default palette of sprite slice <span class="param">handle</span>.
				You don't need to use this when you want to set a sprite to its default palette, because setting the palette number to -1 will have that effect.
				This command is for finding out the real palette number that would be used if the palette is set to -1.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getspritepalette" class="ref">get sprite palette</a>, </li>
<li><a href="#about-setspritepalette" class="ref">set sprite palette</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setspriteframe"></a>
				<h4>set sprite frame (handle, num)</h4>
<p>
			Changes the frame of sprite slice <span class="param">handle</span> to be <span class="param">num</span>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getspriteframe" class="ref">get sprite frame</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getspriteframe"></a>
				<h4>get sprite frame (handle)</h4>
<p>
			Returns the current frame number of sprite slice <span class="param">handle</span>.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getspritetype" class="ref">get sprite type</a>, </li>
<li>
<a href="#about-getspritepalette" class="ref">get sprite palette</a>, </li>
<li><a href="#about-getspritesetnumber" class="ref">get sprite set number</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-spriteframecount"></a>
				<h4>sprite frame count (handle)</h4>
<p>
			
				Returns the total number of available frames for a given sprite slice <span class="param">handle</span>.
				For example a backdrop has just one frame, an attack sprite has three.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-horizflipsprite"></a>
				<h4>horiz flip sprite (handle, flip)</h4>
<p>
			Flips a sprite slice <span class="param">handle</span> horizontally. You can also unflip a previously flipped sprite using <span class="param">horiz flip sprite(handle, false)</span>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-vertflipsprite" class="ref">vert flip sprite</a>, </li>
<li><a href="#about-spriteishorizflipped" class="ref">sprite is horiz flipped</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-vertflipsprite"></a>
				<h4>vert flip sprite (handle, flip)</h4>
<p>
			Flips a sprite slice <span class="param">handle</span> vertically. You can also unflip a previously flipped sprite using <span class="param">vert flip sprite(handle, false)</span>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-horizflipsprite" class="ref">horiz flip sprite</a>, </li>
<li><a href="#about-spriteisvertflipped" class="ref">sprite is vert flipped</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-spriteishorizflipped"></a>
				<h4>sprite is horiz flipped (handle)</h4>
<p>
			Returns true if a sprite slice <span class="param">handle</span> is flipped horizontally, or false if it is not.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-horizflipsprite" class="ref">horiz flip sprite</a>, </li>
<li><a href="#about-spriteisvertflipped" class="ref">sprite is vert flipped</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-spriteisvertflipped"></a>
				<h4>sprite is vert flipped (handle)</h4>
<p>
			Returns true if a sprite slice <span class="param">handle</span> is flipped vertically, or false if it is not.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-vertflipsprite" class="ref">vert flip sprite</a>, </li>
<li><a href="#about-spriteishorizflipped" class="ref">sprite is horiz flipped</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getspritetrans"></a>
				<h4>get sprite trans (handle)</h4>
<p>
			Given a sprite slice <span class="param">handle</span>, returns true if the sprite is drawn with transparency (that is, color 0 is transparent). All sprites default to transparent.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setspritetrans" class="ref">set sprite trans</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setspritetrans"></a>
				<h4>set sprite trans (handle, drawtransparent)</h4>
<p>
			Given a sprite slice <span class="param">handle</span>, sets whether it should be drawn with transparency (that is, color 0 is transparent). All sprites default to transparent, so you are unlikely to have any use for this command.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getspritetrans" class="ref">get sprite trans</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-dissolvesprite"></a>
				<h4>dissolve sprite (handle, dissolve type, total ticks, start tick, backwards, automatic)</h4>
<p>
			
				Dissolve a sprite using pre-defined dissolve animations.
				The first argument is a sprite slice <span class="param">handle</span>.
				The second argument is the <span class="param">dissolve type</span>.
				There are <span class="code">dissolve:name</span> constants with the same names as the enemy dissolve animations.
				<br>
				The valid dissolve type constants are:
				<span class="param">dissolve:random scatter</span>,
				<span class="param">dissolve:crossfade</span>,
				<span class="param">dissolve:diagonal vanish</span>,
				<span class="param">dissolve:sink into ground</span>,
				<span class="param">dissolve:squash</span>,
				<span class="param">dissolve:melt</span>,
				<span class="param">dissolve:vapourise</span>,
				<span class="param">dissolve:phase out</span>,
				<span class="param">dissolve:squeeze</span>,
				<span class="param">dissolve:shrink</span>,
				<span class="param">dissolve:flicker</span>.
				<span class="param">dissolve:shrink to center</span>,
				<span class="param">dissolve:fade</span>,
				<span class="param">dissolve:ghostly fade</span>,
				<span class="param">dissolve:fade to white</span>,
				<span class="param">dissolve:puff</span>,
				<span class="param">dissolve:fade up</span>,
				<span class="param">dissolve:blip</span>.
				<br>
				The third argument is the total number of ticks that the animation should run.
				You can use <span class="code">dissolvetime:default</span> or <span class="code">-1</span> for the default number of ticks,
				which is equal to the sprites <span class="code">(width + height) / 10</span>
				(this is not the same as the default length for enemy dissolves!)
				The fourth argument is the tick to start on, or 0 to start from the beginning.
				The fifth argument is false for a normal dissolve, or true for a backwards dissolve.
				The sixth argument is true for an automatic dissolve (the default),
				or false to prevent the dissolve animation from proceeding automatically, in case you want to manually control it.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-canceldissolve" class="ref">cancel dissolve</a>, </li>
<li>
<a href="#about-spriteisdissolving" class="ref">sprite is dissolving</a>, </li>
<li><a href="#about-waitfordissolve" class="ref">wait for dissolve</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-canceldissolve"></a>
				<h4>cancel dissolve (handle)</h4>
<p>
			If a sprite slice <span class="param">handle</span> is currently dissolving, cancel the dissolve animation, restoring the sprite to normal.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-dissolvesprite" class="ref">dissolve sprite</a>, </li>
<li>
<a href="#about-spriteisdissolving" class="ref">sprite is dissolving</a>, </li>
<li><a href="#about-waitfordissolve" class="ref">wait for dissolve</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-spriteisdissolving"></a>
				<h4>sprite is dissolving (handle)</h4>
<p>
			Returns true if a sprite slice <span class="param">handle</span> is currently dissolving, or false if it is not. Checks for both automatically dissolving sprites, and sprites that have been manually set to a partially dissolved state.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-canceldissolve" class="ref">cancel dissolve</a>, </li>
<li>
<a href="#about-spriteisdissolving" class="ref">sprite is dissolving</a>, </li>
<li><a href="#about-waitfordissolve" class="ref">wait for dissolve</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-waitfordissolve"></a>
				<h4>wait for dissolve (handle)</h4>
<p>
			Pauses the current script until the sprite slice <span class="param">handle</span> has finished dissolving. This command only waits if the dissolve is automatic. This command will not wait for sprites that have been manually set to a partially dissolved state.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-canceldissolve" class="ref">cancel dissolve</a>, </li>
<li>
<a href="#about-spriteisdissolving" class="ref">sprite is dissolving</a>, </li>
<li><a href="#about-waitfordissolve" class="ref">wait for dissolve</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Rect%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Rect Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-createrect"></a>
				<h4>create rect (width, height, style)</h4>
<p>
			Create a new rectangle slice and return a handle to it. You can provide an optional <span class="param">width</span> and <span class="param">height</span>, and an optional <span class="param">style</span>. The style is text box style number from 0 to 14, or -1 for an unstyled box. The default is box style 0. Like all slice types, a rect slice can be used as a container for other slices with <a href="#about-setparent" class="ref">set parent</a>
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is rect (handle)</h4>
		<p><a href="#about-sliceisrect">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-getrectstyle"></a>
				<h4>get rect style (handle)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, return the style it is using.
				This will be a number from 0 to 14 representing a text box style,
				or -1 if the rect is not using a standard style.
				Using any of the <a href="#about-setrectfgcol" class="ref">set rect fgcol</a>, <a href="#about-setrectbgcol" class="ref">set rect bgcol</a>, <a href="#about-setrectborder" class="ref">set rect border</a>
				or <a href="#about-setrectrawborder" class="ref">set rect raw border</a> commands causes this command to return -1.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setrectstyle" class="ref">set rect style</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrectstyle"></a>
				<h4>set rect style (handle, style)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, change the box style it uses.
				The <span class="param">style</span> should be a number from 0 to 14 representing a box style
				(edited in the "Edit Box Styles" menu).
				Setting the style changes the foreground (box) and background (edge) colors and the border.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getrectstyle" class="ref">get rect style</a>, </li>
<li>
<a href="#about-setrectfgcol" class="ref">set rect fgcol</a>, </li>
<li>
<a href="#about-setrectbgcol" class="ref">set rect bgcol</a>, </li>
<li><a href="#about-setrectborder" class="ref">set rect border</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getrectbgcol"></a>
				<h4>get rect bgcol (handle)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, return the background color it is using,
				which is the color inside the box (unless the box is totally transparent!)
				This will be a number from 0 to 255 representing a color from the master palette.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrectbgcol" class="ref">set rect bgcol</a>, </li>
<li><a href="#about-getrectfgcol" class="ref">get rect fgcol</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrectbgcol"></a>
				<h4>set rect bgcol (handle, color)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, change the background color it uses,
				which is the color of the box.
				The <span class="param">color</span> should be a number from 0 to 255 representing a color
				from the master palette.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getrectbgcol" class="ref">get rect bgcol</a>, </li>
<li><a href="#about-setrectfgcol" class="ref">set rect fgcol</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getrectfgcol"></a>
				<h4>get rect fgcol (handle)</h4>
<p>
			Given a rect slice <span class="param">handle</span>, return the foreground color it uses for its simple border. This only matters when the rect has no graphical border, or when the graphical border allows the simple border to show through. This will be a number from 0 to 255 representing a color from the master palette.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrectfgcol" class="ref">set rect fgcol</a>, </li>
<li><a href="#about-getrectbgcol" class="ref">get rect bgcol</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrectfgcol"></a>
				<h4>set rect fgcol (handle, color)</h4>
<p>
			Given a rect slice <span class="param">handle</span>, change the foreground color it uses for its simple border. This only matters when the rect has no graphical border, or when the graphical border allows the simple border to show through. The <span class="param">color</span> should be a number from 0 to 255 representing a color from the master palette.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getrectfgcol" class="ref">get rect fgcol</a>, </li>
<li><a href="#about-setrectbgcol" class="ref">set rect bgcol</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getrectborder"></a>
				<h4>get rect border (handle)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, return the style number of the graphical border it uses.
				This will be a number from 0 to 14 representing a text box border style,
				or <span class="param">border:line</span> for a simple line border only,
				or <span class="param">border:none</span> for no border at all,
				or <span class="param">border:raw</span> if the box uses a "raw" box border spriteset number instead
				(in that case you need to call <a href="#about-getrectrawborder" class="ref">get rect raw border</a> to find out which it is).
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrectborder" class="ref">set rect border</a>, </li>
<li><a href="#about-getrectrawborder" class="ref">get rect raw border</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getrectrawborder"></a>
				<h4>get rect raw border (handle)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, return the spriteset ID number of the graphical border it uses,
				or <span class="param">border:line</span> if it has a simple line border only,
				or <span class="param">border:none</span> for no border at all.
				If the border is being determined by a box style number
				(e.g. due to <a href="#about-setrectstyle" class="ref">set rect style</a> or <a href="#about-setrectborder" class="ref">set rect border</a>),
				then this command returns the actual box border spriteset instead of the box style number.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrectrawborder" class="ref">set rect raw border</a>, </li>
<li><a href="#about-getrectborder" class="ref">get rect border</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrectborder"></a>
				<h4>set rect border (handle, border)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, change the graphical border it uses.
				The <span class="param">border</span> should be a box style number from 0 to 14 representing a
				text box border style, or <span class="param">border:line</span> for a simple line border only,
				or <span class="param">border:none</span> for no border at all.
				(You can't use <span class="param">border:raw</span>.)
				This command overrides both <a href="#about-setrectstyle" class="ref">set rect style</a> and <a href="#about-setrectrawborder" class="ref">set rect raw border</a>.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					<span class="param">border</span> is <b>not</b> a box border spriteset number, it's a box style number!
					If you want to specify the box border spriteset directly, use <a href="#about-setrectrawborder" class="ref">set rect raw border</a>.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getrectborder" class="ref">get rect border</a>, </li>
<li><a href="#about-setrectrawborder" class="ref">set rect raw border</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrectrawborder"></a>
				<h4>set rect raw border (handle, border)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, change the graphical border it uses.
				The <span class="param">border</span> should be a border spriteset number (<b>not</b> a box style number),
				or <span class="param">border:line</span> for a simple line border only,
				or <span class="param">border:none</span> for no border at all.
				(You can't use <span class="param">border:raw</span>.)
				This command overrides both <a href="#about-setrectstyle" class="ref">set rect style</a> and <a href="#about-setrectborder" class="ref">set rect border</a>.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getrectrawborder" class="ref">get rect raw border</a>, </li>
<li><a href="#about-setrectborder" class="ref">set rect border</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getrecttrans"></a>
				<h4>get rect trans (handle)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, returns a constant like <span class="code">trans:fuzzy</span>
				telling the background drawing mode;
				see <a href="#about-setrecttrans" class="ref">set rect trans</a> for the different constants.
				Returns <span class="code">trans:hollow</span> if the rect's opacity/fuzziness is 0,
				and <span class="code">trans:solid</span> (equal to <span class="code">false</span>) if it's 100.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrecttrans" class="ref">set rect trans</a>, </li>
<li><a href="#about-getrectfuzziness" class="ref">get rect fuzziness</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrecttrans"></a>
				<h4>set rect trans (handle, transparency setting)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, change how its background
				(the part that's not the border) is drawn.
				For <span class="param">transparency setting</span>, pass in one of the constants:
				<ul>
					<li>
<span class="code">trans:fuzzy</span> for checkered semi-transparency,</li>
					<li>
<span class="code">trans:blend</span> for true transparency,</li>
					<li>
<span class="code">trans:hollow</span> to not draw the background at all (only the border is drawn),</li>
					<li>
<span class="code">trans:solid</span> (equal to <a href="#about-false" class="ref">false</a>) for solid with no transparency.</li>
				</ul>
				When changing to <span class="code">trans:fuzzy</span> and <span class="code">trans:blend</span> the
				fuzziness/opacity defaults to 50% if it hasn't been previously set.
				Otherwise the previous value is restored:
				<pre>set rect opacity(rect, 70)   # Becomes 70% opaque
set rect trans(rect, trans:solid)  # Becomes opaque
set rect trans(rect, trans:fuzzy)  # Becomes fuzzy with 70% fuzziness</pre>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command is less powerful than <a href="#about-setrectfuzziness" class="ref">set rect fuzziness</a>
					and <a href="#about-setrectopacity" class="ref">set rect opacity</a>,
					which together can change to any of the four <span class="code">trans:</span> types,
					and also control the amount of transparency.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getrecttrans" class="ref">get rect trans</a>, </li>
<li>
<a href="#about-setrectfuzziness" class="ref">set rect fuzziness</a>, </li>
<li><a href="#about-setrectopacity" class="ref">set rect opacity</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getrectfuzziness"></a>
			<a name="about-getrectopacity"></a>
				<h4>get rect fuzziness (handle)</h4>
			<div class="notetext">Alias:</div>
			<h4>get rect opacity (handle)</h4>
<p>
			
				Given a rect slice <span class="param">handle</span>, returns the percentage fuzziness or opacity of the slice,
				from 0 to 100:
				0 if the rectangle is hollow, 100 if it is opaque,
				and a value between 1 and 99 if it is 'fuzzy' or 'blended (transparent)'
				(which share the same opacity value).
				Rectangles set to <span class="code">trans:fuzzy</span> or <span class="code">trans:blend</span> using <a href="#about-setrecttrans" class="ref">set rect trans</a> default to 50% opacity.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrecttrans" class="ref">set rect trans</a>, </li>
<li>
<a href="#about-getrecttrans" class="ref">get rect trans</a>, </li>
<li>
<a href="#about-setrectfuzziness" class="ref">set rect fuzziness</a>, </li>
<li>
<a href="#about-setrectopacity" class="ref">set rect opacity</a>, </li>
<li><a href="#about-getopacity" class="ref">get opacity</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrectfuzziness"></a>
				<h4>set rect fuzziness (handle, percent)</h4>
<p>
			
				Makes a rect slice <span class="param">handle</span> 'fuzzy', and optionally sets the <span class="param">percent</span>
				fuzziness/opacity (defaults to 50).
				A <span class="param">percent</span> of 0 is equivalent to <span class="code"><a href="#about-setrecttrans" class="ref">set rect trans</a>(handle, trans:hollow)</span>,
				a <span class="param">percent</span> of 100 is equivalent to <span class="code"><a href="#about-setrecttrans" class="ref">set rect trans</a>(handle, trans:opaque)</span>,
				and anything in between 1 and 99 implicitly does <span class="code"><a href="#about-setrecttrans" class="ref">set rect trans</a>(handle, trans:fuzzy)</span>
				as well as setting the percentage.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrectopacity" class="ref">set rect opacity</a>, </li>
<li>
<a href="#about-setrecttrans" class="ref">set rect trans</a>, </li>
<li>
<a href="#about-getrecttrans" class="ref">get rect trans</a>, </li>
<li><a href="#about-getrectfuzziness" class="ref">get rect fuzziness</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setrectopacity"></a>
				<h4>set rect opacity (handle, percent)</h4>
<p>
			
				Makes a rect slice <span class="param">handle</span> (truly) transparent, and optionally sets the <span class="param">percent</span>
				opacity (defaults to 50).
				A <span class="param">percent</span> of 0 is equivalent to <span class="code"><a href="#about-setrecttrans" class="ref">set rect trans</a>(handle, trans:hollow)</span>,
				a <span class="param">percent</span> of 100 is equivalent to <span class="code"><a href="#about-setrecttrans" class="ref">set rect trans</a>(handle, trans:opaque)</span>,
				and anything in between 1 and 99 implicitly does <span class="code"><a href="#about-setrecttrans" class="ref">set rect trans</a>(handle, trans:blend)</span>
				as well as setting the percentage.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setrectfuzziness" class="ref">set rect fuzziness</a>, </li>
<li>
<a href="#about-setrecttrans" class="ref">set rect trans</a>, </li>
<li>
<a href="#about-getrecttrans" class="ref">get rect trans</a>, </li>
<li>
<a href="#about-getrectopacity" class="ref">get rect opacity</a>, </li>
<li><a href="#about-setopacity" class="ref">set opacity</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Line%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Line Slices</h3>
		<p>
			Line slices are slighty different; their size doesn't exactly define the size of the rectangular part of the
			screen which they stretch across,
			but is instead used as the offset between their ends.
			Both ends are drawn inclusively.
			For example a width 10 height 0 Line slice positioned at x=50,y=20 will draw a line from 50,20 to 60,20,
			as a rectangle that's actually 11 pixels long and 1 pixel high.
			The line thickness is always 1 pixel.
			A width=0 height=0 line slice is a single pixel.
			<br>
			So you can give line slices a negative width or height too, to draw a line at any angle.
			The "top-left" alignment point of a line slice is its start point, and the "bottom-right" is its end point.
		</p>
<ul></ul>
		<div class="command">
			<a name="about-createline"></a>
				<h4>create line (width, height, color)</h4>
<p>
			
				Create a new line slice and return a handle to it.
				You can provide an optional <span class="param">width</span> and <span class="param">height</span> and an optional <span class="param">color</span> (all default to 0).
				Like all slice types, an line slice can be used as a container for other slices with <a href="#about-setparent" class="ref">set parent</a>.
			
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is line (handle)</h4>
		<p><a href="#about-sliceisline">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-getlinecolor"></a>
				<h4>get line color (handle)</h4>
<p>
			
				Given an line slice <span class="param">handle</span>, return its color.
				This will be a number from 0 to 255 representing a color from the master palette,
				or less than 0 for a UI color.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setlinecolor" class="ref">set line color</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setlinecolor"></a>
				<h4>set line color (handle, color)</h4>
<p>
			
				Given an line slice <span class="param">handle</span>, change its color.
				The <span class="param">color</span> should be a number from 0 to 255 representing a color from the master palette.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getlinecolor" class="ref">get line color</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Ellipse%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Ellipse Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-createellipse"></a>
				<h4>create ellipse (width, height, border color, fill color)</h4>
<p>
			Create a new ellipse slice and return a handle to it. You can provide an optional <span class="param">width</span> and <span class="param">height</span>, an optional <span class="param">border color</span> and an optional <span class="param">fill color</span>. The ellipse will be hollow if you do not specify a fill color. Like all slice types, an ellipse slice can be used as a container for other slices with <a href="#about-setparent" class="ref">set parent</a>
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is ellipse (handle)</h4>
		<p><a href="#about-sliceisellipse">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-getellipsebordercol"></a>
				<h4>get ellipse border col (handle)</h4>
<p>
			Given an ellipse slice <span class="param">handle</span>, return the color it uses for its border. This will be a number from 1 to 255 representing a color from the master palette, or 0 meaning transparent.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setellipsebordercol" class="ref">set ellipse border col</a>, </li>
<li>
<a href="#about-setellipsefillcol" class="ref">set ellipse fill col</a>, </li>
<li><a href="#about-getellipsefillcol" class="ref">get ellipse fill col</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setellipsebordercol"></a>
				<h4>set ellipse border col (handle, color)</h4>
<p>
			Given an ellipse slice <span class="param">handle</span>, change the color it uses for its border. The <span class="param">color</span> should be a number from 1 to 255 representing a color from the master palette. <span class="param">color</span> 0 means 'transparent', which is not very useful.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getellipsebordercol" class="ref">get ellipse border col</a>, </li>
<li>
<a href="#about-setellipsefillcol" class="ref">set ellipse fill col</a>, </li>
<li><a href="#about-getellipsefillcol" class="ref">get ellipse fill col</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getellipsefillcol"></a>
				<h4>get ellipse fill col (handle)</h4>
<p>
			Given an ellipse slice <span class="param">handle</span>, return the color it uses for its fill. This will be a number from 1 to 255 representing a color from the master palette, or 0 meaning transparent fill (hollow).
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setellipsebordercol" class="ref">set ellipse border col</a>, </li>
<li>
<a href="#about-getellipsebordercol" class="ref">get ellipse border col</a>, </li>
<li><a href="#about-setellipsefillcol" class="ref">set ellipse fill col</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setellipsefillcol"></a>
				<h4>set ellipse fill col (handle, color)</h4>
<p>
			Given an ellipse slice <span class="param">handle</span>, change the color it uses for its fill. The <span class="param">color</span> should be a number from 1 to 255 representing a color from the master palette, or 0 meaning transparent fill (hollow).
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setellipsebordercol" class="ref">set ellipse border col</a>, </li>
<li>
<a href="#about-getellipsebordercol" class="ref">get ellipse border col</a>, </li>
<li><a href="#about-getellipsefillcol" class="ref">get ellipse fill col</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Text%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Text Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-createtext"></a>
				<h4>create text</h4>
<p>
			Creates a new blank text slice and returns a <a href="#about-slicehandle" class="ref">slice handle</a> to it. A text slice holds a string of text, but it can be positioned and handled just like any other slice. Use the <a href="#about-setslicetext" class="ref">set slice text</a> command to copy a string into the text slice.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setslicetext" class="ref">set slice text</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>slice is text (handle)</h4>
		<p><a href="#about-sliceistext">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-setslicetext"></a>
				<h4>set slice text(handle, string id)</h4>
<p>
			
				Copy a string specified by <span class="param">string id</span> into the text slice specified by <span class="param">handle</span>.
				Afterwards, there is no link between the text slice and the string; they have different contents.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-createtext" class="ref">create text</a>, </li>
<li><a href="#about-getslicetext" class="ref">get slice text</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getslicetext"></a>
				<h4>get slice text(string id, slice handle)</h4>
<p>
			
				Copy the contents of the text slice specified by <span class="param">slice handle</span> into a string specified by <span class="param">string id</span>.
				Afterwards, there is no link between the text slice and the string; they have different contents.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-createtext" class="ref">create text</a>, </li>
<li><a href="#about-setslicetext" class="ref">set slice text</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-expandstringsinslices"></a>
				<h4>expand strings in slices(handle, saveslot)</h4>
<p>
			Starting with the slice handle, search for all child slices, and if any of them are text slices, then expand any text codes such as ${H1} ${V2} or ${S5}. This does the same thing that textboxes do automatically. The <span class="param">saveslot</span> argument is optional. If you leave it out, the codes will be expanded based on the currently running game state. If you specify a save slot number from 1-1000 then the string will be expanded based on hero names, variables, and strings in that save slot.
			
			<pre>  variable (col)
  col := load slice collection(1)
  expand strings in slices(col)
</pre>
			<div class="seealso">See also: <ul><li><a href="#about-expandstring" class="ref">expand string</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gettextcolor"></a>
				<h4>get text color(handle)</h4>
<p>
			Given a text slice <span class="param">handle</span>, returns the current color of the text.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-settextcolor" class="ref">set text color</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-settextcolor"></a>
				<h4>set text color(handle, color)</h4>
<p>
			Given a text slice <span class="param">handle</span>, change <span class="param">color</span> used to display the text.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-gettextcolor" class="ref">get text color</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gettextbg"></a>
				<h4>get text bg(handle)</h4>
<p>
			Given a text slice <span class="param">handle</span>, returns the current background color of the text. Note that this only matters if the text slice is not displaying an outline.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-gettextcolor" class="ref">get text color</a>, </li>
<li><a href="#about-settextbg" class="ref">set text bg</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-settextbg"></a>
				<h4>set text bg(handle, color)</h4>
<p>
			Given a text slice <span class="param">handle</span>, change the background <span class="param">color</span> used to display the text. This only matters if the text slice is set to not use an outline.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-gettextbg" class="ref">get text bg</a>, </li>
<li><a href="#about-settextcolor" class="ref">set text color</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getoutline"></a>
				<h4>get outline(handle)</h4>
<p>
			Given a text slice <span class="param">handle</span>, <span class="param">true</span> if the text slice is configured to display an outline, or <span class="param">false</span> if it is configured not to display and outline.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setoutline" class="ref">set outline</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setoutline"></a>
				<h4>set outline(handle, outline)</h4>
<p>
			Given a text slice <span class="param">handle</span>, change whether or not it will be displayed with an outline. If the second argument is omitted or <span class="param">true</span>, change the slice to show an outline, if the second argument is <span class="param">false</span> change the slice to show no outline.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getoutline" class="ref">get outline</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getwrap"></a>
				<h4>get wrap(handle)</h4>
<p>
			Given a text slice <span class="param">handle</span>, <span class="param">true</span> if the text slice is configured to wrap, or <span class="param">false</span> if it is configured not to wrap.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setwrap" class="ref">set wrap</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setwrap"></a>
				<h4>set wrap(handle, wrap)</h4>
<p>
			Given a text slice <span class="param">handle</span>, change whether or not it will wrap. If the second argument is omitted or <span class="param">true</span>, change the slice to wrap-mode, if the second argument is <span class="param">false</span> change the slice into non-wrapping mode.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getwrap" class="ref">get wrap</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Grid%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Grid Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-creategrid"></a>
				<h4>create grid (width, height, rows, columns)</h4>
<p>
			
				Creates a new grid slice, and returns a <a href="#about-slicehandle" class="ref">slice handle</a> to it.
				Grid slices are special containers that automatically arrange their children into rows and columns.
				No manual child positioning is required.
				The first two arguments are the width and height of the whole grid.
				The next two arguments are the number of rows and columns that should appear in the grid.
				If rows or columns are left out, the grid with be a boring 1x1 (a single large cell).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Beware that the order of the <span class="param">rows, columns</span> args is reversed from what you might expect:
					they affect the height and width of each cell, not width and height.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is grid (handle)</h4>
		<p><a href="#about-sliceisgrid">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-setgridcolumns"></a>
				<h4>set grid columns (handle, columns)</h4>
<p>
			Changes the number of columns in a grid slice. Child slices will be automatically repositioned. 1 is the minimum number of columns. If you attempt to set columns to zero, nothing will happen.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getgridcolumns" class="ref">get grid columns</a>, </li>
<li>
<a href="#about-setgridrows" class="ref">set grid rows</a>, </li>
<li><a href="#about-getgridrows" class="ref">get grid rows</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getgridcolumns"></a>
				<h4>get grid columns (handle)</h4>
<p>
			Returns the number of columns in a grid slice.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setgridcolumns" class="ref">set grid columns</a>, </li>
<li>
<a href="#about-setgridrows" class="ref">set grid rows</a>, </li>
<li><a href="#about-getgridrows" class="ref">get grid rows</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setgridrows"></a>
				<h4>set grid rows (handle, rows)</h4>
<p>
			Changes the number of rows in a grid slice. Child slices will be automatically repositioned. 1 is the minimum number of rows. If you attempt to set the rows to 0, nothing will happen.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setgridcolumns" class="ref">set grid columns</a>, </li>
<li>
<a href="#about-getgridcolumns" class="ref">get grid columns</a>, </li>
<li><a href="#about-getgridrows" class="ref">get grid rows</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getgridrows"></a>
				<h4>get grid rows (handle)</h4>
<p>
			Returns the number of rows in a grid slice.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setgridcolumns" class="ref">set grid columns</a>, </li>
<li>
<a href="#about-getgridcolumns" class="ref">get grid columns</a>, </li>
<li><a href="#about-setgridrows" class="ref">set grid rows</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-showgrid"></a>
				<h4>show grid (handle, shown)</h4>
<p>
			Grid slices are normally invisible, but they can optionally display gridlines. This command takes a grid slice <span class="param">handle</span> and a true or false value. This command has no effect on the visibility of the grid's children. Don't confuse this command with <a href="#about-setslicevisible" class="ref">set slice visible</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-gridisshown" class="ref">grid is shown</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gridisshown"></a>
				<h4>grid is shown (handle)</h4>
<p>
			This command takes a grid slice <span class="param">handle</span> and returns true if the grid is showing its optional grid lines. If the grid is in its normal invisible state, this command returns false. Don't confuse this command with <a href="#about-getslicevisible" class="ref">get slice visible</a>.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-showgrid" class="ref">show grid</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Select%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Select Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-createselect"></a>
				<h4>create select (width, height)</h4>
<p>
			Creates a new select slice, and returns a <a href="#about-slicehandle" class="ref">slice handle</a> to it. Select slices are special containers that automatically Manage the visibility of their children. Only one child of a select slice can ever be visible at the same time. The two arguments are the width and height of the select slice.
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is select (handle)</h4>
		<p><a href="#about-sliceisselect">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-setselectsliceindex"></a>
				<h4>set select slice index (handle, index)</h4>
<p>
			Changes the currently selected (visible) child of a select slice. The first argument is the handle of the select slice. The second argument is the index number of the child slice (not a handle or a lookup code!) this will be 0 for the first child, 1 for the second child, 2 for the third child, and so-on. An invalid index number means no child slices will be visible at all.
				<br>
				Use <a href="#about-setselectedchild" class="ref">set selected child</a> instead if you want to set the selected child
				by its slice handles instead of index.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getselectsliceindex" class="ref">get select slice index</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getselectsliceindex"></a>
				<h4>get select slice index (handle)</h4>
<p>
			Returns the index number of the currently selected (visible) child of a select slice. The first argument is the handle of the select slice. The return value the index number of the child slice (not a handle or a lookup code!) this will be 0 for the first child, 1 for the second child, 2 for the third child, and so-on.
				<br>
				Use <a href="#about-getselectedchild" class="ref">get selected child</a> instead if you want a slice handle for
				the selected child instead of its index.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setselectsliceindex" class="ref">set select slice index</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setselectedchild"></a>
				<h4>set selected child (select, child)</h4>
<p>
			
				Given a select slice handle <span class="param">select</span> and a slice handle for one of its
				children, <span class="param">child</span>, selects that child.
				<br>
				This is just a convenience wrapper around <a href="#about-setselectsliceindex" class="ref">set select slice index</a>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getselectedchild"></a>
				<h4>get selected child (handle)</h4>
<p>
			
				Given a select slice <span class="param">handle</span>, returned the slice handle of the currently selected child.
				Returns <span class="code">false</span>/0 if the selected index is out of range
				(including when slice has no children).
				<br>
				This is just a convenience wrapper around <a href="#about-getselectsliceindex" class="ref">get select slice index</a>.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Scroll%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Scroll Slices</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-createscroll"></a>
				<h4>create scroll (width, height)</h4>
<p>
			
				Creates a new scroll slice, and returns a <a href="#about-slicehandle" class="ref">slice handle</a> to it.
				Scroll slices are special containers that automatically draw a scrollbar on ther right and bottom edges
				if their children do not fit inside them. The two arguments are the width and height of the scroll slice.
			
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is scroll (handle)</h4>
		<p><a href="#about-sliceisscroll">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-setscrollbarstyle"></a>
				<h4>set scroll bar style (handle, style)</h4>
<p>
			Changes the style of a scroll slice's scrollbar. The first argument is the handle of the scroll slice. The second argument is the style number. Scroll bar styles use the same colors as text box styles. The background color is used for the entire scrollbar, and the foreground color is used for the position indicator in the scrollbar.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getscrollbarstyle" class="ref">get scroll bar style</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getscrollbarstyle"></a>
				<h4>get scroll bar style (handle)</h4>
<p>
			Returns the current style number of a scroll slice's scrollbar. The first argument is the handle of the scroll slice. Scroll bar styles use the same numbering as text box styles.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setscrollbarstyle" class="ref">set scroll bar style</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setscrollcheckdepth"></a>
				<h4>set scroll check depth (handle, depth)</h4>
<p>
			Changes the number of generations of children and grandchildren that a scroll slice cares about. The first argument is the handle of the scroll slice. The second argument is the desired depth, or 0 to check the entire family tree of all child slices. For example, a depth of 1 means the scroll only considers children. 2 means it considers children+grandchildren. 3 means it considers children+grandchildren+greatgrandchildren.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getscrollcheckdepth" class="ref">get scroll check depth</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getscrollcheckdepth"></a>
				<h4>get scroll check depth (handle)</h4>
<p>
			Returns the number of generations of children and grandchildren that a scroll slice cares about, or 0 if it considers the entire family tree of every child. The first argument is the handle of the scroll slice. For example, a return value of 1 means the scroll only considers children. 2 means it considers children+grandchildren. 3 means it considers children+grandchildren+greatgrandchildren.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setscrollcheckdepth" class="ref">set scroll check depth</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-scrolltochild"></a>
				<h4>scroll to child</h4>
				An alias for <a href="#about-scrolltoslice">scroll to slice</a>.
			</div>
		<div class="command">
			<a name="about-scrolltoslice"></a>
				<h4>scroll to slice (parent, sl, apply padding)</h4>
<p>
			
				Causes all the children of the <span class="param">parent</span> slice to be shifted by the same offset
				so the screen position of <span class="param">sl</span> (any child or descendent of <span class="param">parent</span>) fits inside the parent.
				<br>
				If <span class="param">apply padding</span> is true (the default is <span class="code">false</span>),
				then <span class="param">sl</span> is scrolled within the area of <span class="param">parent</span>
				with padding subtracted (the area covered by a child set to Fill Parent).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This is mainly intended for scroll slices, such as those created with the <a href="#about-createscroll" class="ref">create scroll</a> command,
					but it can be used on any type of slice.
					(Children that are set to fill their parents, or children that are automatically
					positioned by a grid parent will be unaffected, and an error or warning may be shown.)
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This works for all descendent slices <span class="param">sl</span>, not just children!
					It only changes the positions of the children of <span class="param">parent</span>,
					but that causes the screen position of <span class="param">sl</span> to also change.
				</div>
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Panel%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Panel Slices</h3>
		<p>
			Panel slices split up their area between their first two children in various ways,
			and don't display any other children.
		</p>
<ul></ul>
		<div class="command">
			<a name="about-createpanel"></a>
				<h4>create panel (width, height)</h4>
<p>
			
				Creates a new panel slice, and returns a <a href="#about-slicehandle" class="ref">slice handle</a> to it.
				Panel slices are special containers that automatically move and resize their first two children.
				The first two children will fill the panel slice's area (while others aren't drawn).
				For example, a panel slice might be used to make to child slices share a 60%/40% split of an area
				regardless of the size or shape of that area.
				The two arguments are the width and height of the panel slice.
			
			
			
			
		</p>
</div>
		<div class="command">
		<h4>slice is panel (handle)</h4>
		<p><a href="#about-sliceispanel">Documented in the Checking Slice Type section.</a></p>
		</div>
		<div class="command">
			<a name="about-getpanelisvertical"></a>
				<h4>get panel is vertical (handle)</h4>
<p>
			Returns true if the given panel slice <span class="param">handle</span> is configured to orient its children vertically, or false if it orients them horizontally.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setpanelisvertical"></a>
				<h4>set panel is vertical (handle, value)</h4>
<p>
			Changes how the given panel slice <span class="param">handle</span> orients its children. If the <span class="param">value</span> is true, they will be oriented vertically, or if false it will orient them horizontally.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getpanelprimaryindex"></a>
				<h4>get panel primary index (handle)</h4>
<p>
			Returns 0 or 1 to indicate whether the first or second child of the given panel slice <span class="param">handle</span> is the primary one. The primary child gets its size based on the panel slices's percentage and pixels, while the other child slice takes the remaining space.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setpanelprimaryindex"></a>
				<h4>set panel primary index (handle, zero or one)</h4>
<p>
			Changes whether the first or second child of the given panel slice <span class="param">handle</span> is the primary one. The primary child gets its size based on the panel slices's percentage and pixels, while the other child slice takes the remaining space.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getpanelpercentasint"></a>
				<h4>get panel percent as int (handle)</h4>
<p>
			Given a panel slice <span class="param">handle</span>, returns an integer from 0 to 100 to indicate what percentage of the panel should be filled by the primary child slice
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setpanelpercent"></a>
				<h4>set panel percent (handle, percent)</h4>
<p>
			Given a panel slice <span class="param">handle</span>, changes the percentage of the panel that should be filled by the primary child slice. The panel's percentage size and pixel size will be added together to compute the actual size of the primary child.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getpanelpixels"></a>
				<h4>get panel pixels (handle)</h4>
<p>
			Given a panel slice <span class="param">handle</span>, returns the number of pixels of space that the panel will reserve for its primary child
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setpanelpixels"></a>
				<h4>set panel pixels (handle, pixels)</h4>
<p>
			Given a panel slice <span class="param">handle</span>, changes the number of pixels of space that the panel will reserve for its primary child. The panel's percentage size and pixel size will be added together to compute the actual size of the primary child.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getpanelpadding"></a>
				<h4>get panel padding (handle)</h4>
<p>
			Given a panel slice <span class="param">handle</span>, returns the number of pixels of padding that will be left between the primary and secondary children
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setpanelpadding"></a>
				<h4>set panel padding (handle, padding)</h4>
<p>
			Given a panel slice <span class="param">handle</span>, changes the number of pixels of padding that the panel will leave between the primary and secondary children.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Map%20Layer%20Slices"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			<a href="#Slice%20Types">Slice Types</a> →
			</span>Map Layer Slices</h3>
		<p>
			Map Layer slices (also called Map slices) are special slices which display one of the
			tilemap layers of the current map.
			You can't create them; they always exist. Use <a href="#about-lookupslice" class="ref">lookup slice</a> to get a handle
			for one of the map layer slices.
			They don't have any special attributes that you can access
			(use the <a href="#Tweaking%20Maps">map script commands</a> to modify the map instead),
			and you can't resize them or change their parent, but you can do anything else,
			such as move them about to create parallax effects,
			make them invisible, reorder them, change their autosort mode, and so forth.
		</p>
<ul></ul>
		<div class="command">
		<h4>slice is map layer (handle)</h4>
		<p><a href="#about-sliceismaplayer">Documented in the Checking Slice Type section.</a></p>
		</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Slice%20Collision%20Testing"></a>
		<h3>
<span class="backlink"><a href="#Slices">Slices</a> →
			</span>Slice Collision Testing</h3>
		<p>
			<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
				For the purposes of collision testing, all slices are treated as solid rectangles,
				even if they are text slices, sprites, ellipses, lines or invisible.
				A point right on the boundary of this rectangle counts as a collision.
			</div>
		</p>
<ul></ul>
		<div class="command">
			<a name="about-slicecollidepoint"></a>
				<h4>slice collide point (handle, x, y)</h4>
<p>
			
				Return true if a given <span class="param">x</span> and <span class="param">y</span> coordinate point lies inside the
				bounding rectangle for slice <span class="param">handle</span>'s screen position.
				<span class="param">x</span> and <span class="param">y</span> are pixel coordinates relative to the screen,
				such as the ones returned by <a href="#about-mousepixelx" class="ref">mouse pixel X</a> and <a href="#about-mousepixely" class="ref">mouse pixel Y</a>
				(but can also be off the screen).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Unlike <a href="#about-sliceatpixel" class="ref">slice at pixel</a>, this command ignores slice clipping.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-slicecollide" class="ref">slice collide</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-slicecollide"></a>
				<h4>slice collide (handle1, handle2)</h4>
<p>
			
				Given a pair of slice handles, return true if their screen positions overlap with
				one another (even if one or both are off the edge of the screen or hidden or
				clipped by one of their ancestors).
				Parent/child relationships have nothing to do with this test;
				it doesn't matter whether the slices are related or what their children are.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicecollidepoint" class="ref">slice collide point</a>, </li>
<li><a href="#about-slicecontains" class="ref">slice contains</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-slicecontains"></a>
				<h4>slice contains (handle1, handle2)</h4>
<p>
			
				Return true if the screen position of slice <span class="param">handle2</span> is completely inside
				slice <span class="param">handle1</span> (even if one or both are off the edge of the screen or hidden).
				Parent/child relationships have nothing to do with this test;
				it doesn't matter whether the slices are related or what their children are.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-slicecollide" class="ref">slice collide</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sliceatpixel"></a>
				<h4>slice at pixel (parent, x, y, number, check descendants, visible only)</h4>
<p>
			
				Searches through all the descendants of <span class="param">parent</span> for a slice containing the given <span class="param">x</span>, <span class="param">y</span> pixel screen position.
				To search all your slices, you can often use <a href="#about-spritelayer" class="ref">sprite layer</a> as <span class="param">parent</span>, since that is the default parent of new slices.
				<br>
				<span class="param">number</span> is an optional argument indicating which slice to return if there is more than one at that point;
				the bottom-most one (returned by default) is number 0, next up is 1, etc.
				slice at pixel returns 0 if <span class="param">number</span> is too large (larger than or equal to the number of overlapping slices).
				If you pass <a href="#about-getcount" class="ref">get count</a> as <span class="param">number</span> the number of slices at that pixel is returned instead of a slice handle.
				<br>
				<span class="param">check descendants</span> is an optional argument defaulting to true.
				If false, then only <span class="param">parent</span>'s children will be checked, not all its descendants.
				<br>
				<span class="param">visible only</span> is an optional argument defaulting to false.
				If true, then only visible slices are counted or returned.
				(That is, slices marked not-visible are ignored while searching for slices, but whether <span class="param">parent</span> itself
				is visible doesn't have any effect.)
				For example, pass true for <span class="param">visibleonly</span> in order to avoid finding the children of Select slices
				which are not selected (and therefore invisible).
				<br>
				This command never returns Special slices, such as the <a href="#about-spritelayer" class="ref">sprite layer</a> slice.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					A point on the left or top edge of a slice counts as inside the slice,
					while one on the bottom or right edges counts as outside.
					If a slice has zero width or zero height, then there are no points inside it,
					and slice at pixel will never return it!
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If a slice clips its children, then any parts of those children
					that are clipped off are ignored when looking for <span class="param">x</span>, <span class="param">y</span>.
					However, it doesn't matter whether <span class="param">parent</span> or any of its ancestors
					are set to clip; it's assumed that they don't.
					<br>
					You can also use this to speed up the search, since all the children of
					a clipping slice will be skipped if that slice itself doesn't contain
					<span class="param">x</span>, <span class="param">y</span>.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-slicecollidepoint" class="ref">slice collide point</a>, </li>
<li>
<a href="#about-findcollidingslice" class="ref">find colliding slice</a>, </li>
<li><a href="#about-menuitematpixel" class="ref">menu item at pixel</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-findcollidingslice"></a>
				<h4>find colliding slice (parent, slice, number, check descendants, visible only)</h4>
<p>
			
				Searches through all the descendants of <span class="param">parent</span> for a slice colliding (intersecting) with the given <span class="param">slice</span> (by screen position).
				(Children of <span class="param">slice</span> are ignored.)
				To search all your slices, you can often use <a href="#about-spritelayer" class="ref">sprite layer</a> as <span class="param">parent</span>, since that is the default parent of new slices.
				<span class="param">number</span> is an optional argument indicating which slice to return if there is more than one at that point;
  				the bottom most one (returned by default) is number 0, next up is 1, etc.
				0 is returned if <span class="param">number</span> is too large (larger than or equal to the number of overlapping slices).
				If you pass <a href="#about-getcount" class="ref">get count</a> as <span class="param">number</span> the number of overlapping slices is returned instead.
				<span class="param">check descendants</span> is an optional argument defaulting to true.
				If false, then only <span class="param">parent</span>'s children will be checked, not all its descendants.
				(That is, slices marked not-visible are ignored while searching for slices, but whether <span class="param">parent</span> itself
				is visible doesn't have any effect.)
				Pass true for <span class="param">visibleonly</span> in order to avoid finding the children of Select slices which are not selected (and therefore invisible).
				<span class="param">visibleonly</span> defaults to false.
				<br>
				This command never returns Special slices, such as the <a href="#about-spritelayer" class="ref">sprite layer</a> slice, nor will it return <span class="param">slice</span> or any of its descendants.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If a slice clips its children, then any parts of those children
					that are clipped off are ignored when checking collisions.
					However, it doesn't matter whether <span class="param">parent</span> or any of its ancestors
					are set to clip; it's assumed that they don't.
					<br>
					You can also use this to speed up the search, since all the children of
					a clipping slice will be skipped if that slice itself doesn't collide
					with <span class="param">slice</span>.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-sliceatpixel" class="ref">slice at pixel</a>, </li>
<li><a href="#about-slicecollide" class="ref">slice collide</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>move slice with wallchecking (sl, relative x, relative y, friction%)</h4>
		<p><a href="#about-moveslicewithwallchecking">Documented in the Wall Checking section.</a></p>
		</div>
		<div class="command">
		<h4>check wall collision x (x, y, width, height, relative x, relative y, friction%)</h4>
		<p><a href="#about-checkwallcollisionxy">Documented in the Wall Checking section.</a></p>
		</div>
		<hr>
		</div>
		<div class="section">
<a name="Time%20Functions"></a>
		<h3>
<span class="backlink"></span>Time Functions</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Time Functions-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-daysofplay">days of play</a><br>
		<a href="#about-setdaysofplay">set days of play (days)</a><br>
		<a href="#about-hoursofplay">hours of play</a><br>
		<a href="#about-sethoursofplay">set hours of play (hours)</a><br>
		<a href="#about-minutesofplay">minutes of play</a><br>
		<a href="#about-setminutesofplay">set minutes of play (min)</a><br>
		<a href="#about-secondsofplay">seconds of play</a><br>
		<a href="#about-setsecondssofplay">set seconds of play (sec)</a><br>
		<a href="#about-systemyear">system year</a><br>
		<a href="#about-systemmonth">system month</a><br>
		<a href="#about-systemday">system day</a><br>
		<a href="#about-systemhour">system hour</a><br>
		<a href="#about-systemminute">system minute</a><br>
		<a href="#about-systemsecond">system second</a><br>
		<a href="#about-overridetickmilliseconds">override tick milliseconds (ms)</a><br>
		<a href="#about-canceloverridetickmilliseconds">cancel override tick milliseconds (ms)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-daysofplay"></a>
				<h4>days of play</h4>
<p>
			Returns the number of days that the game has been played
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setdaysofplay"></a>
				<h4>set days of play (days)</h4>
<p>
			Sets the number of days that the game has been "played" to <span class="param">days</span>, as long as <span class="param">days</span> is greater than 0. Useful if there are times that shouldn't count towards the play time, or for penalizing bad players &gt;:)
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-hoursofplay"></a>
				<h4>hours of play</h4>
<p>
			Returns the number of hours that the game has been played, 0 to 23
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sethoursofplay"></a>
				<h4>set hours of play (hours)</h4>
<p>
			Sets the number of hours that the game has been "played" to <span class="param">hours</span>, as long as <span class="param">hours</span> is within the 0-23 range.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-minutesofplay"></a>
				<h4>minutes of play</h4>
<p>
			Returns the number of minutes that the game has been played, 0 to 59
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setminutesofplay"></a>
				<h4>set minutes of play (min)</h4>
<p>
			Sets the number of minutes that the game has been "played" to <span class="param">min</span>, as long as <span class="param">min</span> is within the 0-59 range.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-secondsofplay"></a>
				<h4>seconds of play</h4>
<p>
			Returns the number of seconds that the game has been played, 0 to 59
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setsecondssofplay"></a>
				<h4>set seconds of play (sec)</h4>
<p>
			Sets the number of seconds that the game has been "played" to <span class="param">sec</span>, as long as <span class="param">sec</span> is within the 0-59 range.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-systemyear"></a>
				<h4>system year</h4>
<p>
			Returns the current real-world year
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-systemmonth"></a>
				<h4>system month</h4>
<p>
			Returns the current real-world month, 1 to 12
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-systemday"></a>
				<h4>system day</h4>
<p>
			Returns the current real-world day, 1 to 31
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-systemhour"></a>
				<h4>system hour</h4>
<p>
			Returns the current real-world hour, 0 to 23
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-systemminute"></a>
				<h4>system minute</h4>
<p>
			Returns the current real-world minute, 0 to 59
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-systemsecond"></a>
				<h4>system second</h4>
<p>
			Returns the current real-world second, 0 to 59
			
			
			
		</p>
</div>
		<div class="command">
		<h4>milliseconds</h4>
		<p><a href="#about-milliseconds">Documented in the Advanced Functions section.</a></p>
		</div>
		<div class="command">
		<h4>microseconds</h4>
		<p><a href="#about-microseconds">Documented in the Advanced Functions section.</a></p>
		</div>
		<div class="command">
			<a name="about-overridetickmilliseconds"></a>
				<h4>override tick milliseconds (ms)</h4>
<p>
			Changes the number of milliseconds in a game tick. The <span class="param">ms</span> argument is a number of milliseconds in the range of 16 to 200
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-canceloverridetickmilliseconds"></a>
				<h4>cancel override tick milliseconds (ms)</h4>
<p>
			Resets the number of milliseconds in a game tick to whatever default is set up in the "Edit General Game Settings" menu.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Tweaking%20Maps"></a>
		<h3>
<span class="backlink"></span>Tweaking Maps</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Tweaking Maps-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-currentmap">current map</a><br>
		<a href="#about-maxmapid">max map id</a><br>
		<a href="#about-mapwidth">map width (map)</a><br>
		<a href="#about-mapheight">map height (map)</a><br>
		<a href="#about-getmaptileset">get map tileset</a><br>
		<a href="#about-layertileset">layer tileset (layer)</a><br>
		<a href="#about-loadtileset">load tileset (tileset, layer)</a><br>
		<a href="#about-changetileset">change tileset (tileset, layer)</a><br>
		<a href="#about-lastlayerid">last layer id</a><br>
		<a href="#about-layeridunderwalkabouts">layer id under walkabouts</a><br>
</div>
		<li>
<a href="#Tilemap,%20Wallmap%20and%20Foemap">Tilemap, Wallmap and Foemap</a><br>
		<ul class="content-shown">
		<a href="#about-readmapblock">read map block (x, y, layer)</a><br>
		<a href="#about-writemapblock">write map block (x, y, value, layer)</a><br>
		<a href="#about-readwallbit">read wall bit (x, y, bit)</a><br>
		<a href="#about-writewallbit">write wall bit (x, y, bit, value)</a><br>
		<a href="#about-readpassblock">read pass block (x, y)</a><br>
		<a href="#about-writepassblock">write pass block (x,y,value)</a><br>
		<a href="#about-readfoemap">read foemap (x, y)</a><br>
</ul>
<ul>
		<li>
<a href="#Tile%20Animations">Tile Animations</a><br>
		<ul class="content-shown">
		<a href="#about-currentdisplaytile">current display tile (tile number, layer)</a><br>
		<a href="#about-animationstarttile">animation start tile (tile number, layer)</a><br>
		<a href="#about-gettileanimationoffset">get tile animation offset (animation pattern, layer)</a><br>
		<a href="#about-settileanimationoffset">set tile animation offset (animation pattern, offset, layer)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Wall%20Checking">Wall Checking</a><br>
		<ul class="content-shown">
		<a href="#about-checkwallcollisionxy">check wall collision x (x, y, width, height, relative x, relative y, friction%)</a><br>
		<a href="#about-moveslicewithwallchecking">move slice with wallchecking (sl, relative x, relative y, friction%)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</li>
		<li>
<a href="#Zonemaps">Zonemaps</a><br>
		<ul class="content-shown">
		<a href="#about-writezone">write zone (zone id, x, y, value)</a><br>
		<a href="#about-readzone">read zone (zone id, x, y)</a><br>
		<a href="#about-zoneatspot">zone at spot (x, y, count)</a><br>
		<a href="#about-getzonename">get zone name (string id, zone id)</a><br>
		<a href="#about-getzoneextra">get zone extra (zone id, extra num)</a><br>
		<a href="#about-setzoneextra">set zone extra (zone id, extra num, value)</a><br>
		<a href="#about-zonenumberoftiles">zone number of tiles (zone id)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#General%20Map%20Settings">General Map Settings</a><br>
		<ul class="content-shown">
		<a href="#about-allowminimap">allow minimap (setting)</a><br>
		<a href="#about-allowsaveanywhere">allow save anywhere (setting)</a><br>
		<a href="#about-setharmtiledamage">set harm tile damage (amount)</a><br>
		<a href="#about-setharmtileflash">set harm tile flash (color)</a><br>
		<a href="#about-setfootoffset">set foot offset (offset)</a><br>
		<a href="#about-getfootoffset">get foot offset</a><br>
		<a href="#about-drawnpcsaboveheroes">draw NPCs above heroes (setting)</a><br>
		<a href="#about-setmapedgemode">set map edge mode (mode, default tile)</a><br>
		<a href="#about-getmapedgemode">get map edge mode</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Map%20State">Map State</a><br>
		<ul class="content-shown">
		<a href="#about-savemapstate">save map state (whichdata, customid)</a><br>
		<a href="#about-loadmapstate">load map state (whichdata, customid)</a><br>
		<a href="#about-resetmapstate">reset map state (whichdata)</a><br>
		<a href="#about-deletemapstate">delete map state (whichdata)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-currentmap"></a>
				<h4>current map</h4>
<p>
			Returns the number (ID) of the current map.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-maxmapid"></a>
				<h4>max map id</h4>
<p>
			Returns the number (ID) of the highest numbered map that exists in the game.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mapwidth"></a>
				<h4>map width (map)</h4>
<p>
			Returns the width of a map in tiles. <span class="param">map</span>, the map ID, is optional; the width of the current map is returned if it is not specified.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mapheight"></a>
				<h4>map height (map)</h4>
<p>
			Returns the height of a map in tiles. <span class="param">map</span>, the map ID, is optional; the height of the current map is returned if it is not specified.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmaptileset"></a>
				<h4>get map tileset</h4>
<p>
			Returns the ID number of the default tileset for the map. <a href="#about-loadtileset" class="ref">load tileset</a> does not affect the value returned by this function, but <a href="#about-changetileset" class="ref">change tileset</a> does. Use <a href="#about-layertileset" class="ref">layer tileset</a> instead to find the actual currently in-use tileset(s).
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-layertileset"></a>
				<h4>layer tileset (layer)</h4>
<p>
			Returns the ID number of the tileset that a certain tilemap layer is currently using.
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-changetileset" class="ref">change tileset</a>, </li>
<li><a href="#about-getmaptileset" class="ref">get map tileset</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-loadtileset"></a>
				<h4>load tileset (tileset, layer)</h4>
<p>
			Temporarily loads a different default or layer tileset for the currently displaying map.<br>Use <span class="param">load tileset</span> (with no arguments) to restore the old tilesets after using load tileset (this has no effect after <a href="#about-changetileset" class="ref">change tileset</a>).<br>Use <span class="param">load tileset (tileset)</span> to load a new default tileset. <span class="param">tileset</span> is the ID number of the tileset to load. This changes the tileset for all layers that are set to 'Tileset: default'.<br>Use <span class="param">load tileset (tileset, layer)</span> to load in a new a tileset for a single layer. <span class="param">layer</span> is the layer number to target.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					This command has a temporary effect: even if the map state is saved,
					the new tilesets will not persist if you leave the map and come back.
					<a href="#about-changetileset" class="ref">change tileset</a> is a more permanent alternative command.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmaptileset" class="ref">get map tileset</a>, </li>
<li><a href="#about-layertileset" class="ref">layer tileset</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-changetileset"></a>
				<h4>change tileset (tileset, layer)</h4>
<p>
			An alternative to <a href="#about-loadtileset" class="ref">load tileset</a>: Changes and loads in the default or a map layer tileset for the current map. Unlike <a href="#about-loadtileset" class="ref">load tileset</a>, this command's effects last to the next time you come back to this map if you save the map state (in General Map Settings, or mapstate:mapsettings with <a href="#about-savemapstate" class="ref">save map state</a>). To undo the effects, you'll need to use <a href="#about-resetmapstate" class="ref">reset map state</a>. <span class="param">tileset</span> is the ID number of the tileset to load. You can use the constant <span class="param">tileset:default</span> to set a layer to use the map's default tileset. <span class="param">layer</span> is the layer number to change, or the constant <span class="param">tileset:default</span> which changes the map's default tileset. It defaults to <span class="param">tileset:default</span> if omitted. <span class="param">change tileset</span> with no arguments undoes any changes to tilesets made using <a href="#about-loadtileset" class="ref">load tileset</a> (<b>not</b> <span class="code">change tileset</span>).
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					Any call to <span class="code">change tileset</span> undoes all changes (to all map layers) made by <a href="#about-loadtileset" class="ref">load tileset</a>.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getmaptileset" class="ref">get map tileset</a>, </li>
<li><a href="#about-layertileset" class="ref">layer tileset</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-lastlayerid"></a>
				<h4>last layer id</h4>
<p>
			
				Returns the ID number of the last map layer that exists on the current map.
				This is the topmost layer that is drawn on top of all the other layers.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-layeridunderwalkabouts" class="ref">layer id under walkabouts</a>, </li>
<li><a href="#about-layertileset" class="ref">layer tileset</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-layeridunderwalkabouts"></a>
				<h4>layer id under walkabouts</h4>
<p>
			
				Returns the ID number of the map layer directly beneath the layer where hero and NPC walkabouts are drawn.
				This is the topmost layer that is not drawn on top of walkabouts.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-lastlayerid" class="ref">last layer id</a>, </li>
<li><a href="#about-layertileset" class="ref">layer tileset</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Tilemap,%20Wallmap%20and%20Foemap"></a>
		<h3>
<span class="backlink"><a href="#Tweaking%20Maps">Tweaking Maps</a> →
			</span>Tilemap, Wallmap and Foemap</h3>
		<p></p>
<ul>
		<li>
<a href="#Tile%20Animations">Tile Animations</a><br>
		<ul></ul>
</li>
		<li>
<a href="#Wall%20Checking">Wall Checking</a><br>
		<ul></ul>
</li>
</ul>
		<div class="command">
			<a name="about-readmapblock"></a>
				<h4>read map block (x, y, layer)</h4>
<p>
			Returns the value of a map tile on the current map at the specified X,Y position. Normal map tiles return values from 0-159, animating maptiles from set 1 return 160-207 and animating maptiles from set 2 return 208-255. The optional layer argument defaults to 0 for the bottom layer, but can be any layer number that is valid for the current map.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-currentdisplaytile" class="ref">current display tile</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-writemapblock"></a>
				<h4>write map block (x, y, value, layer)</h4>
<p>
			Writes a new tile to the specified X,Y position on the current map. This change will only persist until you leave the map or fight a battle. The optional layer argument defaults to 0 for the bottom layer, but can be any layer number that is valid for the current map.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-readwallbit"></a>
				<h4>read wall bit (x, y, bit)</h4>
<p>
			
				Check the value of a single bit of one tile of the wallmap of the current map.
				Returns <span class="code">true</span> or <span class="code">false</span>.
				<br>
				<span class="param">x</span>, <span class="param">y</span> is the position in tiles.
				<br>
				<span class="param">bit</span> can be <a href="#about-northwall" class="ref">north wall</a>, <a href="#about-eastwall" class="ref">east wall</a>, <a href="#about-southwall" class="ref">south wall</a>,
				or <a href="#about-westwall" class="ref">west wall</a> to check of the four possible walls on the tile,
				or <a href="#about-vehiclea" class="ref">vehicle A</a>, <a href="#about-vehicleb" class="ref">vehicle B</a>, <a href="#about-harmtile" class="ref">harm tile</a> or
				<a href="#about-overheadtile" class="ref">overhead tile</a> to check one of the other bits.
				<br>
				See <a href="#about-readpassblock" class="ref">read pass block</a> for an example.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-readpassblock" class="ref">read pass block</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-writewallbit"></a>
				<h4>write wall bit (x, y, bit, value)</h4>
<p>
			
				Set the value of a single bit of one tile of the wallmap of the current map.
				<br>
				<span class="param">x</span>, <span class="param">y</span> is the position in tiles.
				<br>
				<span class="param">bit</span> can be <a href="#about-northwall" class="ref">north wall</a>, <a href="#about-eastwall" class="ref">east wall</a>, <a href="#about-southwall" class="ref">south wall</a>,
				or <a href="#about-westwall" class="ref">west wall</a> to set the presense of the four possible walls on the tile,
				or <a href="#about-vehiclea" class="ref">vehicle A</a>, <a href="#about-vehicleb" class="ref">vehicle B</a>, <a href="#about-harmtile" class="ref">harm tile</a> or
				<a href="#about-overheadtile" class="ref">overhead tile</a>.
				<br>
				<span class="param">value</span> is optional should be either <span class="code">false</span> or <span class="code">true</span> (or any other non-zero
				value). The default is <span class="code">true</span>.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-writepassblock" class="ref">write pass block</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-readpassblock"></a>
				<h4>read pass block (x, y)</h4>
<p>
			Returns the value of a passability (wallmap) tile on the current map at the specified <span class="param">x</span>, <span class="param">y</span> position. The return value will be from 0 to 255 and consists of eight flag bits.<br><br>bit 1 = <a href="#about-northwall" class="ref">north wall</a><br>bit 2 = <a href="#about-eastwall" class="ref">east wall</a><br>bit 4 = <a href="#about-southwall" class="ref">south wall</a><br>bit 8 = <a href="#about-westwall" class="ref">west wall</a><br>bit 16 = <a href="#about-vehiclea" class="ref">vehicle A</a><br>bit 32 = <a href="#about-vehicleb" class="ref">vehicle B</a><br>bit 64 = <a href="#about-harmtile" class="ref">harm tile</a><br>bit 128 = <a href="#about-overheadtile" class="ref">overhead tile</a><br><br>To check the value of a specific bit, use the <a href="#about-and" class="ref">and</a> operator as in the following example, or just use the <a href="#about-readwallbit" class="ref">read wall bit</a> command instead.
			
			<pre>  variable (pass)
  pass := read pass block(hero X(me), hero Y(me))
  if (pass, and, harm tile) then (
    # The hero is standing on a harm tile
  )

  # The following is equivalent:
  if (read wall bit(hero X(me), hero Y(me), harm tile)) then (
    # The hero is standing on a harm tile
  )
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-readwallbit" class="ref">read wall bit</a>, </li>
<li><a href="#about-checkwallcollisionxy" class="ref">check wall collision x/y</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-writepassblock"></a>
				<h4>write pass block (x,y,value)</h4>
<p>
			Writes a new passability (wallmap) information to the specified <span class="param">x</span>, <span class="param">y</span> position on the current map. This change will only persist until you leave the map or fight a battle. The value is a number from from 0 to 255 that consists of eight flag bits.<br><br>bit 1 = <a href="#about-northwall" class="ref">north wall</a><br>bit 2 = <a href="#about-eastwall" class="ref">east wall</a><br>bit 4 = <a href="#about-southwall" class="ref">south wall</a><br>bit 8 = <a href="#about-westwall" class="ref">west wall</a><br>bit 16 = <a href="#about-vehiclea" class="ref">vehicle A</a><br>bit 32 = <a href="#about-vehicleb" class="ref">vehicle B</a><br>bit 64 = <a href="#about-harmtile" class="ref">harm tile</a><br>bit 128 = <a href="#about-overheadtile" class="ref">overhead tile</a><br><br>You can <a href="#about-add" class="ref">add</a> the constants together (but it might be easier to use <a href="#about-writewallbit" class="ref">write wall bit</a> instead). For example:
			
			<pre>variable (pass)
pass := northwall+southwall+eastwall+westwall
write pass block(15,3,pass)
# this makes the fifteenth tile in the third column
# impassable on all directions

write pass block(15,3,none)
# Use 0 or none to remove walls from a tile</pre>
			<div class="seealso">See also: <ul><li><a href="#about-writewallbit" class="ref">write wall bit</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-readfoemap"></a>
				<h4>read foemap (x, y)</h4>
<p>
			
				Reads and returns a formation set number (which is a value 0-255) from the foemap at tile position <span class="param">x</span>,<span class="param">y</span>.
				The foemap is used to trigger random battles.
				0 means no formation set at that position.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getbattlecountdown" class="ref">get battle countdown</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Tile%20Animations"></a>
		<h3>
<span class="backlink"><a href="#Tweaking%20Maps">Tweaking Maps</a> →
			<a href="#Tilemap,%20Wallmap%20and%20Foemap">Tilemap, Wallmap and Foemap</a> →
			</span>Tile Animations</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-currentdisplaytile"></a>
				<h4>current display tile (tile number, layer)</h4>
<p>
			Returns the tile number from the tileset, in the range 0-159, that a given tile (read with <a href="#about-readmapblock" class="ref">read map block</a>, which returns a value greater than 159 for animated tiles) is currently displayed as, taking the tile animation patterns into account. Because different layers can have different tilesets, you might need to specify the layer the tile is from; otherwise layer 0 is assumed.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-animationstarttile"></a>
				<h4>animation start tile (tile number, layer)</h4>
<p>
			Returns the tile number on the tileset (in the range 0-159) that this tile is displayed as at the start of its animation pattern (offset 0) if it is animated, else just returns the tile number. The <span class="param">tile number</span> argument is typically returned from <a href="#about-readmapblock" class="ref">read map block</a>. In effect, the result is what the tile number would be if you had not set the tile as animated in the tilemap editor. Because different layers can have different tilesets, you might need to specify the layer the tile is from; otherwise layer 0 is assumed.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-currentdisplaytile" class="ref">current display tile</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-gettileanimationoffset"></a>
				<h4>get tile animation offset (animation pattern, layer)</h4>
<p>
			Returns the offset from the starting tile that the <span class="param">animation pattern</span> (either 0 or 1) of the tileset in use by the <span class="param">layer</span> (0 to 2) is currently at. For example, if the pattern has stepped 1 to the right, the offset is 1, if it has moved down 2 and 1 to the left, it is 31 (2 * 16 - 1). Because different layers can have different tilesets, you might need to specify the layer with the tileset to examine; otherwise layer 0 is assumed.<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Layers that use the same tileset do NOT have different copies of the tileset. Layers with the same tileset will always have the same tile animation offsets.</div>
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-readmapblock" class="ref">read map block</a>, </li>
<li><a href="#about-animationstarttile" class="ref">animation start tile</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-settileanimationoffset"></a>
				<h4>set tile animation offset (animation pattern, offset, layer)</h4>
<p>
			Sets the offset from the starting tile that an <span class="param">animation pattern</span> (either 0 or 1) of a tileset in use by a <span class="param">layer</span> (0 to 2) is currently at. If there is a pattern defined, it will continue to step left, right, up and down from the offset you give it, until the end of the animation is reached, when the offset is reset to 0. Because different layers can have different tilesets, you might need to specify the layer with the tileset to examine; otherwise layer 0 is assumed. <div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">Layers that use the same tileset do NOT have different copies of the tileset. Layers with the same tileset will always have the same tile animation offsets, you can not change them independently.</div>
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Wall%20Checking"></a>
		<h3>
<span class="backlink"><a href="#Tweaking%20Maps">Tweaking Maps</a> →
			<a href="#Tilemap,%20Wallmap%20and%20Foemap">Tilemap, Wallmap and Foemap</a> →
			</span>Wall Checking</h3>
		<p></p>
<ul></ul>
		<div class="command">
		<h4>read pass block (x, y)</h4>
		<p><a href="#about-readpassblock">Documented in the Tilemap, Wallmap and Foemap section.</a></p>
		</div>
		<div class="command">
		<h4>check hero wall (who,direction)</h4>
		<p><a href="#about-checkherowall">Documented in the Moving Heroes section.</a></p>
		</div>
		<div class="command">
		<h4>check NPC wall (who, direction)</h4>
		<p><a href="#about-checknpcwall">Documented in the Moving and Positioning NPCs section.</a></p>
		</div>
		<div class="command">
			<a name="about-checkwallcollisionxy"></a>
				<h4>check wall collision x (x, y, width, height, relative x, relative y, friction%)</h4>
				<h4>check wall collision y (x, y, width, height, relative x, relative y, friction%)</h4>
<p>
			
				Check how far an object (with a rectangular "hitbox") could move in a straight line on the map
				before hitting a wall (and possibly sliding along that wall).
				Provide the starting <span class="param">x</span> and <span class="param">y</span> map position in pixels of the top left
				corner of the hitbox (relative to the top-left of the map),
				its <span class="param">width</span> and <span class="param">height</span> in pixels,
				and the <span class="param">relative x/y</span> offset of the target position of the object
				(for example <span class="code">relative x</span> is 20 for one tile to the right).
				See <a href="#about-moveslicewithwallchecking" class="ref">move slice with wallchecking</a> for information about what the optional <span class="param">friction%</span>
				argument (which defaults to 100) does.
				<br>
				The return value is the maximum x or y offset
				(for <span class="code">check wall collision x</span> or <span class="code">y</span> respectively) that the object could move
				in a straight line towards the target before hitting a wall.
				If there are no walls in the way, then the return value is <span class="param">relative x</span> or <span class="param">relative y</span>.
				<br>
				For example, to check whether the hero can walk a full tile north (-20 pixels in the 'y' direction), you could write
				<pre>if (check wall collision y(hero pixel x(me), hero pixel y(me), 20, 20, 0, -20) == -20) then (...)</pre>
				(The <a href="#about-checkherowall" class="ref">check hero wall</a> command is a much easier way to check the same thing,
				but only works if the hero is tile-aligned.)
				<br>
				These commands work on hitboxes of any size (as long as the size isn't negative),
				even several tiles wide.
				Even a one-pixel-wide overlap with the end of a wall counts as a collision,
				and edge-on walls count as obstructions too, as do tiles past the edge of the map
				(unless the map wraps around).
				However, if the hitbox starting position already overlaps any walls they will be ignored.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					<a href="#about-moveslicewithwallchecking" class="ref">move slice with wallchecking</a> is a more convenient way to check walls
					if you want to move a slice, e.g. when scripting a platformer.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you're moving diagonally, you'll need to call both
					<span class="code">check wall collision x</span> and <span class="code">check wall collision y</span> with identical
					arguments to find the x,y position of the collision point.
				</div>
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					This command hasn't been updated to support one-way walls yet.
					Running into a one-way wall edge-on will give strange results.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-moveslicewithwallchecking" class="ref">move slice with wallchecking</a>, </li>
<li>
<a href="#about-findcollidingslice" class="ref">find colliding slice</a>, </li>
<li>
<a href="#about-checkherowall" class="ref">check hero wall</a>, </li>
<li><a href="#about-checknpcwall" class="ref">check NPC wall</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-moveslicewithwallchecking"></a>
				<h4>move slice with wallchecking (sl, relative x, relative y, friction%)</h4>
<p>
			
				Instantly moves a slice <span class="param">sl</span> as far as possible in a straight line towards a point until
				it hits a wall in the map's wallmap (and possibly slides along that wall).
				<span class="param">relative x/y</span> provide the point to move to, relative to the slice's current position.
				This command can be used on any slice, regardless of whether it is parented to a map layer.
				Its position on the map is calculated based on its on-screen position (<a href="#about-slicescreenx" class="ref">slice screen x</a>, etc).
				The slice's "colliding box" (or "hitbox") is, as you expect, the same as its size.
				<br>
				It works on slices of any size (as long as the size isn't negative),
				even several tiles wide.
				Even a one-pixel-wide collision with the end of a wall will stop the slice,
				and edge-on walls count as obstructions too, as do tiles past the edge of the map
				(unless the map wraps around).
				However, if the slice already overlaps any walls they will be ignored.
				<br>
				<span class="param">friction%</span> is an optional percentage value from 0 to 100 which defaults to 100.
				When it's 100, movement stops as soon as a wall is hit.
				If it's less than 100 then the slice slides down the wall with part of its remaining
				movement (<span class="param">relative x/y</span>), reduced by <span class="param">friction%</span> percent.
				For example if <span class="code">relative x == 15, relative y == 3, friction% == 30</span> and
				the slice travelled right 5 pixels before hitting a wall to the north
				(x = 10, y = 2 movement remaining to go), then y movement gets set to 0 (because
				we hit a wall to the north) and x movement gets reduced by 30% to 7, and the slice
				slides up to another 7 pixels to the right (unless it hits another wall).
				<br>
				If you're creating a platformer or zelda-like, you probably want friction to be 0% or a low value.
				<br>
				The return value is a bitmask giving the directions in which the slice was
				blocked by a wall.
				The value is 0 if there was no collision.
				You can use the constants <a href="#about-northwall" class="ref">north wall</a>, <a href="#about-southwall" class="ref">south wall</a>, <a href="#about-eastwall" class="ref">east wall</a>, <a href="#about-westwall" class="ref">west wall</a>
				and the bitwise-<a href="#about-and" class="ref">and</a> operator to 'test' the bitmask.
				For example <span class="code">bitmask, and, southwall</span> 'tests' whether <span class="param">sl</span>
				hit and is now resting against a wall on its south side (useful for a platformer).
				<br>
				Diagonally hitting the corner or end  of a wall exactly (including thin wall segments) is a special case.
				In that case the slice stops at the corner/end of the wall but is only touching it diagonally,
				and the return value is equal to one of
				the special constants <span class="param">northeast corner</span>, <span class="param">northwest corner</span>,
				<span class="param">southeast corner</span>, <span class="param">southwest corner</span>,
				all of which 'test' false when checked with
				<a href="#about-northwall" class="ref">north wall</a>, <a href="#about-southwall" class="ref">south wall</a>, <a href="#about-eastwall" class="ref">east wall</a>, <a href="#about-westwall" class="ref">west wall</a>.
				That's because the slice isn't actually resting against any walls, although it stopped!
				Use <a href="#about-equal" class="ref">==</a>, not <a href="#about-and" class="ref">and</a>, to check for these values.
				<br>
				You can check for walls without needing a slice using the alternative <a href="#about-checkwallcollisionxy" class="ref">check wall collision x/y</a> commands.
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					This command hasn't been updated to support one-way walls yet.
					Running into a one-way wall edge-on will give strange results.
				</div>
			
			
			<pre># This script creates a rectangle slice which follows the mouse
# but doesn't pass through walls.
plotscript, box follows mouse, begin
  variable (xgo, ygo, box)
  box := create rect(14, 14)
  set rect border(box, border:line)

  while(true) do (
    # Calculate the offset from the center of the box to the mouse,
    # and divide by three to move a third of the way there.
    xgo := (mouse pixel x -- (slice screen x(box) + 7)) / 3
    ygo := (mouse pixel y -- (slice screen y(box) + 7)) / 3
    move slice with wallchecking(box, xgo, ygo)
    wait
  )
end</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-checkwallcollisionxy" class="ref">check wall collision x/y</a>, </li>
<li><a href="#about-findcollidingslice" class="ref">find colliding slice</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Zonemaps"></a>
		<h3>
<span class="backlink"><a href="#Tweaking%20Maps">Tweaking Maps</a> →
			</span>Zonemaps</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-writezone"></a>
				<h4>write zone (zone id, x, y, value)</h4>
<p>
			
				Sets whether the tile at (<span class="param">x,y</span>) is part of the specified zone.
				<span class="param">zone id</span> is a valid ID number (see <a href="#about-readzone" class="ref">read zone</a>),
				and <span class="param">value</span> is interpreted as either <span class="param">true</span> (non-zero) or <span class="param">false</span> (zero).
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Only up to 15 zones may overlap at each tile.
					If you try to place 16 zones at one tile, write zone will fail,
					returning <a href="#about-false" class="ref">false</a>. Normally it returns <a href="#about-true" class="ref">true</a>.
					If you choose to "Show all warnings" in General Game Settings in Custom,
					you will also get a warning message.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Changes to zones are not stored in saved games,
					and are erased when you leave the map unless "Tile Data State" is "saved
					when leaving" (in the General Map Data settings).
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-readzone" class="ref">read zone</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-readzone"></a>
				<h4>read zone (zone id, x, y)</h4>
<p>
			
				Returns <a href="#about-true" class="ref">true</a> if the tile at (<span class="param">x,y</span>) is part of the specified zone.
				The <span class="param">zone id</span> is an ID number from 1 to 9999 for zones defined in the map editor,
				or can be the ID one of these special zones:
				<ul>
					<li>
						<span class="code">zone:OneWayExit == 10000</span>
						- Marks tiles with one-way walls.
					</li>
				</ul>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-writezone" class="ref">write zone</a>, </li>
<li><a href="#about-zoneatspot" class="ref">zone at spot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-zoneatspot"></a>
				<h4>zone at spot (x, y, count)</h4>
<p>
			
				Used to get the set of all IDs of zones that contain the tile at (<span class="param">x,y</span>).
				Since zones may overlap, <span class="param">count</span> is used to specify which zone ID to return:
				0 is the first, 1 the second, and so on.
				<span class="param">count</span> may also be the constant <a href="#about-getcount" class="ref">get count</a>,
				in which case the total number of zones which overlap there is returned.
				If <span class="param">count</span> too large (greater than or equal to the number of zones),
				0 (<a href="#about-false" class="ref">false</a>) is returned.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">The order in which the ID numbers are returned is completely arbitrary.</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-readzone" class="ref">read zone</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getzonename"></a>
				<h4>get zone name (string id, zone id)</h4>
<p>
			
				Places in the string with id number <span class="param">string id</span> the name of zone <span class="param">zone id</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getzoneextra"></a>
				<h4>get zone extra (zone id, extra num)</h4>
<p>
			
				Returns the value in a zone's "extra data" field numbered <span class="param">extra num</span>,
				which is a number from 0 to 2.
				You may use the constants <span class="param">extra 0</span>, <span class="param">extra 1</span> and <span class="param">extra 2</span> to refer to them.
				You can set a zone's extra data in the Zone Info editor.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setzoneextra"></a>
				<h4>set zone extra (zone id, extra num, value)</h4>
<p>
			
				Sets the value of a zone's "extra data" field numbered <span class="param">extra num</span>,
				which is a number from 0 to 2.
				You may use the constants <span class="param">extra 0</span>, <span class="param">extra 1</span> and <span class="param">extra 2</span> to refer to them.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Changes to zones are not stored in saved games,
					and are erased when you leave the map unless "Tile Data State" is saved when
					leaving in the General Map Data settings.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-zonenumberoftiles"></a>
				<h4>zone number of tiles (zone id)</h4>
<p>
			
				Given a <span class="param">zone id</span> (from 1 to 9999 or a special id),
				returns the number of tiles that the zone contains.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="General%20Map%20Settings"></a>
		<h3>
<span class="backlink"><a href="#Tweaking%20Maps">Tweaking Maps</a> →
			</span>General Map Settings</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-allowminimap"></a>
				<h4>allow minimap (setting)</h4>
<p>
			
				Sets whether the Map option appears in the menu.
				Give no argument or <a href="#about-true" class="ref">true</a> to enable, or <a href="#about-false" class="ref">false</a> to disable.
				The effect goes away if you change maps or fight a battle.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-showminimap" class="ref">show mini map</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-allowsaveanywhere"></a>
				<h4>allow save anywhere (setting)</h4>
<p>
			
				Sets whether the Save option appears in the menu.
				Give no argument or <a href="#about-true" class="ref">true</a> to enable,
				or <a href="#about-false" class="ref">false</a> to disable.
				The effect goes away if you change maps or fight a battle.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-savemenu" class="ref">save menu</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setharmtiledamage"></a>
				<h4>set harm tile damage (amount)</h4>
<p>
			
				Sets the amount of damage taken when you step on a harm tile.
				The effect goes away if you change maps or fight a battle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setharmtileflash"></a>
				<h4>set harm tile flash (color)</h4>
<p>
			
				Sets the color (from the master palette) which the screen flashes when you step on a harm tile.
				Call with no argument to disable the flash.
				The effect goes away if you change maps or fight a battle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setfootoffset"></a>
				<h4>set foot offset (offset)</h4>
<p>
			
				Sets the foot offset in pixels, the vertical displacement of npc and hero sprites
				from the base of the tiles on which they stand.
				The effect goes away if you change maps or fight a battle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getfootoffset"></a>
				<h4>get foot offset</h4>
<p>
			Returns the map's foot offset.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-drawnpcsaboveheroes"></a>
				<h4>draw NPCs above heroes (setting)</h4>
<p>
			
				Sets whether NPCs are drawn above, beneath or together (Y-sorted) with heroes.
				The effect goes away if you change maps or fight a battle (unless saved by <a href="#about-savemapstate" class="ref">save map state</a>).
				<span class="param">setting</span> is one of:
				<ul>
					<li>layering: heroes over NPCs</li>
					<li>layering: NPCS over heroes</li>
					<li>layering: heroes and NPCs together</li>
				</ul>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setmapedgemode"></a>
				<h4>set map edge mode (mode, default tile)</h4>
<p>
			
				Sets the behaviour at the edge of the map.
				Use the constants <a href="#about-crop" class="ref">crop</a>, <a href="#about-wrap" class="ref">wrap</a> and <a href="#about-defaulttile" class="ref">default tile</a>.
				When the behaviour is default tile, you should give a second argument specifying which tile
				should be displayed off the boundaries of the map, otherwise ignore the second argument.
				The effect goes away if you change maps or fight a battle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getmapedgemode"></a>
				<h4>get map edge mode</h4>
<p>
			
				Returns the map's edge mode.
				Use the constants <a href="#about-crop" class="ref">crop</a>, <a href="#about-wrap" class="ref">wrap</a> and <a href="#about-defaulttile" class="ref">default tile</a>
				to compare with the value returned.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Map%20State"></a>
		<h3>
<span class="backlink"><a href="#Tweaking%20Maps">Tweaking Maps</a> →
			</span>Map State</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-savemapstate"></a>
				<h4>save map state (whichdata, customid)</h4>
<p>
			
				Saves the state of the current map to a temporary file which will be loaded
				(unless the map is set to ignore that particular data)
				when you reenter the current map, in the same way as a map set to save (remember) NPC or tile data:
				the saved state will be used instead of the map data in the RPG file.
				Both arguments are optional and are only for advanced uses.
				<br>
				Map state is not saved in saved games, and the temporary files will be deleted when you load or start a new a game!
				<br>
				<span class="param">whichdata</span> is an <a href="#about-or" class="ref">or</a>'d combination of the following constants,
				which specify exactly what you want to save:
				<br>
				<ul>
					<li>mapstate:all = mapstate:mapsettings, or, mapstate:npcs, or, mapstate:tiles</li>
					<li>mapstate:npcs = mapstate:npclocations, or, mapstate:npcdefinitions</li>
					<li>mapstate:tiles = mapstate:tilemap, or, mapstate:passmap, or, mapstate:zonemap</li>
					<li>mapstate:mapsettings</li>
					<li>mapstate:npclocations</li>
					<li>mapstate:npcdefinitions</li>
					<li>mapstate:tilemap</li>
					<li>mapstate:passmap</li>
					<li>mapstate:zonemap</li>
				</ul>
				The default is mapstate:all.
				<br>
				If <span class="param">customid</span> is passed, it is used to save the state in a separate state file with an id
				number of <span class="param">customid</span> which can only be loaded with <a href="#about-loadmapstate" class="ref">load map state</a>.
				There are 32 available slots for use: 0 - 31.
				<br>
				Note that mapstate:mapsettings (also saved by mapstate:all) is special in that if you save it,
				it will always be loaded when the map is loaded regardless of settings.
				It saves all the settings found in the General Map Settings menu like the ambient music,
				footoffset, map trigger scripts, and so forth, and also the tileset for each layer.
			
			
			<pre>plotscript, generic menu screen, begin
  variable (remember map, remember x, remember y)
  remember map := current map
  remember x := hero x
  remember y := hero y
  # we want NPCs and things to stay in the same place after we come back from the menu
  save map state

  fade screen out
  wait
  teleport to map (map:generic menu)
  fade screen in
  wait

  # menu code here
  #...
  #...

  fade screen out
  wait
  teleport to map (remember map, remember x, remember y)
  # assume the map is set to load state only, the default (otherwise, use load map state)
  fade screen in
  wait

  # we want the map to go back to resetting whenever you enter/exit it (like normal)
  delete map state
end</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-loadmapstate"></a>
				<h4>load map state (whichdata, customid)</h4>
<p>
			Load temporary map state data previously saved either by <a href="#about-savemapstate" class="ref">save map state</a> or when leaving a map set to remember state. The two arguments are optional and for advanced use. <span class="param">whichdata</span> is a set of bits in the <a href="#about-savemapstate" class="ref">save map state</a> format to determine what exactly to load. The default is mapstate:all. <span class="param">customid</span> is a number between 0 and 31 of a slot in which a custom save was made. Data from a different map can be loaded, but only tile data from a map of the same size! If you attempt to load state data which has not been saved then it will be loaded from the game files instead, unless you are using <span class="param">customid</span>, in which case nothing will be loaded.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-resetmapstate"></a>
				<h4>reset map state (whichdata)</h4>
<p>
			Reloads original unaltered map data from the RPG file. <span class="param">whichdata</span> is a set of bits in the <a href="#about-savemapstate" class="ref">save map state</a> format to determine what exactly to load. It is optional and the default is mapstate:all. This does not remove temp state files for the map, so they could still be loaded instead when you next enter the map, use <a href="#about-deletemapstate" class="ref">delete map state</a> to remove them if wanted.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-deletemapstate"></a>
				<h4>delete map state (whichdata)</h4>
<p>
			Deletes temporary map state files for the current map, so that if the map is set to load NPC or tile data it will load the original data from the game files when it is entered. <span class="param">whichdata</span> is a set of bits in the <a href="#about-savemapstate" class="ref">save map state</a> format to determine what exactly to delete. The default is mapstate:all.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Timers"></a>
		<h3>
<span class="backlink"></span>Timers</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Timers-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-settimer">set timer (id, count, speed, trigger, string, flags)</a><br>
		<a href="#about-settimerargs">set timer args (id, args...)</a><br>
		<a href="#about-stoptimer">stop timer (id)</a><br>
		<a href="#about-allocatetimers">allocate timers (number)</a><br>
		<a href="#about-readtimer">read timer (id)</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-settimer"></a>
				<h4>set timer (id, count, speed, trigger, string, flags)</h4>
<p>
			
				Changes the settings for a given timer, and starts it.
				<span class="param">id</span> is the number of a timer -- by default, there are 16 timers, numbered 0 to 15
				but you can change the number of available timers with <a href="#about-allocatetimers" class="ref">allocate timers</a>.
				All other parameters are optional, or you can pass <a href="#about-timer:default" class="ref">timer: default</a> as any of them.
				This will leave the parameter unchanged (from the last time you set it or from the default initial value),
				it will NOT cause that timer setting to be reset to the default initial value.
				<span class="param">Count</span> is the length of the timer.
				While it's running, the count will go down by one every <span class="param">speed</span> game ticks (frames).
				I.e., if you set speed to 18, it will count down once every 18 ticks, close to one second
				if using the default framerate of 18.3fps.
				Use a speed of 1 to count down in ticks.
				Changing the timer's <span class="param">count</span> (as opposed to passing <span class="param">timer:default</span> as the second argument)
				will cause the timer to restart from the new value.
				<br>
				<span class="param">trigger</span> is what happens when the timer runs out.
				You can use the constant <a href="#about-timer:gameover" class="ref">timer: game over</a> to indicate that the game should end (the gameover script is not called),
				or specify a plotscript (in the form <span class="code">@my script</span>) to have that run.
				A plotscript will get passed the id of the timer that triggered it as its first argument, if it has one,
				unless you specify the arguments using <a href="#about-settimerargs" class="ref">set timer args</a>.
				If the timer runs out during a battle then the effect happens after the battle ends.
				<br>
				You can bind a timer to a string using the <span class="param">string</span> parameter to create a countdown that shows up on screen.
				Pass it the id of a string, and that string will be updated every time the timer counts down.
				You are responsible for displaying and positioning the string.
				<br>
				A timer also has a few other options in the form of <span class="param">flags</span>.
				You can pass any combination of these flags (by <a href="#about-or" class="ref">or</a>ing them together; see the example):
				<ul>
					<li>
						<a href="#about-timerflag:battle" class="ref">timer flag: battle</a> to have it count down during battles (including in menus which
						pause the battle, except the Pause screen itself).
						You can turn on the "Never show script timers during battles" Peference Bitset to
						cause battle-timers to count down but not display.
						Note: Only the first battle-timer will show in battle! You can't show more than one.
					</li>
					<li>
<a href="#about-timerflag:menu" class="ref">timer flag: menu</a> to have it count down even while the player is in a menu which pauses the game (e.g. the status menu)</li>
					<li>
<a href="#about-timerflag:critical" class="ref">timer flag: critical</a> to have the timer end a battle or exit a menu if it runs out during it</li>
				</ul>
				<br>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Timers start counting down not from the current game 'tick', but from next one.
					So if you want to trigger something next tick (eg. run a script every frame)
					you need to pass <span class="param">count</span> as 0 and <span class="param">speed</span> as 1.
					A timer count set to 1 would counter-intuitively trigger in 2 ticks time.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Timer settings are not saved in saved games.
				</div>
			<pre># This starts a 300 second (5 minute) timer that counts down once every 18 ticks (approximately one second).
# If it runs out during battle, the battle won't end but a game-over will happen afterwards.
set timer (0, 300, 18, timer: game over, 0, (timerflag: battle, or, timerflag: menu))</pre>
				See <a href="#about-settimerargs" class="ref">set timer args</a> for a larger example.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-settimerargs" class="ref">set timer args</a>, </li>
<li>
<a href="#about-stoptimer" class="ref">stop timer</a>, </li>
<li>
<a href="#about-readtimer" class="ref">read timer</a>, </li>
<li>
<a href="#about-systemsecond" class="ref">system second</a>, </li>
<li>
<a href="#about-secondsofplay" class="ref">seconds of play</a>, </li>
<li>
<a href="#about-milliseconds" class="ref">milliseconds</a>, </li>
<li><a href="#about-runscriptbyid" class="ref">run script by ID</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-settimerargs"></a>
				<h4>set timer args (id, args...)</h4>
<p>
			
				Sets the arguments that a timer will pass to the script it triggers.
				(If the timer isn't set to call a script this shows an error,
				so you have to call <a href="#about-settimer" class="ref">set timer</a> before <span class="code">set timer args</span>.)
				<br>
				This overrides the default first argument to the script, which is the timer ID.
				So if you want the timer ID to be first argument you have to write something like
				<br>
				<span class="code">set timer args(id, id, 20)  # Script gets args 'id, 20'</span>
				<br>
				If you call this with no arguments (<span class="code">set timer args(id)</span>)
				then all the script's arguments default to 0.
				If the script doesn't take as many args as you pass it the extra
				ones will be ignored without error.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					After the script runs the arguments will still be remembered for next time
					the timer is run (you can re-start a timer by calling <span class="code">set timer(id, count)</span>),
					unless the script ID is changed (or set to 0).
				</div>
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					Due to a bug, the script's default arguments will be ignored,
					and missing arguments are instead set to 0.
					This happens whether you use <span class="code">set timer args</span> or not, and affects
					all triggered scripts.
					This will be fixed in some future version.
				</div>
				<pre># This script changes the tile at x,y on tilemap 'layer' between tile IDs 'tile'
# and 'othertile' in the tileset every 5 ticks, repeating until the map changes.
script, blink tile, x, y, layer, tile, othertile, timerid, whichmap = -1, begin

  # Remember which map we started running on, and stop if the map changes
  if (whichmap == -1) then (
    whichmap := current map
  ) else (
    if (whichmap &lt;&gt; current map) then (exit script)
  )

  write map block (x, y, tile, layer)

  # Cause this script to run again in 10 ticks, but this time
  # swap 'tile' and 'othertile'
  set timer (timerid, 0, 10, @blink tile)
  set timer args (timerid, x, y, layer, othertile, tile, timerid, whichmap)
end

# Some timer IDs
define constant (10, timer:blink1)
define constant (11, timer:blink2)

# This is an auto-run script for a map
plotscript, blinky map, begin
  blink tile (4, 5, 0, 0, 1, timer:blink1)   # Blink x=4,y=5,layer=0 between tiles 0 &amp; 1
  blink tile (11, 10, 1, 5, 10, timer:blink2) # Blink x=11,y=10,layer=1 between tiles 5 &amp; 10
end</pre>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-settimer" class="ref">set timer</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-stoptimer"></a>
				<h4>stop timer (id)</h4>
<p>
			
				Stops a timer by setting its speed to 0. All of its other settings remain the same.
				You can resume it by calling <span class="code">set timer(id, timer:default, speed)</span>
				if you know the original speed.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-settimer" class="ref">set timer</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-allocatetimers"></a>
				<h4>allocate timers (number)</h4>
<p>
			Changes the number of available timers. The range of valid timer IDs becomes 0 to <span class="param">number</span>-1. You can reduce the number of timers down to zero, and increase it up to 100000 (not recommended, each timer must be processed continuously). All existing timers that are not removed continue to run. The default number of timers is 16.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-readtimer"></a>
				<h4>read timer (id)</h4>
<p>
			
				Returns the "count" of a given timer.
				A timer's count is at first equal to the <span class="param">count</span> argument to <a href="#about-settimer" class="ref">set timer</a>
				(or zero, if the timer hasn't been used).
				After <span class="param">speed</span> ticks since <a href="#about-settimer" class="ref">set timer</a> was called,
				the count is reduced by one.
				<br>
				The timer is triggered when the count becomes negative.
				Normally a timer that has finished has a count of -1,
				unless it had a negative count to begin with, most likely to happen
				if you restart a timer by passing <span class="code">timer:default</span> as the <span class="param">count</span> argument
				to <a href="#about-settimer" class="ref">set timer</a>.
				(So if you keep repeating it that way, each time its count will reduce further: -1, -2, -3, ...)
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-settimer" class="ref">set timer</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Script%20Triggers"></a>
		<h3>
<span class="backlink"></span>Script Triggers</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Script Triggers-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-setdeathscript">set death script (id)</a><br>
		<a href="#about-getdeathscript">get death script</a><br>
		<a href="#about-setloadscript">set load script (id)</a><br>
		<a href="#about-getloadscript">get load script</a><br>
		<a href="#about-setonkeypressscript">set on keypress script (id)</a><br>
		<a href="#about-getonkeypressscript">get on keypress script</a><br>
		<a href="#about-seteachstepscript">set each step script (id)</a><br>
		<a href="#about-geteachstepscript">get each step script</a><br>
		<a href="#about-setinsteadofbattlescript">set instead of battle script (id)</a><br>
		<a href="#about-getinsteadofbattlescript">get instead of battle script</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-setdeathscript"></a>
				<h4>set death script (id)</h4>
<p>
			
				Changes the script that is run when you die in battle.
				The argument is the script's ID number, NOT the script's name.
				Calling set death script with no argument disables the death script.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getdeathscript"></a>
				<h4>get death script</h4>
<p>
			
				Returns the ID number of script that is run when you die in battle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setloadscript"></a>
				<h4>set load script (id)</h4>
<p>
			
				Changes the script that will be run when you load <b>this</b> game after it is saved.
				The argument is the script's ID number, NOT the script's name.
				Calling set load script with no argument disables the load script.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					This command has no effect if the "Save gameover/loadgame script IDs" Preference Bitset is turned off!
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Setting the load script and then loading an existing saved game has no effect, because the load game script
					already stored in that saved game is used instead.
					Unless "Save gameover/loadgame script IDs" is off, in which case the default one is used.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getloadscript"></a>
				<h4>get load script</h4>
<p>
			Returns the ID number of script that is run when you load a saved game.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setonkeypressscript"></a>
				<h4>set on keypress script (id)</h4>
<p>
			
				Changes the script that is run when you press a key.
				The argument is the script's name preceded by an @ sign.
				You can also use the ID number for old-style scripts.
				Calling set on keypress script with no argument disables the keypress script.
				The effect goes away if you change maps or fight a battle.
			
			
			<pre>set on keypress script(@keyhandlerscript)</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-getonkeypressscript"></a>
				<h4>get on keypress script</h4>
<p>
			Returns the ID number of script that is run when you press a key.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-seteachstepscript"></a>
				<h4>set each step script (id)</h4>
<p>
			
				Changes the script that is run when you take a step.
				The argument is the script's name preceded by an @ sign.
				You can also use the ID number for old-style scripts.
				Calling set each step script with no argument disables the each step script.
				The effect goes away if you change maps or fight a battle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-geteachstepscript"></a>
				<h4>get each step script</h4>
<p>
			Returns the ID number of script that is run when you take a step.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setinsteadofbattlescript"></a>
				<h4>set instead of battle script (id)</h4>
<p>
			
				Changes the script that is run instead of a random battle when one is triggered.
				The argument is a reference to the script in the form @scriptname.
				Calling set instead of battle script with no argument disables the instead of battle script.
				The effect goes away if you change maps or fight a battle.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getinsteadofbattlescript"></a>
				<h4>get instead of battle script</h4>
<p>
			Returns a reference to the script that is run instead of battles.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="General%20Game%20Settings"></a>
		<h3>
<span class="backlink"></span>General Game Settings</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>These commands access data in the General Game Settings menu.</p>
<div class="select-content-shown" id="General Game Settings-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-setcaterpillarmode">set caterpillar mode (state)</a><br>
		<a href="#about-sethpleveluprestore">set HP level up restore (state)</a><br>
		<a href="#about-setnompleveluprestore">set MP level up restore (state)</a><br>
		<a href="#about-setinnnorevivemode">set inn revive mode (state)</a><br>
		<a href="#about-setfullheroswapmode">set full hero swap mode (state)</a><br>
		<a href="#about-setdebugkeysdisable">set debug keys disable (state)</a><br>
		<a href="#about-extendedscancodesenabled">extended scancodes enabled</a><br>
		<a href="#about-getscreenwidth">get screen width</a><br>
		<a href="#about-getscreenheight">get screen height</a><br>
		<a href="#about-readpreferencebit">read preference bit (bitnum)</a><br>
		<a href="#about-writepreferencebit">write preference bit (bitnum, value)</a><br>
</div>
		<li>
<a href="#Battle%20System%20Settings">Battle System Settings</a><br>
		<ul class="content-shown">
		<a href="#about-setbattlewaitmode">set battle wait mode (state)</a><br>
		<a href="#about-getactivebattlepauseonallmenus">get active battle pause on all menus</a><br>
		<a href="#about-setactivebattlepauseonallmenus">set active battle pause on all menus (value)</a><br>
		<a href="#about-showbattlereadymeter">show battle ready meter (state)</a><br>
		<a href="#about-showbattlehealthmeter">show battle health meter (state)</a><br>
		<a href="#about-setdeadheroesgainexperience">set dead heroes gain experience (state)</a><br>
</ul>
<ul></ul>
</li>
		<li>
<a href="#Caps">Caps</a><br>
		<ul class="content-shown">
		<a href="#about-getdamagecap">get damage cap</a><br>
		<a href="#about-setdamagecap">set damage cap (cap)</a><br>
		<a href="#about-getlevelcap">get level cap</a><br>
		<a href="#about-setlevelcap">set level cap (cap)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-setcaterpillarmode"></a>
				<h4>set caterpillar mode (state)</h4>
<p>
			
				Sets whether or not to display the whole party in "caterpillar" style.
				This sets the "Enable Caterpillar Party" general preference bitset.
				If the argument is <a href="#about-off" class="ref">off</a> then only the leader will be displayed.
				If the argument is <a href="#about-on" class="ref">on</a> then the whole active (battle) party will be
				displayed and will normally walk behind the leader.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					Do not confuse this with the <a href="#about-suspendcaterpillar" class="ref">suspend caterpillar</a>
					and <a href="#about-resumecaterpillar" class="ref">resume caterpillar</a> commands,
					which only apply when caterpillar mode is ON.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-sethpleveluprestore"></a>
				<h4>set HP level up restore (state)</h4>
<p>
			
				Sets whether or not a hero regains full HP after a level-up.
				If the argument is <a href="#about-on" class="ref">on</a> then HP is restored on a level-up.
				If the argument is <a href="#about-off" class="ref">off</a> then the hero's HP is not restored on a level-up.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setnompleveluprestore"></a>
				<h4>set MP level up restore (state)</h4>
<p>
			
				Sets whether or not a hero regains full MP after a level-up.
				If the argument is <a href="#about-on" class="ref">on</a> then MP is restored on a level-up.
				If the argument is <a href="#about-off" class="ref">off</a> then the hero's MP is not restored on a level-up.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setinnnorevivemode"></a>
				<h4>set inn revive mode (state)</h4>
<p>
			
				Sets whether or not inns restore dead heroes to life.
				If the argument is <a href="#about-on" class="ref">on</a> then dead heroes are restored by inns.
				If the argument is <a href="#about-off" class="ref">off</a> then dead heroes remain dead in inns.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setfullheroswapmode"></a>
				<h4>set full hero swap mode (state)</h4>
<p>
			
				Sets whether or not you can swap heroes in and out of your active party from the menu.
				If the argument is <a href="#about-off" class="ref">off</a> then the "Order" menu will be available.
				If the argument is <a href="#about-on" class="ref">on</a> then the "Team" menu will be available.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setdebugkeysdisable"></a>
				<h4>set debug keys disable (state)</h4>
<p>
			
				Sets whether or not the debugging keys are allowed.
				If the argument is <a href="#about-off" class="ref">off</a> then debugging keys are allowed.
				If the argument is <a href="#about-on" class="ref">on</a> then debugging keys are disabled.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-extendedscancodesenabled"></a>
				<h4>extended scancodes enabled</h4>
<p>
			
				Returns the state of the "Disable better scancodes for scripts" backcompat bitset,
				returning <span class="code">true</span> if it's off.
				This means that numpad keys are distinguishable from Home, Up, etc. keys.
				See <a href="#about-scancode" class="ref">scancode</a>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getscreenwidth"></a>
				<h4>get screen width</h4>
<p>
			
				Returns the width of the screen in pixels.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getscreenheight" class="ref">get screen height</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getscreenheight"></a>
				<h4>get screen height</h4>
<p>
			
				Returns the height of the screen in pixels.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getscreenwidth" class="ref">get screen width</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-readpreferencebit"></a>
				<h4>read preference bit (bitnum)</h4>
<p>
			
				Returns the value (true or false) of one of the bits in the Preference Bitsets,
				Active-time Battle Bitsets or Backwards-compatibility Bitsets
				menus (in the General Game Settings menu).
				You can use this command if there isn't a dedicated command to read the bit,
				such as <a href="#about-extendedscancodesenabled" class="ref">extended scancodes enabled</a>.
				Get the value of <span class="param">bitnum</span> from the list below or
				by checking <a href="https://rpg.hamsterrepublic.com/ohrrpgce/GEN#General_bitsets">this list on the wiki</a>
				(which might possibly be more up-to-date).
				<ul>
					<li>0 - Pause in battle on spell and item menus</li>
					<li>1 - Enable Caterpillar party</li>
					<li>2 - <b>Don't</b> restore HP on level-up</li>
					<li>3 - <b>Don't</b> restore MP on level-up</li>
					<li>4 - Inns <b>don't</b> revive dead heros</li>
					<li>5 - Hero swapping always available</li>
					<li>6 - <b>Hide</b> ready meter in battle</li>
					<li>7 - <b>Hide</b> health bar in battle</li>
					<li>8 - <b>Disable</b> debugging keys</li>
					<li>9 - Simulate old level-up bug</li>
					<li>10 - Permit double-triggering of scripts</li>
					<li>11 - Skip title screen</li>
					<li>12 - Skip load screen</li>
					<li>13 - Pause in battle on all menus</li>
					<li>14 - Disable Hero's Battle Cursor</li>
					<li>15 - Default passability disabled by default</li>
					<li>16 - Simulate pushable NPC collision bug</li>
					<li>17 - <b>Disable</b> ESC to run from battle</li>
					<li>18 - <b>Don't</b> save gameover/loadgame script IDs</li>
					<li>19 - Dead heroes gain share of experience</li>
					<li>20 - Locked heros can't be rearranged</li>
					<li>21 - Attack captions pause battle meters</li>
					<li>22 - <b>Don't</b> randomize battle ready-meters</li>
					<li>23 - Battle menus wait for attack animations</li>
					<li>24 - <b>Enable</b> better scancodes for scripts</li>
					<li>25 - Simulate old fail vs. elemental resist bit</li>
					<li>26 - 0 damage when immune to attack elements</li>
					<li>27 - <b>Do</b> recreate map slices when changing maps</li>
					<li>28 - Harm tiles <b>do</b> harm non-caterpillar heroes</li>
					<li>29 - Attacks ignore extra hits by default</li>
					<li>30 - <b>Don't</b> divide experience between heroes</li>
					<li>31 - Don't reset max stats after OOB attack</li>
					<li>32 - <b>Don't</b> limit max tags to 999</li>
					<li>33 - Simulate Bug #430 script wait skips</li>
					<li>34 - showtextbox happens immediately</li>
					<li>35 - Pause battle while targeting attacks</li>
					<li>36 - Old attack positioning at bottom-left of target</li>
					<li>37 - Wrap map layers over edge of Crop maps</li>
					<li>38 - Never show script timer during battles</li>
					<li>39 - Draw Backdrop slice above Script layer</li>
					<li>40 - <b>Don't</b> stop music when starting/loading game</li>
					<li>41 - Keep caterpillar length the same when speed changes</li>
					<li>42 - Heroes use Walk in Place animation while idle</li>
					<li>43 - Cap minimum stats at zero</li>
					<li>44 - Hide empty save slots at the bottom of the save/load menu</li>
					<li>45 - Attack IDs in scripts are offset by +1</li>
					<li>46 - Negative damage harmtiles <b>don't</b> cure above max HP</li>
					<li>47 - <b>Don't</b> map joystick controls to keyboard keys for scripts</li>
					<li>48 - <b>Disable</b> ESC to cancel/change a hero's attack (turn-based battles only)</li>
					<li>49 - Show hero MP meter</li>
					<li>50 - Non-turn attack delays <b>don't</b> also cause turn delays</li>
				</ul>
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					Some bits have names which are opposite above/on the wiki and in the editor!
					If that's the case, you need to set the bit off instead of on and vice versa.
					They might also have slightly different names.
					For example to check whether "Randomize initial ready meters" is <b>on</b>,
					use <span class="code">read preference bit(22) == off</span>,
					because bit 22 is documented as "<b>Don't</b> randomize battle ready-meters".
					In the above list, any bit will an inverted name is (hopefully) shown with part of
					the description in <b>bold</b>.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-writepreferencebit" class="ref">write preference bit</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-writepreferencebit"></a>
				<h4>write preference bit (bitnum, value)</h4>
<p>
			
				Sets the <span class="param">value</span> (true or false) of one of the bits in the Preference Bitsets,
				Active-time Battle Bitsets or Backwards-compatibility Bitsets
				menus (in the General Game Settings menu).
				You can use this command if there isn't a dedicated command to write the bit,
				such as <a href="#about-setbattlewaitmode" class="ref">set battle wait mode</a>.
				Get the value of <span class="param">bitnum</span> from the list at <a href="#about-readpreferencebit" class="ref">read preference bit</a> or
				by checking <a href="https://rpg.hamsterrepublic.com/ohrrpgce/GEN#General_bitsets">this list on the wiki</a>
				(which might possibly be more up-to-date).
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					Some bits are shown with the opposite names here/the wiki and in the editor!
					If that's the case, you need to set the bit off instead of on and vice versa.
					They might also have slightly different names.
					For example to turn <b>on</b> "Randomize initial ready meters", use
					<span class="code">write preference bit(22, off)</span>,
					because bit 22 is documented as "Don't randomize battle ready-meters".
				</div>
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					Use common sense. Some bits, such as "Limit maximum tags to 999" might be disastrous
					to change in the middle of a game!
					Or they might have no effect.
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-readpreferencebit" class="ref">read preference bit</a></li></ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Battle%20System%20Settings"></a>
		<h3>
<span class="backlink"><a href="#General%20Game%20Settings">General Game Settings</a> →
			</span>Battle System Settings</h3>
		<p>
			These commands access data either in the Battle Settings submenu in General Game Settings menu,
			or in the Preference Bitsets submenu.
		</p>
<ul></ul>
		<div class="command">
			<a name="about-setbattlewaitmode"></a>
				<h4>set battle wait mode (state)</h4>
<p>
			
				Set whether or not battles pause on spell and item menus.
				If the argument is <a href="#about-off" class="ref">off</a> then enemies continue to attack while menus are up,
				if the argument is <a href="#about-on" class="ref">on</a> then enemies wait while menus are up.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getactivebattlepauseonallmenus"></a>
				<h4>get active battle pause on all menus</h4>
<p>
			
				Returns true if active-time battles are configured to pause on all menus.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-setactivebattlepauseonallmenus" class="ref">set active battle pause on all menus</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setactivebattlepauseonallmenus"></a>
				<h4>set active battle pause on all menus (value)</h4>
<p>
			
				Changes whether active-time battles will pause on all menus.
				The argument should be <span class="param">true</span> to pause, or <span class="param">false</span> to not pause.
				This option has no effect on turn-based battles.
				This option is not stored in save-games,
				so changing it only lasts until the game is quit and reloaded.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getactivebattlepauseonallmenus" class="ref">get active battle pause on all menus</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-showbattlereadymeter"></a>
				<h4>show battle ready meter (state)</h4>
<p>
			
				Sets whether or not the ready meter appears in battle, or will be hidden.
				<span class="param">state</span> should be <span class="code">true</span> or <span class="code">false</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-showbattlehealthmeter"></a>
				<h4>show battle health meter (state)</h4>
<p>
			
				Sets whether or not the health meter appears in battle, or will be hidden.
				<span class="param">state</span> should be <span class="code">true</span> or <span class="code">false</span>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setdeadheroesgainexperience"></a>
				<h4>set dead heroes gain experience (state)</h4>
<p>
			
				Sets whether or not dead heroes gain experience from battles.
				If the argument is <a href="#about-false" class="ref">false</a> then only living heroes gain experience.
				If the argument is <a href="#about-true" class="ref">true</a> then dead heroes get it too.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Caps"></a>
		<h3>
<span class="backlink"><a href="#General%20Game%20Settings">General Game Settings</a> →
			</span>Caps</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-getdamagecap"></a>
				<h4>get damage cap</h4>
<p>
			Returns the current damage cap, or 0 if there is none.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setdamagecap"></a>
				<h4>set damage cap (cap)</h4>
<p>
			Sets the current damage cap to <span class="param">cap</span>. Use 0 for no cap.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getlevelcap"></a>
				<h4>get level cap</h4>
<p>
			Returns the current level cap.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-setlevelcap"></a>
				<h4>set level cap (cap)</h4>
<p>
			
				Sets the level cap.
				<span class="param">cap</span> must be a value from 0 to 99.
				Heroes with level equal to or greater than the level cap can't gain experience
				through battles, <a href="#about-giveexperience" class="ref">give experience</a>, or <a href="#about-setexperience" class="ref">set experience</a>,
				and the status screen doesn't show their experience to next level.
				You however can use <a href="#about-setherolevel" class="ref">set hero level</a> to set a hero's level above the level cap.
				The level cap does not change the amount of experience needed to gain a level,
				nor the stat increases at level-up.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Saved%20Games"></a>
		<h3>
<span class="backlink"></span>Saved Games</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Saved Games-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-autosave">autosave</a><br>
		<a href="#about-saveinslot">save in slot (slot)</a><br>
		<a href="#about-loadfromslot">load from slot (slot, args...)</a><br>
		<a href="#about-deletesave">delete save (slot)</a><br>
		<a href="#about-lastsaveslot">last save slot</a><br>
		<a href="#about-setlastsaveslot">set last save slot (slot)</a><br>
		<a href="#about-saveslotused">save slot used (slot)</a><br>
		<a href="#about-importglobals">import globals (slot, first, last)</a><br>
		<a href="#about-exportglobals">export globals (slot, first, last)</a><br>
</div></ul>
</div>
		<div class="command">
		<h4>load menu (reallyload, show new game)</h4>
		<p><a href="#about-loadmenu">Documented in the Opening Built-in Menus section.</a></p>
		</div>
		<div class="command">
			<a name="about-autosave"></a>
				<h4>autosave</h4>
<p>
			
				Transparently saves the game to the last save slot saved to or loaded from
				(see <a href="#about-lastsaveslot" class="ref">last save slot</a>),
				or if playing a new game which has not been saved yet, calls <a href="#about-savemenu" class="ref">save menu</a>.
				Returns the number of the save slot saved to, or if the user cancelled the save menu,
				returns false.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-lastsaveslot" class="ref">last save slot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-saveinslot"></a>
				<h4>save in slot (slot)</h4>
<p>
			Saves in the specified save slot (1 to 1000, regardless of how many are visible on the save and load menus). If a saved game already exists in the slot, it will be overwritten. If you want to make sure that no save game will be overwritten, use <a href="#about-saveslotused" class="ref">save slot used</a>. To display the save game menu instead, use <a href="#about-savemenu" class="ref">save menu</a>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-loadfromslot"></a>
				<h4>load from slot (slot, args...)</h4>
<p>
			
				Loads a saved game from a save <span class="param">slot</span> as if it had been loaded from the load game menu.
				<span class="param">slot</span> is a slot number from 1 to 1000, (regardless of how many are displayed on the Load and Save menus).
				This command will end the current game (and fade out and in again) if it successfully loads.
				If the load fails because the slot has never been saved in, the script will continue.
				Anything that you want to happen after loading a saved game needs to be put in the 'load game' script instead (specified in Special Plotscripts).
				You can pass any number of additional optional <span class="param">args</span> to the loadgame script.
				(<span class="param">slot</span> is also always passed as the first argument to the loadgame script,
				so <span class="param">args</span> are the 2nd and later arguments.)
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					The default arguments of a loadgame script (and all other triggered scripts)
					are currently ignored.
					If you don't pass enough <span class="param">args</span>, then the remaining arguments default to zero,
					so don't use defaults other than zero!
				</div>
			
			
			<pre># This example shows automatically loading the last save when you die,
# and does something special after loading by passing an argument to the loadgame
# script. You could accomplish the same thing with a global variable instead.

# "slot" is the save slot number
# "is quickload" defaults to 0 (false) if the game is loaded from the regular load menu, and
# can be something else if we use "load from slot"
plotscript, my loadgame script, slot, is quickload, begin
  if (is quickload) then (
    show textbox(42)  # "You died and have been restored from the last save point!"
    wait for textbox
  )
end

plotscript, my gameover script, begin
  fade screen out(63, 0, 0)  # fade to red
  wait(10)
  fade screen out(0, 0, 0)   # fade to black
  if (last save slot) then (
    # On death, reload the last save automatically, and tell the loadgame script we're doing so
    load from slot(last save slot, true)
  ) else (
    # The player hasn't saved yet... too bad!
    game over
  )
end</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-loadmenu" class="ref">load menu</a>, </li>
<li>
<a href="#about-saveinslot" class="ref">save in slot</a>, </li>
<li>
<a href="#about-saveslotused" class="ref">save slot used</a>, </li>
<li>
<a href="#about-lastsaveslot" class="ref">last save slot</a>, </li>
<li><a href="#about-resetgame" class="ref">reset game</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-deletesave"></a>
				<h4>delete save (slot)</h4>
<p>
			
				Deletes a saved game in the specified save <span class="param">slot</span> (1 to 1000,
				regardless of how many are displayed on the Load and Save menus).
				The save will no longer be visible on the load game menu or loadable with <a href="#about-loadfromslot" class="ref">load from slot</a>.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-saveinslot" class="ref">save in slot</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-lastsaveslot"></a>
				<h4>last save slot</h4>
<p>
			
				Returns the last save slot either loaded or saved to (whichever happened last)
				or <a href="#about-false" class="ref">false</a> if this is an unsaved new game.
				Save slots are numbered starting at 1.
				<br>
				<a href="#about-savemenu" class="ref">save menu</a><span class="code">(false)</span> and <a href="#about-loadmenu" class="ref">load menu</a><span class="code">(false)</span>
				(which show the menus but don't actually save or load) don't change the last save slot.
				<br>
				<span class="code">last save slot</span> returns the last save slot used, even if the save
				in it has since been deleted (e.g. with <a href="#about-deletesave" class="ref">delete save</a>).
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					In versions before Callipygous, <a href="#about-saveinslot" class="ref">save in slot</a> didn't change
					the value returned by <span class="code">last save slot</span>, but
					<a href="#about-savemenu" class="ref">save menu</a><span class="code">(false)</span> and <a href="#about-loadmenu" class="ref">load menu</a><span class="code">(false)</span>
					did.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-autosave" class="ref">autosave</a>, </li>
<li><a href="#about-saveinslot" class="ref">save in slot</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-setlastsaveslot"></a>
				<h4>set last save slot (slot)</h4>
<p>
			
				Sets the value returned by <a href="#about-lastsaveslot" class="ref">last save slot</a>.
				This changes the slot used by <a href="#about-autosave" class="ref">autosave</a>.
				<span class="param">slot</span> can be any slot from 1 to 1000, or 0 for none, even if the
				number of save slots visible to the player in the load/save menu is less.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-saveslotused"></a>
				<h4>save slot used (slot)</h4>
<p>
			
				Returns whether a game has been saved in the save slot.
				For example, you can use this if you don't want to overwrite a saved game with <a href="#about-saveinslot" class="ref">save in slot</a>.
				This returns <span class="code">false</span> if the slot has never been saved to normally,
				but has been written to using <a href="#about-exportglobals" class="ref">export globals</a>
				(which will create a nearly-empty .rsav file containing just globals,
				if it doesn't already exist).
			
			
			
			
		</p>
</div>
		<div class="command">
		<h4>send email (save slot, subject string id, message string id)</h4>
		<p><a href="#about-sendemail">Documented in the Debugging section.</a></p>
		</div>
		<div class="command">
		<h4>get load script</h4>
		<p><a href="#about-getloadscript">Documented in the Script Triggers section.</a></p>
		</div>
		<div class="command">
		<h4>set load script (id)</h4>
		<p><a href="#about-setloadscript">Documented in the Script Triggers section.</a></p>
		</div>
		<div class="command">
			<a name="about-importglobals"></a>
				<h4>import globals (slot, first, last)</h4>
				<h4>import globals (slot, id)</h4>
				<h4>import globals (slot)</h4>
<p>
			
				Loads a range of globals from a saved game, overwriting the current globals in that range.
				<span class="param">slot</span> is the save slot number, from 1 to 1000.
				Note that only slots 1-4 appear by default on the save/load menus.
				<span class="param">first</span> and <span class="param">last</span> are the id numbers of the globals at
				the beginning and end of the range (inclusive).
				If you leave out both of <span class="param">first</span> and <span class="param">last</span> all global variables will be imported.
				<br>
				To read a single global from a save slot without modifying any of your globals,
				use the form <span class="code">var := import globals (slot, id)</span>.
				This is NOT the same thing as <span class="code">import globals (slot, id, id)</span>,
				which does modify the global variable.
				<br>
				<span class="code">import globals</span> and <a href="#about-exportglobals" class="ref">export globals</a> can be used to save and
				retrieve info about a saved game without loading it,
				and also to store variables that any game the player starts can use,
				such as high scores and other "global" data, like in the following example:
				<pre>global variable (100, game completed)
global variable (101, hours to complete)
global variable (102, minutes to complete)

plotscript, game finished, begin
  game complete := true
  hours to complete := hours of play
  minutes to complete := minutes of play
  export globals (5, 100, 102) #special slot that the player can not load, which we can use for anything
end

plotscript, check game finished, begin
  import globals (5, 100, 102) #copy saved values into globals 100, 101, 102
  if (game completed) then (
    show textbox (105) #"you have previously finished this game in ${V101} hours and ${V102} minutes"
  ) else (
    show textbox (106) #"you have yet to complete the game!"
  )
  wait for textbox
end</pre>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You can import globals from an empty save slot; it's not an error to do so.
					This reads the value of all of the globals as zero.
					You can also export/import globals to/from an empty save slot
					that doesn't have a full saved game in it; see <a href="#about-exportglobals" class="ref">export globals</a>.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-exportglobals" class="ref">export globals</a>, </li>
<li><a href="#about-readglobal" class="ref">read global</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-exportglobals"></a>
				<h4>export globals (slot, first, last)</h4>
<p>
			
				Writes a range of globals to a save game slot, overwriting the saved game's globals.
				<span class="param">slot</span> is the save slot number, from 1 to 1000,
				regardless of how many save slots enabled in the save/load menus.
				<span class="param">first</span> and <span class="param">last</span> are the id numbers of the globals at the
				beginning and end of the range.
				<span class="param">first</span> defaults to 0, and <span class="param">last</span> defaults to 50000.
				Therefore, if you pass no range, all the globals will be written.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					You can export globals to an empty slot!
					This doesn't create a visible save game that the player can load
					(and <a href="#about-saveslotused" class="ref">save slot used</a> will still return <span class="code">false</span> for that slot),
					however you will be able to read them with <a href="#about-importglobals" class="ref">import globals</a>.
					You can delete these globals using <a href="#about-deletesave" class="ref">delete save</a>.
				</div>
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					Unlike importglobals, <span class="code">export globals (slot, first)</span> does
					NOT export a single global variable!
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-importglobals" class="ref">import globals</a>, </li>
<li><a href="#about-writeglobal" class="ref">write global</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Advanced%20Functions"></a>
		<h3>
<span class="backlink"></span>Advanced Functions</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Advanced Functions-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul>
<div class="content-shown">
		<a href="#about-runscriptbyid">run script by ID (id, argument1, argument2, argument3...)</a><br>
		<a href="#about-rungame">run game(file string id)</a><br>
		<a href="#about-checkgameexists">check game exists (file string id)</a><br>
		<a href="#about-milliseconds">milliseconds</a><br>
		<a href="#about-microseconds">microseconds</a><br>
		<a href="#about-savescreenshot">save screenshot</a><br>
</div>
		<li>
<a href="#Debugging">Debugging</a><br>
		<ul class="content-shown">
		<a href="#about-trace">trace (string)</a><br>
		<a href="#about-tracevalue">trace value (expression, ...)</a><br>
		<a href="#about-dumpslicetree">dump slice tree (slice)</a><br>
		<a href="#about-scripterror">script error (string id)</a><br>
		<a href="#about-breakpoint">breakpoint</a><br>
		<a href="#about-debugmenu">debug menu</a><br>
		<a href="#about-assert">assert (expression)</a><br>
		<a href="#about-getslicelookupname">get slice lookup name (string id, code, use default name)</a><br>
		<a href="#about-getscriptname">get script name (string id, script id)</a><br>
		<a href="#about-getcallingscriptid">get calling script id (depth)</a><br>
		<a href="#about-sendemail">send email (save slot, subject string id, message string id)</a><br>
</ul>
<ul></ul>
</li>
</ul>
</div>
		<div class="command">
			<a name="about-runscriptbyid"></a>
				<h4>run script by ID (id, argument1, argument2, argument3...)</h4>
<p>
			
				The <span class="param">run script by id</span> command allows you to run a script using its <a href="#about-scriptid" class="ref">script ID</a>.
				You can get the ID of a script by writing <span class="param">@</span> (the 'reference' operator)
				in front of its name, see the example.
				You can not run a built-in command like <a href="#about-wait" class="ref">wait</a>; they aren't scripts.
				Arguments after the ID will be passed to the script.
				The return value of this command is whatever value the script returns.
				A run-time error is displayed and -1 is returned if the script does not exist.
				You can pass up to 31 arguments to the script.
				<br>
				The advantage of this command as opposed to just calling the script
				directly is that the ID may be stored in a variable,
				or it could be the function return value of another script.
				For example, using <a href="#about-setsliceextra" class="ref">set slice extra</a> you might want to store the ID
				of a script that should be run when the player clicks on a slice.
				<div class="notice danger" title="Danger">
<img src="Plotdanger.png" alt="[Danger]" class="icon">
					If you pass too few arguments, the unspecified ones will have value zero
					<b>regardless</b> of any default values given in the script declaration.
					This bug will be fixed in some future version.
					<br>
					If you pass too many (which does not cause an error),
					the extra ones are ignored.
				</div>
			
			
			<pre>plotscript,scriptcallingtest,begin
  show value (run script by id (@sum, 1, 2, 3))
end

script,sum,a,b,c,begin
  return(a+b+c)
end</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-getscriptname" class="ref">get script name</a>, </li>
<li><a href="#about-getcallingscriptid" class="ref">get calling script id</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-rungame"></a>
				<h4>run game(file string id)</h4>
<p>
			
				Quit the current game and switch to a different .rpg file/.rpgdir.
				When that game is quit, the program either exits or goes to the game browser as usual.
				So if you want to return to the original game you need to call <span class="code">run game</span> a
				second time from that game instead of using <a href="#about-gameover" class="ref">game over</a>.)
				<span class="param">file string id</span> is the ID of a string that contains the filename of the game to load.
				If the game is not in the same directory, then you need to provide a relative
				path, like "bonus content\Prequel.rpg" or "../selectmenu.rpg".
				The path is case-insensitive and <span class="param">/</span> and <span class="param">\</span> are interchangeable.
			
			
			<pre># load another game in the same directory
$0 = "part2.rpg"
run game(0)</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-checkgameexists"></a>
				<h4>check game exists (file string id)</h4>
<p>
			
				Check whether an .rpg file/.rpgdir directory exists, returning true or false.
				This is useful before calling <a href="#about-rungame" class="ref">run game</a>, which will show an error if the game doesn't exist.
				
				See <a href="#about-rungame" class="ref">run game</a> for more information about the filename.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-rungame" class="ref">run game</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-milliseconds"></a>
				<h4>milliseconds</h4>
<p>
			Use to measure time intervals accurately. Subtract two values returned by milliseconds at different times to find the number of ms (1000ths of a second) elapsed in between. A single value is useless (the computer's up-time or any random value).
			
			
			<div class="seealso">See also: <ul><li><a href="#about-microseconds" class="ref">microseconds</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-microseconds"></a>
				<h4>microseconds</h4>
<p>
			An alternative to <a href="#about-milliseconds" class="ref">milliseconds</a> which measures millionths of a second. This command only exists for accurate benchmarking.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-savescreenshot"></a>
				<h4>save screenshot</h4>
<p>
			
				Saves a screenshot, as if the player pressed F12.
				A popup will appear telling the filename of the screenshot.
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					The screenshot might be taken either of the previous frame or the next one.
					To be safe, if you're displaying something and then taking a screenshot of
					it, put a <span class="code">wait(1)</span> in between.
				</div>
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="subsection">
<a name="Debugging"></a>
		<h3>
<span class="backlink"><a href="#Advanced%20Functions">Advanced Functions</a> →
			</span>Debugging</h3>
		<p></p>
<ul></ul>
		<div class="command">
			<a name="about-trace"></a>
				<h4>trace (string)</h4>
<p>
			Writes string #<span class="param">string</span> to "g_debug.txt", located in the same directory as the RPG file or game.exe. For debugging you will nearly always use <a href="#about-tracevalue" class="ref">trace value</a> instead, which is much easier.
			
			<pre>variable (i)
i := random (1, 1000)
$1 = "i = "
append number (1, i) # string 1 is "i = ????"
trace (1) # writes "TRACE: i = ????" to g_debug.txt</pre>
			
		</p>
</div>
		<div class="command">
			<a name="about-tracevalue"></a>
				<h4>trace value (expression, ...)</h4>
<p>
			Prints one or more expressions and their values to "g_debug.txt". The number of arguments to this command is variable; each is printed as source text along with its value. You can't print strings with this command; use <a href="#about-trace" class="ref">trace</a> instead.
			
			<pre>variable(i)
i := random (1, 1000)
trace value (i)  # writes "TRACE: i = ????" to g_debug.txt

# This writes something like "TRACE: hero X (me) = 14, hero Y (me) = 53" to g_debug.txt
trace value (hero X (me), hero Y (me))</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-assert" class="ref">assert</a>, </li>
<li><a href="#about-dumpslicetree" class="ref">dump slice tree</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-dumpslicetree"></a>
				<h4>dump slice tree (slice)</h4>
<p>
			
				Prints out a brief description of a slice and all its descendents to "g_debug.txt".
				<span class="param">slice</span> is optional; if omitted the whole tree is printed out,
				which is the same as pressing the <span class="param">Ctrl+F8</span> debug key.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Most of the slice data isn't printed; if you want to inspect it the easiest
					way to do so is either to press <span class="param">Ctrl+F4</span> to view the slice editor/debugger,
					or to call <a href="#about-scripterror" class="ref">script error</a> at the exact moment you want to check the slice tree;
					you can then enter the slice debugger from the Script Error menu.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-tracevalue" class="ref">trace value</a>, </li>
<li><a href="#about-scripterror" class="ref">script error</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-scripterror"></a>
				<h4>script error (string id)</h4>
<p>
			Shows an error message, like any other script error. This allows you to open the script debugger. (Use <a href="#about-breakpoint" class="ref">breakpoint</a> to skip the menu straight to the debugger.) The optional <span class="param">string id</span> argument gives the error message to display.
			
			<pre>if (x &lt; 0 || x &gt;= map width || y &lt; 0 || y &gt;= map height) then (
  $0="Coordinates went off the edge of the map"
  script error(0)
)</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-assert" class="ref">assert</a>, </li>
<li>
<a href="#about-tracevalue" class="ref">trace value</a>, </li>
<li>
<a href="#about-debugmenu" class="ref">debug menu</a>, </li>
<li><a href="#about-breakpoint" class="ref">breakpoint</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-breakpoint"></a>
				<h4>breakpoint</h4>
<p>
			
				Open the script debugger; this is slightly simpler than using `script error`.
				You can temporarily add this to a script you're trying to debug
				if you want to examine its state at a certain point.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-scripterror" class="ref">script error</a>, </li>
<li>
<a href="#about-assert" class="ref">assert</a>, </li>
<li><a href="#about-tracevalue" class="ref">trace value</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-debugmenu"></a>
				<h4>debug menu</h4>
<p>
			
				Opens the debug menu, which you can open by pressing F8 if debug keys are enabled;
				this is useful if debug keys are disabled, or on handhelds/consoles without an F8 key.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-scripterror" class="ref">script error</a>, </li>
<li><a href="#about-showminimap" class="ref">show mini map</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-assert"></a>
				<h4>assert (expression)</h4>
<p>
			If <span class="param">expression</span> is false, then writes the script filename, line number and <span class="param">expression</span> into the string given by the constant or global variable named <span class="param">assert expression string</span>, and then calls the script named <span class="param">assert failure</span>. You can use this to detect bugs in your scripts, by checking that your assumptions about the state of the game are correct.
			
			<pre># The following...
assert (check tag (tag:initialised) == OFF)
# ...is equivalent to something like
if (not (check tag (tag:initialised) == OFF)) then (
  $assert expression string="myscripts.hss:123: check tag (tag:initialised) == OFF"
  assert failure
)</pre><pre># Suggested usage:
define constant(31, assert expression string)
script, assert failure, begin
  script error(assert expression string)
end

# later...
assert (check tag (tag:initialised) == OFF)  # something ought to be true at this moment
</pre>
			<div class="seealso">See also: <ul>
<li>
<a href="#about-scripterror" class="ref">script error</a>, </li>
<li><a href="#about-tracevalue" class="ref">trace value</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-getslicelookupname"></a>
				<h4>get slice lookup name (string id, code, use default name)</h4>
<p>
			
				Lookup the codename of a slice lookup code ID (either user-defined or builtin).
				<span class="param">string id</span> is the ID of a string to put the name into
				and <span class="param">code</span> is a slice lookup code like <span class="code">sl:map layer 2</span>.
				<br>
				The <span class="code">sl:</span> or <span class="code">sli:</span> prefix (for builtin and user codes
				respectively) isn't prefixed to the codename.
				For example, might set the string to "map layer2".
				<span class="param">use default name</span> is optional, defaulting to <span class="code">true</span>.
				When true, if there is no codename with that code, the produced codename
				is e.g. "Lookup40"; when false, the string is set to "".
				But if <span class="code">code == 0</span> then the string is always set to "".
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getscriptname"></a>
				<h4>get script name (string id, script id)</h4>
<p>
			Fetches the name of a script given its <a href="#about-scriptid" class="ref">script ID</a> number and places it in a string. It's an error to pass an invalid script ID. You can get the ID number of a script by writing <span class="code">@scriptname</span>.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getcallingscriptid"></a>
				<h4>get calling script id (depth)</h4>
<p>
			Returns the ID number of the script which called this one. The optional <span class="param">depth</span> argument, which defaults to 1, allows returning the ID of a deeper ancestor script instead: 1 is the parent, 2 is the grandparent, etc. If there is no calling script (the script was triggered instead), then the return value is 0. You can get the ID number of a script by writing @scriptname.
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getscriptname" class="ref">get script name</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-sendemail"></a>
				<h4>send email (save slot, subject string id, message string id)</h4>
<p>
			
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					This command is only implemented on Android!
					Calling it on other platforms does nothing.
				</div>
				This asks the player if they want to send an email to you, optionally
				with a save file attached.
				The purpose is to make it easy for players to send bug reports or feedback,
				especially on Android, where it might otherwise be a nuisance to send saved games.

				When called on Android, a standard system menu is brought up asking the player which
				email client they want to use.
				If they don't cancel, that client is opened with an email already filled out,
				which they can edit as usual:
				<br>
				The email is sent to the address set in the Distribute Game-&gt;Distribution Info menu.
				<br>
				<span class="param">subject string id</span> is optional; it is the id of a string containing the email
				subject line.
				If you leave it out or set it to -1 then the default subject line is "[Name of the game] feedback".
				<br>
				<span class="param">message string id</span> is optional; it is the id of a string containing the email body text.
				If you leave it out or set it to -1 then it defaults to "(Please include a helpful description of the problem here)".
				<br>
				The <span class="param">save slot</span> argument is optional, and is either an existing save slot number,
				or <span class="param">false</span> (the default) to not attach a save.
				You can use <a href="#about-saveinslot" class="ref">save in slot</a> with a large slot number to create a temporary save of the current game.
				If you attach an save file two other files are also attached: g_debug.txt and g_debug_archive.txt.
				g_debug.txt is useful for tracking down OHRRPGCE engine bugs,
				but you can also write to it using <a href="#about-trace" class="ref">trace</a> and <a href="#about-tracevalue" class="ref">trace value</a>.
				You can also check it for error messages, such as script errors (errors will start with
				a <span class="param">!</span> at the beginning of the line).
				g_debug_archive.txt contains backups of g_debug.txt from previous times the game was played.
				<br>
				To load the .rsav file, rename it if necessary (e.g. 0.rsav for the first save slot),
				and put it in the 'gamename.saves' folder.
			
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Platform%20Specific"></a>
		<h3>
<span class="backlink"></span>Platform Specific</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p></p>
<div class="select-content-shown" id="Platform Specific-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-runningondesktop">running on desktop</a><br>
		<a href="#about-runningonwindows">running on Windows</a><br>
		<a href="#about-runningonmac">running on Mac</a><br>
		<a href="#about-runningonlinux">running on Linux</a><br>
		<a href="#about-runningonmobile">running on mobile</a><br>
		<a href="#about-runningonconsole">running on console</a><br>
		<a href="#about-runningonouya">running on ouya</a><br>
		<a href="#about-hidevirtualgamepad">hide virtual gamepad</a><br>
		<a href="#about-showvirtualgamepad">show virtual gamepad</a><br>
		<a href="#about-autovirtualgamepad">auto virtual gamepad</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-runningondesktop"></a>
				<h4>running on desktop</h4>
<p>
			This command returns true if the game is currently running on any Windows/Mac/Linux desktop computer. You should avoid using this command unless you really need it. Most games will never need this command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-runningonwindows"></a>
				<h4>running on Windows</h4>
<p>
			This command returns true if the game is currently running on a Windows computer. You should avoid using this command unless you really need it. Most games will never need this command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-runningonmac"></a>
				<h4>running on Mac</h4>
<p>
			This command returns true if the game is currently running on a Macintosh computer. You should avoid using this command unless you really need it. Most games will never need this command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-runningonlinux"></a>
				<h4>running on Linux</h4>
<p>
			This command returns true if the game is currently running on a GNU/Linux desktop computer (not including Android or other non-PC Linux-based OS). You should avoid using this command unless you really need it. Most games will never need this command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-runningonmobile"></a>
				<h4>running on mobile</h4>
<p>
			This command returns true if the game is currently running on a mobile device such as an Android phone or tablet. You should avoid using this command unless you really need it. Most games can support mobile devices without ever using this command. See the "Platform-Specific Options" menu under "Edit General Game Data".
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-runningonconsole"></a>
				<h4>running on console</h4>
<p>
			This command returns true if the game is currently running on an console. Currently supported consoles include OUYA, MOJO, GameStick, and FireTV. You should avoid using this command unless you really need it. Most games can support the consoles without ever using this command. See the "Platform-Specific Options" menu under "Edit General Game Data".
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-runningonouya"></a>
				<h4>running on ouya</h4>
<p>
			This command returns true if the game is currently running on an OUYA console. You should avoid using this command unless you really need it. Most games can support the OUYA console without ever using this command, and even if you do need to do special scripting just for ouya, you should consider using <a href="#about-runningonconsole" class="ref">running on console</a> instead, since the only thing different about OUYA is its button names and in-app-purchase support. See the "Platform-Specific Options" menu under "Edit General Game Data".
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-hidevirtualgamepad"></a>
				<h4>hide virtual gamepad</h4>
<p>
			If the game is running on a platform that supports a touchscreen virtual gamepad (such as Android) this command forces the virtual gamepad to become hidden, even if it would normally be visible. On other platforms, this command does nothing. The effects of this command can be cancelled by using the <a href="#about-autovirtualgamepad" class="ref">auto virtual gamepad</a> command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-showvirtualgamepad"></a>
				<h4>show virtual gamepad</h4>
<p>
			If the game is running on a platform that supports a touchscreen virtual gamepad (such as Android) this command forces the virtual gamepad to become visible, even if it would normally be hidden. On other platforms, this command does nothing. The effects of this command can be cancelled by using the <a href="#about-autovirtualgamepad" class="ref">auto virtual gamepad</a> command.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-autovirtualgamepad"></a>
				<h4>auto virtual gamepad</h4>
<p>
			If the game is running on a platform that supports a touchscreen virtual gamepad (such as Android) this command cancels a previous <a href="#about-showvirtualgamepad" class="ref">show virtual gamepad</a> or <a href="#about-hidevirtualgamepad" class="ref">hide virtual gamepad</a> command. The virtual gamepad will once again automatically show or hide itself automatically based on various factors such as textboxes, menus, battles, or <a href="#about-suspendplayer" class="ref">suspend player</a>. On other platforms, this command does nothing.
			
			
			
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Types%20and%20Handles"></a>
		<h3>
<span class="backlink"></span>Types and Handles</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>
			This section documents many of the different types of values that are used by various script
			commands, such as NPC references.
			Note that in HamsterSpeak everything is a number, so there are no types
			as in other programming languages; instead identifiers are used for everything.
			Values of different ID numbers and handles overlap: there's no way to tell if
			a number refers to an NPC or a slice or a map.
			<ul>
				<li>
					An <span class="param">ID number</span> normally refers to something which is defined
					in an editor, such as an NPC definition or map ID number,
					or something which is fixed supply, like global and string ID numbers.
					ID numbers always count upwards from 0 or sometimes 1.
					Many IDs have constants automatically defined, for example if there's
					a map named Overworld, there's a constant named <span class="param">map:Overworld</span> with its ID number.
				</li>
				<li>
					A <span class="param">handle</span> or a <span class="param">reference</span> is an identifier for something that can
					be created during play, like slice handles, menu handles and NPC references.
					It can change from game to game, and it becomes invalid if the thing
					it refers to is deleted.
					After becoming invalid, the value can generally even be reassigned to a new thing of that type,
					so be careful about handles you've stored in variables when deleting things!
				</li>
				<li>
					A <span class="param">constant</span> (or "enum") is a fixed value, used for things that
					don't change, like different available NPC movement types, or map numbers.
					Many constants in HamsterSpeak start with a prefix like <span class="param">key:</span>.
					There's nothing special about these prefixes or names, and <span class="param">:</span> is treated
					like any letter which you can use freely.
				</li>
			</ul>
		</p>
<div class="select-content-shown" id="Types and Handles-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-npcid">NPC IDs</a><br>
		<a href="#about-npcpool">NPC pool numbers</a><br>
		<a href="#about-npcref">NPC references</a><br>
		<a href="#about-slicehandle">Slice handles</a><br>
		<a href="#about-blendableslicehandle">Blendable slice handles</a><br>
		<a href="#about-lookupcode">Slice lookup codes</a><br>
		<a href="#about-menuhandle">Menu handles</a><br>
		<a href="#about-menuitemhandle">Menu item handles</a><br>
		<a href="#about-scriptid">Script IDs</a><br>
		<a href="#about-colorcode">Color codes</a><br>
		<a href="#about-scancode">Scancodes</a><br>
		<a href="#about-playernumber">Player number</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-npcid"></a>
				<h4>NPC IDs</h4>
<p>
			
				An NPC ID refers to an NPC type, as defined in the Edit NPCs menu.
				NPC IDs count from 0 upwards.
				Local and global <a href="#about-npcpool" class="ref">NPC pool</a>s have distinct sets of IDs,
				so some commands such as <a href="#about-npccopycount" class="ref">NPC copy count</a> take both an NPC ID and an NPC pool
				as separate arguments.
				But most NPC commands, such as <a href="#about-walknpc" class="ref">walk NPC</a>, don't take a pool argument.
				If you pass an ID to these, then it's interpreted as a ID in the local NPC pool.
				<br>
				A copy of an NPC is referred to using an <a href="#about-npcref" class="ref">NPC reference</a>.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-npcpool"></a>
				<h4>NPC pool numbers</h4>
<p>
			
				An NPC pool number tells whether an NPC ID refers to an NPC in the local
				or global NPC pools. (In future there may be more than two pools.)
				It can be either <span class="param">pool:local</span> (which is <span class="param">0</span>; NPCs specific to one map) or <span class="param">pool:global</span>
				(which is <span class="param">1</span>).
				Most commands that accept NPC IDs don't have an argument to tell the pool number.
				These always default to the local pool, and you need to first use
				<a href="#about-npcreference" class="ref">NPC reference</a> or <a href="#about-globalnpcreference" class="ref">global NPC reference</a>
				if you want to refer to a global NPC by ID.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-npcref"></a>
				<h4>NPC references</h4>
<p>
			
				What is an NPC reference?
				A reference is a number that uniquely identifies an NPC instance on the map.
				You can use an NPC reference to specify which NPC you are controlling in most NPC-related commands.
				<br>
				NPC references are handles for NPC instances on the map,
				that is, a copy of an NPC definition.
				NPC references are always negative values, while NPC IDs count from 0 up.
				An <a href="#about-npcid" class="ref">NPC ID</a> can always be used with any command that expects
				an NPC reference, in which case it refers to the first
				instance/copy of that NPC ID from the local <a href="#about-npcpool" class="ref">NPC pool</a>, not to the NPC definition itself.
				(If you want to refer to a global NPC, you need to first use <a href="#about-globalnpcreference" class="ref">global NPC reference</a>.)
				So <span class="code">wait for NPC(5)</span> is equivalent to <span class="code">wait for NPC(<a href="#about-npcreference" class="ref">NPC reference</a>(5, 0))</span>.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If you want to loop over all NPC instances (that is, over all NPC references), use
					<a href="#about-nextnpcreference" class="ref">next NPC reference</a>.
					An NPC reference historically was (and still is for now) a number between -1 and -300,
					but that will change in an upcoming version.
					So it's strongly recommended that you don't loop over values -1 to -300.
				</div>
				<div class="notice warn">
<img src="Plotwarn.png" alt="[Warning]" class="icon">
					If you move to a different map you mustn't use the old references on the new map.
					If you set the map to save NPC data when leaving, the previous references will be valid when you get back to it.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-slicehandle"></a>
				<h4>Slice handles</h4>
<p>
			
				Slices are referred to with <span class="param">slice handles</span>. A slice handle is just a value that you can store in a <span class="param">variable</span>,
				just like an <a href="#about-npcref" class="ref">NPC reference</a> or a <a href="#about-menuhandle" class="ref">menu handle</a>.
				A handle is <span class="param">valid</span> if it currently refers to an existing slice.
				<a href="#about-false" class="ref">false</a> (zero) is never a valid slice handle, so slice commands return 0 to indicate "no slice found" or similar failures.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					<a href="#about-lookupcode" class="ref">slice lookup code</a>s like "sl:map layer 0" or "sli:quit button" are NOT slice handles;
					they can only be used by the <a href="#about-lookupslice" class="ref">lookup slice</a> command.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-blendableslicehandle"></a>
				<h4>Blendable slice handles</h4>
<p>
			
				A <a href="#about-slicehandle" class="ref">slice handle</a> for a slice type which has blending settings (opacity and blend mode),
				which currently are Sprite and Map (map layer) slices.
				More slice types will become blendable in future versions.
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Rectangle slices aren't blendable, however the background of a
					rect <b>can</b> be made transparent using <a href="#about-setrectopacity" class="ref">set rect opacity</a>
					instead of <a href="#about-setopacity" class="ref">set opacity</a>.
					This doesn't make the box border transparent, and <a href="#about-getopacity" class="ref">get opacity</a>
					will still return 100.
				</div>
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-setopacity" class="ref">set opacity</a>, </li>
<li>
<a href="#about-setblendmode" class="ref">set blend mode</a>, </li>
<li><a href="#about-setblendingenabled" class="ref">set blending enabled</a></li>
</ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-lookupcode"></a>
				<h4>Slice lookup codes</h4>
<p>
			
				Slice lookup codes are used to search for a particular slice using <a href="#about-lookupslice" class="ref">lookup slice</a>.
				There are two types.
				User defined slice lookup codes are
				defined (named) in the slice collection editor.
				You will find them as constants in your .hsi file with sli: prefixes, and they count up from 1.
				You can also use any non-negative value, even if you haven't named it in the editor.
				There are also many special slice lookup codes with names that start with sl: prefixes.
				See <a href="#about-lookupslice" class="ref">lookup slice</a> for the list. They are always negative.
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getslicelookupname" class="ref">get slice lookup name</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-menuhandle"></a>
				<h4>Menu handles</h4>
<p>
			
				A handle for a currently open menu, for example, the one returned by <a href="#about-openmenu" class="ref">open menu</a> or
				<a href="#about-createmenu" class="ref">create menu</a> or <a href="#about-topmenu" class="ref">top menu</a>.
				Menu handle <span class="param">0</span> (<span class="param">false</span>) means none/invalid.
				Not the same thing as a menu ID (which is a menu defined in the menu editor).
				There can be multiple open copies of a single menu ID.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-menuitemhandle"></a>
				<h4>Menu item handles</h4>
<p>
			
				A handle to one of the items in a currently open menu,
				for example, the one returned by <a href="#about-selectedmenuitem" class="ref">selected menu item</a>.
				Menu items in different menus are always different, so it's possible to lookup
				which menu its in with <a href="#about-parentmenu" class="ref">parent menu</a>, and menu handles are never reused.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-scriptid"></a>
				<h4>Script IDs</h4>
<p>
			
				Script IDs are used to refer to scripts, for example for <a href="#about-setdeathscript" class="ref">set death script</a>.
				Get the ID of a script by writing <span class="param">@name of the script</span>, which is a constant.
				You can call a script using its ID instead of the normal way with <a href="#about-runscriptbyid" class="ref">run script by ID</a>.
				You used to have to manually assign IDs to scripts using <span class="code">define script</span>,
				but that's now obsolete and IDs are automatically assigned.
				The ID number of a script will remain the same as long as it isn't renamed,
				so they're safe to store in saved games.
				The ID <span class="param">0</span> means no script (e.g. no death script).
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-getscriptname" class="ref">get script name</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
			<a name="about-colorcode"></a>
				<h4>Color codes</h4>
<p>
			
				A number indicating a color in the master palette.
				A value from 1-255 is specifies the master palette index directly.
				The meaning of 0 depends on the particular script command:
				it might mean either 'transparent' or 'the default color'
				or 'color 0 in the palette'.
				Negative values are <span class="code">ui:...</span> constants, for colors defined in
				the User-Interface Colors editor.
				(You can get the master palette index for a <span class="code">ui:</span> constant with <a href="#about-getuicolor" class="ref">get ui color</a>.)
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-scancode"></a>
				<h4>Scancodes</h4>
<p>
			
				A scancode is a constant referring to a keyboard key, a joystick button,
				or is a virtual scancode for a control like <a href="#about-usekey" class="ref">use key</a> or <a href="#about-anykey" class="ref">any key</a>
				(see <a href="#about-controlcodes" class="ref">control codes</a> for the full list)
				which is an action that can be triggered by various keys or buttons.
				<br>
				The scancodes are also listed in the <b>scancode.hsi</b> file included with the engine.
				<pre>key:Esc
key:F1
key:F2
key:F3
...
key:F15          # Mac keyboards usually have 15 instead of 12 F# buttons

key:Num Lock     # Tells whether numlock is on, not whether the key is down.
key:Caps Lock    # Tells whether capslock is on, not whether the key is down.
key:Scroll Lock  # Unreliable across different OSes/backends, avoid.

key:Print Screen # Unreliable across different OSes/backends, avoid
key:Pause        # Works for "keypress" and "new keypress" but not "key is pressed"

key:1
key:Exclamation
key:2
key:At Sign
key:3
key:Hash
key:4
key:Dollar Sign
key:5
key:6
key:Circumflex
key:7
key:Ampersand
key:8
key:Asterisk
key:9
key:Left Parenthesis
key:0
key:Right Parenthesis
key:Minus
key:Underscore
key:Equals
key:Plus
key:Backspace

key:A
key:B
key:C
...
key:Z

key:Left Bracket     # [
key:Left Brace       # {
key:Right Bracket    # ]
key:Right Brace      # }
key:Semicolon        # ;
key:Colon            # :
key:Quote            # '
key:Doublequote      # "
key:Apostrophe       # '
key:Backquote        # `
key:Tilde            # ~
key:Backslash        # \
key:Pipe             # |
key:Comma            # ,
key:Left Caret       # &lt;
key:Period           # .
key:Right Caret      # &gt;
key:Slash            # /
key:Question Mark    # ?
key:Enter
key:Space
key:Tab

key:Home
key:End
key:Page Up
key:Page Down
key:Insert
key:Delete

key:Up
key:Left
key:Right
key:Down

key:Meta           # Either Command/Windows key
key:Win Logo       # Equal to key:Meta
key:Command        # Equal to key:Meta
key:Left Meta      # Left Command/Windows key
key:Right Meta     # Right Command/Windows key
key:Left Win Logo  # equal to key:Left Meta
key:Right Win Logo # equal to key:Right Meta
key:Left Command   # Macintosh, equal to key:Left Meta
key:Right Command  # Macintosh, equal to key:Right Meta
key:Context        # Context Menu key, next to right Windows key on PC keyboards

key:Alt            # either Alt key pressed
key:Left Alt
key:Right Alt
key:Filtered Alt   # either Alt key pressed, unless a key combinations like Alt+Tab is
                   # pressed, however key presses are delayed until key release.
key:Ctrl           # either Ctrl key pressed
key:Left Ctrl
key:Right Ctrl
key:Shift          # either Shift key pressed
key:Left Shift
key:Right Shift
key:Any Enter      # either Enter or Numpad Enter key pressed

key:Numpad 0
key:Numpad 1
key:Numpad 2
key:Numpad 3
key:Numpad 4
key:Numpad 5
key:Numpad 6
key:Numpad 7
key:Numpad 8
key:Numpad 9
key:Numpad Period
key:Numpad Asterisk
key:Numpad Slash
key:Numpad Plus
key:Numpad Minus
key:Numpad Enter

#  Joystick scancodes:
# (The following button names are only correct for supported controllers that are gamepads)

# Dpad, and also translates axis:X/Y (left thumbstick on a gamepad) to button presses
# (unless "Map joystick (left) stick to dpad" is disabled)
joy:Left
joy:Right
joy:Up
joy:Down

joy:A              # B button on a SNES controller!
joy:Cross          # Equal to joy:A
joy:B              # A button on a SNES controller!
joy:Circle         # Equal to joy:B
joy:X              # Y button on a SNES controller!
joy:Square         # Equal to joy:X
joy:Y              # X button on a SNES controller!
joy:Triangle       # Equal to joy:Y

# Translation of right stick (axis:RightX/Y) to button presses
joy:RStick Left
joy:RStick Right
joy:RStick Up
joy:RStick Down

joy:L1             # Left shoulder
joy:R1             # Right shoulder
joy:L2             # Left trigger. Also axis:L2
joy:R2             # Right trigger. Also axis:R2

# The thumbsticks when pressed as a button
joy:Left Stick
joy:Right Stick
# Center-left button: Select (NES, SNES, PS1-3), Back (Xbox), Share (PS4), View (Xbox)
joy:Select
joy:Back           # Equal to joy:Select
# Center button: PS button (PS3), Xbox guide button
joy:Logo
joy:Guide          # Equal to joy:Logo
# Center-right button: Start (NES, SNES, Genesis, N64, Saturn, PS1-3, Xbox), Options (PS4), Menu (XBox)
joy:Start

# Obsolete aliases
joy:x left         # Aka joy:Left
joy:x right        # Aka joy:Right
joy:y up           # Aka joy:Up
joy:y down         # Aka joy:Down

# You can use button numbers instead of the above names:
joy:button 1
joy:button 2
joy:button 3
...
joy:button 16
joy:button 17      # Warning: joy:button17 is not joy:button16 + 1! All other button codes are consecutive
...
joy:button 32

#  Virtual scancodes:
any key            # Any keyboard key or joystick button (including joystick left/right/up/down),
                   # and also any mouse button if "'any key', etc, include mouse clicks" is turned on in
		   # the Mouse Controls menu.
up key             # Up key on the keyboard, or on any joystick
down key           # ...ditto
left key
right key
use key            # Space, Ctrl or Enter, or A button on any gamepad. Includes left clicks
                   # if "'any key', etc, include mouse" turned on in Mouse Controls menu.
cancel key         # Alt or Esc, or B button on any gamepad. Optionally includes right clicks as above.
menu key           # Alt or Esc, or B or Start button on any gamepad. Optionally includes right clicks as above.
flee key           # Esc or Tab, or B button on any gamepad (Hold to flee (run) from battle)
run key            # Alias for 'flee key'
</pre>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Previously it was necessary to <span class="code">include, scancode.hsi</span>
					to use the <span class="code">key:</span> constants, but no longer.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Gamepad constants like <span class="code">joy:A</span> only mean what they say if the controller
					is a gamepad and if you're using the default gfx_sdl2 backend. All the other
					backends number gamepad buttons and axes unpredictably.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					If the "Map joystick controls to keyboard keys for scripts" general preference
					bitset is ON (which it is by default), then checking the
					<span class="code">key:up</span>, <span class="code">key:down</span>, <span class="code">key:left</span>, <span class="code">key:right</span>,
					<span class="code">key:esc</span>, <span class="code">key:enter</span> keys will report <span class="code">true</span>
					if the corresponding button on any joystick is pressed.
				</div>
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					Since Zenzizenzic, keyboard support has been improved: some keys (such as key:down and key:numpad 2)
					which were previously the same scancode are now distinct (read scancode.hsi for the complete list).
					However for backwards compatibility, the old behaviour is emulated
					(so you won't be able to tell the two keys apart even if recompile and use the new, distinct scancodes)
					unless you turn off "Disable better scancodes for scripts"
					in the Backwards-Compatibility settings menu (in the General Game Settings menu).
				</div>
			
			
			
			<div class="seealso">See also: <ul><li><a href="#about-extendedscancodesenabled" class="ref">extended scancodes enabled</a></li></ul>
</div>
		</p>
</div>
		<div class="command">
		<h4>Control Codes</h4>
		<p><a href="#about-controlcodes">Documented in the Predefined Constants section.</a></p>
		</div>
		<div class="command">
			<a name="about-playernumber"></a>
				<h4>Player number</h4>
<p>
			
				Commands for reading keyboard or joystick/gamepad input (see below)
				take an optional <span class="param">player</span> argument which you should completely
				ignore unless you're making a multiplayer game.
				These tell which player's joystick/gamepad to check and usually shouldn't be
				used when reading the keyboard.
				Player 0 (which is always the default argument) means check all joysticks
				and the keyboard, as applicable, and combine their input,
				while player 1 and up are specific joysticks: the first joystick is player 1, etc.
				Out of range player numbers are always OK to use,
				and just report no input without showing an error.
				(There's currently no way to get the number of joysticks or players!)
				<br>
				The keyboard is also considered to be to player 1,
				so scancodes like <span class="code">key:ctrl</span> will always return <span class="code">false</span>
				for players 2 and up, but <a href="#about-controlcodes" class="ref">control codes</a> like <span class="code">use key</span>
				can be used with any player.
				<br>
				For example,
				<span class="code">key is pressed(use key)</span> checks the keyboard (ctrl, space, and enter keys) and
				the A button on any gamepad, while
				<span class="code">key is pressed(use key, 1)</span> checks the keyboard and A button
				on the first gamepad,
				and <span class="code">key is pressed(use key, 2)</span>
				checks only the A button on the second gamepad.
			
			
			
			<div class="seealso">See also: <ul>
<li>
<a href="#about-keypress" class="ref">keypress</a>, </li>
<li>
<a href="#about-newkeypress" class="ref">new keypress</a>, </li>
<li>
<a href="#about-keyispressed" class="ref">key is pressed</a>, </li>
<li>
<a href="#about-joystickbutton" class="ref">joystick button</a>, </li>
<li><a href="#about-joystickaxis" class="ref">joystick axis</a></li>
</ul>
</div>
		</p>
</div>
		<hr>
		</div>
		<div class="section">
<a name="Predefined%20Constants"></a>
		<h3>
<span class="backlink"></span>Predefined Constants</h3>
		<a href="#Categories" class="backlink">[Back to top-level index]</a><p>
			This section only lists constants which can be used for multiple commands.
			There are many other builtin constants, but they're documented along with the commands they're for.
		</p>
<div class="select-content-shown" id="Predefined Constants-index">
<button onclick="toggleContent(this);"><span class="content-shown">Hide command index</span><span class="content-hidden">Show command index</span></button><ul><div class="content-shown">
		<a href="#about-controlcodes">Control Codes</a><br>
		<a href="#about-anykey">any key</a><br>
		<a href="#about-upkey">up key</a><br>
		<a href="#about-downkey">down key</a><br>
		<a href="#about-leftkey">left key</a><br>
		<a href="#about-rightkey">right key</a><br>
		<a href="#about-usekey">use key</a><br>
		<a href="#about-menukey">menu key</a><br>
		<a href="#about-cancelkey">cancel key</a><br>
		<a href="#about-runkey">run key</a><br>
		<a href="#about-fleekey">flee key</a><br>
		<a href="#about-controlcodes">Key Constants</a><br>
		<a href="#about-numericconstants">Numeric Constants</a><br>
		<a href="#about-booleanconstants">Boolean Constants</a><br>
		<a href="#about-true">true</a><br>
		<a href="#about-false">false</a><br>
		<a href="#about-on">on</a><br>
		<a href="#about-off">off</a><br>
		<a href="#about-directionconstants">Direction Constants</a><br>
		<a href="#about-north">north</a><br>
		<a href="#about-south">south</a><br>
		<a href="#about-east">east</a><br>
		<a href="#about-west">west</a><br>
		<a href="#about-up">up</a><br>
		<a href="#about-down">down</a><br>
		<a href="#about-right">right</a><br>
		<a href="#about-left">left</a><br>
		<a href="#about-me">me</a><br>
		<a href="#about-none">none</a><br>
		<a href="#about-autonumber">autonumber</a><br>
		<a href="#about-currentstat">current stat</a><br>
		<a href="#about-maximumstat">maximum stat</a><br>
		<a href="#about-basestat">base stat</a><br>
		<a href="#about-insidebattle">inside battle</a><br>
		<a href="#about-outsidebattle">outside battle</a><br>
		<a href="#about-heroportrait">hero portrait</a><br>
		<a href="#about-colorconstants">Color Constants</a><br>
		<a href="#about-colorred">color:red</a><br>
		<a href="#about-colorgreen">color:green</a><br>
		<a href="#about-colorblue">color:blue</a><br>
		<a href="#about-mouseconstants">Mouse Constants</a><br>
		<a href="#about-leftbutton">left button</a><br>
		<a href="#about-middlebutton">middle button</a><br>
		<a href="#about-rightbutton">right button</a><br>
		<a href="#about-getcount">get count</a><br>
		<a href="#about-wallconstants">Wall Bit Constants</a><br>
		<a href="#about-northwall">north wall</a><br>
		<a href="#about-eastwall">east wall</a><br>
		<a href="#about-westwall">west wall</a><br>
		<a href="#about-southwall">south wall</a><br>
		<a href="#about-vehiclea">vehicle A</a><br>
		<a href="#about-vehicleb">vehicle B</a><br>
		<a href="#about-harmtile">harm tile</a><br>
		<a href="#about-overheadtile">overhead tile</a><br>
		<a href="#about-crop">crop</a><br>
		<a href="#about-wrap">wrap</a><br>
		<a href="#about-defaulttile">default tile</a><br>
		<a href="#about-party">party</a><br>
		<a href="#about-timer:default">timer: default</a><br>
		<a href="#about-timer:gameover">timer: game over</a><br>
		<a href="#about-timerflag:critical">timer flag: critical</a><br>
		<a href="#about-timerflag:battle">timer flag: battle</a><br>
		<a href="#about-timerflag:menu">timer flag: menu</a><br>
		<a href="#about-song:silence">song: silence</a><br>
		<a href="#about-song:sameaslastmap">song: same as last map</a><br>
		<a href="#about-song:sameasmap">song: same as map</a><br>
</div></ul>
</div>
		<div class="command">
			<a name="about-controlcodes"></a>
			<a name="about-anykey"></a>
			<a name="about-upkey"></a>
			<a name="about-downkey"></a>
			<a name="about-leftkey"></a>
			<a name="about-rightkey"></a>
			<a name="about-usekey"></a>
			<a name="about-menukey"></a>
			<a name="about-cancelkey"></a>
			<a name="about-runkey"></a>
			<a name="about-fleekey"></a>
				<h4>Control Codes</h4>
<p>
			
				A constant specifying a keyboard key or joystick button by its builtin function.
				(Possibly includes mouse buttons too, if enabled in the Mouse Controls menu.)
				They can be passed to <a href="#about-keyispressed" class="ref">key is pressed</a>, <a href="#about-keyval" class="ref">keyval</a>, <a href="#about-waitforkey" class="ref">wait for key</a>,
				<a href="#about-keypress" class="ref">keypress</a>, <a href="#about-newkeypress" class="ref">new keypress</a> and <a href="#about-waitforscancode" class="ref">wait for scancode</a>.
				<br>
				Previously these could only be used with the <a href="#about-waitforkey" class="ref">wait for key</a> command, but that's changed!
				<br>
				Possible values:
				<br>
				<span class="param">any key</span>, <span class="param">up key</span>, <span class="param">down key</span>, <span class="param">left key</span>, <span class="param">right key</span>,
				<span class="param">use key</span>, <span class="param">menu key</span>, <span class="param">cancel key</span>, <span class="param">flee key</span>, <span class="param">run key</span>.
				<br>
				(<span class="param">flee key</span> and <span class="param">run key</span> are different names for the same constant;
				<span class="param">menu key</span> and <span class="param">cancel key</span> used to be the same but are now different:
				the Start button on a gamepad is a menu key.)
				<div class="notice note">
<img src="Plotnote.png" alt="[Notice]" class="icon">
					All commands which accept a key constant can also accept a scancode (like <span class="code">key:enter</span>) instead.
					See <a href="#about-scancode" class="ref">scancode</a>.
				</div>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-keyconstants"></a>
				<h4>Key Constants</h4>
				An alias for <a href="#about-controlcodes">control codes</a>.
			</div>
		<div class="command">
			<a name="about-numericconstants"></a>
				<h4>Numeric Constants</h4>
<p>
			
				There are pre-defined constants for the numbers from 0 to 10.
				You can use these constants to make your scripts look friendly :)
				<br>
				<span class="param">zero, one, two, three, four, five, six, seven, eight, nine, ten</span>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-booleanconstants"></a>
			<a name="about-true"></a>
			<a name="about-false"></a>
			<a name="about-on"></a>
			<a name="about-off"></a>
				<h4>Boolean Constants</h4>
<p>
			
			There are constants are named <span class="param">true</span> and <span class="param">false</span>, and for <span class="param">on</span> and <span class="param">off</span>.
			These are useful for checking and setting the values of tags, and in conditional statements.
			<span class="code">true</span>/<span class="code">on</span> are equal to 1, <span class="code">false</span>/<span class="code">off</span> are equal to 0.
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-directionconstants"></a>
			<a name="about-north"></a>
			<a name="about-south"></a>
			<a name="about-east"></a>
			<a name="about-west"></a>
			<a name="about-up"></a>
			<a name="about-down"></a>
			<a name="about-right"></a>
			<a name="about-left"></a>
				<h4>Direction Constants</h4>
<p>
			
				There are constants for each of the four directions.
				These constants are useful for commands such as <a href="#about-walkhero" class="ref">walk hero</a> and
				<a href="#about-walknpc" class="ref">walk NPC</a>, which take a direction as an argument.
				<br>
				<span class="param">north, south, east, west, up, down, right, left</span>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-me"></a>
				<h4>me</h4>
<p>
			
                        	<span class="code">me</span> is a constant that can be used to refer to the first hero in your caterpillar party
                                (hero zero) in any command that takes a caterpillar party rank as an argument.
                                It is equal to zero.
                                You can't write <span class="code">me</span> where a hero party slot or hero ID is needed!
                                See <a href="http://rpg.hamsterrepublic.com/ohrrpgce/Ways_to_refer_to_a_hero_in_a_script">
				Ways to refer to a hero in a script</a>.
                        
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-none"></a>
				<h4>none</h4>
<p>
			<span class="code">none</span> is a constant that means the same as zero.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-autonumber"></a>
				<h4>autonumber</h4>
<p>
			<span class="code">autonumber</span> is an obsolete constant that is used as the ID number in old-style <b>define script</b> commands. This is not needed anymore. Use <a href="#about-script" class="ref">script</a> instead.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-currentstat"></a>
				<h4>current stat</h4>
<p>
			A constant for use with the <a href="#about-getherostat" class="ref">get hero stat</a>, <a href="#about-setherostat" class="ref">set hero stat</a>, <a href="#about-setcappedherostat" class="ref">set capped hero stat</a> and <a href="#about-getlevelmp" class="ref">get level MP</a> commands.
<br>The current value of a stat is what is normally used. The current value of stats other than HP or MP is usually equal to the maximum value, except due to temporary buffs or debuffs in-battle (which wear off after the end of the battle) or if modified with <a href="#about-setherostat" class="ref">set hero stat</a>. Both maximum and current values of a stat are normally limited to the stat cap.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-maximumstat"></a>
				<h4>maximum stat</h4>
<p>
			A constant for use with the <a href="#about-getherostat" class="ref">get hero stat</a>, <a href="#about-setherostat" class="ref">set hero stat</a>, <a href="#about-setcappedherostat" class="ref">set capped hero stat</a> and <a href="#about-getlevelmp" class="ref">get level MP</a> commands.
<br>The maximum value of a stat is used for limiting it (such as for curing items) and for resetting it, such as on levelup or at an inn (if enabled by the game's general bitsets). See <a href="#about-currentstat" class="ref">current stat</a> for more information. Both maximum and current values of a stat are normally limited to the stat cap.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-basestat"></a>
				<h4>base stat</h4>
<p>
			A constant for use with the <a href="#about-getherostat" class="ref">get hero stat</a>, <a href="#about-setherostat" class="ref">set hero stat</a> and <a href="#about-setcappedherostat" class="ref">set capped hero stat</a> commands.
<br>The base value of a stat is not displayed anywhere in-game, but tracks the value of a hero's stat without their equipment or stat caps taken into account. In other words the base value of a stat can continue to grow as a hero levels even if the current and max values have hit the cap. Hint: you can press F4 in the Status menu to display the base values of each stat in brackets.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-insidebattle"></a>
			<a name="about-outsidebattle"></a>
			<a name="about-heroportrait"></a>
				<h4>inside battle</h4>
			<h4>outside battle</h4>
			<h4>hero portrait</h4>
<p>
			
				A constant used in the <a href="#about-getheropicture" class="ref">get hero picture</a>, <a href="#about-setheropicture" class="ref">set hero picture</a>,
				<a href="#about-getheropalette" class="ref">get hero palette</a>, <a href="#about-setheropalette" class="ref">set hero palette</a>, <a href="#about-resetheropicture" class="ref">reset hero picture</a>
				and <a href="#about-resetheropalette" class="ref">reset hero palette</a> commands:
				<ul>
					<li>
<span class="param">inside battle</span> indicates the hero battle spriteset.</li>
					<li>
<span class="param">outside battle</span> indicates the walkabout spriteset.</li>
					<li>
<span class="param">hero portrait</span> indicates the portrait spriteset.</li>
				</ul>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-colorconstants"></a>
			<a name="about-colorred"></a>
			<a name="about-colorgreen"></a>
			<a name="about-colorblue"></a>
				<h4>Color Constants</h4>
<p>
			
				Constants for each of the three primary colors are used in commands like
				<a href="#about-readcolor" class="ref">read color</a> or <a href="#about-writecolor" class="ref">write color</a>:
				<br>
				<span class="param">color:red, color:green, color:blue</span>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-mouseconstants"></a>
			<a name="about-leftbutton"></a>
			<a name="about-middlebutton"></a>
			<a name="about-rightbutton"></a>
				<h4>Mouse Constants</h4>
<p>
			
				The following constants are for use with the mouse functions such as <a href="#about-mousebutton" class="ref">mouse button</a>.
				<br>
				<span class="param">left button</span>, <span class="param">middle button</span>, <span class="param">right button</span>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-getcount"></a>
				<h4>get count</h4>
<p>
			When passed to <a href="#about-npcatpixel" class="ref">NPC at pixel</a>, <a href="#about-npcatspot" class="ref">NPC at spot</a>, <a href="#about-sliceatpixel" class="ref">slice at pixel</a>, <a href="#about-findcollidingslice" class="ref">find colliding slice</a> or <a href="#about-zoneatspot" class="ref">zone at spot</a> they return the number of NPCs, slices or zones at that spot. With <a href="#about-spellslearned" class="ref">spells learned</a> returns the number of spells a hero learnt. With <a href="#about-findenemyinformation" class="ref">find enemy in formation</a>, returns the number of enemies, or the number of some kind of enemy in the formation.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-wallconstants"></a>
			<a name="about-northwall"></a>
			<a name="about-eastwall"></a>
			<a name="about-westwall"></a>
			<a name="about-southwall"></a>
			<a name="about-vehiclea"></a>
			<a name="about-vehicleb"></a>
			<a name="about-harmtile"></a>
			<a name="about-overheadtile"></a>
				<h4>Wall Bit Constants</h4>
<p>
			
				The following constants are for use with functions like <a href="#about-readpassblock" class="ref">read pass block</a> or <a href="#about-writepassblock" class="ref">write pass block</a>:
				<br>
				<span class="param">north wall, east wall, south wall, west wall, vehicle A, vehicle B, harm tile, overhead tile</span>
			
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-crop"></a>
				<h4>crop</h4>
<p>
			A constant used in <a href="#about-setmapedgemode" class="ref">set map edge mode</a> which makes the edges of the map impassible and prevents the camera from scrolling off them.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-wrap"></a>
				<h4>wrap</h4>
<p>
			A constant used in <a href="#about-setmapedgemode" class="ref">set map edge mode</a> which lets the player walk over the edge of the map around to the opposite side.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-defaulttile"></a>
				<h4>default tile</h4>
<p>
			A constant used in <a href="#about-setmapedgemode" class="ref">set map edge mode</a> which makes the edges of the map impassible and displays a specified tile everywhere off the edge of the map.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-party"></a>
				<h4>party</h4>
<p>
			Pass as first argument to <a href="#about-giveexperience" class="ref">give experience</a> to divide the experience between all the live heroes in the battle (active) party.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-timer:default"></a>
				<h4>timer: default</h4>
<p>
			Pass to <a href="#about-settimer" class="ref">set timer</a> to leave one of the parameters at its default setting. Valid for any parameter except <span class="param">id</span>
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-timer:gameover"></a>
				<h4>timer: game over</h4>
<p>
			Pass to <a href="#about-settimer" class="ref">set timer</a> in the <span class="param">trigger</span> field to have the game end when the timer runs out.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-timerflag:critical"></a>
				<h4>timer flag: critical</h4>
<p>
			Pass to <a href="#about-settimer" class="ref">set timer</a> in the <span class="param">flags</span> field to indicate that if the timer runs out during a battle, it should end the battle immediately.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-timerflag:battle"></a>
				<h4>timer flag: battle</h4>
<p>
			Pass to <a href="#about-settimer" class="ref">set timer</a> in the <span class="param">flags</span> field to indicate that the timer should run during battle. Otherwise, the timer will be paused during battle.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-timerflag:menu"></a>
				<h4>timer flag: menu</h4>
<p>
			Pass to <a href="#about-settimer" class="ref">set timer</a> in the <span class="param">flags</span> field to indicate that the timer should run while the player is in the menu. Otherwise, it will be paused while the player is in the main menu.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-song:silence"></a>
				<h4>song: silence</h4>
<p>
			Used with <a href="#about-setformationsong" class="ref">set formation song</a> and <a href="#about-getformationsong" class="ref">get formation song</a> to indicate an enemy formation without music. Used by <a href="#about-setambientmusic" class="ref">set ambient music</a> and <a href="#about-getambientmusic" class="ref">get ambient music</a> for a silent map.
			
			
			
		</p>
</div>
		<div class="command">
			<a name="about-song:sameaslastmap"></a>
			<a name="about-song:sameasmap"></a>
				<h4>song: same as last map</h4>
			<div class="notetext">Alias:</div>
			<h4>song: same as map</h4>
<p>
			Used with <a href="#about-setformationsong" class="ref">set formation song</a> and <a href="#about-getformationsong" class="ref">get formation song</a> to indicate an enemy formation which uses the same music as the map. Used by <a href="#about-setambientmusic" class="ref">set ambient music</a> and <a href="#about-getambientmusic" class="ref">get ambient music</a> for a map that continues with the last map's music.
			
			
			
		</p>
</div>
		<hr>
		</div>
<p>Stats: There are 911 commands (of which 14 are aliases), 27 constants and 12 definitions of types and other terms in this file.</p>
<p>This file was generated from an XML file. The contents were painstakingly transcribed by Mike Caron from the original Plotscripting Dictionary, which was created by James Paige.</p>
</body>
</html>
